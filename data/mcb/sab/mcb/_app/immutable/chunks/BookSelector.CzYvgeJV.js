import{s as se,r as K,i as I,n as ne,f as y,q as ee,k as E,S as Re,a as M,e as A,g as U,c as q,b as R,m as g,v as V,h as L,y as j,I as Fe,t as W,d as Z,j as $,o as Q,E as P,P as ye}from"./scheduler.B2eiZa_g.js";import{S as ae,i as ce,c as ue,a as fe,m as de,t as he,b as pe,d as _e}from"./index.BNSRDwh8.js";import{D as We,a as Ze,T as $e}from"./TabsMenu.ccIOlKM4.js";import{e as G}from"./each.D6YF6ztN.js";import{s as be,a6 as xe,r as re,y as He,v as X,h as z,I as we,g as et,t as tt,a7 as O,a8 as ot}from"./theme.CEnq8wkH.js";import{b as lt,a as nt}from"./index.QqT5-XEs.js";import{s as it,f as Ce}from"./numeralSystem.bc9fPTup.js";import{b as rt}from"./entry.BaUVQd1j.js";function Se(e,o,t){const l=e.slice();return l[19]=o[t],l}function Ie(e,o,t){const l=e.slice();return l[22]=o[t],l}function Be(e,o,t){const l=e.slice();return l[25]=o[t],l}function Ee(e){let o,t=e[19].header+"",l;return{c(){o=A("div"),l=W(t),this.h()},l(n){o=q(n,"DIV",{class:!0,style:!0});var r=R(o);l=Z(r,t),r.forEach(y),this.h()},h(){g(o,"class","mx-2"),g(o,"style",e[4]),V(o,"my-2",we(e[19].header))},m(n,r){I(n,o,r),L(o,l)},p(n,r){r&1&&t!==(t=n[19].header+"")&&$(l,t),r&16&&g(o,"style",n[4]),r&1&&V(o,"my-2",we(n[19].header))},d(n){n&&y(o)}}}function De(e){let o,t=G(e[19].rows),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ne(Be(e,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();o=K()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);o=K()},m(n,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,r);I(n,o,r)},p(n,r){if(r&2223){t=G(n[19].rows);let i;for(i=0;i<t.length;i+=1){const c=Be(n,t,i);l[i]?l[i].p(c,r):(l[i]=Ne(c),l[i].c(),l[i].m(o.parentNode,o))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(n){n&&y(o),ee(l,n)}}}function Ne(e){let o,t=e[25].label+"",l,n,r,i,c;function a(){return e[16](e[25])}return{c(){o=A("span"),l=W(t),n=M(),this.h()},l(s){o=q(s,"SPAN",{id:!0,class:!0,style:!0,role:!0});var d=R(o);l=Z(d,t),n=U(d),d.forEach(y),this.h()},h(){g(o,"id",r=e[25].id),g(o,"class","dy-btn dy-btn-ghost normal-case truncate text-clip col-start-1 svelte-1x2t4xy"),g(o,"style",e[5]),g(o,"role","button"),V(o,"col-span-5",e[1]==5),V(o,"col-span-6",e[1]==6),Q(o,"background-color",e[2]===e[25].id?e[7]:e[3](e[25].id,"ui.button.chapter-intro"))},m(s,d){I(s,o,d),L(o,l),L(o,n),i||(c=j(o,"click",a),i=!0)},p(s,d){e=s,d&1&&t!==(t=e[25].label+"")&&$(l,t),d&1&&r!==(r=e[25].id)&&g(o,"id",r),d&32&&g(o,"style",e[5]),d&2&&V(o,"col-span-5",e[1]==5),d&2&&V(o,"col-span-6",e[1]==6);const u=d&32;(d&173||u)&&Q(o,"background-color",e[2]===e[25].id?e[7]:e[3](e[25].id,"ui.button.chapter-intro"))},d(s){s&&y(o),i=!1,c()}}}function Oe(e){let o,t=e[22].label+"",l,n,r,i;function c(){return e[17](e[22])}return{c(){o=A("span"),l=W(t),this.h()},l(a){o=q(a,"SPAN",{id:!0,class:!0,style:!0});var s=R(o);l=Z(s,t),s.forEach(y),this.h()},h(){g(o,"id",n=e[22].id),g(o,"class","dy-btn dy-btn-square dy-btn-ghost normal-case truncate text-clip svelte-1x2t4xy"),g(o,"style",e[6]),Q(o,"background-color",e[2]===e[22].id?e[7]:e[3](e[22].id,"ui.button.chapter-intro"))},m(a,s){I(a,o,s),L(o,l),r||(i=j(o,"click",c),r=!0)},p(a,s){e=a,s&1&&t!==(t=e[22].label+"")&&$(l,t),s&1&&n!==(n=e[22].id)&&g(o,"id",n),s&64&&g(o,"style",e[6]);const d=s&64;(s&205||d)&&Q(o,"background-color",e[2]===e[22].id?e[7]:e[3](e[22].id,"ui.button.chapter-intro"))},d(a){a&&y(o),r=!1,i()}}}function je(e){let o,t,l,n,r,i,c,a=e[19].header&&Ee(e),s=e[19].rows&&De(e),d=G(e[19].cells),u=[];for(let h=0;h<d.length;h+=1)u[h]=Oe(Ie(e,d,h));return{c(){a&&a.c(),o=M(),t=A("div"),s&&s.c(),l=M();for(let h=0;h<u.length;h+=1)u[h].c();n=M(),this.h()},l(h){a&&a.l(h),o=U(h),t=q(h,"DIV",{class:!0,role:!0});var v=R(t);s&&s.l(v),l=U(v);for(let p=0;p<u.length;p+=1)u[p].l(v);n=U(v),v.forEach(y),this.h()},h(){g(t,"class",r="grid grid-cols-"+e[1]+" gap-1"),g(t,"role","menu"),V(t,"grid-cols-5",e[1]==5),V(t,"grid-cols-6",e[1]==6)},m(h,v){a&&a.m(h,v),I(h,o,v),I(h,t,v),s&&s.m(t,null),L(t,l);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(t,null);L(t,n),i||(c=[j(t,"touchstart",e[8]),j(t,"touchmove",e[10]),j(t,"touchend",e[9],{passive:!0}),j(t,"mouseover",e[8]),j(t,"mouseout",e[9])],i=!0)},p(h,v){if(h[19].header?a?a.p(h,v):(a=Ee(h),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null),h[19].rows?s?s.p(h,v):(s=De(h),s.c(),s.m(t,l)):s&&(s.d(1),s=null),v&2253){d=G(h[19].cells);let p;for(p=0;p<d.length;p+=1){const D=Ie(h,d,p);u[p]?u[p].p(D,v):(u[p]=Oe(D),u[p].c(),u[p].m(t,n))}for(;p<u.length;p+=1)u[p].d(1);u.length=d.length}v&2&&r!==(r="grid grid-cols-"+h[1]+" gap-1")&&g(t,"class",r),v&2&&V(t,"grid-cols-5",h[1]==5),v&2&&V(t,"grid-cols-6",h[1]==6)},d(h){h&&(y(o),y(t)),a&&a.d(h),s&&s.d(),ee(u,h),i=!1,Fe(c)}}}function st(e){let o,t=G(e[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=je(Se(e,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();o=K()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);o=K()},m(n,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,r);I(n,o,r)},p(n,[r]){if(r&4095){t=G(n[0]);let i;for(i=0;i<t.length;i+=1){const c=Se(n,t,i);l[i]?l[i].p(c,r):(l[i]=je(c),l[i].c(),l[i].m(o.parentNode,o))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},i:ne,o:ne,d(n){n&&y(o),ee(l,n)}}}function at(e,o,t){let l,n,r,i,c,a,s,d,u;E(e,be,_=>t(12,a=_)),E(e,xe,_=>t(13,s=_)),E(e,re,_=>t(14,d=_)),E(e,He,_=>t(15,u=_));let{options:h=[]}=o,{cols:v=6}=o,p=null;function D(_){t(2,p=_.target.id)}function m(){t(2,p=null)}function S(_){const C=_.touches[0],T=document.elementFromPoint(C.clientX,C.clientY),Y=T.getBoundingClientRect();C.clientX>=Y.left&&C.clientX<=Y.right&&C.clientY>=Y.top&&C.clientY<=Y.bottom?t(2,p=T.id):t(2,p=null)}const b=Re();function F(_){const C=_.id,T=_==null?void 0:_.url;b("menuaction",{text:C,url:T})}const te=_=>F(_),x=_=>F(_);return e.$$set=_=>{"options"in _&&t(0,h=_.options),"cols"in _&&t(1,v=_.cols)},e.$$.update=()=>{e.$$.dirty&32768&&t(7,l=u.ButtonSelectedColor),e.$$.dirty&4096&&t(6,n=X(Object.fromEntries(Object.entries(a["ui.button.book-grid"]).filter(([_])=>_!="background-color")))),e.$$.dirty&4096&&t(5,r=X(Object.fromEntries(Object.entries(a["ui.button.chapter-intro"]).filter(([_])=>_!="background-color")))),e.$$.dirty&4096&&t(4,i=X(a["ui.text.book-group-title"])),e.$$.dirty&28672&&t(3,c=(_,C)=>{var oe;const T=(oe=z.bookCollections.find(H=>H.id===d.collection).books.find(H=>H.id===_))==null?void 0:oe.section;return Object.keys(s).includes(T)?s[T]:a[C]["background-color"]})},[h,v,p,c,i,r,n,l,D,m,S,F,a,s,d,u,te,x]}class J extends ae{constructor(o){super(),ce(this,o,at,st,se,{options:0,cols:1})}}function Ve(e,o,t){const l=e.slice();return l[13]=o[t],l}function Le(e,o,t){const l=e.slice();return l[16]=o[t],l}function Ge(e){let o,t=e[13].header+"",l,n;return{c(){o=A("div"),l=W(t),this.h()},l(r){o=q(r,"DIV",{class:!0,style:!0});var i=R(o);l=Z(i,t),i.forEach(y),this.h()},h(){g(o,"class","flex items-center"),g(o,"style",n=X(e[1]["ui.text.book-group-title"]))},m(r,i){I(r,o,i),L(o,l)},p(r,i){i&1&&t!==(t=r[13].header+"")&&$(l,t),i&2&&n!==(n=X(r[1]["ui.text.book-group-title"]))&&g(o,"style",n)},d(r){r&&y(o)}}}function Te(e){let o,t=e[16].label+"",l,n,r,i;function c(){return e[11](e[16])}return{c(){o=A("div"),l=W(t),this.h()},l(a){o=q(a,"DIV",{id:!0,class:!0,style:!0,role:!0});var s=R(o);l=Z(s,t),s.forEach(y),this.h()},h(){g(o,"id",n=e[16].id),g(o,"class","menu ps-2 cursor-pointer min-w-[16rem] flex-grow flex items-center"),g(o,"style",e[3]),g(o,"role","button"),Q(o,"background-color",e[2]==e[16].id?e[5]:e[4])},m(a,s){I(a,o,s),L(o,l),r||(i=j(o,"click",c),r=!0)},p(a,s){e=a,s&1&&t!==(t=e[16].label+"")&&$(l,t),s&1&&n!==(n=e[16].id)&&g(o,"id",n),s&8&&g(o,"style",e[3]);const d=s&8;(s&61||d)&&Q(o,"background-color",e[2]==e[16].id?e[5]:e[4])},d(a){a&&y(o),r=!1,i()}}}function Ae(e){let o,t,l,n,r,i=e[13].header&&Ge(e),c=G(e[13].cells),a=[];for(let s=0;s<c.length;s+=1)a[s]=Te(Le(e,c,s));return{c(){i&&i.c(),o=M(),t=A("div");for(let s=0;s<a.length;s+=1)a[s].c();l=M(),this.h()},l(s){i&&i.l(s),o=U(s),t=q(s,"DIV",{class:!0});var d=R(t);for(let u=0;u<a.length;u+=1)a[u].l(d);l=U(d),d.forEach(y),this.h()},h(){g(t,"class","flex flex-wrap")},m(s,d){i&&i.m(s,d),I(s,o,d),I(s,t,d);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null);L(t,l),n||(r=[j(t,"mouseover",e[7]),j(t,"mouseout",e[8])],n=!0)},p(s,d){if(s[13].header?i?i.p(s,d):(i=Ge(s),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null),d&125){c=G(s[13].cells);let u;for(u=0;u<c.length;u+=1){const h=Le(s,c,u);a[u]?a[u].p(h,d):(a[u]=Te(h),a[u].c(),a[u].m(t,l))}for(;u<a.length;u+=1)a[u].d(1);a.length=c.length}},d(s){s&&(y(o),y(t)),i&&i.d(s),ee(a,s),n=!1,Fe(r)}}}function ct(e){let o,t=G(e[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ae(Ve(e,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();o=K()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);o=K()},m(n,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,r);I(n,o,r)},p(n,[r]){if(r&511){t=G(n[0]);let i;for(i=0;i<t.length;i+=1){const c=Ve(n,t,i);l[i]?l[i].p(c,r):(l[i]=Ae(c),l[i].c(),l[i].m(o.parentNode,o))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},i:ne,o:ne,d(n){n&&y(o),ee(l,n)}}}function ut(e,o,t){let l,n,r,i,c,a;E(e,be,m=>t(1,i=m)),E(e,He,m=>t(9,c=m)),E(e,et,m=>t(10,a=m));let{options:s=[]}=o;const d=Re();function u(m){const S=m.id,b=m==null?void 0:m.url;d("menuaction",{text:S,url:b})}let h=null;function v(m){console.log("hovered:",m.target.id),t(2,h=m.target.id)}function p(){t(2,h=null)}const D=m=>u(m);return e.$$set=m=>{"options"in m&&t(0,s=m.options)},e.$$.update=()=>{e.$$.dirty&1536&&t(5,l=a==="Dark"?"#444444":c.ButtonSelectedColor),e.$$.dirty&2&&t(4,n=i["ui.button.book-list"]["background-color"]),e.$$.dirty&2&&t(3,r=X(i["ui.button.book-list"]))},[s,i,h,r,n,l,u,v,p,c,a,D]}class qe extends ae{constructor(o){super(),ce(this,o,ut,ct,se,{options:0})}}function ft(e){let o,t,l,n,r,i;return r=new Ze({props:{color:"white"}}),{c(){o=A("div"),t=W(e[9]),n=M(),ue(r.$$.fragment),this.h()},l(c){o=q(c,"DIV",{class:!0,style:!0});var a=R(o);t=Z(a,e[9]),a.forEach(y),n=U(c),fe(r.$$.fragment,c),this.h()},h(){g(o,"class","normal-case whitespace-nowrap"),g(o,"style",l=X(e[11]["ui.selector.book"]))},m(c,a){I(c,o,a),L(o,t),I(c,n,a),de(r,c,a),i=!0},p(c,a){(!i||a[0]&512)&&$(t,c[9]),(!i||a[0]&2048&&l!==(l=X(c[11]["ui.selector.book"])))&&g(o,"style",l)},i(c){i||(he(r.$$.fragment,c),i=!0)},o(c){pe(r.$$.fragment,c),i=!1},d(c){c&&(y(o),y(n)),_e(r,c)}}}function dt(e){let o,t,l,n={options:{[e[5]]:{component:e[10]?qe:J,props:{options:e[15]({colId:e[2].collection,bookLabel:e[10]?"name":"abbreviation"})},visible:!0},[e[7]]:{component:J,props:{options:e[16](e[0])},visible:e[12]},[e[6]]:{component:J,props:{options:e[17](e[1])},visible:e[12]&&e[8]}}};return t=new $e({props:n}),e[24](t),t.$on("menuaction",e[13]),{c(){o=A("div"),ue(t.$$.fragment)},l(r){o=q(r,"DIV",{});var i=R(o);fe(t.$$.fragment,i),i.forEach(y)},m(r,i){I(r,o,i),de(t,o,null),l=!0},p(r,i){const c={};i[0]&1511&&(c.options={[r[5]]:{component:r[10]?qe:J,props:{options:r[15]({colId:r[2].collection,bookLabel:r[10]?"name":"abbreviation"})},visible:!0},[r[7]]:{component:J,props:{options:r[16](r[0])},visible:r[12]},[r[6]]:{component:J,props:{options:r[17](r[1])},visible:r[12]&&r[8]}}),t.$set(c)},i(r){l||(he(t.$$.fragment,r),l=!0)},o(r){pe(t.$$.fragment,r),l=!1},d(r){r&&y(o),e[24](null),_e(t)}}}function ht(e){let o,t,l={$$slots:{content:[dt],label:[ft]},$$scope:{ctx:e}};return o=new We({props:l}),e[25](o),o.$on("nav-end",e[14]),{c(){ue(o.$$.fragment)},l(n){fe(o.$$.fragment,n)},m(n,r){de(o,n,r),t=!0},p(n,r){const i={};r[0]&4079|r[1]&16&&(i.$$scope={dirty:r,ctx:n}),o.$set(i)},i(n){t||(he(o.$$.fragment,n),t=!0)},o(n){pe(o.$$.fragment,n),t=!1},d(n){e[25](null),_e(o,n)}}}function pt(e,o,t){let l,n,r,i,c,a,s,d,u,h,v,p,D,m,S,b,F,te;E(e,tt,f=>t(21,m=f)),E(e,re,f=>t(2,S=f)),E(e,O,f=>t(22,b=f)),E(e,ot,f=>t(23,F=f)),E(e,be,f=>t(11,te=f));let{displayLabel:x=void 0}=o;const _=z.mainFeatures["show-chapter-selector-after-book"];let C;function T(f){return Object.keys(p.find(k=>k.bookCode===f).versesByChapters).length}function Y(f,w){return!f||f==="i"||!w||Object.keys(w).length===0?0:Object.keys(w[f]).length}async function oe(f){var w;if(f.detail.tab===d&&((w=f.detail)!=null&&w.url)){lt({collection:S.collection,book:f.detail.text,url:f.detail.url});return}if(!_)P(O,b.book=f.detail.text,b),await re.set({book:b.book,chapter:1}),me();else switch(f.detail.tab){case d:{C.setActive(u),P(O,b.book=f.detail.text,b);const k=T(b.book);k===0&&(P(O,b.chapter="i",b),await le()),P(O,b.chapter="1",b),k===1&&await le();break}case u:P(O,b.chapter=f.detail.text,b),!s||b.chapter==="i"||r===0?await le():C.setActive(h);break;case h:f.detail.text==="i"?(P(O,b.chapter="i",b),P(O,b.verse="",b)):P(O,b.verse=f.detail.text,b),await le();break;default:console.log("Book navigateReference: Default");break}}let H;function me(){H.close()}async function le(){await nt({collection:S.collection,book:b.book,chapter:b.chapter,verse:b.verse}),me()}function Pe(){C&&C.setActive(d),O.reset()}function Xe(f){let w;return f.type==="quiz"&&(w=`${rt}/quiz/${S.collection}/${f.id}`),w}function Ye(f){return f==="i"?m.Chapter_Introduction_Symbol:c[Number(f)]!==void 0?c[Number(f)]:Ce(i,f)}let ze=({colId:f,bookLabel:w="abbreviation"})=>{let k=[];var B=null;return z.bookCollections.find(N=>N.id===f).books.forEach(N=>{const ge=Xe(N);if(S.allBookIds.find(ke=>ke===N.id)||ge){let ie={label:N[w]||N.name,id:N.id,url:ge},ve=N.testament||"";if((B==null||ve!==B)&&z.mainFeatures["book-group-titles"])k.push({header:N.testament?m["Book_Group_"+N.testament]:B==null?"":"Â ",cells:[ie]}),B=ve;else if(k.length>0){let Qe=k.at(-1).cells;k.at(-1).cells=[...Qe,ie]}else k.push({cells:[ie]})}}),k},Me=f=>{var k;return[{rows:((k=p.find(B=>B.bookCode===l))==null?void 0:k.hasIntroduction)?[{label:m.Chapter_Introduction_Title,id:"i"}]:null,cells:Object.keys(f).map(B=>({label:Ye(B),id:B}))}]},Ue=f=>{let w,k=D[f];return f==="i"?w=[{cells:[{label:m.Chapter_Introduction_Symbol,id:"i"}]}]:r===0?w=[]:w=[{cells:Object.keys(k).map(B=>({label:Ce(i,B),id:B}))}],w};function Je(f){ye[f?"unshift":"push"](()=>{C=f,t(3,C)})}function Ke(f){ye[f?"unshift":"push"](()=>{H=f,t(4,H)})}return e.$$set=f=>{"displayLabel"in f&&t(18,x=f.displayLabel)},e.$$.update=()=>{var f,w;e.$$.dirty[0]&4194308&&t(19,l=b.book===""?S.book:b.book),e.$$.dirty[0]&4194308&&t(1,n=b.chapter===""?S.chapter:b.chapter),e.$$.dirty[0]&4&&t(20,p=S.catalog.documents),e.$$.dirty[0]&1572864&&t(0,D=((f=p.find(k=>k.bookCode===l))==null?void 0:f.versesByChapters)??[]),e.$$.dirty[0]&3&&(r=Y(n,D)),e.$$.dirty[0]&524292&&(i=it(z,S.collection,l)),e.$$.dirty[0]&524292&&(c=z.bookCollections.find(k=>S.collection===k.id).books.find(k=>l===k.id).chaptersLabels??{}),e.$$.dirty[0]&8388608&&t(10,a=F["book-selection"]==="list"),e.$$.dirty[0]&8388608&&t(8,s=F["verse-selection"]),e.$$.dirty[0]&2097152&&t(5,d=m.Selector_Book),e.$$.dirty[0]&2097152&&t(7,u=m.Selector_Chapter),e.$$.dirty[0]&2097152&&t(6,h=m.Selector_Verse),e.$$.dirty[0]&786436&&t(9,v=x??((w=z.bookCollections.find(k=>k.id===S.collection).books.find(k=>k.id===l))==null?void 0:w.name))},[D,n,S,C,H,d,h,u,s,v,a,te,_,oe,Pe,ze,Me,Ue,x,l,p,m,b,F,Je,Ke]}class Ct extends ae{constructor(o){super(),ce(this,o,pt,ht,se,{displayLabel:18},null,[-1,-1])}}export{Ct as B,J as S};
