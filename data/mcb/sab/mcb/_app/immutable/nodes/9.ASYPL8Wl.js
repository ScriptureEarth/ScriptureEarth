import{C as W,h as X,t as Y,p as Z,D as x,E as ee,A as te,F as ne,r as oe}from"../chunks/theme.CEnq8wkH.js";import{s as ae,e as $,a as R,c as v,b as k,f as m,g as j,m as g,o as M,i as S,h as A,k as O,t as V,d as C,j as T,G as U,y as re,r as F,q as se,n as B}from"../chunks/scheduler.B2eiZa_g.js";import{S as le,i as ie,c as E,a as y,m as D,b as N,e as H,t as b,d as I,g as J}from"../chunks/index.BNSRDwh8.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{g as K,a as Q}from"../chunks/spread.CgU5AtxT.js";import{I as ce}from"../chunks/IconCard.BvRfaGgR.js";import{S as _e,s as fe,a as q,b as ue,c as me,t as z}from"../chunks/annotation-share.CaKzZwZM.js";import{N as de}from"../chunks/NoteIcon.DWBo142O.js";import{S as he}from"../chunks/ShareIcon.7CKEpOwI.js";import{N as pe}from"../chunks/Navbar.CLDGmXiL.js";import{f as ge}from"../chunks/dateUtils.Dj5s27ic.js";import{p as be}from"../chunks/stores.B9aCZ1Xs.js";import{g as $e,b as ve}from"../chunks/entry.BaUVQd1j.js";async function ke({depends:i}){const a=(await W()).filter(e=>X.bookCollections.some(o=>o.id===e.collection));return i("notes"),console.log("Notes",a),{notes:a}}const Pe=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"}));function P(i,n,a){const e=i.slice();e[11]=n[a];const o={docSet:e[11].docSet,collection:e[11].collection,book:e[11].book,chapter:e[11].chapter,verse:e[11].verse,reference:e[11].reference,text:e[11].text,date:ge(new Date(e[11].date)),actions:[e[1].Annotation_Menu_View,e[1].Annotation_Menu_Edit,e[1].Annotation_Menu_Share,e[1].Annotation_Menu_Delete]};return e[12]=o,e}function Ae(i){let n,a,e=i[1].Annotation_Notes+"",o;return{c(){n=$("label"),a=$("div"),o=V(e),this.h()},l(s){n=v(s,"LABEL",{for:!0,slot:!0});var t=k(n);a=v(t,"DIV",{class:!0});var r=k(a);o=C(r,e),r.forEach(m),t.forEach(m),this.h()},h(){g(a,"class","btn btn-ghost normal-case text-xl"),g(n,"for","sidebar"),g(n,"slot","center")},m(s,t){S(s,n,t),A(n,a),A(a,o)},p(s,t){t&2&&e!==(e=s[1].Annotation_Notes+"")&&T(o,e)},d(s){s&&m(n)}}}function Ne(i){let n,a,e,o,s,t,r,l;e=new he({props:{color:"white"}});const u=[i[7]];let d={};for(let _=0;_<u.length;_+=1)d=U(d,u[_]);return s=new _e({props:d}),s.$on("menuaction",i[9]),{c(){n=$("div"),a=$("button"),E(e.$$.fragment),o=R(),E(s.$$.fragment),this.h()},l(_){n=v(_,"DIV",{slot:!0});var h=k(n);a=v(h,"BUTTON",{class:!0});var f=k(a);y(e.$$.fragment,f),f.forEach(m),o=j(h),y(s.$$.fragment,h),h.forEach(m),this.h()},h(){g(a,"class","dy-btn dy-btn-ghost dy-btn-circle"),g(n,"slot","right-buttons")},m(_,h){S(_,n,h),A(n,a),D(e,a,null),A(n,o),D(s,n,null),t=!0,r||(l=re(a,"click",i[8]),r=!0)},p(_,h){const f=h&128?K(u,[Q(_[7])]):{};s.$set(f)},i(_){t||(b(e.$$.fragment,_),b(s.$$.fragment,_),t=!0)},o(_){N(e.$$.fragment,_),N(s.$$.fragment,_),t=!1},d(_){_&&m(n),I(e),I(s),r=!1,l()}}}function Se(i){let n,a,e=L(z(i[2].data.notes,i[0])),o=[];for(let t=0;t<e.length;t+=1)o[t]=G(P(i,e,t));const s=t=>N(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=F()},l(t){for(let r=0;r<o.length;r+=1)o[r].l(t);n=F()},m(t,r){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,r);S(t,n,r),a=!0},p(t,r){if(r&55){e=L(z(t[2].data.notes,t[0]));let l;for(l=0;l<e.length;l+=1){const u=P(t,e,l);o[l]?(o[l].p(u,r),b(o[l],1)):(o[l]=G(u),o[l].c(),b(o[l],1),o[l].m(n.parentNode,n))}for(J(),l=e.length;l<o.length;l+=1)s(l);H()}},i(t){if(!a){for(let r=0;r<e.length;r+=1)b(o[r]);a=!0}},o(t){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);a=!1},d(t){t&&m(n),se(o,t)}}}function we(i){let n,a=i[1].Annotation_Notes_None+"",e,o,s,t=i[1].Annotation_Notes_None_Info+"",r;return{c(){n=$("div"),e=V(a),o=R(),s=$("div"),r=V(t),this.h()},l(l){n=v(l,"DIV",{class:!0});var u=k(n);e=C(u,a),u.forEach(m),o=j(l),s=v(l,"DIV",{class:!0});var d=k(s);r=C(d,t),d.forEach(m),this.h()},h(){g(n,"class","annotation-message-none"),g(s,"class","annotation-message-none-info")},m(l,u){S(l,n,u),A(n,e),S(l,o,u),S(l,s,u),A(s,r)},p(l,u){u&2&&a!==(a=l[1].Annotation_Notes_None+"")&&T(e,a),u&2&&t!==(t=l[1].Annotation_Notes_None_Info+"")&&T(r,t)},i:B,o:B,d(l){l&&(m(n),m(o),m(s))}}}function Ee(i){let n,a;return n=new de({props:{slot:"icon",color:i[4]}}),{c(){E(n.$$.fragment)},l(e){y(n.$$.fragment,e)},m(e,o){D(n,e,o),a=!0},p(e,o){const s={};o&16&&(s.color=e[4]),n.$set(s)},i(e){a||(b(n.$$.fragment,e),a=!0)},o(e){N(n.$$.fragment,e),a=!1},d(e){I(n,e)}}}function G(i){let n,a;const e=[i[12]];function o(...t){return i[10](i[11],...t)}let s={$$slots:{icon:[Ee]},$$scope:{ctx:i}};for(let t=0;t<e.length;t+=1)s=U(s,e[t]);return n=new ce({props:s}),n.$on("menuaction",o),{c(){E(n.$$.fragment)},l(t){y(n.$$.fragment,t)},m(t,r){D(n,t,r),a=!0},p(t,r){i=t;const l=r&7?K(e,[Q(i[12])]):{};r&32784&&(l.$$scope={dirty:r,ctx:i}),n.$set(l)},i(t){a||(b(n.$$.fragment,t),a=!0)},o(t){N(n.$$.fragment,t),a=!1},d(t){I(n,t)}}}function ye(i){let n,a,e,o,s,t,r,l=`${i[3]}px`,u;e=new pe({props:{$$slots:{"right-buttons":[Ne],center:[Ae]},$$scope:{ctx:i}}});const d=[we,Se],_=[];function h(f,c){return f[2].data.notes.length===0?0:1}return t=h(i),r=_[t]=d[t](i),{c(){n=$("div"),a=$("div"),E(e.$$.fragment),o=R(),s=$("div"),r.c(),this.h()},l(f){n=v(f,"DIV",{class:!0,style:!0});var c=k(n);a=v(c,"DIV",{class:!0});var p=k(a);y(e.$$.fragment,p),p.forEach(m),o=j(c),s=v(c,"DIV",{class:!0});var w=k(s);r.l(w),w.forEach(m),c.forEach(m),this.h()},h(){g(a,"class","navbar"),g(s,"class","overflow-y-auto p-2.5 max-w-screen-md mx-auto w-full"),M(s,"font-size",l),g(n,"class","grid grid-rows-[auto,1fr]"),M(n,"height","100vh"),M(n,"height","100dvh")},m(f,c){S(f,n,c),A(n,a),D(e,a,null),A(n,o),A(n,s),_[t].m(s,null),u=!0},p(f,[c]){const p={};c&32775&&(p.$$scope={dirty:c,ctx:f}),e.$set(p);let w=t;t=h(f),t===w?_[t].p(f,c):(J(),N(_[w],1,1,()=>{_[w]=null}),H(),r=_[t],r?r.p(f,c):(r=_[t]=d[t](f),r.c()),b(r,1),r.m(s,null)),c&8&&l!==(l=`${f[3]}px`)&&M(s,"font-size",l)},i(f){u||(b(e.$$.fragment,f),b(r),u=!0)},o(f){N(e.$$.fragment,f),N(r),u=!1},d(f){f&&m(n),I(e),_[t].d()}}}function De(i,n,a){let e,o,s,t;O(i,Y,c=>a(1,e=c)),O(i,be,c=>a(2,o=c)),O(i,Z,c=>a(3,s=c)),O(i,x,c=>a(4,t=c));async function r(c,p){switch(c.detail.text){case e.Annotation_Menu_View:oe.set(p),$e(`${ve}/`);break;case e.Annotation_Menu_Edit:te.open(ne,p);break;case e.Annotation_Menu_Share:await fe(p);break;case e.Annotation_Menu_Delete:await ee(p.date);break}}function l(c){switch(c.detail.text){case e.Annotation_Sort_Order_Reference:a(0,d=ue);break;case e.Annotation_Sort_Order_Date:a(0,d=q);break}}const u={actions:[e.Annotation_Sort_Order_Reference,e.Annotation_Sort_Order_Date]};let d=q;return[d,e,o,s,t,r,l,u,async()=>await me(z(o.data.notes,d)),c=>l(c),(c,p)=>r(p,c)]}class Ge extends le{constructor(n){super(),ie(this,n,De,ye,ae,{})}}export{Ge as component,Pe as universal};
