import{aw as QE,s as rn,f as un,t as nn,r as Lu,X as Sa,W as kc,h as Se,v as Jt,a7 as rr,a8 as lm,ax as dt,y as Kn,T as dm,ay as XE,az as eC,ah as bn,aA as uC,aB as tC,l as rC,aC as nC,H as aC,G as oC,aD as sC,N as $a,I as iC,A as Ar,F as fm,R as cC,ap as Mu,m as Zn,g as DC,aE as lC,aF as dC,q as fC,aG as pC,aH as FC,aI as wa,x as tD,k as mC,Y as hC,ak as EC,ae as CC,p as rD,aJ as AC,aK as vC,aL as yC,aM as gC,e as bC,aa as BC,a9 as _C,j as SC,M as ka,B as $C}from"../chunks/theme.CEnq8wkH.js";import{s as Uu,A as rt,B as nt,b as le,f as j,m as q,i as be,h as X,n as iu,k as ke,e as fe,t as Tu,a as Te,c as pe,d as Pu,g as Pe,y as Ge,j as vt,I as an,E as pt,o as we,Q as Yn,r as Gu,P as br,q as wC,H as fc,F as pc,ab as kC,v as Br,D as pm,O as Fm,T as Fc,ac as qC,aa as TC,S as PC,G as qc,ad as nD,X as OC}from"../chunks/scheduler.B2eiZa_g.js";import{S as Vu,i as zu,c as Re,a as We,m as Ne,t as se,b as me,d as Me,g as Au,e as vu}from"../chunks/index.BNSRDwh8.js";import{g as Tc,a as Pc}from"../chunks/spread.CgU5AtxT.js";import{A as Su}from"../chunks/index.4IN-9o6T.js";import{M as IC,I as jC,H as xC,B as RC}from"../chunks/index.BgGNRcD2.js";import{u as NC,f as Bn,s as MC,c as aD,d as oD,p as UC,a as VC,h as zC,e as Oc,g as WC,i as sD,j as qa,k as LC}from"../chunks/index.QqT5-XEs.js";import{S as _n,B as GC}from"../chunks/BookSelector.CzYvgeJV.js";import{D as HC,a as JC,T as KC}from"../chunks/TabsMenu.ccIOlKM4.js";import{s as mm,f as Jr,g as Kr,a as Er}from"../chunks/numeralSystem.bc9fPTup.js";import{S as ZC}from"../chunks/SearchIcon.BOkCasFG.js";import{T as YC}from"../chunks/TextAppearanceIcon.BU1t6h4r.js";import{e as iD}from"../chunks/each.D6YF6ztN.js";import{h as hm,i as QC,b as Ta,g as cD,a as XC}from"../chunks/scripture-reference-utils-common.Nfh1YHNy.js";import{N as eA}from"../chunks/Navbar.CLDGmXiL.js";import{c as uA}from"../chunks/contents.EgJd3ViG.js";import{c as Pa,b as tt,g as mc}from"../chunks/entry.BaUVQd1j.js";import{a as tA,c as rA,d as nA,b as aA}from"../chunks/planProgressItems.DkBrCZkP.js";import{B as oA}from"../chunks/BookmarkIcon.2EiWal6y.js";import{N as sA}from"../chunks/NoteIcon.DWBo142O.js";import{S as iA}from"../chunks/ShareIcon.7CKEpOwI.js";import{s as cA}from"../chunks/share.ves1yLU4.js";import{g as DA,d as lA}from"../chunks/analytics.D282VuiN.js";import{p as dA}from"../chunks/stores.B9aCZ1Xs.js";import{B as fA}from"../chunks/BottomNavigationBar.BKMweGyX.js";var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pA(u){let e,t;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(r){e=nt(r,"svg",{fill:!0,xmlns:!0,height:!0,width:!0});var n=le(e);t=nt(n,"path",{d:!0}),le(t).forEach(j),n.forEach(j),this.h()},h(){q(t,"d","M5 21V5q0-.825.588-1.413Q6.175 3 7 3h10q.825 0 1.413.587Q19 4.175 19 5v16l-7-3Zm2-3.05 5-2.15 5 2.15V5H7ZM7 5h10-5Z"),q(e,"fill",u[0]),q(e,"xmlns","http://www.w3.org/2000/svg"),q(e,"height","24"),q(e,"width","24")},m(r,n){be(r,e,n),X(e,t)},p(r,[n]){n&1&&q(e,"fill",r[0])},i:iu,o:iu,d(r){r&&j(e)}}}function FA(u,e,t){let{color:r="black"}=e;return u.$$set=n=>{"color"in n&&t(0,r=n.color)},[r]}class mA extends Vu{constructor(e){super(),zu(this,e,FA,pA,Uu,{color:0})}}function hA(u){let e,t,r,n;return{c(){e=rt("svg"),t=rt("g"),r=rt("path"),this.h()},l(a){e=nt(a,"svg",{fill:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var o=le(e);t=nt(o,"g",{transform:!0});var s=le(t);r=nt(s,"path",{d:!0}),le(r).forEach(j),s.forEach(j),o.forEach(j),this.h()},h(){q(r,"d","M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z"),q(t,"transform",n="rotate("+u[2]+" 12 12)"),q(e,"fill",u[0]),q(e,"xmlns","http://www.w3.org/2000/svg"),q(e,"width",u[1]),q(e,"height",u[1]),q(e,"viewBox","0 0 24 24")},m(a,o){be(a,e,o),X(e,t),X(t,r)},p(a,[o]){o&4&&n!==(n="rotate("+a[2]+" 12 12)")&&q(t,"transform",n),o&1&&q(e,"fill",a[0]),o&2&&q(e,"width",a[1]),o&2&&q(e,"height",a[1])},i:iu,o:iu,d(a){a&&j(e)}}}function EA(u,e,t){let{color:r="black"}=e,{size:n=24}=e,{deg:a=0}=e;return u.$$set=o=>{"color"in o&&t(0,r=o.color),"size"in o&&t(1,n=o.size),"deg"in o&&t(2,a=o.deg)},[r,n,a]}class DD extends Vu{constructor(e){super(),zu(this,e,EA,hA,Uu,{color:0,size:1,deg:2})}}function CA(u){let e,t;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(r){e=nt(r,"svg",{fill:!0,xmlns:!0,height:!0,width:!0});var n=le(e);t=nt(n,"path",{d:!0}),le(t).forEach(j),n.forEach(j),this.h()},h(){q(t,"d","M 5,2 Q 4.175,2 3.587,2.587 3,3.175 3,4 V 18 H 5 V 4 H 16 V 2 Z M 9,6 Q 8.175,6 7.588,6.587 7,7.175 7,8 V 20 Q 7,20.825 7.588,21.413 8.175,22 9,22 h 9 q 0.825,0 1.413,-0.587 Q 20,20.825 20,20 V 8 Q 20,7.175 19.413,6.587 18.825,6 18,6 Z m 0,2 h 9 V 20 H 9 Z m 0,0 v 12 z"),q(e,"fill",u[0]),q(e,"xmlns","http://www.w3.org/2000/svg"),q(e,"height","24"),q(e,"width","24")},m(r,n){be(r,e,n),X(e,t)},p(r,[n]){n&1&&q(e,"fill",r[0])},i:iu,o:iu,d(r){r&&j(e)}}}function AA(u,e,t){let{color:r="black"}=e;return u.$$set=n=>{"color"in n&&t(0,r=n.color)},[r]}class vA extends Vu{constructor(e){super(),zu(this,e,AA,CA,Uu,{color:0})}}function yA(u){let e,t,r,n;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(a){e=nt(a,"svg",{fill:!0,xmlns:!0,height:!0,viewBox:!0,width:!0});var o=le(e);t=nt(o,"path",{d:!0}),le(t).forEach(j),o.forEach(j),this.h()},h(){q(t,"d","M560-280 360-480l200-200v400Z"),q(e,"fill",u[1]),q(e,"xmlns","http://www.w3.org/2000/svg"),q(e,"height",r=24*u[0]),q(e,"viewBox","0 -960 960 960"),q(e,"width",n=24*u[0])},m(a,o){be(a,e,o),X(e,t)},p(a,[o]){o&2&&q(e,"fill",a[1]),o&1&&r!==(r=24*a[0])&&q(e,"height",r),o&1&&n!==(n=24*a[0])&&q(e,"width",n)},i:iu,o:iu,d(a){a&&j(e)}}}function gA(u,e,t){let{scale:r=1}=e,{color:n="black"}=e;return u.$$set=a=>{"scale"in a&&t(0,r=a.scale),"color"in a&&t(1,n=a.color)},[r,n]}class bA extends Vu{constructor(e){super(),zu(this,e,gA,yA,Uu,{scale:0,color:1})}}function BA(u){let e,t,r,n;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(a){e=nt(a,"svg",{fill:!0,xmlns:!0,height:!0,viewBox:!0,width:!0});var o=le(e);t=nt(o,"path",{d:!0}),le(t).forEach(j),o.forEach(j),this.h()},h(){q(t,"d","M400-280v-400l200 200-200 200Z"),q(e,"fill",u[1]),q(e,"xmlns","http://www.w3.org/2000/svg"),q(e,"height",r=24*u[0]),q(e,"viewBox","0 -960 960 960"),q(e,"width",n=24*u[0])},m(a,o){be(a,e,o),X(e,t)},p(a,[o]){o&2&&q(e,"fill",a[1]),o&1&&r!==(r=24*a[0])&&q(e,"height",r),o&1&&n!==(n=24*a[0])&&q(e,"width",n)},i:iu,o:iu,d(a){a&&j(e)}}}function _A(u,e,t){let{scale:r=1}=e,{color:n="black"}=e;return u.$$set=a=>{"scale"in a&&t(0,r=a.scale),"color"in a&&t(1,n=a.color)},[r,n]}class SA extends Vu{constructor(e){super(),zu(this,e,_A,BA,Uu,{scale:0,color:1})}}async function $A({fetch:u}){const e=await QE({fetch:u});return{fetch:u,proskomma:e}}const gO=Object.freeze(Object.defineProperty({__proto__:null,load:$A},Symbol.toStringTag,{value:"Module"}));function wA(u){let e,t;return e=new Su.Speed({props:{color:u[0]}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},p(r,n){const a={};n&1&&(a.color=r[0]),e.$set(a)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function kA(u){let e,t,r=u[2].Settings_Audio_Speed+"",n,a,o,s,i,c,D,l,f,C,F,A,m,p,d,h,S,B,x,U,R,T,L,J,K,G,te,Z=u[2].Settings_Audio_Speed_Normal+"",ie,ve,M,N,w,_,O,$,E,g,P,ee,z,ae,oe,Be,qe,Ue,Ie,He=u[2].Button_Close+"",Xe,nu,Eu;return{c(){e=fe("h1"),t=fe("b"),n=Tu(r),a=Te(),o=fe("div"),s=fe("label"),i=fe("input"),D=Tu(`
                0.4x`),l=Te(),f=fe("label"),C=fe("input"),A=Tu(`
                0.6x`),m=Te(),p=fe("label"),d=fe("input"),S=Tu(`
                0.7x`),B=Te(),x=fe("label"),U=fe("input"),T=Tu(`
                0.8x`),L=Te(),J=fe("label"),K=fe("input"),te=Te(),ie=Tu(Z),ve=Te(),M=fe("label"),N=fe("input"),_=Tu(`
                1.2x`),O=Te(),$=fe("label"),E=fe("input"),P=Tu(`
                1.4x`),ee=Te(),z=fe("label"),ae=fe("input"),Be=Tu(`
                1.6x`),qe=Te(),Ue=fe("div"),Ie=fe("button"),Xe=Tu(He),this.h()},l(Je){e=pe(Je,"H1",{});var Ke=le(e);t=pe(Ke,"B",{style:!0});var cu=le(t);n=Pu(cu,r),cu.forEach(j),Ke.forEach(j),a=Pe(Je),o=pe(Je,"DIV",{class:!0});var ne=le(o);s=pe(ne,"LABEL",{class:!0});var tu=le(s);i=pe(tu,"INPUT",{type:!0,name:!0}),D=Pu(tu,`
                0.4x`),tu.forEach(j),l=Pe(ne),f=pe(ne,"LABEL",{class:!0});var b=le(f);C=pe(b,"INPUT",{type:!0,name:!0}),A=Pu(b,`
                0.6x`),b.forEach(j),m=Pe(ne),p=pe(ne,"LABEL",{class:!0});var k=le(p);d=pe(k,"INPUT",{type:!0,name:!0}),S=Pu(k,`
                0.7x`),k.forEach(j),B=Pe(ne),x=pe(ne,"LABEL",{class:!0});var V=le(x);U=pe(V,"INPUT",{type:!0,name:!0}),T=Pu(V,`
                0.8x`),V.forEach(j),L=Pe(ne),J=pe(ne,"LABEL",{class:!0});var Y=le(J);K=pe(Y,"INPUT",{type:!0,name:!0}),te=Pe(Y),ie=Pu(Y,Z),Y.forEach(j),ve=Pe(ne),M=pe(ne,"LABEL",{class:!0});var Fe=le(M);N=pe(Fe,"INPUT",{type:!0,name:!0}),_=Pu(Fe,`
                1.2x`),Fe.forEach(j),O=Pe(ne),$=pe(ne,"LABEL",{class:!0});var de=le($);E=pe(de,"INPUT",{type:!0,name:!0}),P=Pu(de,`
                1.4x`),de.forEach(j),ee=Pe(ne),z=pe(ne,"LABEL",{class:!0});var ue=le(z);ae=pe(ue,"INPUT",{type:!0,name:!0}),Be=Pu(ue,`
                1.6x`),ue.forEach(j),qe=Pe(ne),Ue=pe(ne,"DIV",{class:!0});var H=le(Ue);Ie=pe(H,"BUTTON",{class:!0});var ce=le(Ie);Xe=Pu(ce,He),ce.forEach(j),H.forEach(j),ne.forEach(j),this.h()},h(){q(t,"style",""),q(i,"type","radio"),q(i,"name","speed"),i.value="0.4",i.checked=c=u[1]["audio-speed"]==="0.4",q(s,"class","svelte-1dgk2kw"),q(C,"type","radio"),q(C,"name","speed"),C.value="0.6",C.checked=F=u[1]["audio-speed"]==="0.6",q(f,"class","svelte-1dgk2kw"),q(d,"type","radio"),q(d,"name","speed"),d.value="0.7",d.checked=h=u[1]["audio-speed"]==="0.7",q(p,"class","svelte-1dgk2kw"),q(U,"type","radio"),q(U,"name","speed"),U.value="0.8",U.checked=R=u[1]["audio-speed"]==="0.8",q(x,"class","svelte-1dgk2kw"),q(K,"type","radio"),q(K,"name","speed"),K.value="1",K.checked=G=u[1]["audio-speed"]==="1.0",q(J,"class","svelte-1dgk2kw"),q(N,"type","radio"),q(N,"name","speed"),N.value="1.2",N.checked=w=u[1]["audio-speed"]==="1.2",q(M,"class","svelte-1dgk2kw"),q(E,"type","radio"),q(E,"name","speed"),E.value="1.4",E.checked=g=u[1]["audio-speed"]==="1.4",q($,"class","svelte-1dgk2kw"),q(ae,"type","radio"),q(ae,"name","speed"),ae.value="1.6",ae.checked=oe=u[1]["audio-speed"]==="1.6",q(z,"class","svelte-1dgk2kw"),q(Ie,"class","dy-btn dy-btn-ghost"),q(Ue,"class","dy-modal-action close-btn svelte-1dgk2kw"),q(o,"class","speed-controls svelte-1dgk2kw")},m(Je,Ke){be(Je,e,Ke),X(e,t),X(t,n),be(Je,a,Ke),be(Je,o,Ke),X(o,s),X(s,i),X(s,D),X(o,l),X(o,f),X(f,C),X(f,A),X(o,m),X(o,p),X(p,d),X(p,S),X(o,B),X(o,x),X(x,U),X(x,T),X(o,L),X(o,J),X(J,K),X(J,te),X(J,ie),X(o,ve),X(o,M),X(M,N),X(M,_),X(o,O),X(o,$),X($,E),X($,P),X(o,ee),X(o,z),X(z,ae),X(z,Be),X(o,qe),X(o,Ue),X(Ue,Ie),X(Ie,Xe),nu||(Eu=[Ge(i,"click",u[3]),Ge(C,"click",u[3]),Ge(d,"click",u[3]),Ge(U,"click",u[3]),Ge(K,"click",u[3]),Ge(N,"click",u[3]),Ge(E,"click",u[3]),Ge(ae,"click",u[3])],nu=!0)},p(Je,Ke){Ke&4&&r!==(r=Je[2].Settings_Audio_Speed+"")&&vt(n,r),Ke&2&&c!==(c=Je[1]["audio-speed"]==="0.4")&&(i.checked=c),Ke&2&&F!==(F=Je[1]["audio-speed"]==="0.6")&&(C.checked=F),Ke&2&&h!==(h=Je[1]["audio-speed"]==="0.7")&&(d.checked=h),Ke&2&&R!==(R=Je[1]["audio-speed"]==="0.8")&&(U.checked=R),Ke&2&&G!==(G=Je[1]["audio-speed"]==="1.0")&&(K.checked=G),Ke&4&&Z!==(Z=Je[2].Settings_Audio_Speed_Normal+"")&&vt(ie,Z),Ke&2&&w!==(w=Je[1]["audio-speed"]==="1.2")&&(N.checked=w),Ke&2&&g!==(g=Je[1]["audio-speed"]==="1.4")&&(E.checked=g),Ke&2&&oe!==(oe=Je[1]["audio-speed"]==="1.6")&&(ae.checked=oe),Ke&4&&He!==(He=Je[2].Button_Close+"")&&vt(Xe,He)},d(Je){Je&&(j(e),j(a),j(o)),nu=!1,an(Eu)}}}function qA(u){let e,t;return e=new IC({props:{id:TA,addCSS:"position:absolute; bottom:1rem; right:1rem;",$$slots:{content:[kA],label:[wA]},$$scope:{ctx:u}}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},p(r,[n]){const a={};n&39&&(a.$$scope={dirty:n,ctx:r}),e.$set(a)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}let TA="playback";function PA(u,e,t){let r,n,a,o;ke(u,rn,i=>t(4,n=i)),ke(u,un,i=>t(1,a=i)),ke(u,nn,i=>t(2,o=i));function s(i){pt(un,a["audio-speed"]=i.target.value,a)}return u.$$.update=()=>{u.$$.dirty&16&&t(0,r=n["ui.bar.audio.icon"].color)},[r,a,o,s,n]}class OA extends Vu{constructor(e){super(),zu(this,e,PA,qA,Uu,{})}}function lD(u){let e,t;return{c(){e=fe("div"),t=Tu(u[2]),this.h()},l(r){e=pe(r,"DIV",{style:!0,class:!0});var n=le(e);t=Pu(n,u[2]),n.forEach(j),this.h()},h(){q(e,"style",u[15]),q(e,"class","absolute flex flex-row justify-center -top-[3rem] p-2 w-full left-1/2 -translate-x-1/2 max-w-screen-md shadow-md")},m(r,n){be(r,e,n),X(e,t)},p(r,n){n&4&&vt(t,r[2])},d(r){r&&j(e)}}}function IA(u){let e,t,r,n,a;var o=u[10][u[1].mode];function s(i,c){return{props:{color:i[7]}}}return o&&(t=Yn(o,s(u))),{c(){e=fe("button"),t&&Re(t.$$.fragment),this.h()},l(i){e=pe(i,"BUTTON",{class:!0});var c=le(e);t&&We(t.$$.fragment,c),c.forEach(j),this.h()},h(){q(e,"class","audio-control-buttons svelte-y4z97p")},m(i,c){be(i,e,c),t&&Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[18]),n=!0)},p(i,c){if(c&2&&o!==(o=i[10][i[1].mode])){if(t){Au();const D=t;me(D.$$.fragment,1,0,()=>{Me(D,1)}),vu()}o?(t=Yn(o,s(i)),Re(t.$$.fragment),se(t.$$.fragment,1),Ne(t,e,null)):t=null}else if(o){const D={};c&128&&(D.color=i[7]),t.$set(D)}},i(i){r||(t&&se(t.$$.fragment,i),r=!0)},o(i){t&&me(t.$$.fragment,i),r=!1},d(i){i&&j(e),t&&Me(t),n=!1,a()}}}function dD(u){let e,t,r,n,a;return t=new Su.RW({props:{color:u[7]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","audio-control-buttons svelte-y4z97p")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[20]),n=!0)},p(o,s){const i={};s&128&&(i.color=o[7]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function jA(u){let e,t;return e=new Su.Pause({props:{color:u[7],size:u[13]}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},p(r,n){const a={};n&128&&(a.color=r[7]),e.$set(a)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function xA(u){let e,t,r;var n=u[14];function a(o,s){return{props:{color:o[6],size:o[13]}}}return n&&(e=Yn(n,a(u))),{c(){e&&Re(e.$$.fragment),t=Gu()},l(o){e&&We(e.$$.fragment,o),t=Gu()},m(o,s){e&&Ne(e,o,s),be(o,t,s),r=!0},p(o,s){if(n!==(n=o[14])){if(e){Au();const i=e;me(i.$$.fragment,1,0,()=>{Me(i,1)}),vu()}n?(e=Yn(n,a(o)),Re(e.$$.fragment),se(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(n){const i={};s&64&&(i.color=o[6]),e.$set(i)}},i(o){r||(e&&se(e.$$.fragment,o),r=!0)},o(o){e&&me(e.$$.fragment,o),r=!1},d(o){o&&j(t),e&&Me(e,o)}}}function fD(u){let e,t,r,n,a;return t=new Su.FF({props:{color:u[7]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","audio-control-buttons svelte-y4z97p")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[22]),n=!0)},p(o,s){const i={};s&128&&(i.color=o[7]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function RA(u){let e,t;return e=new OA({}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function pD(u){let e,t=Bn(u[8].progress)+"",r,n,a,o,s=Bn(u[8].duration)+"",i;function c(f,C){return f[8].loaded?MA:NA}let D=c(u),l=D(u);return{c(){e=fe("div"),r=Tu(t),n=Te(),l.c(),a=Te(),o=fe("div"),i=Tu(s),this.h()},l(f){e=pe(f,"DIV",{class:!0});var C=le(e);r=Pu(C,t),C.forEach(j),n=Pe(f),l.l(f),a=Pe(f),o=pe(f,"DIV",{class:!0});var F=le(o);i=Pu(F,s),F.forEach(j),this.h()},h(){q(e,"class","audio-progress-value text-sm svelte-y4z97p"),q(o,"class","audio-progress-duration text-sm svelte-y4z97p")},m(f,C){be(f,e,C),X(e,r),be(f,n,C),l.m(f,C),be(f,a,C),be(f,o,C),X(o,i)},p(f,C){C&256&&t!==(t=Bn(f[8].progress)+"")&&vt(r,t),D===(D=c(f))&&l?l.p(f,C):(l.d(1),l=D(f),l&&(l.c(),l.m(a.parentNode,a))),C&256&&s!==(s=Bn(f[8].duration)+"")&&vt(i,s)},d(f){f&&(j(e),j(n),j(a),j(o)),l.d(f)}}}function NA(u){let e;return{c(){e=fe("progress"),this.h()},l(t){e=pe(t,"PROGRESS",{class:!0,max:!0}),le(e).forEach(j),this.h()},h(){q(e,"class","dy-progress audio-progress svelte-y4z97p"),e.value="0",q(e,"max","1")},m(t,r){be(t,e,r)},p:iu,d(t){t&&j(e)}}}function MA(u){let e,t,r,n,a;return{c(){e=fe("progress"),this.h()},l(o){e=pe(o,"PROGRESS",{id:!0,class:!0,max:!0}),le(e).forEach(j),this.h()},h(){q(e,"id","progress-bar"),q(e,"class","dy-progress audio-progress svelte-y4z97p"),e.value=t=u[8].progress,q(e,"max",r=u[8].duration)},m(o,s){be(o,e,s),n||(a=Ge(e,"click",u[9]),n=!0)},p(o,s){s&256&&t!==(t=o[8].progress)&&(e.value=t),s&256&&r!==(r=o[8].duration)&&q(e,"max",r)},d(o){o&&j(e),n=!1,a()}}}function UA(u){var ie,ve;let e,t,r,n,a,o,s,i,c,D,l,f,C,F,A,m,p,d,h,S,B,x,U=u[3]&&lD(u),R=u[12]&&IA(u);o=new Su.Prev({props:{color:u[7]}});let T=((ie=u[0].hasAudio)==null?void 0:ie.timingFile)&&dD(u);const L=[xA,jA],J=[];function K(M,N){return M[8].playing?1:0}D=K(u),l=J[D]=L[D](u);let G=((ve=u[0].hasAudio)==null?void 0:ve.timingFile)&&fD(u);A=new Su.Skip({props:{color:u[7]}});let te=u[11]&&RA(),Z=!u[0].hasAudio.timingFile&&pD(u);return{c(){e=fe("div"),U&&U.c(),t=Te(),R&&R.c(),r=Te(),n=fe("div"),a=fe("button"),Re(o.$$.fragment),s=Te(),T&&T.c(),i=Te(),c=fe("button"),l.c(),f=Te(),G&&G.c(),C=Te(),F=fe("button"),Re(A.$$.fragment),m=Te(),p=fe("div"),te&&te.c(),d=Te(),Z&&Z.c(),this.h()},l(M){e=pe(M,"DIV",{class:!0});var N=le(e);U&&U.l(N),t=Pe(N),R&&R.l(N),r=Pe(N),n=pe(N,"DIV",{class:!0});var w=le(n);a=pe(w,"BUTTON",{class:!0});var _=le(a);We(o.$$.fragment,_),_.forEach(j),s=Pe(w),T&&T.l(w),i=Pe(w),c=pe(w,"BUTTON",{class:!0});var O=le(c);l.l(O),O.forEach(j),f=Pe(w),G&&G.l(w),C=Pe(w),F=pe(w,"BUTTON",{class:!0});var $=le(F);We(A.$$.fragment,$),$.forEach(j),w.forEach(j),m=Pe(N),p=pe(N,"DIV",{class:!0});var E=le(p);te&&te.l(E),E.forEach(j),d=Pe(N),Z&&Z.l(N),N.forEach(j),this.h()},h(){q(a,"class","audio-control-buttons svelte-y4z97p"),q(c,"class","audio-control-buttons svelte-y4z97p"),q(F,"class","audio-control-buttons svelte-y4z97p"),q(n,"class","audio-controls svelte-y4z97p"),we(n,"direction","ltr"),q(p,"class","audio-speed audio-control-buttons svelte-y4z97p"),q(e,"class",h="relative "+u[4]+" svelte-y4z97p"),we(e,"background-color",u[5])},m(M,N){be(M,e,N),U&&U.m(e,null),X(e,t),R&&R.m(e,null),X(e,r),X(e,n),X(n,a),Ne(o,a,null),X(n,s),T&&T.m(n,null),X(n,i),X(n,c),J[D].m(c,null),X(n,f),G&&G.m(n,null),X(n,C),X(n,F),Ne(A,F,null),X(e,m),X(e,p),te&&te.m(p,null),X(e,d),Z&&Z.m(e,null),S=!0,B||(x=[Ge(a,"click",u[19]),Ge(c,"click",u[21]),Ge(F,"click",u[23])],B=!0)},p(M,[N]){var $,E;M[3]?U?U.p(M,N):(U=lD(M),U.c(),U.m(e,t)):U&&(U.d(1),U=null),M[12]&&R.p(M,N);const w={};N&128&&(w.color=M[7]),o.$set(w),($=M[0].hasAudio)!=null&&$.timingFile?T?(T.p(M,N),N&1&&se(T,1)):(T=dD(M),T.c(),se(T,1),T.m(n,i)):T&&(Au(),me(T,1,1,()=>{T=null}),vu());let _=D;D=K(M),D===_?J[D].p(M,N):(Au(),me(J[_],1,1,()=>{J[_]=null}),vu(),l=J[D],l?l.p(M,N):(l=J[D]=L[D](M),l.c()),se(l,1),l.m(c,null)),(E=M[0].hasAudio)!=null&&E.timingFile?G?(G.p(M,N),N&1&&se(G,1)):(G=fD(M),G.c(),se(G,1),G.m(n,C)):G&&(Au(),me(G,1,1,()=>{G=null}),vu());const O={};N&128&&(O.color=M[7]),A.$set(O),M[0].hasAudio.timingFile?Z&&(Z.d(1),Z=null):Z?Z.p(M,N):(Z=pD(M),Z.c(),Z.m(e,null)),(!S||N&16&&h!==(h="relative "+M[4]+" svelte-y4z97p"))&&q(e,"class",h),N&32&&we(e,"background-color",M[5])},i(M){S||(se(R),se(o.$$.fragment,M),se(T),se(l),se(G),se(A.$$.fragment,M),se(te),S=!0)},o(M){me(R),me(o.$$.fragment,M),me(T),me(l),me(G),me(A.$$.fragment,M),me(te),S=!1},d(M){M&&j(e),U&&U.d(),R&&R.d(),Me(o),T&&T.d(),J[D].d(),G&&G.d(),Me(A),te&&te.d(),Z&&Z.d(),B=!1,an(x)}}}function VA(u,e,t){let r,n,a,o,s,i,c,D,l,f;ke(u,un,M=>t(16,s=M)),ke(u,Lu,M=>t(0,i=M)),ke(u,rn,M=>t(17,c=M)),ke(u,Sa,M=>t(1,D=M)),ke(u,nn,M=>t(26,l=M)),ke(u,kc,M=>t(8,f=M));function C(M){!M&&D.mode==="repeatSelection"&&Sa.reset()}function F(M){if(!f.loaded)return;const N=document.getElementById("progress-bar"),w=(M.clientX-N.offsetLeft)/N.offsetWidth;MC(f.duration*w)}const A={arrow:Su.Play,"filled-circle":Su.PlayFillCircle,"outline-circle":Su.PlayOutlineCircle},m={continue:Su.RepeatOff,stop:Su.RepeatOffStop,repeatPage:Su.Repeat,repeatSelection:Su.RepeatOne};let p="";function d(M){let N="";switch(M.mode){case"stop":N="Audio_Repeat_Off_Stop";break;case"repeatPage":N="Audio_Repeat_Page";break;case"repeatSelection":N="Audio_Repeat_Selection";break;case"continue":N="Audio_Repeat_Off_Continue";break}p!==""&&p!==M.mode&&x(l[N]),p=M.mode}let h="",S=!1,B=null;function x(M){t(3,S=!0),t(2,h=M),B&&clearTimeout(B),B=setTimeout(()=>{t(3,S=!1),B=null},1500)}const U=Se.mainFeatures["settings-audio-speed"],R=Se.mainFeatures["audio-repeat-mode-button"],T=Se.mainFeatures["audio-play-button-size"]==="normal"?"24":"48",L=A[Se.mainFeatures["audio-play-button-style"]],J=Jt(c["ui.bar.audio.hint.text"]),K=()=>{var M;return Sa.next((M=i.hasAudio)==null?void 0:M.timingFile)},G=()=>aD(-1),te=()=>oD(-1),Z=()=>UC(),ie=()=>oD(1),ve=()=>aD(1);return u.$$.update=()=>{var M,N;u.$$.dirty&2&&d(D),u.$$.dirty&131072&&t(7,r=c["ui.bar.audio.icon"].color),u.$$.dirty&131072&&t(6,n=c["ui.bar.audio.play.icon"].color),u.$$.dirty&131072&&t(5,a=c["ui.bar.audio"]["background-color"]),u.$$.dirty&1&&t(4,o=(M=i.hasAudio)!=null&&M.timingFile?"audio-bar":"audio-bar-progress"),u.$$.dirty&1&&C((N=i.hasAudio)==null?void 0:N.timing),u.$$.dirty&65536&&NC(s["audio-speed"])},[i,D,h,S,o,a,n,r,f,F,m,U,R,T,L,J,s,c,K,G,te,Z,ie,ve]}class zA extends Vu{constructor(e){super(),zu(this,e,VA,UA,Uu,{})}}function FD(u){let e,t,r={cols:"5",$$slots:{content:[HA],label:[LA]},$$scope:{ctx:u}};return e=new HC({props:r}),u[24](e),e.$on("nav-end",u[14]),{c(){Re(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,a){Ne(e,n,a),t=!0},p(n,a){const o={};a[0]&7983|a[1]&2&&(o.$$scope={dirty:a,ctx:n}),e.$set(o)},i(n){t||(se(e.$$.fragment,n),t=!0)},o(n){me(e.$$.fragment,n),t=!1},d(n){u[24](null),Me(e,n)}}}function WA(u){let e,t;return e=new JC({props:{color:"white"}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function LA(u){let e,t=u[16](u[0],u[2])+"",r,n,a,o,s,i=u[18]&&WA();return{c(){e=fe("div"),r=Tu(t),a=Te(),i&&i.c(),o=Gu(),this.h()},l(c){e=pe(c,"DIV",{class:!0,style:!0});var D=le(e);r=Pu(D,t),D.forEach(j),a=Pe(c),i&&i.l(c),o=Gu(),this.h()},h(){q(e,"class","normal-case"),q(e,"style",n=Jt(u[12]["ui.selector.chapter"]))},m(c,D){be(c,e,D),X(e,r),be(c,a,D),i&&i.m(c,D),be(c,o,D),s=!0},p(c,D){(!s||D[0]&5)&&t!==(t=c[16](c[0],c[2])+"")&&vt(r,t),(!s||D[0]&4096&&n!==(n=Jt(c[12]["ui.selector.chapter"])))&&q(e,"style",n)},i(c){s||(se(i),s=!0)},o(c){me(i),s=!1},d(c){c&&(j(e),j(a),j(o)),i&&i.d(c)}}}function GA(u){let e,t,r,n={options:{[u[9]]:{component:_n,props:{cols:5,options:[{rows:u[1].find(u[21]).hasIntroduction?[{label:u[3].Chapter_Introduction_Title,id:"i"}]:null,cells:Object.keys(u[8]).map(u[22])}]},visible:!0},[u[10]]:{component:_n,props:{cols:5,options:u[17](u[2])},visible:u[11]}}};return t=new KC({props:n}),u[23](t),t.$on("menuaction",u[13]),{c(){e=fe("div"),Re(t.$$.fragment)},l(a){e=pe(a,"DIV",{});var o=le(e);We(t.$$.fragment,o),o.forEach(j)},m(a,o){be(a,e,o),Ne(t,e,null),r=!0},p(a,o){const s={};o[0]&3855&&(s.options={[a[9]]:{component:_n,props:{cols:5,options:[{rows:a[1].find(a[21]).hasIntroduction?[{label:a[3].Chapter_Introduction_Title,id:"i"}]:null,cells:Object.keys(a[8]).map(a[22])}]},visible:!0},[a[10]]:{component:_n,props:{cols:5,options:a[17](a[2])},visible:a[11]}}),t.$set(s)},i(a){r||(se(t.$$.fragment,a),r=!0)},o(a){me(t.$$.fragment,a),r=!1},d(a){a&&j(e),u[23](null),Me(t)}}}function HA(u){let e,t,r=u[18]&&GA(u);return{c(){r&&r.c(),e=Gu()},l(n){r&&r.l(n),e=Gu()},m(n,a){r&&r.m(n,a),be(n,e,a),t=!0},p(n,a){n[18]&&r.p(n,a)},i(n){t||(se(r),t=!0)},o(n){me(r),t=!1},d(n){n&&j(e),r&&r.d(n)}}}function JA(u){let e,t,r=u[7]&&(u[4].book===""||u[4].chapter!=="")&&FD(u);return{c(){r&&r.c(),e=Gu()},l(n){r&&r.l(n),e=Gu()},m(n,a){r&&r.m(n,a),be(n,e,a),t=!0},p(n,a){n[7]&&(n[4].book===""||n[4].chapter!=="")?r?(r.p(n,a),a[0]&144&&se(r,1)):(r=FD(n),r.c(),se(r,1),r.m(e.parentNode,e)):r&&(Au(),me(r,1,1,()=>{r=null}),vu())},i(n){t||(se(r),t=!0)},o(n){me(r),t=!1},d(n){n&&j(e),r&&r.d(n)}}}function KA(u,e,t){let r,n,a,o,s,i,c,D,l,f,C,F,A,m,p,d;ke(u,Lu,N=>t(19,F=N)),ke(u,nn,N=>t(3,A=N)),ke(u,rr,N=>t(4,m=N)),ke(u,lm,N=>t(20,p=N)),ke(u,rn,N=>t(12,d=N));let h;async function S(N){switch(N.detail.tab){case c:pt(rr,m.chapter=N.detail.text,m),!a||m.chapter==="i"||o===0?await B():h.setActive(D);break;case D:N.detail.text==="i"?(pt(rr,m.chapter="i",m),pt(rr,m.verse="",m)):pt(rr,m.verse=N.detail.text,m),await B();break;default:console.log("Chapter navigateReference: Default");break}}async function B(){await VC({collection:F.collection,book:F.book,chapter:m.chapter,verse:m.verse}),U()}let x;function U(){x.close()}function R(){h.setActive(c),rr.reset()}function T(N){const w=F.catalog.documents.find(_=>_.bookCode===N);return w?Object.keys(w.versesByChapters).length:0}function L(N){return N==="i"?A.Chapter_Introduction_Symbol:i[Number(N)]!==void 0?i[Number(N)]:Jr(s,N)}function J(N,w){var E;if(!w||w==="i")return 0;let O=(E=F.catalog.documents.find(g=>g.bookCode===N))==null?void 0:E.versesByChapters;return!O||Object.keys(O).length===0?0:Object.keys(O[w]).length}let K=(N,w)=>{var O;i=((O=Se.bookCollections.find($=>F.collection===$.id).books.find($=>N===$.id))==null?void 0:O.chaptersLabels)??{};let _="";return w==="i"?_=A.Chapter_Introduction_Symbol:i[w]!==void 0?_=i[w]:_=Jr(s,w),_},G=N=>{let w=[],_=f[N];return N==="i"?w=[{cells:[{label:A.Chapter_Introduction_Symbol,id:"i"}]}]:o===0?w=[]:w=[{cells:Object.keys(_).map(O=>({label:Jr(s,O),id:O}))}],w};const te=Se.mainFeatures["show-chapter-selector"],Z=N=>N.bookCode===r,ie=N=>({label:L(N),id:N});function ve(N){br[N?"unshift":"push"](()=>{h=N,t(5,h)})}function M(N){br[N?"unshift":"push"](()=>{x=N,t(6,x)})}return u.$$.update=()=>{var N;u.$$.dirty[0]&524304&&t(0,r=m.book===""?F.book:m.book),u.$$.dirty[0]&524304&&t(2,n=m.chapter===""?F.chapter:m.chapter),u.$$.dirty[0]&1048576&&t(11,a=p["verse-selection"]),u.$$.dirty[0]&5&&(o=J(r,n)),u.$$.dirty[0]&524289&&(s=mm(Se,F.collection,r)),u.$$.dirty[0]&524289&&(i=Se.bookCollections.find(w=>F.collection===w.id).books.find(w=>r===w.id).chaptersLabels??{}),u.$$.dirty[0]&8&&t(9,c=A.Selector_Chapter),u.$$.dirty[0]&8&&t(10,D=A.Selector_Verse),u.$$.dirty[0]&524288&&t(1,l=F.catalog.documents),u.$$.dirty[0]&3&&t(8,f=(N=l.find(w=>w.bookCode===r))==null?void 0:N.versesByChapters),u.$$.dirty[0]&524288&&t(7,C=Se.mainFeatures["show-chapter-number-on-app-bar"]&&T(F.book)>0)},[r,l,n,A,m,h,x,C,f,c,D,a,d,S,R,L,K,G,te,F,p,Z,ie,ve,M]}class ZA extends Vu{constructor(e){super(),zu(this,e,KA,JA,Uu,{},null,[-1,-1])}}function mD(u,e,t){const r=u.slice();return r[17]=e[t],r}function hD(u){let e,t,r,n=u[17]+"",a,o,s;return{c(){e=fe("div"),t=fe("div"),r=new fc(!1),a=Te(),this.h()},l(i){e=pe(i,"DIV",{id:!0,class:!0});var c=le(e);t=pe(c,"DIV",{id:!0,class:!0});var D=le(t);r=pc(D,!1),D.forEach(j),a=Pe(c),c.forEach(j),this.h()},h(){r.a=null,q(t,"id","container"),q(t,"class","footnote"),we(t,"font-family",u[0]),we(t,"font-size",u[4]),we(t,"line-height",u[3]),q(e,"id","container"),q(e,"class","footnote rounded h-40 drop-shadow-lg overflow-y-auto")},m(i,c){be(i,e,c),X(e,t),r.m(n,t),X(e,a),o||(s=Ge(e,"click",kC(u[5])),o=!0)},p(i,c){c&2&&n!==(n=i[17]+"")&&r.p(n),c&1&&we(t,"font-family",i[0]),c&16&&we(t,"font-size",i[4]),c&8&&we(t,"line-height",i[3])},d(i){i&&j(e),o=!1,s()}}}function YA(u){let e,t=iD(u[1]),r=[];for(let n=0;n<t.length;n+=1)r[n]=hD(mD(u,t,n));return{c(){e=fe("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=pe(n,"DIV",{class:!0});var a=le(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(j),this.h()},h(){q(e,"class","absolute max-w-screen-md w-5/6 bottom-8 dy-stack")},m(n,a){be(n,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);u[9](e)},p(n,[a]){if(a&59){t=iD(n[1]);let o;for(o=0;o<t.length;o+=1){const s=mD(n,t,o);r[o]?r[o].p(s,a):(r[o]=hD(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},i:iu,o:iu,d(n){n&&j(e),wC(r,n),u[9](null)}}}function QA(u,e,t){let r,n,a,o;ke(u,dt,d=>t(1,a=d)),ke(u,Kn,d=>t(8,o=d));let{bodyFontSize:s}=e,{bodyLineHeight:i}=e,{font:c}=e,D,l=!1;function f(d){D.contains(d.target)||dt.pop()}function C(d){Lu.set({docSet:d.docSet,book:d.book,chapter:d.chapter,verse:d.verse}),dt.reset()}function F(d){const h=d.target.getAttribute("ref"),S=dm(h,"."),B=S[0],x=S[1],U=S[2],R=S[3];let T=Lu.docSet;const L=Se.bookCollections.find(J=>J.id===B);if(L)T=L.languageCode+"_"+L.id;else return;Lu.set({docSet:T,book:x,chapter:U,verse:R}),dt.reset()}async function A(d){var h;if(d.target.hasAttribute("data-start-ref")){let S=JSON.parse(d.target.getAttribute("data-start-ref")),B=d.target.getAttribute("data-end-ref")==="undefined"?void 0:JSON.parse(d.target.getAttribute("data-end-ref"));if(Se.mainFeatures["scripture-refs-display-from-popup"]==="viewer")C(S);else{const x=await hm(S,B,Kn);dt.push(x)}}else if(d.target.classList.contains("ref-link"))F(d);else if((h=document.getElementById("icon"))!=null&&h.contains(d.target)){let S=JSON.parse(document.getElementById("icon").firstChild.getAttribute("reference"));C(S)}}function m(d){l&&d.length===0?(document.removeEventListener("click",f),l=!1):!l&&d.length>0&&(document.addEventListener("click",f),l=!0)}function p(d){br[d?"unshift":"push"](()=>{D=d,t(2,D)})}return u.$$set=d=>{"bodyFontSize"in d&&t(6,s=d.bodyFontSize),"bodyLineHeight"in d&&t(7,i=d.bodyLineHeight),"font"in d&&t(0,c=d.font)},u.$$.update=()=>{u.$$.dirty&256&&o.PrimaryColor,u.$$.dirty&2&&m(a),u.$$.dirty&64&&t(4,r=s+"px"),u.$$.dirty&128&&t(3,n=i+"%")},[c,a,D,n,r,A,s,i,o,p]}class XA extends Vu{constructor(e){super(),zu(this,e,QA,YA,Uu,{bodyFontSize:6,bodyLineHeight:7,font:0})}}var hc={exports:{}},Em={},at={},_r={},on={},Ye={},tn={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.regexpCode=u.getEsmExportName=u.getProperty=u.safeStringify=u.stringify=u.strConcat=u.addCodeArg=u.str=u._=u.nil=u._Code=u.Name=u.IDENTIFIER=u._CodeOrName=void 0;class e{}u._CodeOrName=e,u.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class t extends e{constructor(d){if(super(),!u.IDENTIFIER.test(d))throw new Error("CodeGen: name must be a valid identifier");this.str=d}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}u.Name=t;class r extends e{constructor(d){super(),this._items=typeof d=="string"?[d]:d}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const d=this._items[0];return d===""||d==='""'}get str(){var d;return(d=this._str)!==null&&d!==void 0?d:this._str=this._items.reduce((h,S)=>`${h}${S}`,"")}get names(){var d;return(d=this._names)!==null&&d!==void 0?d:this._names=this._items.reduce((h,S)=>(S instanceof t&&(h[S.str]=(h[S.str]||0)+1),h),{})}}u._Code=r,u.nil=new r("");function n(p,...d){const h=[p[0]];let S=0;for(;S<d.length;)s(h,d[S]),h.push(p[++S]);return new r(h)}u._=n;const a=new r("+");function o(p,...d){const h=[C(p[0])];let S=0;for(;S<d.length;)h.push(a),s(h,d[S]),h.push(a,C(p[++S]));return i(h),new r(h)}u.str=o;function s(p,d){d instanceof r?p.push(...d._items):d instanceof t?p.push(d):p.push(l(d))}u.addCodeArg=s;function i(p){let d=1;for(;d<p.length-1;){if(p[d]===a){const h=c(p[d-1],p[d+1]);if(h!==void 0){p.splice(d-1,3,h);continue}p[d++]="+"}d++}}function c(p,d){if(d==='""')return p;if(p==='""')return d;if(typeof p=="string")return d instanceof t||p[p.length-1]!=='"'?void 0:typeof d!="string"?`${p.slice(0,-1)}${d}"`:d[0]==='"'?p.slice(0,-1)+d.slice(1):void 0;if(typeof d=="string"&&d[0]==='"'&&!(p instanceof t))return`"${p}${d.slice(1)}`}function D(p,d){return d.emptyStr()?p:p.emptyStr()?d:o`${p}${d}`}u.strConcat=D;function l(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:C(Array.isArray(p)?p.join(","):p)}function f(p){return new r(C(p))}u.stringify=f;function C(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}u.safeStringify=C;function F(p){return typeof p=="string"&&u.IDENTIFIER.test(p)?new r(`.${p}`):n`[${p}]`}u.getProperty=F;function A(p){if(typeof p=="string"&&u.IDENTIFIER.test(p))return new r(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}u.getEsmExportName=A;function m(p){return new r(p.toString())}u.regexpCode=m})(tn);var Ec={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ValueScope=u.ValueScopeName=u.Scope=u.varKinds=u.UsedValueState=void 0;const e=tn;class t extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var r;(function(i){i[i.Started=0]="Started",i[i.Completed=1]="Completed"})(r||(u.UsedValueState=r={})),u.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class n{constructor({prefixes:c,parent:D}={}){this._names={},this._prefixes=c,this._parent=D}toName(c){return c instanceof e.Name?c:this.name(c)}name(c){return new e.Name(this._newName(c))}_newName(c){const D=this._names[c]||this._nameGroup(c);return`${c}${D.index++}`}_nameGroup(c){var D,l;if(!((l=(D=this._parent)===null||D===void 0?void 0:D._prefixes)===null||l===void 0)&&l.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}u.Scope=n;class a extends e.Name{constructor(c,D){super(D),this.prefix=c}setValue(c,{property:D,itemIndex:l}){this.value=c,this.scopePath=(0,e._)`.${new e.Name(D)}[${l}]`}}u.ValueScopeName=a;const o=(0,e._)`\n`;class s extends n{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?o:e.nil}}get(){return this._scope}name(c){return new a(c,this._newName(c))}value(c,D){var l;if(D.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(c),{prefix:C}=f,F=(l=D.key)!==null&&l!==void 0?l:D.ref;let A=this._values[C];if(A){const d=A.get(F);if(d)return d}else A=this._values[C]=new Map;A.set(F,f);const m=this._scope[C]||(this._scope[C]=[]),p=m.length;return m[p]=D.ref,f.setValue(D,{property:C,itemIndex:p}),f}getValue(c,D){const l=this._values[c];if(l)return l.get(D)}scopeRefs(c,D=this._values){return this._reduceValues(D,l=>{if(l.scopePath===void 0)throw new Error(`CodeGen: name "${l}" has no value`);return(0,e._)`${c}${l.scopePath}`})}scopeCode(c=this._values,D,l){return this._reduceValues(c,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},D,l)}_reduceValues(c,D,l={},f){let C=e.nil;for(const F in c){const A=c[F];if(!A)continue;const m=l[F]=l[F]||new Map;A.forEach(p=>{if(m.has(p))return;m.set(p,r.Started);let d=D(p);if(d){const h=this.opts.es5?u.varKinds.var:u.varKinds.const;C=(0,e._)`${C}${h} ${p} = ${d};${this.opts._n}`}else if(d=f==null?void 0:f(p))C=(0,e._)`${C}${d}${this.opts._n}`;else throw new t(p);m.set(p,r.Completed)})}return C}}u.ValueScope=s})(Ec);(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.or=u.and=u.not=u.CodeGen=u.operators=u.varKinds=u.ValueScopeName=u.ValueScope=u.Scope=u.Name=u.regexpCode=u.stringify=u.getProperty=u.nil=u.strConcat=u.str=u._=void 0;const e=tn,t=Ec;var r=tn;Object.defineProperty(u,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(u,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(u,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(u,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(u,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(u,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(u,"Name",{enumerable:!0,get:function(){return r.Name}});var n=Ec;Object.defineProperty(u,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(u,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(u,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(u,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),u.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class a{optimizeNodes(){return this}optimizeNames(E,g){return this}}class o extends a{constructor(E,g,P){super(),this.varKind=E,this.name=g,this.rhs=P}render({es5:E,_n:g}){const P=E?t.varKinds.var:this.varKind,ee=this.rhs===void 0?"":` = ${this.rhs}`;return`${P} ${this.name}${ee};`+g}optimizeNames(E,g){if(E[this.name.str])return this.rhs&&(this.rhs=te(this.rhs,E,g)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class s extends a{constructor(E,g,P){super(),this.lhs=E,this.rhs=g,this.sideEffects=P}render({_n:E}){return`${this.lhs} = ${this.rhs};`+E}optimizeNames(E,g){if(!(this.lhs instanceof e.Name&&!E[this.lhs.str]&&!this.sideEffects))return this.rhs=te(this.rhs,E,g),this}get names(){const E=this.lhs instanceof e.Name?{}:{...this.lhs.names};return G(E,this.rhs)}}class i extends s{constructor(E,g,P,ee){super(E,P,ee),this.op=g}render({_n:E}){return`${this.lhs} ${this.op}= ${this.rhs};`+E}}class c extends a{constructor(E){super(),this.label=E,this.names={}}render({_n:E}){return`${this.label}:`+E}}class D extends a{constructor(E){super(),this.label=E,this.names={}}render({_n:E}){return`break${this.label?` ${this.label}`:""};`+E}}class l extends a{constructor(E){super(),this.error=E}render({_n:E}){return`throw ${this.error};`+E}get names(){return this.error.names}}class f extends a{constructor(E){super(),this.code=E}render({_n:E}){return`${this.code};`+E}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(E,g){return this.code=te(this.code,E,g),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class C extends a{constructor(E=[]){super(),this.nodes=E}render(E){return this.nodes.reduce((g,P)=>g+P.render(E),"")}optimizeNodes(){const{nodes:E}=this;let g=E.length;for(;g--;){const P=E[g].optimizeNodes();Array.isArray(P)?E.splice(g,1,...P):P?E[g]=P:E.splice(g,1)}return E.length>0?this:void 0}optimizeNames(E,g){const{nodes:P}=this;let ee=P.length;for(;ee--;){const z=P[ee];z.optimizeNames(E,g)||(Z(E,z.names),P.splice(ee,1))}return P.length>0?this:void 0}get names(){return this.nodes.reduce((E,g)=>K(E,g.names),{})}}class F extends C{render(E){return"{"+E._n+super.render(E)+"}"+E._n}}class A extends C{}class m extends F{}m.kind="else";class p extends F{constructor(E,g){super(g),this.condition=E}render(E){let g=`if(${this.condition})`+super.render(E);return this.else&&(g+="else "+this.else.render(E)),g}optimizeNodes(){super.optimizeNodes();const E=this.condition;if(E===!0)return this.nodes;let g=this.else;if(g){const P=g.optimizeNodes();g=this.else=Array.isArray(P)?new m(P):P}if(g)return E===!1?g instanceof p?g:g.nodes:this.nodes.length?this:new p(ie(E),g instanceof p?[g]:g.nodes);if(!(E===!1||!this.nodes.length))return this}optimizeNames(E,g){var P;if(this.else=(P=this.else)===null||P===void 0?void 0:P.optimizeNames(E,g),!!(super.optimizeNames(E,g)||this.else))return this.condition=te(this.condition,E,g),this}get names(){const E=super.names;return G(E,this.condition),this.else&&K(E,this.else.names),E}}p.kind="if";class d extends F{}d.kind="for";class h extends d{constructor(E){super(),this.iteration=E}render(E){return`for(${this.iteration})`+super.render(E)}optimizeNames(E,g){if(super.optimizeNames(E,g))return this.iteration=te(this.iteration,E,g),this}get names(){return K(super.names,this.iteration.names)}}class S extends d{constructor(E,g,P,ee){super(),this.varKind=E,this.name=g,this.from=P,this.to=ee}render(E){const g=E.es5?t.varKinds.var:this.varKind,{name:P,from:ee,to:z}=this;return`for(${g} ${P}=${ee}; ${P}<${z}; ${P}++)`+super.render(E)}get names(){const E=G(super.names,this.from);return G(E,this.to)}}class B extends d{constructor(E,g,P,ee){super(),this.loop=E,this.varKind=g,this.name=P,this.iterable=ee}render(E){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(E)}optimizeNames(E,g){if(super.optimizeNames(E,g))return this.iterable=te(this.iterable,E,g),this}get names(){return K(super.names,this.iterable.names)}}class x extends F{constructor(E,g,P){super(),this.name=E,this.args=g,this.async=P}render(E){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(E)}}x.kind="func";class U extends C{render(E){return"return "+super.render(E)}}U.kind="return";class R extends F{render(E){let g="try"+super.render(E);return this.catch&&(g+=this.catch.render(E)),this.finally&&(g+=this.finally.render(E)),g}optimizeNodes(){var E,g;return super.optimizeNodes(),(E=this.catch)===null||E===void 0||E.optimizeNodes(),(g=this.finally)===null||g===void 0||g.optimizeNodes(),this}optimizeNames(E,g){var P,ee;return super.optimizeNames(E,g),(P=this.catch)===null||P===void 0||P.optimizeNames(E,g),(ee=this.finally)===null||ee===void 0||ee.optimizeNames(E,g),this}get names(){const E=super.names;return this.catch&&K(E,this.catch.names),this.finally&&K(E,this.finally.names),E}}class T extends F{constructor(E){super(),this.error=E}render(E){return`catch(${this.error})`+super.render(E)}}T.kind="catch";class L extends F{render(E){return"finally"+super.render(E)}}L.kind="finally";class J{constructor(E,g={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...g,_n:g.lines?`
`:""},this._extScope=E,this._scope=new t.Scope({parent:E}),this._nodes=[new A]}toString(){return this._root.render(this.opts)}name(E){return this._scope.name(E)}scopeName(E){return this._extScope.name(E)}scopeValue(E,g){const P=this._extScope.value(E,g);return(this._values[P.prefix]||(this._values[P.prefix]=new Set)).add(P),P}getScopeValue(E,g){return this._extScope.getValue(E,g)}scopeRefs(E){return this._extScope.scopeRefs(E,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(E,g,P,ee){const z=this._scope.toName(g);return P!==void 0&&ee&&(this._constants[z.str]=P),this._leafNode(new o(E,z,P)),z}const(E,g,P){return this._def(t.varKinds.const,E,g,P)}let(E,g,P){return this._def(t.varKinds.let,E,g,P)}var(E,g,P){return this._def(t.varKinds.var,E,g,P)}assign(E,g,P){return this._leafNode(new s(E,g,P))}add(E,g){return this._leafNode(new i(E,u.operators.ADD,g))}code(E){return typeof E=="function"?E():E!==e.nil&&this._leafNode(new f(E)),this}object(...E){const g=["{"];for(const[P,ee]of E)g.length>1&&g.push(","),g.push(P),(P!==ee||this.opts.es5)&&(g.push(":"),(0,e.addCodeArg)(g,ee));return g.push("}"),new e._Code(g)}if(E,g,P){if(this._blockNode(new p(E)),g&&P)this.code(g).else().code(P).endIf();else if(g)this.code(g).endIf();else if(P)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(E){return this._elseNode(new p(E))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(p,m)}_for(E,g){return this._blockNode(E),g&&this.code(g).endFor(),this}for(E,g){return this._for(new h(E),g)}forRange(E,g,P,ee,z=this.opts.es5?t.varKinds.var:t.varKinds.let){const ae=this._scope.toName(E);return this._for(new S(z,ae,g,P),()=>ee(ae))}forOf(E,g,P,ee=t.varKinds.const){const z=this._scope.toName(E);if(this.opts.es5){const ae=g instanceof e.Name?g:this.var("_arr",g);return this.forRange("_i",0,(0,e._)`${ae}.length`,oe=>{this.var(z,(0,e._)`${ae}[${oe}]`),P(z)})}return this._for(new B("of",ee,z,g),()=>P(z))}forIn(E,g,P,ee=this.opts.es5?t.varKinds.var:t.varKinds.const){if(this.opts.ownProperties)return this.forOf(E,(0,e._)`Object.keys(${g})`,P);const z=this._scope.toName(E);return this._for(new B("in",ee,z,g),()=>P(z))}endFor(){return this._endBlockNode(d)}label(E){return this._leafNode(new c(E))}break(E){return this._leafNode(new D(E))}return(E){const g=new U;if(this._blockNode(g),this.code(E),g.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(U)}try(E,g,P){if(!g&&!P)throw new Error('CodeGen: "try" without "catch" and "finally"');const ee=new R;if(this._blockNode(ee),this.code(E),g){const z=this.name("e");this._currNode=ee.catch=new T(z),g(z)}return P&&(this._currNode=ee.finally=new L,this.code(P)),this._endBlockNode(T,L)}throw(E){return this._leafNode(new l(E))}block(E,g){return this._blockStarts.push(this._nodes.length),E&&this.code(E).endBlock(g),this}endBlock(E){const g=this._blockStarts.pop();if(g===void 0)throw new Error("CodeGen: not in self-balancing block");const P=this._nodes.length-g;if(P<0||E!==void 0&&P!==E)throw new Error(`CodeGen: wrong number of nodes: ${P} vs ${E} expected`);return this._nodes.length=g,this}func(E,g=e.nil,P,ee){return this._blockNode(new x(E,g,P)),ee&&this.code(ee).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(E=1){for(;E-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(E){return this._currNode.nodes.push(E),this}_blockNode(E){this._currNode.nodes.push(E),this._nodes.push(E)}_endBlockNode(E,g){const P=this._currNode;if(P instanceof E||g&&P instanceof g)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${g?`${E.kind}/${g.kind}`:E.kind}"`)}_elseNode(E){const g=this._currNode;if(!(g instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=g.else=E,this}get _root(){return this._nodes[0]}get _currNode(){const E=this._nodes;return E[E.length-1]}set _currNode(E){const g=this._nodes;g[g.length-1]=E}}u.CodeGen=J;function K($,E){for(const g in E)$[g]=($[g]||0)+(E[g]||0);return $}function G($,E){return E instanceof e._CodeOrName?K($,E.names):$}function te($,E,g){if($ instanceof e.Name)return P($);if(!ee($))return $;return new e._Code($._items.reduce((z,ae)=>(ae instanceof e.Name&&(ae=P(ae)),ae instanceof e._Code?z.push(...ae._items):z.push(ae),z),[]));function P(z){const ae=g[z.str];return ae===void 0||E[z.str]!==1?z:(delete E[z.str],ae)}function ee(z){return z instanceof e._Code&&z._items.some(ae=>ae instanceof e.Name&&E[ae.str]===1&&g[ae.str]!==void 0)}}function Z($,E){for(const g in E)$[g]=($[g]||0)-(E[g]||0)}function ie($){return typeof $=="boolean"||typeof $=="number"||$===null?!$:(0,e._)`!${O($)}`}u.not=ie;const ve=_(u.operators.AND);function M(...$){return $.reduce(ve)}u.and=M;const N=_(u.operators.OR);function w(...$){return $.reduce(N)}u.or=w;function _($){return(E,g)=>E===e.nil?g:g===e.nil?E:(0,e._)`${O(E)} ${$} ${O(g)}`}function O($){return $ instanceof e.Name?$:(0,e._)`(${$})`}})(Ye);var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.checkStrictMode=ye.getErrorPath=ye.Type=ye.useFunc=ye.setEvaluated=ye.evaluatedPropsToName=ye.mergeEvaluated=ye.eachItem=ye.unescapeJsonPointer=ye.escapeJsonPointer=ye.escapeFragment=ye.unescapeFragment=ye.schemaRefOrVal=ye.schemaHasRulesButRef=ye.schemaHasRules=ye.checkUnknownRules=ye.alwaysValidSchema=ye.toHash=void 0;const ru=Ye,ev=tn;function uv(u){const e={};for(const t of u)e[t]=!0;return e}ye.toHash=uv;function tv(u,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Cm(u,e),!Am(e,u.self.RULES.all))}ye.alwaysValidSchema=tv;function Cm(u,e=u.schema){const{opts:t,self:r}=u;if(!t.strictSchema||typeof e=="boolean")return;const n=r.RULES.keywords;for(const a in e)n[a]||gm(u,`unknown keyword: "${a}"`)}ye.checkUnknownRules=Cm;function Am(u,e){if(typeof u=="boolean")return!u;for(const t in u)if(e[t])return!0;return!1}ye.schemaHasRules=Am;function rv(u,e){if(typeof u=="boolean")return!u;for(const t in u)if(t!=="$ref"&&e.all[t])return!0;return!1}ye.schemaHasRulesButRef=rv;function nv({topSchemaRef:u,schemaPath:e},t,r,n){if(!n){if(typeof t=="number"||typeof t=="boolean")return t;if(typeof t=="string")return(0,ru._)`${t}`}return(0,ru._)`${u}${e}${(0,ru.getProperty)(r)}`}ye.schemaRefOrVal=nv;function av(u){return vm(decodeURIComponent(u))}ye.unescapeFragment=av;function ov(u){return encodeURIComponent(Ic(u))}ye.escapeFragment=ov;function Ic(u){return typeof u=="number"?`${u}`:u.replace(/~/g,"~0").replace(/\//g,"~1")}ye.escapeJsonPointer=Ic;function vm(u){return u.replace(/~1/g,"/").replace(/~0/g,"~")}ye.unescapeJsonPointer=vm;function sv(u,e){if(Array.isArray(u))for(const t of u)e(t);else e(u)}ye.eachItem=sv;function ED({mergeNames:u,mergeToName:e,mergeValues:t,resultToName:r}){return(n,a,o,s)=>{const i=o===void 0?a:o instanceof ru.Name?(a instanceof ru.Name?u(n,a,o):e(n,a,o),o):a instanceof ru.Name?(e(n,o,a),a):t(a,o);return s===ru.Name&&!(i instanceof ru.Name)?r(n,i):i}}ye.mergeEvaluated={props:ED({mergeNames:(u,e,t)=>u.if((0,ru._)`${t} !== true && ${e} !== undefined`,()=>{u.if((0,ru._)`${e} === true`,()=>u.assign(t,!0),()=>u.assign(t,(0,ru._)`${t} || {}`).code((0,ru._)`Object.assign(${t}, ${e})`))}),mergeToName:(u,e,t)=>u.if((0,ru._)`${t} !== true`,()=>{e===!0?u.assign(t,!0):(u.assign(t,(0,ru._)`${t} || {}`),jc(u,t,e))}),mergeValues:(u,e)=>u===!0?!0:{...u,...e},resultToName:ym}),items:ED({mergeNames:(u,e,t)=>u.if((0,ru._)`${t} !== true && ${e} !== undefined`,()=>u.assign(t,(0,ru._)`${e} === true ? true : ${t} > ${e} ? ${t} : ${e}`)),mergeToName:(u,e,t)=>u.if((0,ru._)`${t} !== true`,()=>u.assign(t,e===!0?!0:(0,ru._)`${t} > ${e} ? ${t} : ${e}`)),mergeValues:(u,e)=>u===!0?!0:Math.max(u,e),resultToName:(u,e)=>u.var("items",e)})};function ym(u,e){if(e===!0)return u.var("props",!0);const t=u.var("props",(0,ru._)`{}`);return e!==void 0&&jc(u,t,e),t}ye.evaluatedPropsToName=ym;function jc(u,e,t){Object.keys(t).forEach(r=>u.assign((0,ru._)`${e}${(0,ru.getProperty)(r)}`,!0))}ye.setEvaluated=jc;const CD={};function iv(u,e){return u.scopeValue("func",{ref:e,code:CD[e.code]||(CD[e.code]=new ev._Code(e.code))})}ye.useFunc=iv;var Cc;(function(u){u[u.Num=0]="Num",u[u.Str=1]="Str"})(Cc||(ye.Type=Cc={}));function cv(u,e,t){if(u instanceof ru.Name){const r=e===Cc.Num;return t?r?(0,ru._)`"[" + ${u} + "]"`:(0,ru._)`"['" + ${u} + "']"`:r?(0,ru._)`"/" + ${u}`:(0,ru._)`"/" + ${u}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return t?(0,ru.getProperty)(u).toString():"/"+Ic(u)}ye.getErrorPath=cv;function gm(u,e,t=u.opts.strictSchema){if(t){if(e=`strict mode: ${e}`,t===!0)throw new Error(e);u.self.logger.warn(e)}}ye.checkStrictMode=gm;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});const qu=Ye,Dv={data:new qu.Name("data"),valCxt:new qu.Name("valCxt"),instancePath:new qu.Name("instancePath"),parentData:new qu.Name("parentData"),parentDataProperty:new qu.Name("parentDataProperty"),rootData:new qu.Name("rootData"),dynamicAnchors:new qu.Name("dynamicAnchors"),vErrors:new qu.Name("vErrors"),errors:new qu.Name("errors"),this:new qu.Name("this"),self:new qu.Name("self"),scope:new qu.Name("scope"),json:new qu.Name("json"),jsonPos:new qu.Name("jsonPos"),jsonLen:new qu.Name("jsonLen"),jsonPart:new qu.Name("jsonPart")};ht.default=Dv;(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.extendErrors=u.resetErrorsCount=u.reportExtraError=u.reportError=u.keyword$DataError=u.keywordError=void 0;const e=Ye,t=ye,r=ht;u.keywordError={message:({keyword:m})=>(0,e.str)`must pass "${m}" keyword validation`},u.keyword$DataError={message:({keyword:m,schemaType:p})=>p?(0,e.str)`"${m}" keyword must be ${p} ($data)`:(0,e.str)`"${m}" keyword is invalid ($data)`};function n(m,p=u.keywordError,d,h){const{it:S}=m,{gen:B,compositeRule:x,allErrors:U}=S,R=l(m,p,d);h??(x||U)?i(B,R):c(S,(0,e._)`[${R}]`)}u.reportError=n;function a(m,p=u.keywordError,d){const{it:h}=m,{gen:S,compositeRule:B,allErrors:x}=h,U=l(m,p,d);i(S,U),B||x||c(h,r.default.vErrors)}u.reportExtraError=a;function o(m,p){m.assign(r.default.errors,p),m.if((0,e._)`${r.default.vErrors} !== null`,()=>m.if(p,()=>m.assign((0,e._)`${r.default.vErrors}.length`,p),()=>m.assign(r.default.vErrors,null)))}u.resetErrorsCount=o;function s({gen:m,keyword:p,schemaValue:d,data:h,errsCount:S,it:B}){if(S===void 0)throw new Error("ajv implementation error");const x=m.name("err");m.forRange("i",S,r.default.errors,U=>{m.const(x,(0,e._)`${r.default.vErrors}[${U}]`),m.if((0,e._)`${x}.instancePath === undefined`,()=>m.assign((0,e._)`${x}.instancePath`,(0,e.strConcat)(r.default.instancePath,B.errorPath))),m.assign((0,e._)`${x}.schemaPath`,(0,e.str)`${B.errSchemaPath}/${p}`),B.opts.verbose&&(m.assign((0,e._)`${x}.schema`,d),m.assign((0,e._)`${x}.data`,h))})}u.extendErrors=s;function i(m,p){const d=m.const("err",p);m.if((0,e._)`${r.default.vErrors} === null`,()=>m.assign(r.default.vErrors,(0,e._)`[${d}]`),(0,e._)`${r.default.vErrors}.push(${d})`),m.code((0,e._)`${r.default.errors}++`)}function c(m,p){const{gen:d,validateName:h,schemaEnv:S}=m;S.$async?d.throw((0,e._)`new ${m.ValidationError}(${p})`):(d.assign((0,e._)`${h}.errors`,p),d.return(!1))}const D={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function l(m,p,d){const{createErrors:h}=m.it;return h===!1?(0,e._)`{}`:f(m,p,d)}function f(m,p,d={}){const{gen:h,it:S}=m,B=[C(S,d),F(m,d)];return A(m,p,B),h.object(...B)}function C({errorPath:m},{instancePath:p}){const d=p?(0,e.str)`${m}${(0,t.getErrorPath)(p,t.Type.Str)}`:m;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,d)]}function F({keyword:m,it:{errSchemaPath:p}},{schemaPath:d,parentSchema:h}){let S=h?p:(0,e.str)`${p}/${m}`;return d&&(S=(0,e.str)`${S}${(0,t.getErrorPath)(d,t.Type.Str)}`),[D.schemaPath,S]}function A(m,{params:p,message:d},h){const{keyword:S,data:B,schemaValue:x,it:U}=m,{opts:R,propertyName:T,topSchemaRef:L,schemaPath:J}=U;h.push([D.keyword,S],[D.params,typeof p=="function"?p(m):p||(0,e._)`{}`]),R.messages&&h.push([D.message,typeof d=="function"?d(m):d]),R.verbose&&h.push([D.schema,x],[D.parentSchema,(0,e._)`${L}${J}`],[r.default.data,B]),T&&h.push([D.propertyName,T])}})(on);Object.defineProperty(_r,"__esModule",{value:!0});_r.boolOrEmptySchema=_r.topBoolOrEmptySchema=void 0;const lv=on,dv=Ye,fv=ht,pv={message:"boolean schema is false"};function Fv(u){const{gen:e,schema:t,validateName:r}=u;t===!1?bm(u,!1):typeof t=="object"&&t.$async===!0?e.return(fv.default.data):(e.assign((0,dv._)`${r}.errors`,null),e.return(!0))}_r.topBoolOrEmptySchema=Fv;function mv(u,e){const{gen:t,schema:r}=u;r===!1?(t.var(e,!1),bm(u)):t.var(e,!0)}_r.boolOrEmptySchema=mv;function bm(u,e){const{gen:t,data:r}=u,n={gen:t,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,lv.reportError)(n,pv,void 0,e)}var Cu={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.getRules=Zt.isJSONType=void 0;const hv=["string","number","integer","boolean","null","object","array"],Ev=new Set(hv);function Cv(u){return typeof u=="string"&&Ev.has(u)}Zt.isJSONType=Cv;function Av(){const u={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...u,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},u.number,u.string,u.array,u.object],post:{rules:[]},all:{},keywords:{}}}Zt.getRules=Av;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.shouldUseRule=yt.shouldUseGroup=yt.schemaHasRulesForType=void 0;function vv({schema:u,self:e},t){const r=e.RULES.types[t];return r&&r!==!0&&Bm(u,r)}yt.schemaHasRulesForType=vv;function Bm(u,e){return e.rules.some(t=>_m(u,t))}yt.shouldUseGroup=Bm;function _m(u,e){var t;return u[e.keyword]!==void 0||((t=e.definition.implements)===null||t===void 0?void 0:t.some(r=>u[r]!==void 0))}yt.shouldUseRule=_m;Object.defineProperty(Cu,"__esModule",{value:!0});Cu.reportTypeError=Cu.checkDataTypes=Cu.checkDataType=Cu.coerceAndCheckDataType=Cu.getJSONTypes=Cu.getSchemaTypes=Cu.DataType=void 0;const yv=Zt,gv=yt,bv=on,ze=Ye,Sm=ye;var yr;(function(u){u[u.Correct=0]="Correct",u[u.Wrong=1]="Wrong"})(yr||(Cu.DataType=yr={}));function Bv(u){const e=$m(u.type);if(e.includes("null")){if(u.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&u.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');u.nullable===!0&&e.push("null")}return e}Cu.getSchemaTypes=Bv;function $m(u){const e=Array.isArray(u)?u:u?[u]:[];if(e.every(yv.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Cu.getJSONTypes=$m;function _v(u,e){const{gen:t,data:r,opts:n}=u,a=Sv(e,n.coerceTypes),o=e.length>0&&!(a.length===0&&e.length===1&&(0,gv.schemaHasRulesForType)(u,e[0]));if(o){const s=xc(e,r,n.strictNumbers,yr.Wrong);t.if(s,()=>{a.length?$v(u,e,a):Rc(u)})}return o}Cu.coerceAndCheckDataType=_v;const wm=new Set(["string","number","integer","boolean","null"]);function Sv(u,e){return e?u.filter(t=>wm.has(t)||e==="array"&&t==="array"):[]}function $v(u,e,t){const{gen:r,data:n,opts:a}=u,o=r.let("dataType",(0,ze._)`typeof ${n}`),s=r.let("coerced",(0,ze._)`undefined`);a.coerceTypes==="array"&&r.if((0,ze._)`${o} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>r.assign(n,(0,ze._)`${n}[0]`).assign(o,(0,ze._)`typeof ${n}`).if(xc(e,n,a.strictNumbers),()=>r.assign(s,n))),r.if((0,ze._)`${s} !== undefined`);for(const c of t)(wm.has(c)||c==="array"&&a.coerceTypes==="array")&&i(c);r.else(),Rc(u),r.endIf(),r.if((0,ze._)`${s} !== undefined`,()=>{r.assign(n,s),wv(u,s)});function i(c){switch(c){case"string":r.elseIf((0,ze._)`${o} == "number" || ${o} == "boolean"`).assign(s,(0,ze._)`"" + ${n}`).elseIf((0,ze._)`${n} === null`).assign(s,(0,ze._)`""`);return;case"number":r.elseIf((0,ze._)`${o} == "boolean" || ${n} === null
              || (${o} == "string" && ${n} && ${n} == +${n})`).assign(s,(0,ze._)`+${n}`);return;case"integer":r.elseIf((0,ze._)`${o} === "boolean" || ${n} === null
              || (${o} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(s,(0,ze._)`+${n}`);return;case"boolean":r.elseIf((0,ze._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(s,!1).elseIf((0,ze._)`${n} === "true" || ${n} === 1`).assign(s,!0);return;case"null":r.elseIf((0,ze._)`${n} === "" || ${n} === 0 || ${n} === false`),r.assign(s,null);return;case"array":r.elseIf((0,ze._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${n} === null`).assign(s,(0,ze._)`[${n}]`)}}}function wv({gen:u,parentData:e,parentDataProperty:t},r){u.if((0,ze._)`${e} !== undefined`,()=>u.assign((0,ze._)`${e}[${t}]`,r))}function Ac(u,e,t,r=yr.Correct){const n=r===yr.Correct?ze.operators.EQ:ze.operators.NEQ;let a;switch(u){case"null":return(0,ze._)`${e} ${n} null`;case"array":a=(0,ze._)`Array.isArray(${e})`;break;case"object":a=(0,ze._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=o((0,ze._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=o();break;default:return(0,ze._)`typeof ${e} ${n} ${u}`}return r===yr.Correct?a:(0,ze.not)(a);function o(s=ze.nil){return(0,ze.and)((0,ze._)`typeof ${e} == "number"`,s,t?(0,ze._)`isFinite(${e})`:ze.nil)}}Cu.checkDataType=Ac;function xc(u,e,t,r){if(u.length===1)return Ac(u[0],e,t,r);let n;const a=(0,Sm.toHash)(u);if(a.array&&a.object){const o=(0,ze._)`typeof ${e} != "object"`;n=a.null?o:(0,ze._)`!${e} || ${o}`,delete a.null,delete a.array,delete a.object}else n=ze.nil;a.number&&delete a.integer;for(const o in a)n=(0,ze.and)(n,Ac(o,e,t,r));return n}Cu.checkDataTypes=xc;const kv={message:({schema:u})=>`must be ${u}`,params:({schema:u,schemaValue:e})=>typeof u=="string"?(0,ze._)`{type: ${u}}`:(0,ze._)`{type: ${e}}`};function Rc(u){const e=qv(u);(0,bv.reportError)(e,kv)}Cu.reportTypeError=Rc;function qv(u){const{gen:e,data:t,schema:r}=u,n=(0,Sm.schemaRefOrVal)(u,r,"type");return{gen:e,keyword:"type",data:t,schema:r.type,schemaCode:n,schemaValue:n,parentSchema:r,params:{},it:u}}var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.assignDefaults=void 0;const nr=Ye,Tv=ye;function Pv(u,e){const{properties:t,items:r}=u.schema;if(e==="object"&&t)for(const n in t)AD(u,n,t[n].default);else e==="array"&&Array.isArray(r)&&r.forEach((n,a)=>AD(u,a,n.default))}aa.assignDefaults=Pv;function AD(u,e,t){const{gen:r,compositeRule:n,data:a,opts:o}=u;if(t===void 0)return;const s=(0,nr._)`${a}${(0,nr.getProperty)(e)}`;if(n){(0,Tv.checkStrictMode)(u,`default is ignored for: ${s}`);return}let i=(0,nr._)`${s} === undefined`;o.useDefaults==="empty"&&(i=(0,nr._)`${i} || ${s} === null || ${s} === ""`),r.if(i,(0,nr._)`${s} = ${(0,nr.stringify)(t)}`)}var Ft={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.validateUnion=Ze.validateArray=Ze.usePattern=Ze.callValidateCode=Ze.schemaProperties=Ze.allSchemaProperties=Ze.noPropertyInData=Ze.propertyInData=Ze.isOwnProperty=Ze.hasPropFunc=Ze.reportMissingProp=Ze.checkMissingProp=Ze.checkReportMissingProp=void 0;const su=Ye,Nc=ye,wt=ht,Ov=ye;function Iv(u,e){const{gen:t,data:r,it:n}=u;t.if(Uc(t,r,e,n.opts.ownProperties),()=>{u.setParams({missingProperty:(0,su._)`${e}`},!0),u.error()})}Ze.checkReportMissingProp=Iv;function jv({gen:u,data:e,it:{opts:t}},r,n){return(0,su.or)(...r.map(a=>(0,su.and)(Uc(u,e,a,t.ownProperties),(0,su._)`${n} = ${a}`)))}Ze.checkMissingProp=jv;function xv(u,e){u.setParams({missingProperty:e},!0),u.error()}Ze.reportMissingProp=xv;function km(u){return u.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,su._)`Object.prototype.hasOwnProperty`})}Ze.hasPropFunc=km;function Mc(u,e,t){return(0,su._)`${km(u)}.call(${e}, ${t})`}Ze.isOwnProperty=Mc;function Rv(u,e,t,r){const n=(0,su._)`${e}${(0,su.getProperty)(t)} !== undefined`;return r?(0,su._)`${n} && ${Mc(u,e,t)}`:n}Ze.propertyInData=Rv;function Uc(u,e,t,r){const n=(0,su._)`${e}${(0,su.getProperty)(t)} === undefined`;return r?(0,su.or)(n,(0,su.not)(Mc(u,e,t))):n}Ze.noPropertyInData=Uc;function qm(u){return u?Object.keys(u).filter(e=>e!=="__proto__"):[]}Ze.allSchemaProperties=qm;function Nv(u,e){return qm(e).filter(t=>!(0,Nc.alwaysValidSchema)(u,e[t]))}Ze.schemaProperties=Nv;function Mv({schemaCode:u,data:e,it:{gen:t,topSchemaRef:r,schemaPath:n,errorPath:a},it:o},s,i,c){const D=c?(0,su._)`${u}, ${e}, ${r}${n}`:e,l=[[wt.default.instancePath,(0,su.strConcat)(wt.default.instancePath,a)],[wt.default.parentData,o.parentData],[wt.default.parentDataProperty,o.parentDataProperty],[wt.default.rootData,wt.default.rootData]];o.opts.dynamicRef&&l.push([wt.default.dynamicAnchors,wt.default.dynamicAnchors]);const f=(0,su._)`${D}, ${t.object(...l)}`;return i!==su.nil?(0,su._)`${s}.call(${i}, ${f})`:(0,su._)`${s}(${f})`}Ze.callValidateCode=Mv;const Uv=(0,su._)`new RegExp`;function Vv({gen:u,it:{opts:e}},t){const r=e.unicodeRegExp?"u":"",{regExp:n}=e.code,a=n(t,r);return u.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,su._)`${n.code==="new RegExp"?Uv:(0,Ov.useFunc)(u,n)}(${t}, ${r})`})}Ze.usePattern=Vv;function zv(u){const{gen:e,data:t,keyword:r,it:n}=u,a=e.name("valid");if(n.allErrors){const s=e.let("valid",!0);return o(()=>e.assign(s,!1)),s}return e.var(a,!0),o(()=>e.break()),a;function o(s){const i=e.const("len",(0,su._)`${t}.length`);e.forRange("i",0,i,c=>{u.subschema({keyword:r,dataProp:c,dataPropType:Nc.Type.Num},a),e.if((0,su.not)(a),s)})}}Ze.validateArray=zv;function Wv(u){const{gen:e,schema:t,keyword:r,it:n}=u;if(!Array.isArray(t))throw new Error("ajv implementation error");if(t.some(i=>(0,Nc.alwaysValidSchema)(n,i))&&!n.opts.unevaluated)return;const o=e.let("valid",!1),s=e.name("_valid");e.block(()=>t.forEach((i,c)=>{const D=u.subschema({keyword:r,schemaProp:c,compositeRule:!0},s);e.assign(o,(0,su._)`${o} || ${s}`),u.mergeValidEvaluated(D,s)||e.if((0,su.not)(o))})),u.result(o,()=>u.reset(),()=>u.error(!0))}Ze.validateUnion=Wv;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.validateKeywordUsage=Ft.validSchemaType=Ft.funcKeywordCode=Ft.macroKeywordCode=void 0;const Ou=Ye,Lt=ht,Lv=Ze,Gv=on;function Hv(u,e){const{gen:t,keyword:r,schema:n,parentSchema:a,it:o}=u,s=e.macro.call(o.self,n,a,o),i=Tm(t,r,s);o.opts.validateSchema!==!1&&o.self.validateSchema(s,!0);const c=t.name("valid");u.subschema({schema:s,schemaPath:Ou.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:i,compositeRule:!0},c),u.pass(c,()=>u.error(!0))}Ft.macroKeywordCode=Hv;function Jv(u,e){var t;const{gen:r,keyword:n,schema:a,parentSchema:o,$data:s,it:i}=u;Zv(i,e);const c=!s&&e.compile?e.compile.call(i.self,a,o,i):e.validate,D=Tm(r,n,c),l=r.let("valid");u.block$data(l,f),u.ok((t=e.valid)!==null&&t!==void 0?t:l);function f(){if(e.errors===!1)A(),e.modifying&&vD(u),m(()=>u.error());else{const p=e.async?C():F();e.modifying&&vD(u),m(()=>Kv(u,p))}}function C(){const p=r.let("ruleErrs",null);return r.try(()=>A((0,Ou._)`await `),d=>r.assign(l,!1).if((0,Ou._)`${d} instanceof ${i.ValidationError}`,()=>r.assign(p,(0,Ou._)`${d}.errors`),()=>r.throw(d))),p}function F(){const p=(0,Ou._)`${D}.errors`;return r.assign(p,null),A(Ou.nil),p}function A(p=e.async?(0,Ou._)`await `:Ou.nil){const d=i.opts.passContext?Lt.default.this:Lt.default.self,h=!("compile"in e&&!s||e.schema===!1);r.assign(l,(0,Ou._)`${p}${(0,Lv.callValidateCode)(u,D,d,h)}`,e.modifying)}function m(p){var d;r.if((0,Ou.not)((d=e.valid)!==null&&d!==void 0?d:l),p)}}Ft.funcKeywordCode=Jv;function vD(u){const{gen:e,data:t,it:r}=u;e.if(r.parentData,()=>e.assign(t,(0,Ou._)`${r.parentData}[${r.parentDataProperty}]`))}function Kv(u,e){const{gen:t}=u;t.if((0,Ou._)`Array.isArray(${e})`,()=>{t.assign(Lt.default.vErrors,(0,Ou._)`${Lt.default.vErrors} === null ? ${e} : ${Lt.default.vErrors}.concat(${e})`).assign(Lt.default.errors,(0,Ou._)`${Lt.default.vErrors}.length`),(0,Gv.extendErrors)(u)},()=>u.error())}function Zv({schemaEnv:u},e){if(e.async&&!u.$async)throw new Error("async keyword in sync schema")}function Tm(u,e,t){if(t===void 0)throw new Error(`keyword "${e}" failed to compile`);return u.scopeValue("keyword",typeof t=="function"?{ref:t}:{ref:t,code:(0,Ou.stringify)(t)})}function Yv(u,e,t=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(u):r==="object"?u&&typeof u=="object"&&!Array.isArray(u):typeof u==r||t&&typeof u>"u")}Ft.validSchemaType=Yv;function Qv({schema:u,opts:e,self:t,errSchemaPath:r},n,a){if(Array.isArray(n.keyword)?!n.keyword.includes(a):n.keyword!==a)throw new Error("ajv implementation error");const o=n.dependencies;if(o!=null&&o.some(s=>!Object.prototype.hasOwnProperty.call(u,s)))throw new Error(`parent schema must have dependencies of ${a}: ${o.join(",")}`);if(n.validateSchema&&!n.validateSchema(u[a])){const i=`keyword "${a}" value is invalid at path "${r}": `+t.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")t.logger.error(i);else throw new Error(i)}}Ft.validateKeywordUsage=Qv;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.extendSubschemaMode=Tt.extendSubschemaData=Tt.getSubschema=void 0;const ft=Ye,Pm=ye;function Xv(u,{keyword:e,schemaProp:t,schema:r,schemaPath:n,errSchemaPath:a,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const s=u.schema[e];return t===void 0?{schema:s,schemaPath:(0,ft._)`${u.schemaPath}${(0,ft.getProperty)(e)}`,errSchemaPath:`${u.errSchemaPath}/${e}`}:{schema:s[t],schemaPath:(0,ft._)`${u.schemaPath}${(0,ft.getProperty)(e)}${(0,ft.getProperty)(t)}`,errSchemaPath:`${u.errSchemaPath}/${e}/${(0,Pm.escapeFragment)(t)}`}}if(r!==void 0){if(n===void 0||a===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:n,topSchemaRef:o,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}Tt.getSubschema=Xv;function ey(u,e,{dataProp:t,dataPropType:r,data:n,dataTypes:a,propertyName:o}){if(n!==void 0&&t!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:s}=e;if(t!==void 0){const{errorPath:c,dataPathArr:D,opts:l}=e,f=s.let("data",(0,ft._)`${e.data}${(0,ft.getProperty)(t)}`,!0);i(f),u.errorPath=(0,ft.str)`${c}${(0,Pm.getErrorPath)(t,r,l.jsPropertySyntax)}`,u.parentDataProperty=(0,ft._)`${t}`,u.dataPathArr=[...D,u.parentDataProperty]}if(n!==void 0){const c=n instanceof ft.Name?n:s.let("data",n,!0);i(c),o!==void 0&&(u.propertyName=o)}a&&(u.dataTypes=a);function i(c){u.data=c,u.dataLevel=e.dataLevel+1,u.dataTypes=[],e.definedProperties=new Set,u.parentData=e.data,u.dataNames=[...e.dataNames,c]}}Tt.extendSubschemaData=ey;function uy(u,{jtdDiscriminator:e,jtdMetadata:t,compositeRule:r,createErrors:n,allErrors:a}){r!==void 0&&(u.compositeRule=r),n!==void 0&&(u.createErrors=n),a!==void 0&&(u.allErrors=a),u.jtdDiscriminator=e,u.jtdMetadata=t}Tt.extendSubschemaMode=uy;var $u={},Om=function u(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!u(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){var o=a[n];if(!u(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},Im={exports:{}},qt=Im.exports=function(u,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var r=typeof t=="function"?t:t.pre||function(){},n=t.post||function(){};Wn(e,r,n,u,"",u)};qt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};qt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};qt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};qt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Wn(u,e,t,r,n,a,o,s,i,c){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,n,a,o,s,i,c);for(var D in r){var l=r[D];if(Array.isArray(l)){if(D in qt.arrayKeywords)for(var f=0;f<l.length;f++)Wn(u,e,t,l[f],n+"/"+D+"/"+f,a,n,D,r,f)}else if(D in qt.propsKeywords){if(l&&typeof l=="object")for(var C in l)Wn(u,e,t,l[C],n+"/"+D+"/"+ty(C),a,n,D,r,C)}else(D in qt.keywords||u.allKeys&&!(D in qt.skipKeywords))&&Wn(u,e,t,l,n+"/"+D,a,n,D,r)}t(r,n,a,o,s,i,c)}}function ty(u){return u.replace(/~/g,"~0").replace(/\//g,"~1")}var ry=Im.exports;Object.defineProperty($u,"__esModule",{value:!0});$u.getSchemaRefs=$u.resolveUrl=$u.normalizeId=$u._getFullPath=$u.getFullPath=$u.inlineRef=void 0;const ny=ye,ay=Om,oy=ry,sy=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function iy(u,e=!0){return typeof u=="boolean"?!0:e===!0?!vc(u):e?jm(u)<=e:!1}$u.inlineRef=iy;const cy=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function vc(u){for(const e in u){if(cy.has(e))return!0;const t=u[e];if(Array.isArray(t)&&t.some(vc)||typeof t=="object"&&vc(t))return!0}return!1}function jm(u){let e=0;for(const t in u){if(t==="$ref")return 1/0;if(e++,!sy.has(t)&&(typeof u[t]=="object"&&(0,ny.eachItem)(u[t],r=>e+=jm(r)),e===1/0))return 1/0}return e}function xm(u,e="",t){t!==!1&&(e=gr(e));const r=u.parse(e);return Rm(u,r)}$u.getFullPath=xm;function Rm(u,e){return u.serialize(e).split("#")[0]+"#"}$u._getFullPath=Rm;const Dy=/#\/?$/;function gr(u){return u?u.replace(Dy,""):""}$u.normalizeId=gr;function ly(u,e,t){return t=gr(t),u.resolve(e,t)}$u.resolveUrl=ly;const dy=/^[a-z_][-a-z0-9._]*$/i;function fy(u,e){if(typeof u=="boolean")return{};const{schemaId:t,uriResolver:r}=this.opts,n=gr(u[t]||e),a={"":n},o=xm(r,n,!1),s={},i=new Set;return oy(u,{allKeys:!0},(l,f,C,F)=>{if(F===void 0)return;const A=o+f;let m=a[F];typeof l[t]=="string"&&(m=p.call(this,l[t])),d.call(this,l.$anchor),d.call(this,l.$dynamicAnchor),a[f]=m;function p(h){const S=this.opts.uriResolver.resolve;if(h=gr(m?S(m,h):h),i.has(h))throw D(h);i.add(h);let B=this.refs[h];return typeof B=="string"&&(B=this.refs[B]),typeof B=="object"?c(l,B.schema,h):h!==gr(A)&&(h[0]==="#"?(c(l,s[h],h),s[h]=l):this.refs[h]=A),h}function d(h){if(typeof h=="string"){if(!dy.test(h))throw new Error(`invalid anchor "${h}"`);p.call(this,`#${h}`)}}}),s;function c(l,f,C){if(f!==void 0&&!ay(l,f))throw D(C)}function D(l){return new Error(`reference "${l}" resolves to more than one schema`)}}$u.getSchemaRefs=fy;Object.defineProperty(at,"__esModule",{value:!0});at.getData=at.KeywordCxt=at.validateFunctionCode=void 0;const Nm=_r,yD=Cu,Vc=yt,Qn=Cu,py=aa,Zr=Ft,Oa=Tt,_e=Ye,Oe=ht,Fy=$u,gt=ye,Mr=on;function my(u){if(Vm(u)&&(zm(u),Um(u))){Cy(u);return}Mm(u,()=>(0,Nm.topBoolOrEmptySchema)(u))}at.validateFunctionCode=my;function Mm({gen:u,validateName:e,schema:t,schemaEnv:r,opts:n},a){n.code.es5?u.func(e,(0,_e._)`${Oe.default.data}, ${Oe.default.valCxt}`,r.$async,()=>{u.code((0,_e._)`"use strict"; ${gD(t,n)}`),Ey(u,n),u.code(a)}):u.func(e,(0,_e._)`${Oe.default.data}, ${hy(n)}`,r.$async,()=>u.code(gD(t,n)).code(a))}function hy(u){return(0,_e._)`{${Oe.default.instancePath}="", ${Oe.default.parentData}, ${Oe.default.parentDataProperty}, ${Oe.default.rootData}=${Oe.default.data}${u.dynamicRef?(0,_e._)`, ${Oe.default.dynamicAnchors}={}`:_e.nil}}={}`}function Ey(u,e){u.if(Oe.default.valCxt,()=>{u.var(Oe.default.instancePath,(0,_e._)`${Oe.default.valCxt}.${Oe.default.instancePath}`),u.var(Oe.default.parentData,(0,_e._)`${Oe.default.valCxt}.${Oe.default.parentData}`),u.var(Oe.default.parentDataProperty,(0,_e._)`${Oe.default.valCxt}.${Oe.default.parentDataProperty}`),u.var(Oe.default.rootData,(0,_e._)`${Oe.default.valCxt}.${Oe.default.rootData}`),e.dynamicRef&&u.var(Oe.default.dynamicAnchors,(0,_e._)`${Oe.default.valCxt}.${Oe.default.dynamicAnchors}`)},()=>{u.var(Oe.default.instancePath,(0,_e._)`""`),u.var(Oe.default.parentData,(0,_e._)`undefined`),u.var(Oe.default.parentDataProperty,(0,_e._)`undefined`),u.var(Oe.default.rootData,Oe.default.data),e.dynamicRef&&u.var(Oe.default.dynamicAnchors,(0,_e._)`{}`)})}function Cy(u){const{schema:e,opts:t,gen:r}=u;Mm(u,()=>{t.$comment&&e.$comment&&Lm(u),by(u),r.let(Oe.default.vErrors,null),r.let(Oe.default.errors,0),t.unevaluated&&Ay(u),Wm(u),Sy(u)})}function Ay(u){const{gen:e,validateName:t}=u;u.evaluated=e.const("evaluated",(0,_e._)`${t}.evaluated`),e.if((0,_e._)`${u.evaluated}.dynamicProps`,()=>e.assign((0,_e._)`${u.evaluated}.props`,(0,_e._)`undefined`)),e.if((0,_e._)`${u.evaluated}.dynamicItems`,()=>e.assign((0,_e._)`${u.evaluated}.items`,(0,_e._)`undefined`))}function gD(u,e){const t=typeof u=="object"&&u[e.schemaId];return t&&(e.code.source||e.code.process)?(0,_e._)`/*# sourceURL=${t} */`:_e.nil}function vy(u,e){if(Vm(u)&&(zm(u),Um(u))){yy(u,e);return}(0,Nm.boolOrEmptySchema)(u,e)}function Um({schema:u,self:e}){if(typeof u=="boolean")return!u;for(const t in u)if(e.RULES.all[t])return!0;return!1}function Vm(u){return typeof u.schema!="boolean"}function yy(u,e){const{schema:t,gen:r,opts:n}=u;n.$comment&&t.$comment&&Lm(u),By(u),_y(u);const a=r.const("_errs",Oe.default.errors);Wm(u,a),r.var(e,(0,_e._)`${a} === ${Oe.default.errors}`)}function zm(u){(0,gt.checkUnknownRules)(u),gy(u)}function Wm(u,e){if(u.opts.jtd)return bD(u,[],!1,e);const t=(0,yD.getSchemaTypes)(u.schema),r=(0,yD.coerceAndCheckDataType)(u,t);bD(u,t,!r,e)}function gy(u){const{schema:e,errSchemaPath:t,opts:r,self:n}=u;e.$ref&&r.ignoreKeywordsWithRef&&(0,gt.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${t}"`)}function by(u){const{schema:e,opts:t}=u;e.default!==void 0&&t.useDefaults&&t.strictSchema&&(0,gt.checkStrictMode)(u,"default is ignored in the schema root")}function By(u){const e=u.schema[u.opts.schemaId];e&&(u.baseId=(0,Fy.resolveUrl)(u.opts.uriResolver,u.baseId,e))}function _y(u){if(u.schema.$async&&!u.schemaEnv.$async)throw new Error("async schema in sync schema")}function Lm({gen:u,schemaEnv:e,schema:t,errSchemaPath:r,opts:n}){const a=t.$comment;if(n.$comment===!0)u.code((0,_e._)`${Oe.default.self}.logger.log(${a})`);else if(typeof n.$comment=="function"){const o=(0,_e.str)`${r}/$comment`,s=u.scopeValue("root",{ref:e.root});u.code((0,_e._)`${Oe.default.self}.opts.$comment(${a}, ${o}, ${s}.schema)`)}}function Sy(u){const{gen:e,schemaEnv:t,validateName:r,ValidationError:n,opts:a}=u;t.$async?e.if((0,_e._)`${Oe.default.errors} === 0`,()=>e.return(Oe.default.data),()=>e.throw((0,_e._)`new ${n}(${Oe.default.vErrors})`)):(e.assign((0,_e._)`${r}.errors`,Oe.default.vErrors),a.unevaluated&&$y(u),e.return((0,_e._)`${Oe.default.errors} === 0`))}function $y({gen:u,evaluated:e,props:t,items:r}){t instanceof _e.Name&&u.assign((0,_e._)`${e}.props`,t),r instanceof _e.Name&&u.assign((0,_e._)`${e}.items`,r)}function bD(u,e,t,r){const{gen:n,schema:a,data:o,allErrors:s,opts:i,self:c}=u,{RULES:D}=c;if(a.$ref&&(i.ignoreKeywordsWithRef||!(0,gt.schemaHasRulesButRef)(a,D))){n.block(()=>Jm(u,"$ref",D.all.$ref.definition));return}i.jtd||wy(u,e),n.block(()=>{for(const f of D.rules)l(f);l(D.post)});function l(f){(0,Vc.shouldUseGroup)(a,f)&&(f.type?(n.if((0,Qn.checkDataType)(f.type,o,i.strictNumbers)),BD(u,f),e.length===1&&e[0]===f.type&&t&&(n.else(),(0,Qn.reportTypeError)(u)),n.endIf()):BD(u,f),s||n.if((0,_e._)`${Oe.default.errors} === ${r||0}`))}}function BD(u,e){const{gen:t,schema:r,opts:{useDefaults:n}}=u;n&&(0,py.assignDefaults)(u,e.type),t.block(()=>{for(const a of e.rules)(0,Vc.shouldUseRule)(r,a)&&Jm(u,a.keyword,a.definition,e.type)})}function wy(u,e){u.schemaEnv.meta||!u.opts.strictTypes||(ky(u,e),u.opts.allowUnionTypes||qy(u,e),Ty(u,u.dataTypes))}function ky(u,e){if(e.length){if(!u.dataTypes.length){u.dataTypes=e;return}e.forEach(t=>{Gm(u.dataTypes,t)||zc(u,`type "${t}" not allowed by context "${u.dataTypes.join(",")}"`)}),Oy(u,e)}}function qy(u,e){e.length>1&&!(e.length===2&&e.includes("null"))&&zc(u,"use allowUnionTypes to allow union type keyword")}function Ty(u,e){const t=u.self.RULES.all;for(const r in t){const n=t[r];if(typeof n=="object"&&(0,Vc.shouldUseRule)(u.schema,n)){const{type:a}=n.definition;a.length&&!a.some(o=>Py(e,o))&&zc(u,`missing type "${a.join(",")}" for keyword "${r}"`)}}}function Py(u,e){return u.includes(e)||e==="number"&&u.includes("integer")}function Gm(u,e){return u.includes(e)||e==="integer"&&u.includes("number")}function Oy(u,e){const t=[];for(const r of u.dataTypes)Gm(e,r)?t.push(r):e.includes("integer")&&r==="number"&&t.push("integer");u.dataTypes=t}function zc(u,e){const t=u.schemaEnv.baseId+u.errSchemaPath;e+=` at "${t}" (strictTypes)`,(0,gt.checkStrictMode)(u,e,u.opts.strictTypes)}class Hm{constructor(e,t,r){if((0,Zr.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,gt.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",Km(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Zr.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:t.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Oe.default.errors))}result(e,t,r){this.failResult((0,_e.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,_e.not)(e),void 0,t)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail((0,_e._)`${t} !== undefined && (${(0,_e.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t){this.setParams(t),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,t){(e?Mr.reportExtraError:Mr.reportError)(this,this.def.error,t)}$dataError(){(0,Mr.reportError)(this,this.def.$dataError||Mr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Mr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=_e.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=_e.nil,t=_e.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:a,def:o}=this;r.if((0,_e.or)((0,_e._)`${n} === undefined`,t)),e!==_e.nil&&r.assign(e,!0),(a.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==_e.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:a}=this;return(0,_e.or)(o(),s());function o(){if(r.length){if(!(t instanceof _e.Name))throw new Error("ajv implementation error");const i=Array.isArray(r)?r:[r];return(0,_e._)`${(0,Qn.checkDataTypes)(i,t,a.opts.strictNumbers,Qn.DataType.Wrong)}`}return _e.nil}function s(){if(n.validateSchema){const i=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,_e._)`!${i}(${t})`}return _e.nil}}subschema(e,t){const r=(0,Oa.getSubschema)(this.it,e);(0,Oa.extendSubschemaData)(r,this.it,e),(0,Oa.extendSubschemaMode)(r,e);const n={...this.it,...r,items:void 0,props:void 0};return vy(n,t),n}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=gt.mergeEvaluated.props(n,e.props,r.props,t)),r.items!==!0&&e.items!==void 0&&(r.items=gt.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return n.if(t,()=>this.mergeEvaluated(e,_e.Name)),!0}}at.KeywordCxt=Hm;function Jm(u,e,t,r){const n=new Hm(u,t,e);"code"in t?t.code(n,r):n.$data&&t.validate?(0,Zr.funcKeywordCode)(n,t):"macro"in t?(0,Zr.macroKeywordCode)(n,t):(t.compile||t.validate)&&(0,Zr.funcKeywordCode)(n,t)}const Iy=/^\/(?:[^~]|~0|~1)*$/,jy=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Km(u,{dataLevel:e,dataNames:t,dataPathArr:r}){let n,a;if(u==="")return Oe.default.rootData;if(u[0]==="/"){if(!Iy.test(u))throw new Error(`Invalid JSON-pointer: ${u}`);n=u,a=Oe.default.rootData}else{const c=jy.exec(u);if(!c)throw new Error(`Invalid JSON-pointer: ${u}`);const D=+c[1];if(n=c[2],n==="#"){if(D>=e)throw new Error(i("property/index",D));return r[e-D]}if(D>e)throw new Error(i("data",D));if(a=t[e-D],!n)return a}let o=a;const s=n.split("/");for(const c of s)c&&(a=(0,_e._)`${a}${(0,_e.getProperty)((0,gt.unescapeJsonPointer)(c))}`,o=(0,_e._)`${o} && ${a}`);return o;function i(c,D){return`Cannot access ${c} ${D} levels up, current level is ${e}`}}at.getData=Km;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});class xy extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}sn.default=xy;var $r={};Object.defineProperty($r,"__esModule",{value:!0});const Ia=$u;class Ry extends Error{constructor(e,t,r,n){super(n||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,Ia.resolveUrl)(e,t,r),this.missingSchema=(0,Ia.normalizeId)((0,Ia.getFullPath)(e,this.missingRef))}}$r.default=Ry;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.resolveSchema=Ru.getCompilingSchema=Ru.resolveRef=Ru.compileSchema=Ru.SchemaEnv=void 0;const Xu=Ye,Ny=sn,zt=ht,ut=$u,_D=ye,My=at;class oa{constructor(e){var t;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(t=e.baseId)!==null&&t!==void 0?t:(0,ut.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Ru.SchemaEnv=oa;function Wc(u){const e=Zm.call(this,u);if(e)return e;const t=(0,ut.getFullPath)(this.opts.uriResolver,u.root.baseId),{es5:r,lines:n}=this.opts.code,{ownProperties:a}=this.opts,o=new Xu.CodeGen(this.scope,{es5:r,lines:n,ownProperties:a});let s;u.$async&&(s=o.scopeValue("Error",{ref:Ny.default,code:(0,Xu._)`require("ajv/dist/runtime/validation_error").default`}));const i=o.scopeName("validate");u.validateName=i;const c={gen:o,allErrors:this.opts.allErrors,data:zt.default.data,parentData:zt.default.parentData,parentDataProperty:zt.default.parentDataProperty,dataNames:[zt.default.data],dataPathArr:[Xu.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:u.schema,code:(0,Xu.stringify)(u.schema)}:{ref:u.schema}),validateName:i,ValidationError:s,schema:u.schema,schemaEnv:u,rootId:t,baseId:u.baseId||t,schemaPath:Xu.nil,errSchemaPath:u.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Xu._)`""`,opts:this.opts,self:this};let D;try{this._compilations.add(u),(0,My.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);const l=o.toString();D=`${o.scopeRefs(zt.default.scope)}return ${l}`,this.opts.code.process&&(D=this.opts.code.process(D,u));const C=new Function(`${zt.default.self}`,`${zt.default.scope}`,D)(this,this.scope.get());if(this.scope.value(i,{ref:C}),C.errors=null,C.schema=u.schema,C.schemaEnv=u,u.$async&&(C.$async=!0),this.opts.code.source===!0&&(C.source={validateName:i,validateCode:l,scopeValues:o._values}),this.opts.unevaluated){const{props:F,items:A}=c;C.evaluated={props:F instanceof Xu.Name?void 0:F,items:A instanceof Xu.Name?void 0:A,dynamicProps:F instanceof Xu.Name,dynamicItems:A instanceof Xu.Name},C.source&&(C.source.evaluated=(0,Xu.stringify)(C.evaluated))}return u.validate=C,u}catch(l){throw delete u.validate,delete u.validateName,D&&this.logger.error("Error compiling schema, function code:",D),l}finally{this._compilations.delete(u)}}Ru.compileSchema=Wc;function Uy(u,e,t){var r;t=(0,ut.resolveUrl)(this.opts.uriResolver,e,t);const n=u.refs[t];if(n)return n;let a=Wy.call(this,u,t);if(a===void 0){const o=(r=u.localRefs)===null||r===void 0?void 0:r[t],{schemaId:s}=this.opts;o&&(a=new oa({schema:o,schemaId:s,root:u,baseId:e}))}if(a!==void 0)return u.refs[t]=Vy.call(this,a)}Ru.resolveRef=Uy;function Vy(u){return(0,ut.inlineRef)(u.schema,this.opts.inlineRefs)?u.schema:u.validate?u:Wc.call(this,u)}function Zm(u){for(const e of this._compilations)if(zy(e,u))return e}Ru.getCompilingSchema=Zm;function zy(u,e){return u.schema===e.schema&&u.root===e.root&&u.baseId===e.baseId}function Wy(u,e){let t;for(;typeof(t=this.refs[e])=="string";)e=t;return t||this.schemas[e]||sa.call(this,u,e)}function sa(u,e){const t=this.opts.uriResolver.parse(e),r=(0,ut._getFullPath)(this.opts.uriResolver,t);let n=(0,ut.getFullPath)(this.opts.uriResolver,u.baseId,void 0);if(Object.keys(u.schema).length>0&&r===n)return ja.call(this,t,u);const a=(0,ut.normalizeId)(r),o=this.refs[a]||this.schemas[a];if(typeof o=="string"){const s=sa.call(this,u,o);return typeof(s==null?void 0:s.schema)!="object"?void 0:ja.call(this,t,s)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Wc.call(this,o),a===(0,ut.normalizeId)(e)){const{schema:s}=o,{schemaId:i}=this.opts,c=s[i];return c&&(n=(0,ut.resolveUrl)(this.opts.uriResolver,n,c)),new oa({schema:s,schemaId:i,root:u,baseId:n})}return ja.call(this,t,o)}}Ru.resolveSchema=sa;const Ly=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function ja(u,{baseId:e,schema:t,root:r}){var n;if(((n=u.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(const s of u.fragment.slice(1).split("/")){if(typeof t=="boolean")return;const i=t[(0,_D.unescapeFragment)(s)];if(i===void 0)return;t=i;const c=typeof t=="object"&&t[this.opts.schemaId];!Ly.has(s)&&c&&(e=(0,ut.resolveUrl)(this.opts.uriResolver,e,c))}let a;if(typeof t!="boolean"&&t.$ref&&!(0,_D.schemaHasRulesButRef)(t,this.RULES)){const s=(0,ut.resolveUrl)(this.opts.uriResolver,e,t.$ref);a=sa.call(this,r,s)}const{schemaId:o}=this.opts;if(a=a||new oa({schema:t,schemaId:o,root:r,baseId:e}),a.schema!==a.root.schema)return a}const Gy="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Hy="Meta-schema for $data reference (JSON AnySchema extension proposal)",Jy="object",Ky=["$data"],Zy={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Yy=!1,Qy={$id:Gy,description:Hy,type:Jy,required:Ky,properties:Zy,additionalProperties:Yy};var Lc={},ia={exports:{}};const Xy={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var e2={HEX:Xy};const{HEX:u2}=e2;function Ym(u){if(Xm(u,".")<3)return{host:u,isIPV4:!1};const e=u.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[t]=e;return t?{host:r2(t,"."),isIPV4:!0}:{host:u,isIPV4:!1}}function yc(u,e=!1){let t="",r=!0;for(const n of u){if(u2[n]===void 0)return;n!=="0"&&r===!0&&(r=!1),r||(t+=n)}return e&&t.length===0&&(t="0"),t}function t2(u){let e=0;const t={error:!1,address:"",zone:""},r=[],n=[];let a=!1,o=!1,s=!1;function i(){if(n.length){if(a===!1){const c=yc(n);if(c!==void 0)r.push(c);else return t.error=!0,!1}n.length=0}return!0}for(let c=0;c<u.length;c++){const D=u[c];if(!(D==="["||D==="]"))if(D===":"){if(o===!0&&(s=!0),!i())break;if(e++,r.push(":"),e>7){t.error=!0;break}c-1>=0&&u[c-1]===":"&&(o=!0);continue}else if(D==="%"){if(!i())break;a=!0}else{n.push(D);continue}}return n.length&&(a?t.zone=n.join(""):s?r.push(n.join("")):r.push(yc(n))),t.address=r.join(""),t}function Qm(u,e={}){if(Xm(u,":")<2)return{host:u,isIPV6:!1};const t=t2(u);if(t.error)return{host:u,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,escapedHost:n,isIPV6:!0}}}function r2(u,e){let t="",r=!0;const n=u.length;for(let a=0;a<n;a++){const o=u[a];o==="0"&&r?(a+1<=n&&u[a+1]===e||a+1===n)&&(t+=o,r=!1):(o===e?r=!0:r=!1,t+=o)}return t}function Xm(u,e){let t=0;for(let r=0;r<u.length;r++)u[r]===e&&t++;return t}const SD=/^\.\.?\//u,$D=/^\/\.(?:\/|$)/u,wD=/^\/\.\.(?:\/|$)/u,n2=/^\/?(?:.|\n)*?(?=\/|$)/u;function a2(u){const e=[];for(;u.length;)if(u.match(SD))u=u.replace(SD,"");else if(u.match($D))u=u.replace($D,"/");else if(u.match(wD))u=u.replace(wD,"/"),e.pop();else if(u==="."||u==="..")u="";else{const t=u.match(n2);if(t){const r=t[0];u=u.slice(r.length),e.push(r)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function o2(u,e){const t=e!==!0?escape:unescape;return u.scheme!==void 0&&(u.scheme=t(u.scheme)),u.userinfo!==void 0&&(u.userinfo=t(u.userinfo)),u.host!==void 0&&(u.host=t(u.host)),u.path!==void 0&&(u.path=t(u.path)),u.query!==void 0&&(u.query=t(u.query)),u.fragment!==void 0&&(u.fragment=t(u.fragment)),u}function s2(u,e){const t=[];if(u.userinfo!==void 0&&(t.push(u.userinfo),t.push("@")),u.host!==void 0){let r=unescape(u.host);const n=Ym(r);if(n.isIPV4)r=n.host;else{const a=Qm(n.host,{isIPV4:!1});a.isIPV6===!0?r=`[${a.escapedHost}]`:r=u.host}t.push(r)}return(typeof u.port=="number"||typeof u.port=="string")&&(t.push(":"),t.push(String(u.port))),t.length?t.join(""):void 0}var i2={recomposeAuthority:s2,normalizeComponentEncoding:o2,removeDotSegments:a2,normalizeIPv4:Ym,normalizeIPv6:Qm,stringArrayToHexStripped:yc};const c2=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,D2=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function eh(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}function uh(u){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u}function th(u){const e=String(u.scheme).toLowerCase()==="https";return(u.port===(e?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}function l2(u){return u.secure=eh(u),u.resourceName=(u.path||"/")+(u.query?"?"+u.query:""),u.path=void 0,u.query=void 0,u}function d2(u){if((u.port===(eh(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){const[e,t]=u.resourceName.split("?");u.path=e&&e!=="/"?e:void 0,u.query=t,u.resourceName=void 0}return u.fragment=void 0,u}function f2(u,e){if(!u.path)return u.error="URN can not be parsed",u;const t=u.path.match(D2);if(t){const r=e.scheme||u.scheme||"urn";u.nid=t[1].toLowerCase(),u.nss=t[2];const n=`${r}:${e.nid||u.nid}`,a=Gc[n];u.path=void 0,a&&(u=a.parse(u,e))}else u.error=u.error||"URN can not be parsed.";return u}function p2(u,e){const t=e.scheme||u.scheme||"urn",r=u.nid.toLowerCase(),n=`${t}:${e.nid||r}`,a=Gc[n];a&&(u=a.serialize(u,e));const o=u,s=u.nss;return o.path=`${r||e.nid}:${s}`,e.skipEscape=!0,o}function F2(u,e){const t=u;return t.uuid=t.nss,t.nss=void 0,!e.tolerant&&(!t.uuid||!c2.test(t.uuid))&&(t.error=t.error||"UUID is not valid."),t}function m2(u){const e=u;return e.nss=(u.uuid||"").toLowerCase(),e}const rh={scheme:"http",domainHost:!0,parse:uh,serialize:th},h2={scheme:"https",domainHost:rh.domainHost,parse:uh,serialize:th},Ln={scheme:"ws",domainHost:!0,parse:l2,serialize:d2},E2={scheme:"wss",domainHost:Ln.domainHost,parse:Ln.parse,serialize:Ln.serialize},C2={scheme:"urn",parse:f2,serialize:p2,skipNormalize:!0},A2={scheme:"urn:uuid",parse:F2,serialize:m2,skipNormalize:!0},Gc={http:rh,https:h2,ws:Ln,wss:E2,urn:C2,"urn:uuid":A2};var v2=Gc;const{normalizeIPv6:y2,normalizeIPv4:g2,removeDotSegments:Gr,recomposeAuthority:b2,normalizeComponentEncoding:Sn}=i2,Hc=v2;function B2(u,e){return typeof u=="string"?u=mt(bt(u,e),e):typeof u=="object"&&(u=bt(mt(u,e),e)),u}function _2(u,e,t){const r=Object.assign({scheme:"null"},t),n=nh(bt(u,r),bt(e,r),r,!0);return mt(n,{...r,skipEscape:!0})}function nh(u,e,t,r){const n={};return r||(u=bt(mt(u,t),t),e=bt(mt(e,t),t)),t=t||{},!t.tolerant&&e.scheme?(n.scheme=e.scheme,n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=Gr(e.path||""),n.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=Gr(e.path||""),n.query=e.query):(e.path?(e.path.charAt(0)==="/"?n.path=Gr(e.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?n.path="/"+e.path:u.path?n.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+e.path:n.path=e.path,n.path=Gr(n.path)),n.query=e.query):(n.path=u.path,e.query!==void 0?n.query=e.query:n.query=u.query),n.userinfo=u.userinfo,n.host=u.host,n.port=u.port),n.scheme=u.scheme),n.fragment=e.fragment,n}function S2(u,e,t){return typeof u=="string"?(u=unescape(u),u=mt(Sn(bt(u,t),!0),{...t,skipEscape:!0})):typeof u=="object"&&(u=mt(Sn(u,!0),{...t,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=mt(Sn(bt(e,t),!0),{...t,skipEscape:!0})):typeof e=="object"&&(e=mt(Sn(e,!0),{...t,skipEscape:!0})),u.toLowerCase()===e.toLowerCase()}function mt(u,e){const t={host:u.host,scheme:u.scheme,userinfo:u.userinfo,port:u.port,path:u.path,query:u.query,nid:u.nid,nss:u.nss,uuid:u.uuid,fragment:u.fragment,reference:u.reference,resourceName:u.resourceName,secure:u.secure,error:""},r=Object.assign({},e),n=[],a=Hc[(r.scheme||t.scheme||"").toLowerCase()];a&&a.serialize&&a.serialize(t,r),t.path!==void 0&&(r.skipEscape?t.path=unescape(t.path):(t.path=escape(t.path),t.scheme!==void 0&&(t.path=t.path.split("%3A").join(":")))),r.reference!=="suffix"&&t.scheme&&(n.push(t.scheme),n.push(":"));const o=b2(t,r);if(o!==void 0&&(r.reference!=="suffix"&&n.push("//"),n.push(o),t.path&&t.path.charAt(0)!=="/"&&n.push("/")),t.path!==void 0){let s=t.path;!r.absolutePath&&(!a||!a.absolutePath)&&(s=Gr(s)),o===void 0&&(s=s.replace(/^\/\//u,"/%2F")),n.push(s)}return t.query!==void 0&&(n.push("?"),n.push(t.query)),t.fragment!==void 0&&(n.push("#"),n.push(t.fragment)),n.join("")}const $2=Array.from({length:127},(u,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function w2(u){let e=0;for(let t=0,r=u.length;t<r;++t)if(e=u.charCodeAt(t),e>126||$2[e])return!0;return!1}const k2=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function bt(u,e){const t=Object.assign({},e),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=u.indexOf("%")!==-1;let a=!1;t.reference==="suffix"&&(u=(t.scheme?t.scheme+":":"")+"//"+u);const o=u.match(k2);if(o){if(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5]),r.host){const i=g2(r.host);if(i.isIPV4===!1){const c=y2(i.host,{isIPV4:!1});r.host=c.host.toLowerCase(),a=c.isIPV6}else r.host=i.host,a=!0}r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&!r.path&&r.query===void 0?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",t.reference&&t.reference!=="suffix"&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");const s=Hc[(t.scheme||r.scheme||"").toLowerCase()];if(!t.unicodeSupport&&(!s||!s.unicodeSupport)&&r.host&&(t.domainHost||s&&s.domainHost)&&a===!1&&w2(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(i){r.error=r.error||"Host's domain name can not be converted to ASCII: "+i}(!s||s&&!s.skipNormalize)&&(n&&r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),n&&r.userinfo!==void 0&&(r.userinfo=unescape(r.userinfo)),n&&r.host!==void 0&&(r.host=unescape(r.host)),r.path!==void 0&&r.path.length&&(r.path=escape(unescape(r.path))),r.fragment!==void 0&&r.fragment.length&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}const Jc={SCHEMES:Hc,normalize:B2,resolve:_2,resolveComponents:nh,equal:S2,serialize:mt,parse:bt};ia.exports=Jc;ia.exports.default=Jc;ia.exports.fastUri=Jc;var q2=ia.exports;Object.defineProperty(Lc,"__esModule",{value:!0});const ah=q2;ah.code='require("ajv/dist/runtime/uri").default';Lc.default=ah;(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.CodeGen=u.Name=u.nil=u.stringify=u.str=u._=u.KeywordCxt=void 0;var e=at;Object.defineProperty(u,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var t=Ye;Object.defineProperty(u,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(u,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(u,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(u,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(u,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});const r=sn,n=$r,a=Zt,o=Ru,s=Ye,i=$u,c=Cu,D=ye,l=Qy,f=Lc,C=(w,_)=>new RegExp(w,_);C.code="new RegExp";const F=["removeAdditional","useDefaults","coerceTypes"],A=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},d=200;function h(w){var _,O,$,E,g,P,ee,z,ae,oe,Be,qe,Ue,Ie,He,Xe,nu,Eu,Je,Ke,cu,ne,tu,b,k;const V=w.strict,Y=(_=w.code)===null||_===void 0?void 0:_.optimize,Fe=Y===!0||Y===void 0?1:Y||0,de=($=(O=w.code)===null||O===void 0?void 0:O.regExp)!==null&&$!==void 0?$:C,ue=(E=w.uriResolver)!==null&&E!==void 0?E:f.default;return{strictSchema:(P=(g=w.strictSchema)!==null&&g!==void 0?g:V)!==null&&P!==void 0?P:!0,strictNumbers:(z=(ee=w.strictNumbers)!==null&&ee!==void 0?ee:V)!==null&&z!==void 0?z:!0,strictTypes:(oe=(ae=w.strictTypes)!==null&&ae!==void 0?ae:V)!==null&&oe!==void 0?oe:"log",strictTuples:(qe=(Be=w.strictTuples)!==null&&Be!==void 0?Be:V)!==null&&qe!==void 0?qe:"log",strictRequired:(Ie=(Ue=w.strictRequired)!==null&&Ue!==void 0?Ue:V)!==null&&Ie!==void 0?Ie:!1,code:w.code?{...w.code,optimize:Fe,regExp:de}:{optimize:Fe,regExp:de},loopRequired:(He=w.loopRequired)!==null&&He!==void 0?He:d,loopEnum:(Xe=w.loopEnum)!==null&&Xe!==void 0?Xe:d,meta:(nu=w.meta)!==null&&nu!==void 0?nu:!0,messages:(Eu=w.messages)!==null&&Eu!==void 0?Eu:!0,inlineRefs:(Je=w.inlineRefs)!==null&&Je!==void 0?Je:!0,schemaId:(Ke=w.schemaId)!==null&&Ke!==void 0?Ke:"$id",addUsedSchema:(cu=w.addUsedSchema)!==null&&cu!==void 0?cu:!0,validateSchema:(ne=w.validateSchema)!==null&&ne!==void 0?ne:!0,validateFormats:(tu=w.validateFormats)!==null&&tu!==void 0?tu:!0,unicodeRegExp:(b=w.unicodeRegExp)!==null&&b!==void 0?b:!0,int32range:(k=w.int32range)!==null&&k!==void 0?k:!0,uriResolver:ue}}class S{constructor(_={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,_=this.opts={..._,...h(_)};const{es5:O,lines:$}=this.opts.code;this.scope=new s.ValueScope({scope:{},prefixes:A,es5:O,lines:$}),this.logger=K(_.logger);const E=_.validateFormats;_.validateFormats=!1,this.RULES=(0,a.getRules)(),B.call(this,m,_,"NOT SUPPORTED"),B.call(this,p,_,"DEPRECATED","warn"),this._metaOpts=L.call(this),_.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),_.keywords&&T.call(this,_.keywords),typeof _.meta=="object"&&this.addMetaSchema(_.meta),U.call(this),_.validateFormats=E}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:_,meta:O,schemaId:$}=this.opts;let E=l;$==="id"&&(E={...l},E.id=E.$id,delete E.$id),O&&_&&this.addMetaSchema(E,E[$],!1)}defaultMeta(){const{meta:_,schemaId:O}=this.opts;return this.opts.defaultMeta=typeof _=="object"?_[O]||_:void 0}validate(_,O){let $;if(typeof _=="string"){if($=this.getSchema(_),!$)throw new Error(`no schema with key or ref "${_}"`)}else $=this.compile(_);const E=$(O);return"$async"in $||(this.errors=$.errors),E}compile(_,O){const $=this._addSchema(_,O);return $.validate||this._compileSchemaEnv($)}compileAsync(_,O){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:$}=this.opts;return E.call(this,_,O);async function E(oe,Be){await g.call(this,oe.$schema);const qe=this._addSchema(oe,Be);return qe.validate||P.call(this,qe)}async function g(oe){oe&&!this.getSchema(oe)&&await E.call(this,{$ref:oe},!0)}async function P(oe){try{return this._compileSchemaEnv(oe)}catch(Be){if(!(Be instanceof n.default))throw Be;return ee.call(this,Be),await z.call(this,Be.missingSchema),P.call(this,oe)}}function ee({missingSchema:oe,missingRef:Be}){if(this.refs[oe])throw new Error(`AnySchema ${oe} is loaded but ${Be} cannot be resolved`)}async function z(oe){const Be=await ae.call(this,oe);this.refs[oe]||await g.call(this,Be.$schema),this.refs[oe]||this.addSchema(Be,oe,O)}async function ae(oe){const Be=this._loading[oe];if(Be)return Be;try{return await(this._loading[oe]=$(oe))}finally{delete this._loading[oe]}}}addSchema(_,O,$,E=this.opts.validateSchema){if(Array.isArray(_)){for(const P of _)this.addSchema(P,void 0,$,E);return this}let g;if(typeof _=="object"){const{schemaId:P}=this.opts;if(g=_[P],g!==void 0&&typeof g!="string")throw new Error(`schema ${P} must be string`)}return O=(0,i.normalizeId)(O||g),this._checkUnique(O),this.schemas[O]=this._addSchema(_,$,O,E,!0),this}addMetaSchema(_,O,$=this.opts.validateSchema){return this.addSchema(_,O,!0,$),this}validateSchema(_,O){if(typeof _=="boolean")return!0;let $;if($=_.$schema,$!==void 0&&typeof $!="string")throw new Error("$schema must be a string");if($=$||this.opts.defaultMeta||this.defaultMeta(),!$)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const E=this.validate($,_);if(!E&&O){const g="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(g);else throw new Error(g)}return E}getSchema(_){let O;for(;typeof(O=x.call(this,_))=="string";)_=O;if(O===void 0){const{schemaId:$}=this.opts,E=new o.SchemaEnv({schema:{},schemaId:$});if(O=o.resolveSchema.call(this,E,_),!O)return;this.refs[_]=O}return O.validate||this._compileSchemaEnv(O)}removeSchema(_){if(_ instanceof RegExp)return this._removeAllSchemas(this.schemas,_),this._removeAllSchemas(this.refs,_),this;switch(typeof _){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const O=x.call(this,_);return typeof O=="object"&&this._cache.delete(O.schema),delete this.schemas[_],delete this.refs[_],this}case"object":{const O=_;this._cache.delete(O);let $=_[this.opts.schemaId];return $&&($=(0,i.normalizeId)($),delete this.schemas[$],delete this.refs[$]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(_){for(const O of _)this.addKeyword(O);return this}addKeyword(_,O){let $;if(typeof _=="string")$=_,typeof O=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),O.keyword=$);else if(typeof _=="object"&&O===void 0){if(O=_,$=O.keyword,Array.isArray($)&&!$.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(te.call(this,$,O),!O)return(0,D.eachItem)($,g=>Z.call(this,g)),this;ve.call(this,O);const E={...O,type:(0,c.getJSONTypes)(O.type),schemaType:(0,c.getJSONTypes)(O.schemaType)};return(0,D.eachItem)($,E.type.length===0?g=>Z.call(this,g,E):g=>E.type.forEach(P=>Z.call(this,g,E,P))),this}getKeyword(_){const O=this.RULES.all[_];return typeof O=="object"?O.definition:!!O}removeKeyword(_){const{RULES:O}=this;delete O.keywords[_],delete O.all[_];for(const $ of O.rules){const E=$.rules.findIndex(g=>g.keyword===_);E>=0&&$.rules.splice(E,1)}return this}addFormat(_,O){return typeof O=="string"&&(O=new RegExp(O)),this.formats[_]=O,this}errorsText(_=this.errors,{separator:O=", ",dataVar:$="data"}={}){return!_||_.length===0?"No errors":_.map(E=>`${$}${E.instancePath} ${E.message}`).reduce((E,g)=>E+O+g)}$dataMetaSchema(_,O){const $=this.RULES.all;_=JSON.parse(JSON.stringify(_));for(const E of O){const g=E.split("/").slice(1);let P=_;for(const ee of g)P=P[ee];for(const ee in $){const z=$[ee];if(typeof z!="object")continue;const{$data:ae}=z.definition,oe=P[ee];ae&&oe&&(P[ee]=N(oe))}}return _}_removeAllSchemas(_,O){for(const $ in _){const E=_[$];(!O||O.test($))&&(typeof E=="string"?delete _[$]:E&&!E.meta&&(this._cache.delete(E.schema),delete _[$]))}}_addSchema(_,O,$,E=this.opts.validateSchema,g=this.opts.addUsedSchema){let P;const{schemaId:ee}=this.opts;if(typeof _=="object")P=_[ee];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof _!="boolean")throw new Error("schema must be object or boolean")}let z=this._cache.get(_);if(z!==void 0)return z;$=(0,i.normalizeId)(P||$);const ae=i.getSchemaRefs.call(this,_,$);return z=new o.SchemaEnv({schema:_,schemaId:ee,meta:O,baseId:$,localRefs:ae}),this._cache.set(z.schema,z),g&&!$.startsWith("#")&&($&&this._checkUnique($),this.refs[$]=z),E&&this.validateSchema(_,!0),z}_checkUnique(_){if(this.schemas[_]||this.refs[_])throw new Error(`schema with key or id "${_}" already exists`)}_compileSchemaEnv(_){if(_.meta?this._compileMetaSchema(_):o.compileSchema.call(this,_),!_.validate)throw new Error("ajv implementation error");return _.validate}_compileMetaSchema(_){const O=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,_)}finally{this.opts=O}}}S.ValidationError=r.default,S.MissingRefError=n.default,u.default=S;function B(w,_,O,$="error"){for(const E in w){const g=E;g in _&&this.logger[$](`${O}: option ${E}. ${w[g]}`)}}function x(w){return w=(0,i.normalizeId)(w),this.schemas[w]||this.refs[w]}function U(){const w=this.opts.schemas;if(w)if(Array.isArray(w))this.addSchema(w);else for(const _ in w)this.addSchema(w[_],_)}function R(){for(const w in this.opts.formats){const _=this.opts.formats[w];_&&this.addFormat(w,_)}}function T(w){if(Array.isArray(w)){this.addVocabulary(w);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const _ in w){const O=w[_];O.keyword||(O.keyword=_),this.addKeyword(O)}}function L(){const w={...this.opts};for(const _ of F)delete w[_];return w}const J={log(){},warn(){},error(){}};function K(w){if(w===!1)return J;if(w===void 0)return console;if(w.log&&w.warn&&w.error)return w;throw new Error("logger must implement log, warn and error methods")}const G=/^[a-z_$][a-z0-9_$:-]*$/i;function te(w,_){const{RULES:O}=this;if((0,D.eachItem)(w,$=>{if(O.keywords[$])throw new Error(`Keyword ${$} is already defined`);if(!G.test($))throw new Error(`Keyword ${$} has invalid name`)}),!!_&&_.$data&&!("code"in _||"validate"in _))throw new Error('$data keyword must have "code" or "validate" function')}function Z(w,_,O){var $;const E=_==null?void 0:_.post;if(O&&E)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:g}=this;let P=E?g.post:g.rules.find(({type:z})=>z===O);if(P||(P={type:O,rules:[]},g.rules.push(P)),g.keywords[w]=!0,!_)return;const ee={keyword:w,definition:{..._,type:(0,c.getJSONTypes)(_.type),schemaType:(0,c.getJSONTypes)(_.schemaType)}};_.before?ie.call(this,P,ee,_.before):P.rules.push(ee),g.all[w]=ee,($=_.implements)===null||$===void 0||$.forEach(z=>this.addKeyword(z))}function ie(w,_,O){const $=w.rules.findIndex(E=>E.keyword===O);$>=0?w.rules.splice($,0,_):(w.rules.push(_),this.logger.warn(`rule ${O} is not defined`))}function ve(w){let{metaSchema:_}=w;_!==void 0&&(w.$data&&this.opts.$data&&(_=N(_)),w.validateSchema=this.compile(_,!0))}const M={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function N(w){return{anyOf:[w,M]}}})(Em);var Kc={},Zc={},Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});const T2={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Yc.default=T2;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.callRef=Yt.getValidate=void 0;const P2=$r,kD=Ze,xu=Ye,ar=ht,qD=Ru,$n=ye,O2={keyword:"$ref",schemaType:"string",code(u){const{gen:e,schema:t,it:r}=u,{baseId:n,schemaEnv:a,validateName:o,opts:s,self:i}=r,{root:c}=a;if((t==="#"||t==="#/")&&n===c.baseId)return l();const D=qD.resolveRef.call(i,c,n,t);if(D===void 0)throw new P2.default(r.opts.uriResolver,n,t);if(D instanceof qD.SchemaEnv)return f(D);return C(D);function l(){if(a===c)return Gn(u,o,a,a.$async);const F=e.scopeValue("root",{ref:c});return Gn(u,(0,xu._)`${F}.validate`,c,c.$async)}function f(F){const A=oh(u,F);Gn(u,A,F,F.$async)}function C(F){const A=e.scopeValue("schema",s.code.source===!0?{ref:F,code:(0,xu.stringify)(F)}:{ref:F}),m=e.name("valid"),p=u.subschema({schema:F,dataTypes:[],schemaPath:xu.nil,topSchemaRef:A,errSchemaPath:t},m);u.mergeEvaluated(p),u.ok(m)}}};function oh(u,e){const{gen:t}=u;return e.validate?t.scopeValue("validate",{ref:e.validate}):(0,xu._)`${t.scopeValue("wrapper",{ref:e})}.validate`}Yt.getValidate=oh;function Gn(u,e,t,r){const{gen:n,it:a}=u,{allErrors:o,schemaEnv:s,opts:i}=a,c=i.passContext?ar.default.this:xu.nil;r?D():l();function D(){if(!s.$async)throw new Error("async schema referenced by sync schema");const F=n.let("valid");n.try(()=>{n.code((0,xu._)`await ${(0,kD.callValidateCode)(u,e,c)}`),C(e),o||n.assign(F,!0)},A=>{n.if((0,xu._)`!(${A} instanceof ${a.ValidationError})`,()=>n.throw(A)),f(A),o||n.assign(F,!1)}),u.ok(F)}function l(){u.result((0,kD.callValidateCode)(u,e,c),()=>C(e),()=>f(e))}function f(F){const A=(0,xu._)`${F}.errors`;n.assign(ar.default.vErrors,(0,xu._)`${ar.default.vErrors} === null ? ${A} : ${ar.default.vErrors}.concat(${A})`),n.assign(ar.default.errors,(0,xu._)`${ar.default.vErrors}.length`)}function C(F){var A;if(!a.opts.unevaluated)return;const m=(A=t==null?void 0:t.validate)===null||A===void 0?void 0:A.evaluated;if(a.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(a.props=$n.mergeEvaluated.props(n,m.props,a.props));else{const p=n.var("props",(0,xu._)`${F}.evaluated.props`);a.props=$n.mergeEvaluated.props(n,p,a.props,xu.Name)}if(a.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(a.items=$n.mergeEvaluated.items(n,m.items,a.items));else{const p=n.var("items",(0,xu._)`${F}.evaluated.items`);a.items=$n.mergeEvaluated.items(n,p,a.items,xu.Name)}}}Yt.callRef=Gn;Yt.default=O2;Object.defineProperty(Zc,"__esModule",{value:!0});const I2=Yc,j2=Yt,x2=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",I2.default,j2.default];Zc.default=x2;var Qc={},Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});const Xn=Ye,kt=Xn.operators,ea={maximum:{okStr:"<=",ok:kt.LTE,fail:kt.GT},minimum:{okStr:">=",ok:kt.GTE,fail:kt.LT},exclusiveMaximum:{okStr:"<",ok:kt.LT,fail:kt.GTE},exclusiveMinimum:{okStr:">",ok:kt.GT,fail:kt.LTE}},R2={message:({keyword:u,schemaCode:e})=>(0,Xn.str)`must be ${ea[u].okStr} ${e}`,params:({keyword:u,schemaCode:e})=>(0,Xn._)`{comparison: ${ea[u].okStr}, limit: ${e}}`},N2={keyword:Object.keys(ea),type:"number",schemaType:"number",$data:!0,error:R2,code(u){const{keyword:e,data:t,schemaCode:r}=u;u.fail$data((0,Xn._)`${t} ${ea[e].fail} ${r} || isNaN(${t})`)}};Xc.default=N2;var e0={};Object.defineProperty(e0,"__esModule",{value:!0});const Yr=Ye,M2={message:({schemaCode:u})=>(0,Yr.str)`must be multiple of ${u}`,params:({schemaCode:u})=>(0,Yr._)`{multipleOf: ${u}}`},U2={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:M2,code(u){const{gen:e,data:t,schemaCode:r,it:n}=u,a=n.opts.multipleOfPrecision,o=e.let("res"),s=a?(0,Yr._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${a}`:(0,Yr._)`${o} !== parseInt(${o})`;u.fail$data((0,Yr._)`(${r} === 0 || (${o} = ${t}/${r}, ${s}))`)}};e0.default=U2;var u0={},t0={};Object.defineProperty(t0,"__esModule",{value:!0});function sh(u){const e=u.length;let t=0,r=0,n;for(;r<e;)t++,n=u.charCodeAt(r++),n>=55296&&n<=56319&&r<e&&(n=u.charCodeAt(r),(n&64512)===56320&&r++);return t}t0.default=sh;sh.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(u0,"__esModule",{value:!0});const Gt=Ye,V2=ye,z2=t0,W2={message({keyword:u,schemaCode:e}){const t=u==="maxLength"?"more":"fewer";return(0,Gt.str)`must NOT have ${t} than ${e} characters`},params:({schemaCode:u})=>(0,Gt._)`{limit: ${u}}`},L2={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:W2,code(u){const{keyword:e,data:t,schemaCode:r,it:n}=u,a=e==="maxLength"?Gt.operators.GT:Gt.operators.LT,o=n.opts.unicode===!1?(0,Gt._)`${t}.length`:(0,Gt._)`${(0,V2.useFunc)(u.gen,z2.default)}(${t})`;u.fail$data((0,Gt._)`${o} ${a} ${r}`)}};u0.default=L2;var r0={};Object.defineProperty(r0,"__esModule",{value:!0});const G2=Ze,ua=Ye,H2={message:({schemaCode:u})=>(0,ua.str)`must match pattern "${u}"`,params:({schemaCode:u})=>(0,ua._)`{pattern: ${u}}`},J2={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:H2,code(u){const{data:e,$data:t,schema:r,schemaCode:n,it:a}=u,o=a.opts.unicodeRegExp?"u":"",s=t?(0,ua._)`(new RegExp(${n}, ${o}))`:(0,G2.usePattern)(u,r);u.fail$data((0,ua._)`!${s}.test(${e})`)}};r0.default=J2;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});const Qr=Ye,K2={message({keyword:u,schemaCode:e}){const t=u==="maxProperties"?"more":"fewer";return(0,Qr.str)`must NOT have ${t} than ${e} properties`},params:({schemaCode:u})=>(0,Qr._)`{limit: ${u}}`},Z2={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:K2,code(u){const{keyword:e,data:t,schemaCode:r}=u,n=e==="maxProperties"?Qr.operators.GT:Qr.operators.LT;u.fail$data((0,Qr._)`Object.keys(${t}).length ${n} ${r}`)}};n0.default=Z2;var a0={};Object.defineProperty(a0,"__esModule",{value:!0});const Ur=Ze,Xr=Ye,Y2=ye,Q2={message:({params:{missingProperty:u}})=>(0,Xr.str)`must have required property '${u}'`,params:({params:{missingProperty:u}})=>(0,Xr._)`{missingProperty: ${u}}`},X2={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Q2,code(u){const{gen:e,schema:t,schemaCode:r,data:n,$data:a,it:o}=u,{opts:s}=o;if(!a&&t.length===0)return;const i=t.length>=s.loopRequired;if(o.allErrors?c():D(),s.strictRequired){const C=u.parentSchema.properties,{definedProperties:F}=u.it;for(const A of t)if((C==null?void 0:C[A])===void 0&&!F.has(A)){const m=o.schemaEnv.baseId+o.errSchemaPath,p=`required property "${A}" is not defined at "${m}" (strictRequired)`;(0,Y2.checkStrictMode)(o,p,o.opts.strictRequired)}}function c(){if(i||a)u.block$data(Xr.nil,l);else for(const C of t)(0,Ur.checkReportMissingProp)(u,C)}function D(){const C=e.let("missing");if(i||a){const F=e.let("valid",!0);u.block$data(F,()=>f(C,F)),u.ok(F)}else e.if((0,Ur.checkMissingProp)(u,t,C)),(0,Ur.reportMissingProp)(u,C),e.else()}function l(){e.forOf("prop",r,C=>{u.setParams({missingProperty:C}),e.if((0,Ur.noPropertyInData)(e,n,C,s.ownProperties),()=>u.error())})}function f(C,F){u.setParams({missingProperty:C}),e.forOf(C,r,()=>{e.assign(F,(0,Ur.propertyInData)(e,n,C,s.ownProperties)),e.if((0,Xr.not)(F),()=>{u.error(),e.break()})},Xr.nil)}}};a0.default=X2;var o0={};Object.defineProperty(o0,"__esModule",{value:!0});const en=Ye,eg={message({keyword:u,schemaCode:e}){const t=u==="maxItems"?"more":"fewer";return(0,en.str)`must NOT have ${t} than ${e} items`},params:({schemaCode:u})=>(0,en._)`{limit: ${u}}`},ug={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:eg,code(u){const{keyword:e,data:t,schemaCode:r}=u,n=e==="maxItems"?en.operators.GT:en.operators.LT;u.fail$data((0,en._)`${t}.length ${n} ${r}`)}};o0.default=ug;var s0={},cn={};Object.defineProperty(cn,"__esModule",{value:!0});const ih=Om;ih.code='require("ajv/dist/runtime/equal").default';cn.default=ih;Object.defineProperty(s0,"__esModule",{value:!0});const xa=Cu,_u=Ye,tg=ye,rg=cn,ng={message:({params:{i:u,j:e}})=>(0,_u.str)`must NOT have duplicate items (items ## ${e} and ${u} are identical)`,params:({params:{i:u,j:e}})=>(0,_u._)`{i: ${u}, j: ${e}}`},ag={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ng,code(u){const{gen:e,data:t,$data:r,schema:n,parentSchema:a,schemaCode:o,it:s}=u;if(!r&&!n)return;const i=e.let("valid"),c=a.items?(0,xa.getSchemaTypes)(a.items):[];u.block$data(i,D,(0,_u._)`${o} === false`),u.ok(i);function D(){const F=e.let("i",(0,_u._)`${t}.length`),A=e.let("j");u.setParams({i:F,j:A}),e.assign(i,!0),e.if((0,_u._)`${F} > 1`,()=>(l()?f:C)(F,A))}function l(){return c.length>0&&!c.some(F=>F==="object"||F==="array")}function f(F,A){const m=e.name("item"),p=(0,xa.checkDataTypes)(c,m,s.opts.strictNumbers,xa.DataType.Wrong),d=e.const("indices",(0,_u._)`{}`);e.for((0,_u._)`;${F}--;`,()=>{e.let(m,(0,_u._)`${t}[${F}]`),e.if(p,(0,_u._)`continue`),c.length>1&&e.if((0,_u._)`typeof ${m} == "string"`,(0,_u._)`${m} += "_"`),e.if((0,_u._)`typeof ${d}[${m}] == "number"`,()=>{e.assign(A,(0,_u._)`${d}[${m}]`),u.error(),e.assign(i,!1).break()}).code((0,_u._)`${d}[${m}] = ${F}`)})}function C(F,A){const m=(0,tg.useFunc)(e,rg.default),p=e.name("outer");e.label(p).for((0,_u._)`;${F}--;`,()=>e.for((0,_u._)`${A} = ${F}; ${A}--;`,()=>e.if((0,_u._)`${m}(${t}[${F}], ${t}[${A}])`,()=>{u.error(),e.assign(i,!1).break(p)})))}}};s0.default=ag;var i0={};Object.defineProperty(i0,"__esModule",{value:!0});const gc=Ye,og=ye,sg=cn,ig={message:"must be equal to constant",params:({schemaCode:u})=>(0,gc._)`{allowedValue: ${u}}`},cg={keyword:"const",$data:!0,error:ig,code(u){const{gen:e,data:t,$data:r,schemaCode:n,schema:a}=u;r||a&&typeof a=="object"?u.fail$data((0,gc._)`!${(0,og.useFunc)(e,sg.default)}(${t}, ${n})`):u.fail((0,gc._)`${a} !== ${t}`)}};i0.default=cg;var c0={};Object.defineProperty(c0,"__esModule",{value:!0});const Hr=Ye,Dg=ye,lg=cn,dg={message:"must be equal to one of the allowed values",params:({schemaCode:u})=>(0,Hr._)`{allowedValues: ${u}}`},fg={keyword:"enum",schemaType:"array",$data:!0,error:dg,code(u){const{gen:e,data:t,$data:r,schema:n,schemaCode:a,it:o}=u;if(!r&&n.length===0)throw new Error("enum must have non-empty array");const s=n.length>=o.opts.loopEnum;let i;const c=()=>i??(i=(0,Dg.useFunc)(e,lg.default));let D;if(s||r)D=e.let("valid"),u.block$data(D,l);else{if(!Array.isArray(n))throw new Error("ajv implementation error");const C=e.const("vSchema",a);D=(0,Hr.or)(...n.map((F,A)=>f(C,A)))}u.pass(D);function l(){e.assign(D,!1),e.forOf("v",a,C=>e.if((0,Hr._)`${c()}(${t}, ${C})`,()=>e.assign(D,!0).break()))}function f(C,F){const A=n[F];return typeof A=="object"&&A!==null?(0,Hr._)`${c()}(${t}, ${C}[${F}])`:(0,Hr._)`${t} === ${A}`}}};c0.default=fg;Object.defineProperty(Qc,"__esModule",{value:!0});const pg=Xc,Fg=e0,mg=u0,hg=r0,Eg=n0,Cg=a0,Ag=o0,vg=s0,yg=i0,gg=c0,bg=[pg.default,Fg.default,mg.default,hg.default,Eg.default,Cg.default,Ag.default,vg.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},yg.default,gg.default];Qc.default=bg;var D0={},wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.validateAdditionalItems=void 0;const Ht=Ye,bc=ye,Bg={message:({params:{len:u}})=>(0,Ht.str)`must NOT have more than ${u} items`,params:({params:{len:u}})=>(0,Ht._)`{limit: ${u}}`},_g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Bg,code(u){const{parentSchema:e,it:t}=u,{items:r}=e;if(!Array.isArray(r)){(0,bc.checkStrictMode)(t,'"additionalItems" is ignored when "items" is not an array of schemas');return}ch(u,r)}};function ch(u,e){const{gen:t,schema:r,data:n,keyword:a,it:o}=u;o.items=!0;const s=t.const("len",(0,Ht._)`${n}.length`);if(r===!1)u.setParams({len:e.length}),u.pass((0,Ht._)`${s} <= ${e.length}`);else if(typeof r=="object"&&!(0,bc.alwaysValidSchema)(o,r)){const c=t.var("valid",(0,Ht._)`${s} <= ${e.length}`);t.if((0,Ht.not)(c),()=>i(c)),u.ok(c)}function i(c){t.forRange("i",e.length,s,D=>{u.subschema({keyword:a,dataProp:D,dataPropType:bc.Type.Num},c),o.allErrors||t.if((0,Ht.not)(c),()=>t.break())})}}wr.validateAdditionalItems=ch;wr.default=_g;var l0={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.validateTuple=void 0;const TD=Ye,Hn=ye,Sg=Ze,$g={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(u){const{schema:e,it:t}=u;if(Array.isArray(e))return Dh(u,"additionalItems",e);t.items=!0,!(0,Hn.alwaysValidSchema)(t,e)&&u.ok((0,Sg.validateArray)(u))}};function Dh(u,e,t=u.schema){const{gen:r,parentSchema:n,data:a,keyword:o,it:s}=u;D(n),s.opts.unevaluated&&t.length&&s.items!==!0&&(s.items=Hn.mergeEvaluated.items(r,t.length,s.items));const i=r.name("valid"),c=r.const("len",(0,TD._)`${a}.length`);t.forEach((l,f)=>{(0,Hn.alwaysValidSchema)(s,l)||(r.if((0,TD._)`${c} > ${f}`,()=>u.subschema({keyword:o,schemaProp:f,dataProp:f},i)),u.ok(i))});function D(l){const{opts:f,errSchemaPath:C}=s,F=t.length,A=F===l.minItems&&(F===l.maxItems||l[e]===!1);if(f.strictTuples&&!A){const m=`"${o}" is ${F}-tuple, but minItems or maxItems/${e} are not specified or different at path "${C}"`;(0,Hn.checkStrictMode)(s,m,f.strictTuples)}}}kr.validateTuple=Dh;kr.default=$g;Object.defineProperty(l0,"__esModule",{value:!0});const wg=kr,kg={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:u=>(0,wg.validateTuple)(u,"items")};l0.default=kg;var d0={};Object.defineProperty(d0,"__esModule",{value:!0});const PD=Ye,qg=ye,Tg=Ze,Pg=wr,Og={message:({params:{len:u}})=>(0,PD.str)`must NOT have more than ${u} items`,params:({params:{len:u}})=>(0,PD._)`{limit: ${u}}`},Ig={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Og,code(u){const{schema:e,parentSchema:t,it:r}=u,{prefixItems:n}=t;r.items=!0,!(0,qg.alwaysValidSchema)(r,e)&&(n?(0,Pg.validateAdditionalItems)(u,n):u.ok((0,Tg.validateArray)(u)))}};d0.default=Ig;var f0={};Object.defineProperty(f0,"__esModule",{value:!0});const Wu=Ye,wn=ye,jg={message:({params:{min:u,max:e}})=>e===void 0?(0,Wu.str)`must contain at least ${u} valid item(s)`:(0,Wu.str)`must contain at least ${u} and no more than ${e} valid item(s)`,params:({params:{min:u,max:e}})=>e===void 0?(0,Wu._)`{minContains: ${u}}`:(0,Wu._)`{minContains: ${u}, maxContains: ${e}}`},xg={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:jg,code(u){const{gen:e,schema:t,parentSchema:r,data:n,it:a}=u;let o,s;const{minContains:i,maxContains:c}=r;a.opts.next?(o=i===void 0?1:i,s=c):o=1;const D=e.const("len",(0,Wu._)`${n}.length`);if(u.setParams({min:o,max:s}),s===void 0&&o===0){(0,wn.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&o>s){(0,wn.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),u.fail();return}if((0,wn.alwaysValidSchema)(a,t)){let A=(0,Wu._)`${D} >= ${o}`;s!==void 0&&(A=(0,Wu._)`${A} && ${D} <= ${s}`),u.pass(A);return}a.items=!0;const l=e.name("valid");s===void 0&&o===1?C(l,()=>e.if(l,()=>e.break())):o===0?(e.let(l,!0),s!==void 0&&e.if((0,Wu._)`${n}.length > 0`,f)):(e.let(l,!1),f()),u.result(l,()=>u.reset());function f(){const A=e.name("_valid"),m=e.let("count",0);C(A,()=>e.if(A,()=>F(m)))}function C(A,m){e.forRange("i",0,D,p=>{u.subschema({keyword:"contains",dataProp:p,dataPropType:wn.Type.Num,compositeRule:!0},A),m()})}function F(A){e.code((0,Wu._)`${A}++`),s===void 0?e.if((0,Wu._)`${A} >= ${o}`,()=>e.assign(l,!0).break()):(e.if((0,Wu._)`${A} > ${s}`,()=>e.assign(l,!1).break()),o===1?e.assign(l,!0):e.if((0,Wu._)`${A} >= ${o}`,()=>e.assign(l,!0)))}}};f0.default=xg;var lh={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.validateSchemaDeps=u.validatePropertyDeps=u.error=void 0;const e=Ye,t=ye,r=Ze;u.error={message:({params:{property:i,depsCount:c,deps:D}})=>{const l=c===1?"property":"properties";return(0,e.str)`must have ${l} ${D} when property ${i} is present`},params:({params:{property:i,depsCount:c,deps:D,missingProperty:l}})=>(0,e._)`{property: ${i},
    missingProperty: ${l},
    depsCount: ${c},
    deps: ${D}}`};const n={keyword:"dependencies",type:"object",schemaType:"object",error:u.error,code(i){const[c,D]=a(i);o(i,c),s(i,D)}};function a({schema:i}){const c={},D={};for(const l in i){if(l==="__proto__")continue;const f=Array.isArray(i[l])?c:D;f[l]=i[l]}return[c,D]}function o(i,c=i.schema){const{gen:D,data:l,it:f}=i;if(Object.keys(c).length===0)return;const C=D.let("missing");for(const F in c){const A=c[F];if(A.length===0)continue;const m=(0,r.propertyInData)(D,l,F,f.opts.ownProperties);i.setParams({property:F,depsCount:A.length,deps:A.join(", ")}),f.allErrors?D.if(m,()=>{for(const p of A)(0,r.checkReportMissingProp)(i,p)}):(D.if((0,e._)`${m} && (${(0,r.checkMissingProp)(i,A,C)})`),(0,r.reportMissingProp)(i,C),D.else())}}u.validatePropertyDeps=o;function s(i,c=i.schema){const{gen:D,data:l,keyword:f,it:C}=i,F=D.name("valid");for(const A in c)(0,t.alwaysValidSchema)(C,c[A])||(D.if((0,r.propertyInData)(D,l,A,C.opts.ownProperties),()=>{const m=i.subschema({keyword:f,schemaProp:A},F);i.mergeValidEvaluated(m,F)},()=>D.var(F,!0)),i.ok(F))}u.validateSchemaDeps=s,u.default=n})(lh);var p0={};Object.defineProperty(p0,"__esModule",{value:!0});const dh=Ye,Rg=ye,Ng={message:"property name must be valid",params:({params:u})=>(0,dh._)`{propertyName: ${u.propertyName}}`},Mg={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Ng,code(u){const{gen:e,schema:t,data:r,it:n}=u;if((0,Rg.alwaysValidSchema)(n,t))return;const a=e.name("valid");e.forIn("key",r,o=>{u.setParams({propertyName:o}),u.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},a),e.if((0,dh.not)(a),()=>{u.error(!0),n.allErrors||e.break()})}),u.ok(a)}};p0.default=Mg;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});const kn=Ze,et=Ye,Ug=ht,qn=ye,Vg={message:"must NOT have additional properties",params:({params:u})=>(0,et._)`{additionalProperty: ${u.additionalProperty}}`},zg={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Vg,code(u){const{gen:e,schema:t,parentSchema:r,data:n,errsCount:a,it:o}=u;if(!a)throw new Error("ajv implementation error");const{allErrors:s,opts:i}=o;if(o.props=!0,i.removeAdditional!=="all"&&(0,qn.alwaysValidSchema)(o,t))return;const c=(0,kn.allSchemaProperties)(r.properties),D=(0,kn.allSchemaProperties)(r.patternProperties);l(),u.ok((0,et._)`${a} === ${Ug.default.errors}`);function l(){e.forIn("key",n,m=>{!c.length&&!D.length?F(m):e.if(f(m),()=>F(m))})}function f(m){let p;if(c.length>8){const d=(0,qn.schemaRefOrVal)(o,r.properties,"properties");p=(0,kn.isOwnProperty)(e,d,m)}else c.length?p=(0,et.or)(...c.map(d=>(0,et._)`${m} === ${d}`)):p=et.nil;return D.length&&(p=(0,et.or)(p,...D.map(d=>(0,et._)`${(0,kn.usePattern)(u,d)}.test(${m})`))),(0,et.not)(p)}function C(m){e.code((0,et._)`delete ${n}[${m}]`)}function F(m){if(i.removeAdditional==="all"||i.removeAdditional&&t===!1){C(m);return}if(t===!1){u.setParams({additionalProperty:m}),u.error(),s||e.break();return}if(typeof t=="object"&&!(0,qn.alwaysValidSchema)(o,t)){const p=e.name("valid");i.removeAdditional==="failing"?(A(m,p,!1),e.if((0,et.not)(p),()=>{u.reset(),C(m)})):(A(m,p),s||e.if((0,et.not)(p),()=>e.break()))}}function A(m,p,d){const h={keyword:"additionalProperties",dataProp:m,dataPropType:qn.Type.Str};d===!1&&Object.assign(h,{compositeRule:!0,createErrors:!1,allErrors:!1}),u.subschema(h,p)}}};ca.default=zg;var F0={};Object.defineProperty(F0,"__esModule",{value:!0});const Wg=at,OD=Ze,Ra=ye,ID=ca,Lg={keyword:"properties",type:"object",schemaType:"object",code(u){const{gen:e,schema:t,parentSchema:r,data:n,it:a}=u;a.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&ID.default.code(new Wg.KeywordCxt(a,ID.default,"additionalProperties"));const o=(0,OD.allSchemaProperties)(t);for(const l of o)a.definedProperties.add(l);a.opts.unevaluated&&o.length&&a.props!==!0&&(a.props=Ra.mergeEvaluated.props(e,(0,Ra.toHash)(o),a.props));const s=o.filter(l=>!(0,Ra.alwaysValidSchema)(a,t[l]));if(s.length===0)return;const i=e.name("valid");for(const l of s)c(l)?D(l):(e.if((0,OD.propertyInData)(e,n,l,a.opts.ownProperties)),D(l),a.allErrors||e.else().var(i,!0),e.endIf()),u.it.definedProperties.add(l),u.ok(i);function c(l){return a.opts.useDefaults&&!a.compositeRule&&t[l].default!==void 0}function D(l){u.subschema({keyword:"properties",schemaProp:l,dataProp:l},i)}}};F0.default=Lg;var m0={};Object.defineProperty(m0,"__esModule",{value:!0});const jD=Ze,Tn=Ye,xD=ye,RD=ye,Gg={keyword:"patternProperties",type:"object",schemaType:"object",code(u){const{gen:e,schema:t,data:r,parentSchema:n,it:a}=u,{opts:o}=a,s=(0,jD.allSchemaProperties)(t),i=s.filter(A=>(0,xD.alwaysValidSchema)(a,t[A]));if(s.length===0||i.length===s.length&&(!a.opts.unevaluated||a.props===!0))return;const c=o.strictSchema&&!o.allowMatchingProperties&&n.properties,D=e.name("valid");a.props!==!0&&!(a.props instanceof Tn.Name)&&(a.props=(0,RD.evaluatedPropsToName)(e,a.props));const{props:l}=a;f();function f(){for(const A of s)c&&C(A),a.allErrors?F(A):(e.var(D,!0),F(A),e.if(D))}function C(A){for(const m in c)new RegExp(A).test(m)&&(0,xD.checkStrictMode)(a,`property ${m} matches pattern ${A} (use allowMatchingProperties)`)}function F(A){e.forIn("key",r,m=>{e.if((0,Tn._)`${(0,jD.usePattern)(u,A)}.test(${m})`,()=>{const p=i.includes(A);p||u.subschema({keyword:"patternProperties",schemaProp:A,dataProp:m,dataPropType:RD.Type.Str},D),a.opts.unevaluated&&l!==!0?e.assign((0,Tn._)`${l}[${m}]`,!0):!p&&!a.allErrors&&e.if((0,Tn.not)(D),()=>e.break())})})}}};m0.default=Gg;var h0={};Object.defineProperty(h0,"__esModule",{value:!0});const Hg=ye,Jg={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(u){const{gen:e,schema:t,it:r}=u;if((0,Hg.alwaysValidSchema)(r,t)){u.fail();return}const n=e.name("valid");u.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),u.failResult(n,()=>u.reset(),()=>u.error())},error:{message:"must NOT be valid"}};h0.default=Jg;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});const Kg=Ze,Zg={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Kg.validateUnion,error:{message:"must match a schema in anyOf"}};E0.default=Zg;var C0={};Object.defineProperty(C0,"__esModule",{value:!0});const Jn=Ye,Yg=ye,Qg={message:"must match exactly one schema in oneOf",params:({params:u})=>(0,Jn._)`{passingSchemas: ${u.passing}}`},Xg={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qg,code(u){const{gen:e,schema:t,parentSchema:r,it:n}=u;if(!Array.isArray(t))throw new Error("ajv implementation error");if(n.opts.discriminator&&r.discriminator)return;const a=t,o=e.let("valid",!1),s=e.let("passing",null),i=e.name("_valid");u.setParams({passing:s}),e.block(c),u.result(o,()=>u.reset(),()=>u.error(!0));function c(){a.forEach((D,l)=>{let f;(0,Yg.alwaysValidSchema)(n,D)?e.var(i,!0):f=u.subschema({keyword:"oneOf",schemaProp:l,compositeRule:!0},i),l>0&&e.if((0,Jn._)`${i} && ${o}`).assign(o,!1).assign(s,(0,Jn._)`[${s}, ${l}]`).else(),e.if(i,()=>{e.assign(o,!0),e.assign(s,l),f&&u.mergeEvaluated(f,Jn.Name)})})}}};C0.default=Xg;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});const eb=ye,ub={keyword:"allOf",schemaType:"array",code(u){const{gen:e,schema:t,it:r}=u;if(!Array.isArray(t))throw new Error("ajv implementation error");const n=e.name("valid");t.forEach((a,o)=>{if((0,eb.alwaysValidSchema)(r,a))return;const s=u.subschema({keyword:"allOf",schemaProp:o},n);u.ok(n),u.mergeEvaluated(s)})}};A0.default=ub;var v0={};Object.defineProperty(v0,"__esModule",{value:!0});const ta=Ye,fh=ye,tb={message:({params:u})=>(0,ta.str)`must match "${u.ifClause}" schema`,params:({params:u})=>(0,ta._)`{failingKeyword: ${u.ifClause}}`},rb={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:tb,code(u){const{gen:e,parentSchema:t,it:r}=u;t.then===void 0&&t.else===void 0&&(0,fh.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const n=ND(r,"then"),a=ND(r,"else");if(!n&&!a)return;const o=e.let("valid",!0),s=e.name("_valid");if(i(),u.reset(),n&&a){const D=e.let("ifClause");u.setParams({ifClause:D}),e.if(s,c("then",D),c("else",D))}else n?e.if(s,c("then")):e.if((0,ta.not)(s),c("else"));u.pass(o,()=>u.error(!0));function i(){const D=u.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);u.mergeEvaluated(D)}function c(D,l){return()=>{const f=u.subschema({keyword:D},s);e.assign(o,s),u.mergeValidEvaluated(f,o),l?e.assign(l,(0,ta._)`${D}`):u.setParams({ifClause:D})}}}};function ND(u,e){const t=u.schema[e];return t!==void 0&&!(0,fh.alwaysValidSchema)(u,t)}v0.default=rb;var y0={};Object.defineProperty(y0,"__esModule",{value:!0});const nb=ye,ab={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:u,parentSchema:e,it:t}){e.if===void 0&&(0,nb.checkStrictMode)(t,`"${u}" without "if" is ignored`)}};y0.default=ab;Object.defineProperty(D0,"__esModule",{value:!0});const ob=wr,sb=l0,ib=kr,cb=d0,Db=f0,lb=lh,db=p0,fb=ca,pb=F0,Fb=m0,mb=h0,hb=E0,Eb=C0,Cb=A0,Ab=v0,vb=y0;function yb(u=!1){const e=[mb.default,hb.default,Eb.default,Cb.default,Ab.default,vb.default,db.default,fb.default,lb.default,pb.default,Fb.default];return u?e.push(sb.default,cb.default):e.push(ob.default,ib.default),e.push(Db.default),e}D0.default=yb;var g0={},b0={};Object.defineProperty(b0,"__esModule",{value:!0});const mu=Ye,gb={message:({schemaCode:u})=>(0,mu.str)`must match format "${u}"`,params:({schemaCode:u})=>(0,mu._)`{format: ${u}}`},bb={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:gb,code(u,e){const{gen:t,data:r,$data:n,schema:a,schemaCode:o,it:s}=u,{opts:i,errSchemaPath:c,schemaEnv:D,self:l}=s;if(!i.validateFormats)return;n?f():C();function f(){const F=t.scopeValue("formats",{ref:l.formats,code:i.code.formats}),A=t.const("fDef",(0,mu._)`${F}[${o}]`),m=t.let("fType"),p=t.let("format");t.if((0,mu._)`typeof ${A} == "object" && !(${A} instanceof RegExp)`,()=>t.assign(m,(0,mu._)`${A}.type || "string"`).assign(p,(0,mu._)`${A}.validate`),()=>t.assign(m,(0,mu._)`"string"`).assign(p,A)),u.fail$data((0,mu.or)(d(),h()));function d(){return i.strictSchema===!1?mu.nil:(0,mu._)`${o} && !${p}`}function h(){const S=D.$async?(0,mu._)`(${A}.async ? await ${p}(${r}) : ${p}(${r}))`:(0,mu._)`${p}(${r})`,B=(0,mu._)`(typeof ${p} == "function" ? ${S} : ${p}.test(${r}))`;return(0,mu._)`${p} && ${p} !== true && ${m} === ${e} && !${B}`}}function C(){const F=l.formats[a];if(!F){d();return}if(F===!0)return;const[A,m,p]=h(F);A===e&&u.pass(S());function d(){if(i.strictSchema===!1){l.logger.warn(B());return}throw new Error(B());function B(){return`unknown format "${a}" ignored in schema at path "${c}"`}}function h(B){const x=B instanceof RegExp?(0,mu.regexpCode)(B):i.code.formats?(0,mu._)`${i.code.formats}${(0,mu.getProperty)(a)}`:void 0,U=t.scopeValue("formats",{key:a,ref:B,code:x});return typeof B=="object"&&!(B instanceof RegExp)?[B.type||"string",B.validate,(0,mu._)`${U}.validate`]:["string",B,U]}function S(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!D.$async)throw new Error("async format in sync schema");return(0,mu._)`await ${p}(${r})`}return typeof m=="function"?(0,mu._)`${p}(${r})`:(0,mu._)`${p}.test(${r})`}}}};b0.default=bb;Object.defineProperty(g0,"__esModule",{value:!0});const Bb=b0,_b=[Bb.default];g0.default=_b;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.contentVocabulary=Sr.metadataVocabulary=void 0;Sr.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Sr.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Kc,"__esModule",{value:!0});const Sb=Zc,$b=Qc,wb=D0,kb=g0,MD=Sr,qb=[Sb.default,$b.default,(0,wb.default)(),kb.default,MD.metadataVocabulary,MD.contentVocabulary];Kc.default=qb;var B0={},Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.DiscrError=void 0;var UD;(function(u){u.Tag="tag",u.Mapping="mapping"})(UD||(Da.DiscrError=UD={}));Object.defineProperty(B0,"__esModule",{value:!0});const Cr=Ye,Bc=Da,VD=Ru,Tb=$r,Pb=ye,Ob={message:({params:{discrError:u,tagName:e}})=>u===Bc.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:u,tag:e,tagName:t}})=>(0,Cr._)`{error: ${u}, tag: ${t}, tagValue: ${e}}`},Ib={keyword:"discriminator",type:"object",schemaType:"object",error:Ob,code(u){const{gen:e,data:t,schema:r,parentSchema:n,it:a}=u,{oneOf:o}=n;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const s=r.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const i=e.let("valid",!1),c=e.const("tag",(0,Cr._)`${t}${(0,Cr.getProperty)(s)}`);e.if((0,Cr._)`typeof ${c} == "string"`,()=>D(),()=>u.error(!1,{discrError:Bc.DiscrError.Tag,tag:c,tagName:s})),u.ok(i);function D(){const C=f();e.if(!1);for(const F in C)e.elseIf((0,Cr._)`${c} === ${F}`),e.assign(i,l(C[F]));e.else(),u.error(!1,{discrError:Bc.DiscrError.Mapping,tag:c,tagName:s}),e.endIf()}function l(C){const F=e.name("valid"),A=u.subschema({keyword:"oneOf",schemaProp:C},F);return u.mergeEvaluated(A,Cr.Name),F}function f(){var C;const F={},A=p(n);let m=!0;for(let S=0;S<o.length;S++){let B=o[S];if(B!=null&&B.$ref&&!(0,Pb.schemaHasRulesButRef)(B,a.self.RULES)){const U=B.$ref;if(B=VD.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,U),B instanceof VD.SchemaEnv&&(B=B.schema),B===void 0)throw new Tb.default(a.opts.uriResolver,a.baseId,U)}const x=(C=B==null?void 0:B.properties)===null||C===void 0?void 0:C[s];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);m=m&&(A||p(B)),d(x,S)}if(!m)throw new Error(`discriminator: "${s}" must be required`);return F;function p({required:S}){return Array.isArray(S)&&S.includes(s)}function d(S,B){if(S.const)h(S.const,B);else if(S.enum)for(const x of S.enum)h(x,B);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function h(S,B){if(typeof S!="string"||S in F)throw new Error(`discriminator: "${s}" values must be unique strings`);F[S]=B}}}};B0.default=Ib;const jb="http://json-schema.org/draft-07/schema#",xb="http://json-schema.org/draft-07/schema#",Rb="Core schema meta-schema",Nb={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Mb=["object","boolean"],Ub={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Vb={$schema:jb,$id:xb,title:Rb,definitions:Nb,type:Mb,properties:Ub,default:!0};(function(u,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const t=Em,r=Kc,n=B0,a=Vb,o=["/properties"],s="http://json-schema.org/draft-07/schema";class i extends t.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(F=>this.addVocabulary(F)),this.opts.discriminator&&this.addKeyword(n.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const F=this.opts.$data?this.$dataMetaSchema(a,o):a;this.addMetaSchema(F,s,!1),this.refs["http://json-schema.org/schema"]=s}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(s)?s:void 0)}}e.Ajv=i,u.exports=e=i,u.exports.Ajv=i,Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var c=at;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var D=Ye;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return D._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return D.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return D.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return D.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return D.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return D.CodeGen}});var l=sn;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return l.default}});var f=$r;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(hc,hc.exports);var zb=hc.exports;const Wb="Root",Lb="object",Gb="Root Element",Hb={base64String:{type:"string",pattern:"^[A-Za-z0-9/+=]*$"},tagString:{type:"string",pattern:"^[a-z][a-z0-9]*(:.+)?$"}},Jb={id:{type:"string"},metadata:{type:"object",properties:{selectors:{type:"object",additionalProperties:{type:"string"}}},required:["selectors"],additionalProperties:!1},tags:{type:"array",items:{type:"string",$ref:"#/definitions/tagString"}},enums:{type:"object",properties:{ids:{$ref:"#/definitions/base64String"},wordLike:{$ref:"#/definitions/base64String"},notWordLike:{$ref:"#/definitions/base64String"},scopeBits:{$ref:"#/definitions/base64String"},graftTypes:{$ref:"#/definitions/base64String"}},required:["ids","wordLike","notWordLike","scopeBits","graftTypes"],additionalProperties:!1},docs:{type:"object",propertyNames:{type:"string"},additionalProperties:{type:"object",properties:{sequences:{type:"object",additionalProperties:{type:"object",properties:{type:{type:"string"},blocks:{type:"array",items:{type:"object",properties:{bs:{type:"string"},bg:{type:"string"},c:{type:"string"},is:{type:"string"},os:{type:"string"},nt:{type:"string"}},required:["bs","bg","c","is","os","nt"],additionalProperties:!1}},tags:{type:"array",items:{type:"string",$ref:"#/definitions/tagString"}},chapters:{type:"object",additionalProperties:{type:"string"}},chapterVerses:{type:"object",additionalProperties:{type:"string"}},tokensPresent:{type:"string"}},required:["blocks","tags"],additionalProperties:!1}},headers:{type:"object",additionalProperties:{type:"string"}},mainId:{type:"string"},tags:{type:"array",items:{type:"string",$ref:"#/definitions/tagString"}}},required:["sequences","headers","mainId","tags"],additionalProperties:!1}},additionalProperties:!1},Kb=["id","enums","docs","tags"],Zb=!1,Yb={title:Wb,type:Lb,description:Gb,definitions:Hb,properties:Jb,required:Kb,additionalProperties:Zb},Qb="version 0.1.0",Xb="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_2_1/document_structure.json",e8="Document (Structure)",u8="A document, typically corresponding to a single USFM or USX book",t8="object",r8={schema:{type:"object",properties:{structure:{description:"The basic 'shape' of the content",type:"string",enum:["flat","nested"]},structure_version:{description:"the semantic version of the structure schema",type:"string"},constraints:{type:"array",items:{type:"object",properties:{name:{type:"string",enum:["perf","sofria"]},version:{description:"the semantic version of the constraint schema",type:"string"}},additionalProperties:!1,required:["name","version"]}}},required:["structure","structure_version","constraints"],additionalProperties:!1},metadata:{description:"Metadata describing the document and the translation it belongs to",type:"object",properties:{translation:{type:"object",description:"Metadata concerning the translation to which the document belongs",properties:{tags:{description:"Tags attached to the translation",type:"array",items:{type:"string"}},properties:{type:"object",description:"Key/value properties attached to the translation",additionalProperties:{type:"string"}},selectors:{type:"object",description:"Proskomma selectors for the translation that, together, provide a primary key in the translation store",additionalProperties:{type:"string"}}},additionalProperties:{type:"string"},required:["id"]},document:{type:"object",description:"Metadata concerning the document itself",properties:{tags:{type:"array",description:"Tags attached to the document",items:{type:"string"}},properties:{type:"object",description:"Key/value properties attached to the document",additionalProperties:{type:"string"}},chapters:{type:"string",pattern:"^[1-9][0-9]*(-[1-9][0-9]*)?$"}},additionalProperties:{type:"string"}}},additionalProperties:!1},sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./sequence_structure.json"}},sequence:{$ref:"./sequence_structure.json"},main_sequence_id:{type:"string"}},n8=["schema","metadata"],a8=!1,o8={required:["sequences","main_sequence_id"],not:{required:["sequence"]}},s8={$comment:Qb,$id:Xb,title:e8,description:u8,type:t8,properties:r8,required:n8,additionalProperties:a8,if:{properties:{schema:{type:"object",properties:{structure:{enum:["flat"]}}}}},then:o8,else:{required:["sequence"],allOf:[{not:{required:["sequences"]}},{not:{required:["main_sequence_id"]}}]}},i8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_2_1/sequence_structure.json",c8="Sequence (Structure)",D8="A sequence contains a 'flow' of one or more blocks",l8="object",d8={type:{description:"The type of sequence",type:"string"},preview_text:{description:"An optional field to provide some kind of printable label",type:"string"},blocks:{type:"array",description:"The blocks that, together, represent the 'flow' of the sequence",items:{$ref:"./block_structure.json"}}},f8=["type"],p8=!1,F8={$id:i8,title:c8,description:D8,type:l8,properties:d8,required:f8,additionalProperties:p8},m8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_2_1/block_structure.json",h8="Block (Structure)",E8="A block, which represents either a paragraph of text or a graft",C8="object",A8={type:{type:"string",description:"The type of block",enum:["paragraph","graft"]},subtype:{description:"A type-specific subtype",type:"string"},target:{description:"The id of the sequence containing graft content",type:"string"},sequence:{description:"The sequence containing graft content",$ref:"./sequence_structure.json"},preview_text:{description:"An optional field to provide some kind of printable label for a graft",type:"string"},new:{description:"If present and true, is interpreted as a request for the server to create a new graft",type:"boolean"},atts:{type:"object",description:"An object containing USFM attributes or subtype-specific additional information (such as the number of a verse or chapter). The value may be a boolean, a string or an array of strings",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"},{type:"boolean"}]}},content:{type:"array",description:"The content of the block",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}}},v8=["type"],y8=!1,g8={required:["content"],allOf:[{not:{required:["new"]}},{not:{required:["preview_text"]}},{not:{required:["target"]}}]},b8={$id:m8,title:h8,description:E8,type:C8,properties:A8,required:v8,additionalProperties:y8,if:{properties:{type:{enum:["paragraph"]}}},then:g8,else:{if:{required:["new"],properties:{new:{enum:[!0]}}},then:{allOf:[{oneOf:[{required:["subtype"]},{required:["sequence"]}]},{not:{required:["target"]}},{not:{required:["preview_text"]}},{not:{required:["content"]}}]},else:{oneOf:[{required:["target"]},{required:["sequence"]}]}}},B8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_2_1/contentElement_structure.json",_8="Content Element (Structure)",S8="A content element, ie some form of (possibly nested) markup",$8="object",w8={type:{type:"string",description:"The type of element",enum:["mark","wrapper","start_milestone","end_milestone","graft"]},subtype:{description:"The subtype of the element, which is context-dependent",type:"string"},atts:{type:"object",description:"An object containing USFM attributes or subtype-specific additional information (such as the number of a verse or chapter). The value may be a boolean, a string or an array of strings",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"},{type:"boolean"}]}},target:{type:"string",description:"The id of the sequence containing graft content"},sequence:{description:"The sequence containing graft content",$ref:"./sequence_structure.json"},preview_text:{description:"An optional field to provide some kind of printable label for a graft",type:"string"},new:{type:"boolean",description:"If present and true, is interpreted as a request for the server to create a new graft"},content:{type:"array",description:"Nested content within the content element",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},meta_content:{type:"array",description:"Non-Scripture content related to the content element, such as checking data or related resources",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}}},k8=["type"],q8=!1,T8={$id:B8,title:_8,description:S8,type:$8,properties:w8,required:k8,additionalProperties:q8},P8="version 0.2.0",O8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/perf_document_constraint.json",I8="object",j8={sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./perf_sequence_constraint.json"}}},x8={$comment:P8,$id:O8,type:I8,properties:j8},R8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/perf_sequence_constraint.json",N8="object",M8={type:{type:"string",enum:["main","introduction","intro_title","intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv","footnote","note_caller","xref","pub_number","alt_number","esb_cat","fig","temp"]},blocks:{type:"array",items:{$ref:"./perf_block_constraint.json"}}},U8={$id:R8,type:N8,properties:M8},V8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/perf_block_constraint.json",z8="object",W8={type:{type:"string",enum:["paragraph","graft"]},content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}}},L8={properties:{subtype:{enum:["introduction","intro_title","Intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv"]}}},G8={$id:V8,type:z8,properties:W8,if:{properties:{type:{enum:["graft"]}}},then:L8,else:{properties:{subtype:{type:"string",pattern:"^usfm:"}}}},H8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/perf_contentElement_constraint.json",J8="object",K8=[{properties:{content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}}}},{if:{properties:{type:{enum:["graft"]}}},then:{properties:{subtype:{enum:["footnote","xref","note_caller"]}},allOf:[{not:{required:["content"]}},{not:{required:["meta_content"]}}],if:{required:["new"],properties:{new:{enum:[!0]}}},then:{not:{anyOf:[{required:["target"]},{required:["preview_text"]}]}},else:{required:["target"]}}},{if:{properties:{type:{enum:["mark"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["chapter","verses"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["chapter","verses"]}}},then:{type:"object",required:["atts"],properties:{atts:{type:"object",required:["number"],maxProperties:1}}}}},{if:{properties:{type:{enum:["wrapper"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["meta_content"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["meta_content"]}}},then:{not:{required:["atts"]}}}},{if:{properties:{type:{enum:["start_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}}}},{if:{properties:{type:{enum:["end_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},not:{required:["atts"]}}}],Z8={$id:H8,type:J8,allOf:K8},Y8="version 0.2.0",Q8="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/sofria_document_constraint.json",X8="object",e3={sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./sofria_sequence_constraint.json"}}},u3={$comment:Y8,$id:Q8,type:X8,properties:e3},t3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/sofria_sequence_constraint.json",r3="object",n3={type:{type:"string",enum:["main","introduction","intro_title","intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv","footnote","note_caller","xref","pub_number","alt_number","esb_cat","fig","temp"]},blocks:{type:"array",items:{$ref:"./sofria_block_constraint.json"}}},a3={$id:t3,type:r3,properties:n3},o3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/sofria_block_constraint.json",s3="object",i3={type:{type:"string",enum:["paragraph","graft"]},content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}}},c3={properties:{subtype:{enum:["introduction","intro_title","Intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv"]}}},D3={$id:o3,type:s3,properties:i3,if:{properties:{type:{enum:["graft"]}}},then:c3,else:{properties:{subtype:{type:"string",pattern:"^usfm:"}}}},l3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_2_1/sofria_contentElement_constraint.json",d3="object",f3=[{properties:{content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}}}},{if:{properties:{type:{enum:["graft"]}}},then:{properties:{subtype:{enum:["footnote","xref","note_caller"]}},allOf:[{not:{required:["content"]}},{not:{required:["meta_content"]}}],if:{required:["new"],properties:{new:{enum:[!0]}}},then:{not:{anyOf:[{required:["block"]},{required:["preview_text"]}]}},else:{required:["block"]}}},{if:{properties:{type:{enum:["mark"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["chapter_label","verses_label"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["chapter","verses"]}}},then:{type:"object",required:["atts"],properties:{atts:{type:"object",required:["number"],maxProperties:1}}}}},{if:{properties:{type:{enum:["wrapper"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["meta_content","chapter","verses"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["meta_content"]}}},then:{not:{required:["atts"]}}}},{if:{properties:{type:{enum:["start_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}}}},{if:{properties:{type:{enum:["end_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},not:{required:["atts"]}}}],p3={$id:l3,type:d3,allOf:f3},F3="version 0.1.0",m3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_3_0/document_structure.json",h3="Document (Structure)",E3="A document, typically corresponding to a single USFM or USX book",C3="object",A3={schema:{type:"object",properties:{structure:{description:"The basic 'shape' of the content",type:"string",enum:["flat","nested"]},structure_version:{description:"the semantic version of the structure schema",type:"string"},constraints:{type:"array",items:{type:"object",properties:{name:{type:"string",enum:["perf","sofria"]},version:{description:"the semantic version of the constraint schema",type:"string"}},additionalProperties:!1,required:["name","version"]}}},required:["structure","structure_version","constraints"],additionalProperties:!1},metadata:{description:"Metadata describing the document and the translation it belongs to",type:"object",properties:{translation:{type:"object",description:"Metadata concerning the translation to which the document belongs",properties:{tags:{description:"Tags attached to the translation",type:"array",items:{type:"string"}},properties:{type:"object",description:"Key/value properties attached to the translation",additionalProperties:{type:"string"}},selectors:{type:"object",description:"Proskomma selectors for the translation that, together, provide a primary key in the translation store",additionalProperties:{type:"string"}}},additionalProperties:{type:"string"},required:["id"]},document:{type:"object",description:"Metadata concerning the document itself",properties:{tags:{type:"array",description:"Tags attached to the document",items:{type:"string"}},properties:{type:"object",description:"Key/value properties attached to the document",additionalProperties:{type:"string"}},chapters:{type:"string",pattern:"^[1-9][0-9]*(-[1-9][0-9]*)?$"}},additionalProperties:{type:"string"}}},additionalProperties:!1},hooks:{type:"array",$ref:"./hook_structure.json"},sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./sequence_structure.json"}},sequence:{$ref:"./sequence_structure.json"},main_sequence_id:{type:"string"}},v3=["schema","metadata"],y3=!1,g3={required:["sequences","main_sequence_id"],not:{required:["sequence"]}},b3={$comment:F3,$id:m3,title:h3,description:E3,type:C3,properties:A3,required:v3,additionalProperties:y3,if:{properties:{schema:{type:"object",properties:{structure:{enum:["flat"]}}}}},then:g3,else:{required:["sequence"],allOf:[{not:{required:["sequences"]}},{not:{required:["main_sequence_id"]}}]}},B3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_3_0/sequence_structure.json",_3="Sequence (Structure)",S3="A sequence contains a 'flow' of one or more blocks",$3="object",w3={type:{description:"The type of sequence",type:"string"},preview_text:{description:"An optional field to provide some kind of printable label",type:"string"},blocks:{type:"array",description:"The blocks that, together, represent the 'flow' of the sequence",items:{$ref:"./block_structure.json"}},hooks:{type:"array",$ref:"./hook_structure.json"}},k3=["type"],q3=!1,T3={$id:B3,title:_3,description:S3,type:$3,properties:w3,required:k3,additionalProperties:q3},P3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_3_0/block_structure.json",O3="Block (Structure)",I3="A block, which represents either a paragraph of text or a graft",j3="object",x3={type:{type:"string",description:"The type of block",enum:["paragraph","row","node","lookup","graft"]},subtype:{description:"A type-specific subtype",type:"string"},target:{description:"The id of the sequence containing graft content",type:"string"},sequence:{description:"The sequence containing graft content",$ref:"./sequence_structure.json"},preview_text:{description:"An optional field to provide some kind of printable label for a graft",type:"string"},new:{description:"If present and true, is interpreted as a request for the server to create a new graft",type:"boolean"},atts:{type:"object",description:"An object containing USFM attributes or subtype-specific additional information (such as the number of a verse or chapter). The value may be a boolean, a string or an array of strings",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"},{type:"boolean"}]}},content:{type:"array",description:"The content of the block",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},hooks:{type:"array",$ref:"./hook_structure.json"}},R3=["type"],N3=!1,M3={required:["content"],allOf:[{not:{required:["new"]}},{not:{required:["preview_text"]}},{not:{required:["target"]}}]},U3={$id:P3,title:O3,description:I3,type:j3,properties:x3,required:R3,additionalProperties:N3,if:{properties:{type:{enum:["paragraph","row","node","lookup"]}}},then:M3,else:{if:{required:["new"],properties:{new:{enum:[!0]}}},then:{allOf:[{oneOf:[{required:["subtype"]},{required:["sequence"]}]},{not:{required:["target"]}},{not:{required:["preview_text"]}},{not:{required:["content"]}}]},else:{oneOf:[{required:["target"]},{required:["sequence"]}]}}},V3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_3_0/contentElement_structure.json",z3="Content Element (Structure)",W3="A content element, ie some form of (possibly nested) markup",L3="object",G3={type:{type:"string",description:"The type of element",enum:["mark","wrapper","start_milestone","end_milestone","graft"]},subtype:{description:"The subtype of the element, which is context-dependent",type:"string"},atts:{type:"object",description:"An object containing USFM attributes or subtype-specific additional information (such as the number of a verse or chapter). The value may be a boolean, a string or an array of strings",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"},{type:"boolean"}]}},target:{type:"string",description:"The id of the sequence containing graft content"},sequence:{description:"The sequence containing graft content",$ref:"./sequence_structure.json"},preview_text:{description:"An optional field to provide some kind of printable label for a graft",type:"string"},new:{type:"boolean",description:"If present and true, is interpreted as a request for the server to create a new graft"},content:{type:"array",description:"Nested content within the content element",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},meta_content:{type:"array",description:"Non-Scripture content related to the content element, such as checking data or related resources",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},hooks:{type:"array",$ref:"./hook_structure.json"}},H3=["type"],J3=!1,K3={$id:V3,title:z3,description:W3,type:L3,properties:G3,required:H3,additionalProperties:J3},Z3="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_3_0/hook_structure.json",Y3="Hook (Structure)",Q3="Hooks, ie typed labels that may be used to link documents",X3="array",eB={type:"array",items:[{type:"string",oneOf:[{enum:["bcv_ref","book_ref"]},{pattern:"^x-(app|publisher)-[a-z][a-z0-9]+-\\S{2,256}$"},{pattern:"^x-local-\\S{2,256}$"}]},{type:"string",oneOf:[{enum:["label"]},{pattern:"^\\w{1,255}$"}]}],minItems:2,maxItems:2},uB={$id:Z3,title:Y3,description:Q3,type:X3,items:eB},tB="version 0.3.0",rB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/perf_document_constraint.json",nB="object",aB={hooks:{type:"array"},sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./perf_sequence_constraint.json"}}},oB={$comment:tB,$id:rB,type:nB,properties:aB},sB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/perf_sequence_constraint.json",iB="object",cB={type:{type:"string",enum:["main","introduction","intro_title","intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv","footnote","note_caller","xref","pub_number","alt_number","esb_cat","fig","temp"]},blocks:{type:"array",items:{$ref:"./perf_block_constraint.json"}}},DB={$id:sB,type:iB,properties:cB},lB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/perf_block_constraint.json",dB="object",fB={type:{type:"string",enum:["paragraph","graft","row","node","lookup"]},content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}}},pB={properties:{subtype:{enum:["introduction","intro_title","Intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv"]}}},FB={$id:lB,type:dB,properties:fB,if:{properties:{type:{enum:["graft"]}}},then:pB,else:{if:{properties:{type:{enum:["row"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["row:heading","row:body"]}]}}},else:{if:{properties:{type:{enum:["node"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["node"]},{pattern:"^x-\\S{1,256}$"}]},atts:{type:"object",properties:{id:{type:"string"},parent:{type:"string"},children:{type:"array",items:{type:"string"}}},required:["id"],additionalProperties:!1}}},else:{if:{properties:{type:{enum:["lookup"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["lookup"]},{pattern:"^x-\\S{1,256}$"}]},atts:{type:"object",properties:{primary:{type:"string"},secondary:{type:"array",items:{type:"string"}}},required:["primary"],additionalProperties:!1}}},else:{properties:{subtype:{type:"string",oneOf:[{pattern:"^usfm:"},{pattern:"^x-\\S{1,256}$"}]}}}}}}},mB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/perf_contentElement_constraint.json",hB="object",EB=[{properties:{content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}}}},{if:{properties:{type:{enum:["graft"]}}},then:{properties:{subtype:{enum:["footnote","xref","note_caller"]}},allOf:[{not:{required:["content"]}},{not:{required:["meta_content"]}}],if:{required:["new"],properties:{new:{enum:[!0]}}},then:{not:{anyOf:[{required:["target"]},{required:["preview_text"]}]}},else:{required:["target"]}}},{if:{properties:{type:{enum:["mark"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["chapter","verses","alt_chapter","alt_verse","pub_chapter","pub_verse"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["chapter","verses"]}}},then:{type:"object",required:["atts"],properties:{atts:{type:"object",required:["number"],maxProperties:1}}}}},{if:{properties:{type:{enum:["wrapper"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["meta_content"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["meta_content"]}}},then:{not:{required:["atts"]}}}},{if:{properties:{type:{enum:["start_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}}}},{if:{properties:{type:{enum:["end_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},not:{required:["atts"]}}}],CB={$id:mB,type:hB,allOf:EB},AB="version 0.3.0",vB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/sofria_document_constraint.json",yB="object",gB={sequence:{$ref:"./sofria_sequence_constraint.json"}},bB={$comment:AB,$id:vB,type:yB,properties:gB},BB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/sofria_sequence_constraint.json",_B="object",SB={type:{type:"string",enum:["main","introduction","intro_title","intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv","footnote","note_caller","xref","pub_number","alt_number","esb_cat","fig","temp"]},blocks:{type:"array",items:{$ref:"./sofria_block_constraint.json"}}},$B={$id:BB,type:_B,properties:SB},wB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/sofria_block_constraint.json",kB="object",qB={type:{type:"string",enum:["paragraph","graft"]},content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}}},TB={properties:{subtype:{enum:["introduction","intro_title","Intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv"]}}},PB={$id:wB,type:kB,properties:qB,if:{properties:{type:{enum:["graft"]}}},then:TB,else:{properties:{subtype:{type:"string",pattern:"^usfm:"}}}},OB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_3_0/sofria_contentElement_constraint.json",IB="object",jB=[{properties:{content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}}}},{if:{properties:{type:{enum:["graft"]}}},then:{properties:{subtype:{enum:["footnote","xref","note_caller"]}},allOf:[{not:{required:["content"]}},{not:{required:["meta_content"]}}],if:{required:["new"],properties:{new:{enum:[!0]}}},then:{not:{anyOf:[{required:["blocks"]},{required:["preview_text"]}]}},else:{required:["sequence"]}}},{if:{properties:{type:{enum:["mark"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["chapter_label","verses_label","alt_chapter","alt_verse","pub_chapter","pub_verse"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["chapter","verses"]}}},then:{type:"object",required:["atts"],properties:{atts:{type:"object",required:["number"],maxProperties:1}}}}},{if:{properties:{type:{enum:["wrapper"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["meta_content","chapter","verses"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["meta_content"]}}},then:{not:{required:["atts"]}}}},{if:{properties:{type:{enum:["start_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}}}},{if:{properties:{type:{enum:["end_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},not:{required:["atts"]}}}],xB={$id:OB,type:IB,allOf:jB},RB="version 0.1.0",NB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_4_0/document_structure.json",MB="Document (Structure)",UB="A document, typically corresponding to a single USFM or USX book",VB="object",zB={schema:{type:"object",properties:{structure:{description:"The basic 'shape' of the content",type:"string",enum:["flat","nested"]},structure_version:{description:"the semantic version of the structure schema",type:"string"},constraints:{type:"array",items:{type:"object",properties:{name:{type:"string",enum:["perf","sofria"]},version:{description:"the semantic version of the constraint schema",type:"string"}},additionalProperties:!1,required:["name","version"]}}},required:["structure","structure_version","constraints"],additionalProperties:!1},metadata:{description:"Metadata describing the document and the translation it belongs to",type:"object",properties:{translation:{type:"object",description:"Metadata concerning the translation to which the document belongs",properties:{tags:{description:"Tags attached to the translation",type:"array",items:{type:"string"}},properties:{type:"object",description:"Key/value properties attached to the translation",additionalProperties:{type:"string"}},selectors:{type:"object",description:"Proskomma selectors for the translation that, together, provide a primary key in the translation store",additionalProperties:{type:"string"}}},additionalProperties:{type:"string"},required:["id"]},document:{type:"object",description:"Metadata concerning the document itself",properties:{tags:{type:"array",description:"Tags attached to the document",items:{type:"string"}},properties:{type:"object",description:"Key/value properties attached to the document",additionalProperties:{type:"string"}},chapters:{type:"string",pattern:"^[1-9][0-9]*(-[1-9][0-9]*)?$"}},additionalProperties:{type:"string"}}},additionalProperties:!1},hooks:{type:"array",$ref:"./hook_structure.json"},sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./sequence_structure.json"}},sequence:{$ref:"./sequence_structure.json"},main_sequence_id:{type:"string"}},WB=["schema","metadata"],LB=!1,GB={required:["sequences","main_sequence_id"],not:{required:["sequence"]}},HB={$comment:RB,$id:NB,title:MB,description:UB,type:VB,properties:zB,required:WB,additionalProperties:LB,if:{properties:{schema:{type:"object",properties:{structure:{enum:["flat"]}}}}},then:GB,else:{required:["sequence"],allOf:[{not:{required:["sequences"]}},{not:{required:["main_sequence_id"]}}]}},JB="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_4_0/sequence_structure.json",KB="Sequence (Structure)",ZB="A sequence contains a 'flow' of one or more blocks",YB="object",QB={type:{description:"The type of sequence",type:"string"},preview_text:{description:"An optional field to provide some kind of printable label",type:"string"},blocks:{type:"array",description:"The blocks that, together, represent the 'flow' of the sequence",items:{$ref:"./block_structure.json"}},hooks:{type:"array",$ref:"./hook_structure.json"}},XB=["type"],e7=!1,u7={$id:JB,title:KB,description:ZB,type:YB,properties:QB,required:XB,additionalProperties:e7},t7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_4_0/block_structure.json",r7="Block (Structure)",n7="A block, which represents either a paragraph of text or a graft",a7="object",o7={type:{type:"string",description:"The type of block",enum:["paragraph","row","graft"]},subtype:{description:"A type-specific subtype",type:"string"},target:{description:"The id of the sequence containing graft content",type:"string"},sequence:{description:"The sequence containing graft content",$ref:"./sequence_structure.json"},preview_text:{description:"An optional field to provide some kind of printable label for a graft",type:"string"},new:{description:"If present and true, is interpreted as a request for the server to create a new graft",type:"boolean"},atts:{type:"object",description:"An object containing USFM attributes or subtype-specific additional information (such as the number of a verse or chapter). The value may be a boolean, a string or an array of strings",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"},{type:"boolean"}]}},content:{type:"array",description:"The content of the block",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},hooks:{type:"array",$ref:"./hook_structure.json"}},s7=["type"],i7=!1,c7={required:["content"],allOf:[{not:{required:["new"]}},{not:{required:["preview_text"]}},{not:{required:["target"]}}]},D7={$id:t7,title:r7,description:n7,type:a7,properties:o7,required:s7,additionalProperties:i7,if:{properties:{type:{enum:["paragraph","row"]}}},then:c7,else:{if:{required:["new"],properties:{new:{enum:[!0]}}},then:{allOf:[{oneOf:[{required:["subtype"]},{required:["sequence"]}]},{not:{required:["target"]}},{not:{required:["preview_text"]}},{not:{required:["content"]}}]},else:{oneOf:[{required:["target"]},{required:["sequence"]}]}}},l7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_4_0/contentElement_structure.json",d7="Content Element (Structure)",f7="A content element, ie some form of (possibly nested) markup",p7="object",F7={type:{type:"string",description:"The type of element",enum:["mark","wrapper","start_milestone","end_milestone","graft"]},subtype:{description:"The subtype of the element, which is context-dependent",type:"string"},atts:{type:"object",description:"An object containing USFM attributes or subtype-specific additional information (such as the number of a verse or chapter). The value may be a boolean, a string or an array of strings",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"},{type:"boolean"},{type:"number"}]}},target:{type:"string",description:"The id of the sequence containing graft content"},sequence:{description:"The sequence containing graft content",$ref:"./sequence_structure.json"},preview_text:{description:"An optional field to provide some kind of printable label for a graft",type:"string"},new:{type:"boolean",description:"If present and true, is interpreted as a request for the server to create a new graft"},content:{type:"array",description:"Nested content within the content element",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},meta_content:{type:"array",description:"Non-Scripture content related to the content element, such as checking data or related resources",items:{oneOf:[{type:"string"},{$ref:"./contentElement_structure.json"}]}},hooks:{type:"array",$ref:"./hook_structure.json"}},m7=["type"],h7=!1,E7={$id:l7,title:d7,description:f7,type:p7,properties:F7,required:m7,additionalProperties:h7},C7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/0_4_0/hook_structure.json",A7="Hook (Structure)",v7="Hooks, ie typed labels that may be used to link documents",y7="array",g7={type:"array",items:[{type:"string",oneOf:[{enum:["bcv_ref","book_ref"]},{pattern:"^x-(app|publisher)-[a-z][a-z0-9]+-\\S{2,256}$"},{pattern:"^x-local-\\S{2,256}$"}]},{type:"string",oneOf:[{enum:["label"]},{pattern:"^\\w{1,255}$"}]}],minItems:2,maxItems:2},b7={$id:C7,title:A7,description:v7,type:y7,items:g7},B7="version 0.3.0",_7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/perf_document_constraint.json",S7="object",$7={hooks:{type:"array"},sequences:{type:"object",propertyNames:{pattern:"^\\S+$"},additionalProperties:{$ref:"./perf_sequence_constraint.json"}}},w7={$comment:B7,$id:_7,type:S7,properties:$7},k7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/perf_sequence_constraint.json",q7="object",T7={type:{type:"string",enum:["main","introduction","intro_title","intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv","footnote","note_caller","xref","pub_number","alt_number","esb_cat","fig","temp"]},blocks:{type:"array",items:{$ref:"./perf_block_constraint.json"}}},P7={$id:k7,type:q7,properties:T7},O7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/perf_block_constraint.json",I7="object",j7={type:{type:"string",enum:["paragraph","graft","row","node","lookup"]},content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}}},x7={properties:{subtype:{enum:["introduction","intro_title","Intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv"]}}},R7={$id:O7,type:I7,properties:j7,if:{properties:{type:{enum:["graft"]}}},then:x7,else:{if:{properties:{type:{enum:["row"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["row:heading","row:body"]}]}}},else:{if:{properties:{type:{enum:["node"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["node"]},{pattern:"^x-\\S{1,256}$"}]},atts:{type:"object",properties:{id:{type:"string"},parent:{type:"string"},children:{type:"array",items:{type:"string"}}},required:["id"],additionalProperties:!1}}},else:{if:{properties:{type:{enum:["lookup"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["lookup"]},{pattern:"^x-\\S{1,256}$"}]},atts:{type:"object",properties:{primary:{type:"string"},secondary:{type:"array",items:{type:"string"}}},required:["primary"],additionalProperties:!1}}},else:{properties:{subtype:{type:"string",oneOf:[{pattern:"^usfm:"},{pattern:"^x-\\S{1,256}$"}]}}}}}}},N7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/perf_contentElement_constraint.json",M7="object",U7=[{properties:{content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./perf_contentElement_constraint.json"}]}}}},{if:{properties:{type:{enum:["graft"]}}},then:{properties:{subtype:{enum:["footnote","xref","note_caller"]}},allOf:[{not:{required:["content"]}},{not:{required:["meta_content"]}}],if:{required:["new"],properties:{new:{enum:[!0]}}},then:{not:{anyOf:[{required:["target"]},{required:["preview_text"]}]}},else:{required:["target"]}}},{if:{properties:{type:{enum:["mark"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["chapter","verses","alt_chapter","alt_verse","pub_chapter","pub_verse"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["chapter","verses"]}}},then:{type:"object",required:["atts"],properties:{atts:{type:"object",required:["number"],maxProperties:1}}}}},{if:{properties:{type:{enum:["wrapper"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["meta_content"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["meta_content"]}}},then:{not:{required:["atts"]}}}},{if:{properties:{type:{enum:["start_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}}}},{if:{properties:{type:{enum:["end_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},not:{required:["atts"]}}}],V7={$id:N7,type:M7,allOf:U7},z7="version 0.3.0",W7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/sofria_document_constraint.json",L7="object",G7={sequence:{$ref:"./sofria_sequence_constraint.json"}},H7={$comment:z7,$id:W7,type:L7,properties:G7},J7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/sofria_sequence_constraint.json",K7="object",Z7={type:{type:"string",enum:["main","introduction","intro_title","intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv","footnote","note_caller","xref","pub_number","alt_number","esb_cat","fig","temp"]},blocks:{type:"array",items:{$ref:"./sofria_block_constraint.json"}}},Y7={$id:J7,type:K7,properties:Z7},Q7="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/sofria_block_constraint.json",X7="object",e4={type:{type:"string",enum:["paragraph","graft","row"]},content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}}},u4={properties:{subtype:{enum:["introduction","intro_title","Intro_end_title","title","end_title","heading","remark","sidebar","table","tree","kv"]}}},t4={$id:Q7,type:X7,properties:e4,if:{properties:{type:{enum:["graft"]}}},then:u4,else:{if:{properties:{type:{enum:["row"]}}},then:{properties:{subtype:{type:"string",enum:["usfm:tr","pk"]}}},else:{properties:{subtype:{type:"string",pattern:"^usfm:"}}}}},r4="https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/constraint/0_4_0/sofria_contentElement_constraint.json",n4="object",a4=[{properties:{content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}},meta_content:{type:"array",items:{oneOf:[{type:"string"},{$ref:"./sofria_contentElement_constraint.json"}]}}}},{if:{properties:{type:{enum:["graft"]}}},then:{properties:{subtype:{enum:["footnote","xref","note_caller"]}},allOf:[{not:{required:["content"]}},{not:{required:["meta_content"]}}],if:{required:["new"],properties:{new:{enum:[!0]}}},then:{not:{anyOf:[{required:["blocks"]},{required:["preview_text"]}]}},else:{required:["sequence"]}}},{if:{properties:{type:{enum:["mark"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["chapter_label","verses_label","alt_chapter","alt_verse","pub_chapter","pub_verse"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["chapter","verses"]}}},then:{type:"object",required:["atts"],properties:{atts:{type:"object",required:["number"],maxProperties:1}}}}},{if:{properties:{type:{enum:["wrapper"]}}},then:{properties:{subtype:{type:"string",oneOf:[{enum:["meta_content","chapter","verses","cell"]},{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},if:{properties:{subtype:{enum:["meta_content"]}}},then:{not:{required:["atts"]}}}},{if:{properties:{type:{enum:["start_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}}}},{if:{properties:{type:{enum:["end_milestone"]}}},then:{properties:{subtype:{type:"string",oneOf:[{pattern:"^[A-Za-z][A-Za-z0-9]*:\\S+$"},{pattern:"^x-\\S+$"}]}},not:{required:["atts"]}}}],o4={$id:r4,type:n4,allOf:a4},s4="https://usfm-committee/usj.schema.json",i4="Unified Scripture JSON",c4="The JSON variant of USFM and USX data models",D4="object",l4={paraMarkerObject:{description:"Para-like content",type:"object",properties:{type:{description:"The kind/category of node or element",type:"string",const:"para"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{$ref:"#/$defs/inParaObject"}},sid:{description:"Indicates the Book-Chapter-Verse-like value",type:"string",pattern:"^[0-6A-Z]{3}( [1-9][0-9]{0,2}(:[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?)?)?$"}},required:["type","marker"],additionalProperties:!1},bookObject:{description:"Book object",type:"object",properties:{type:{description:"The kind/category of node or element",type:"string",const:"book"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",const:"id"},code:{description:"The 3-letter book code in id element",pattern:"^[0-6A-Z]{3}$",type:"string"},content:{type:"array",items:{type:"string"}}},required:["type","marker","code"],additionalProperties:!1},chapterObject:{description:"Chapter object",type:"object",properties:{type:{description:"The kind/category of node or element",type:"string",const:"chapter"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",const:"c"},sid:{description:"Indicates the Book-Chapter-Verse-like value",type:"string",pattern:"^[0-6A-Z]{3}( [1-9][0-9]{0,2}(:[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?)?)?$"},number:{description:"Chapter number",type:"string",pattern:"^[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?$"},altnumber:{description:"Alternative chapter number",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`},pubnumber:{description:"Published characters as non-orthogonal attribute for USFM-incompatibility (mad and wrong)",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`}},required:["type","marker","number"],additionalProperties:!1},sidebarObject:{type:"object",description:"Sidebar, which contains para-like content",properties:{type:{description:"The kind/category of node or element",type:"string",const:"sidebar"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",const:"esb"},content:{type:"array",items:{$ref:"#/$defs/paraMarkerObject"}},category:{description:"Category of extended study bible sections",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`}},required:["type","marker"],additionalProperties:!1},inParaObject:{description:"The set of thingeys that can appear inside a paragraph-like thingeys",anyOf:[{type:"string"},{$ref:"#/$defs/charMarkerObject"},{$ref:"#/$defs/verseObject"},{$ref:"#/$defs/milestoneObject"},{$ref:"#/$defs/figureObject"},{$ref:"#/$defs/noteObject"}]},charMarkerObject:{type:"object",description:"Character-type content",properties:{type:{description:"The kind/category of node or element",type:"string",enum:["char","whitespace","row","cell"]},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{$ref:"#/$defs/inParaObject"}},"link-id":{description:"ID for link",type:"string"},"link-href":{description:"ID for link",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`}},required:["type","marker"],additionalProperties:!1},noteObject:{type:"object",description:"A note",properties:{type:{description:"The kind/category of node or element",type:"string",const:"note"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{$ref:"#/$defs/inParaObject"}},caller:{description:"Caller character for footnotes and cross-refs",type:"string",pattern:`^[^ 	
]$`}},required:["type","marker"],additionalProperties:!1},figureObject:{type:"object",description:"a figure object",properties:{type:{description:"The kind/category of node or element",type:"string",const:"figure"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{type:"string"}},file:{description:"The filename",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`},size:{description:"The file size",type:"string"},ref:{description:"The file ref",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`}},required:["type","marker"],additionalProperties:!1},verseObject:{type:"object",description:"A verse number",properties:{type:{description:"The kind/category of node or element",type:"string",const:"verse"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},sid:{description:"Indicates the Book-Chapter-Verse-like value",type:"string",pattern:"^[0-6A-Z]{3}( [1-9][0-9]{0,2}(:[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?)?)?$"},number:{description:"Verse number",type:"string",pattern:"^[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?$"},altnumber:{description:"Alternative verse number",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`},pubnumber:{description:"Published characters as non-orthogonal attribute for USFM-incompatibility (mad and wrong)",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`}},required:["type","marker","number"],additionalProperties:!1},milestoneObject:{type:"object",description:"Milestone (start or end marker)",properties:{type:{description:"The kind/category of node or element",type:"string",const:"ms"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},sid:{description:"An id to distinguish milestones when using mad and wrong technology to process XML",type:"string",pattern:`^[^ 	
](.*[^ 	
])?$`},who:{description:"The speaker in an sp tag",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`},eid:{description:"The end milestone id",type:"string",pattern:`^[^ 	\r
](.*[^ 	\r
])?$`}},required:["type","marker"],patternProperties:{"^x-":{type:"string"}},additionalProperties:!1},tableObject:{type:"object",description:"A table, which contains rows",properties:{type:{description:"The kind/category of node or element this is, corresponding the USFM marker and USX node",type:"string",const:"table"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{$ref:"#/$defs/rowObject"}},sid:{description:"Indicates the Book-Chapter-Verse value in the paragraph-based structure",type:"string",pattern:"(^[0-6A-Z]{3}( [1-9][0-9]{0,2}(:[1-9][0-9]{0,2}(-[1-9][0-9]{0,2})?)?)?$)|.*"}},required:["type","marker"],additionalProperties:!1},rowObject:{type:"object",description:"A table row which contains cells",properties:{type:{description:"The kind/category of node or element this is, corresponding the USFM marker and USX node",type:"string",const:"row"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{anyOf:[{$ref:"#/$defs/cellObject"}]}}},required:["type","marker"],additionalProperties:!1},cellObject:{type:"object",description:"A table cell",properties:{type:{description:"The kind/category of node or element this is, corresponding the USFM marker and USX node",type:"string",const:"cell"},marker:{description:"The corresponding marker in USFM or style in USX",type:"string",pattern:`^[^ 	\r
]+$`},content:{type:"array",items:{$ref:"#/$defs/inParaObject"}},align:{description:"Alignment of table cells",type:"string",enum:["start","end","center"]},colspan:{description:"Number of columns spanned by the cell",type:"integer",minimum:1}},required:["type","marker"],additionalProperties:!1}},d4={type:{description:"The kind of node/element/marker this is",type:"string"},version:{description:"The USJ spec version",type:"string"},content:{description:"The JSON representation of scripture contents from USFM/USX",type:"array",items:{anyOf:[{$ref:"#/$defs/bookObject"},{$ref:"#/$defs/chapterObject"},{$ref:"#/$defs/paraMarkerObject"},{$ref:"#/$defs/tableObject"},{$ref:"#/$defs/sidebarObject"}]}}},f4=!1,p4={$id:s4,title:i4,description:c4,type:D4,$defs:l4,properties:d4,additionalProperties:f4};var Qe=zb,F4=Yb,Na=s8,or=F8,sr=b8,ir=T8,m4=x8,zD=U8,WD=G8,LD=Z8,h4=u3,GD=a3,HD=D3,JD=p3,Ma=b3,cr=T3,Dr=U3,lr=K3,ct=uB,E4=oB,KD=DB,ZD=FB,YD=CB,C4=bB,QD=$B,XD=PB,el=xB,Ua=HB,dr=u7,fr=D7,pr=E7,Dt=b7,A4=w7,ul=P7,tl=R7,rl=V7,v4=H7,nl=Y7,al=t4,ol=o4,y4=p4;let g4=class{constructor(){this.schema={structure:{},constraint:{},proskomma:{},usj:{}};for(var[e,t]of[["succinct",{"0.2.0":[{name:"Proskomma Serialized Succinct",validator:new Qe().compile(F4)}]}]])this.schema.proskomma[e]=t;for(var[r,n]of[["document",{"0.2.1":[{name:"Document Structure",validator:new Qe().addSchema(ir).addSchema(sr).addSchema(or).compile(Na)}],"0.3.0":[{name:"Document Structure",validator:new Qe().addSchema(ct).addSchema(lr).addSchema(Dr).addSchema(cr).compile(Ma)}],"0.4.0":[{name:"Document Structure",validator:new Qe().addSchema(Dt).addSchema(pr).addSchema(fr).addSchema(dr).compile(Ua)}]}],["sequence",{"0.2.1":[{name:"Sequence Structure",validator:new Qe().addSchema(ir).addSchema(sr).compile(or)}],"0.3.0":[{name:"Sequence Structure",validator:new Qe().addSchema(ct).addSchema(lr).addSchema(Dr).compile(cr)}],"0.4.0":[{name:"Sequence Structure",validator:new Qe().addSchema(Dt).addSchema(pr).addSchema(fr).compile(dr)}]}]])this.schema.structure[r]=n;for(var[a,o]of[["perfDocument",{"0.2.1":[{name:"Document Structure",validator:new Qe().addSchema(ir).addSchema(sr).addSchema(or).compile(Na)},{name:"PERF Document",validator:new Qe().addSchema(LD).addSchema(WD).addSchema(zD).compile(m4)}],"0.3.0":[{name:"Document Structure",validator:new Qe().addSchema(ct).addSchema(lr).addSchema(Dr).addSchema(cr).compile(Ma)},{name:"PERF Document",validator:new Qe().addSchema(ct).addSchema(YD).addSchema(ZD).addSchema(KD).compile(E4)}],"0.4.0":[{name:"Document Structure",validator:new Qe().addSchema(Dt).addSchema(pr).addSchema(fr).addSchema(dr).compile(Ua)},{name:"PERF Document",validator:new Qe().addSchema(Dt).addSchema(rl).addSchema(tl).addSchema(ul).compile(A4)}]}],["perfSequence",{"0.2.1":[{name:"Sequence Structure",validator:new Qe().addSchema(ir).addSchema(sr).compile(or)},{name:"PERF Sequence",validator:new Qe().addSchema(LD).addSchema(WD).compile(zD)}],"0.3.0":[{name:"Sequence Structure",validator:new Qe().addSchema(ct).addSchema(lr).addSchema(Dr).compile(cr)},{name:"PERF Sequence",validator:new Qe().addSchema(ct).addSchema(YD).addSchema(ZD).compile(KD)}],"0.4.0":[{name:"Sequence Structure",validator:new Qe().addSchema(Dt).addSchema(pr).addSchema(fr).compile(dr)},{name:"PERF Sequence",validator:new Qe().addSchema(Dt).addSchema(rl).addSchema(tl).compile(ul)}]}],["sofriaDocument",{"0.2.1":[{name:"Document Structure",validator:new Qe().addSchema(ir).addSchema(sr).addSchema(or).compile(Na)},{name:"SOFRIA Document",validator:new Qe().addSchema(JD).addSchema(HD).addSchema(GD).compile(h4)}],"0.3.0":[{name:"Document Structure",validator:new Qe().addSchema(ct).addSchema(lr).addSchema(Dr).addSchema(cr).compile(Ma)},{name:"SOFRIA Document",validator:new Qe().addSchema(ct).addSchema(el).addSchema(XD).addSchema(QD).compile(C4)}],"0.4.0":[{name:"Document Structure",validator:new Qe().addSchema(Dt).addSchema(pr).addSchema(fr).addSchema(dr).compile(Ua)},{name:"SOFRIA Document",validator:new Qe().addSchema(Dt).addSchema(ol).addSchema(al).addSchema(nl).compile(v4)}]}],["sofriaSequence",{"0.2.1":[{name:"Sequence Structure",validator:new Qe().addSchema(ir).addSchema(sr).compile(or)},{name:"SOFRIA Sequence",validator:new Qe().addSchema(JD).addSchema(HD).compile(GD)}],"0.3.0":[{name:"Sequence Structure",validator:new Qe().addSchema(ct).addSchema(lr).addSchema(Dr).compile(cr)},{name:"SOFRIA Sequence",validator:new Qe().addSchema(ct).addSchema(el).addSchema(XD).compile(QD)}],"0.4.0":[{name:"Sequence Structure",validator:new Qe().addSchema(Dt).addSchema(pr).addSchema(fr).compile(dr)},{name:"SOFRIA Sequence",validator:new Qe().addSchema(Dt).addSchema(ol).addSchema(al).compile(nl)}]}]])this.schema.constraint[a]=o;for(var[s,i]of[["structure",{"0.2.4":[{name:"Unified Scripture JSON",validator:new Qe().compile(y4)}]}]])this.schema.usj[s]=i}schemaInfo(){var e={};for(var[t,r]of Object.entries(this.schema)){e[t]={};for(var[n,a]of Object.entries(r)){e[t][n]={};for(var[o,s]of Object.entries(a))e[t][n][o]=s.map(i=>i.name)}}return e}validate(e,t,r,n){if(n===void 0)throw new Error("data argument is missing. Usage: validate(schemaType, schemaKey, schemaVersion, data)");if(n===null)throw new Error("Data argument is null");var a=Object.keys(this.schema);if(!a.includes(e))throw new Error("Schema type must be one of ".concat(a.map(D=>"'".concat(D,"'")).join(", "),", not '").concat(e,"'"));if(!this.schema[e][t])throw new Error("Unknown ".concat(e," schema key ").concat(t));if(!this.schema[e][t][r])throw new Error("Unknown version ".concat(r," for ").concat(e," schema key ").concat(t));var o=this.schema[e][t][r],s;for(var{name:i,validator:c}of o)if(s={validatorName:i,isValid:c(n),errors:c.errors},!s.isValid)break;return{requested:{schemaType:e,schemaKey:t,schemaVersion:r},lastSchema:s.validatorName,isValid:s.isValid,errors:s.errors}}};var b4=g4,B4=["qs","qac","litl","lik","liv","fr","fq","fqa","fk","fl","fw","fp","fv","ft","fdc","fm","xo","xk","xq","xt","xta","xop","xot","xnt","xdc","rq","add","bk","dc","k","nd","ord","pn","png","qt","sig","sls","tl","wj","em","bd","it","bdit","no","sc","sup","ior","iqt","th","thr","tc","tcr"],_4=["ms","mr","s","sr","r","qa","sp","sd"],S4=["cd","p","m","po","pr","cls","pmo","pm","pmc","pmr","pi","mi","nb","pc","ph","b","q","qr","qc","qa","qm","qd","lh","li","lf","lim","d"],$4=["imt","is","imte"],w4=["ip","ipi","im","imi","ipq","imq","ipr","iq","ib","ili","iot","io","iex"],k4={characterTags:B4,bodyTags:S4,headingTags:_4,introHeadingTags:$4,introBodyTags:w4},_c={exports:{}},ph={exports:{}},Vr=function(u){return u&&u.Math===Math&&u},wu=Vr(typeof globalThis=="object"&&globalThis)||Vr(typeof window=="object"&&window)||Vr(typeof self=="object"&&self)||Vr(typeof vr=="object"&&vr)||Vr(typeof vr=="object"&&vr)||function(){return this}()||Function("return this")(),yu=function(u){try{return!!u()}catch{return!0}},q4=yu,la=!q4(function(){var u=(function(){}).bind();return typeof u!="function"||u.hasOwnProperty("prototype")}),T4=la,Fh=Function.prototype,sl=Fh.apply,il=Fh.call,mh=typeof Reflect=="object"&&Reflect.apply||(T4?il.bind(sl):function(){return il.apply(sl,arguments)}),Va,cl;function hu(){if(cl)return Va;cl=1;var u=la,e=Function.prototype,t=e.call,r=u&&e.bind.bind(t,t);return Va=u?r:function(n){return function(){return t.apply(n,arguments)}},Va}var za,Dl;function Qt(){if(Dl)return za;Dl=1;var u=hu(),e=u({}.toString),t=u("".slice);return za=function(r){return t(e(r),8,-1)},za}var P4=Qt(),O4=hu(),_0=function(u){if(P4(u)==="Function")return O4(u)},Wa=typeof document=="object"&&document.all,Iu=typeof Wa>"u"&&Wa!==void 0?function(u){return typeof u=="function"||u===Wa}:function(u){return typeof u=="function"},S0={},I4=yu,Hu=!I4(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),j4=la,Pn=Function.prototype.call,ot=j4?Pn.bind(Pn):function(){return Pn.apply(Pn,arguments)},$0={},hh={}.propertyIsEnumerable,Eh=Object.getOwnPropertyDescriptor,x4=Eh&&!hh.call({1:2},1);$0.f=x4?function(e){var t=Eh(this,e);return!!t&&t.enumerable}:hh;var Dn=function(u,e){return{enumerable:!(u&1),configurable:!(u&2),writable:!(u&4),value:e}},R4=hu(),N4=yu,M4=Qt(),La=Object,U4=R4("".split),w0=N4(function(){return!La("z").propertyIsEnumerable(0)})?function(u){return M4(u)==="String"?U4(u,""):La(u)}:La,k0=function(u){return u==null},V4=k0,z4=TypeError,ln=function(u){if(V4(u))throw new z4("Can't call method on "+u);return u},W4=w0,L4=ln,Pt=function(u){return W4(L4(u))},G4=Iu,st=function(u){return typeof u=="object"?u!==null:G4(u)},Et={},Ga,ll;function Bt(){if(ll)return Ga;ll=1;var u=Et,e=wu,t=Iu,r=function(n){return t(n)?n:void 0};return Ga=function(n,a){return arguments.length<2?r(u[n])||r(e[n]):u[n]&&u[n][a]||e[n]&&e[n][a]},Ga}var Ha,dl;function Ju(){if(dl)return Ha;dl=1;var u=hu();return Ha=u({}.isPrototypeOf),Ha}var Ja,fl;function dn(){if(fl)return Ja;fl=1;var u=wu,e=u.navigator,t=e&&e.userAgent;return Ja=t?String(t):"",Ja}var Ka,pl;function fn(){if(pl)return Ka;pl=1;var u=wu,e=dn(),t=u.process,r=u.Deno,n=t&&t.versions||r&&r.version,a=n&&n.v8,o,s;return a&&(o=a.split("."),s=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!s&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(s=+o[1]))),Ka=s,Ka}var Za,Fl;function qr(){if(Fl)return Za;Fl=1;var u=fn(),e=yu,t=wu,r=t.String;return Za=!!Object.getOwnPropertySymbols&&!e(function(){var n=Symbol("symbol detection");return!r(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&u&&u<41}),Za}var Ya,ml;function Ch(){if(ml)return Ya;ml=1;var u=qr();return Ya=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ya}var H4=Bt(),J4=Iu,K4=Ju(),Z4=Ch(),Y4=Object,pn=Z4?function(u){return typeof u=="symbol"}:function(u){var e=H4("Symbol");return J4(e)&&K4(e.prototype,Y4(u))},Q4=String,da=function(u){try{return Q4(u)}catch{return"Object"}},X4=Iu,e_=da,u_=TypeError,Tr=function(u){if(X4(u))return u;throw new u_(e_(u)+" is not a function")},t_=Tr,r_=k0,q0=function(u,e){var t=u[e];return r_(t)?void 0:t_(t)},Qa=ot,Xa=Iu,eo=st,n_=TypeError,a_=function(u,e){var t,r;if(e==="string"&&Xa(t=u.toString)&&!eo(r=Qa(t,u))||Xa(t=u.valueOf)&&!eo(r=Qa(t,u))||e!=="string"&&Xa(t=u.toString)&&!eo(r=Qa(t,u)))return r;throw new n_("Can't convert object to primitive value")},Ah={exports:{}},hl=wu,o_=Object.defineProperty,s_=function(u,e){try{o_(hl,u,{value:e,configurable:!0,writable:!0})}catch{hl[u]=e}return e},i_=wu,c_=s_,El="__core-js_shared__",Cl=Ah.exports=i_[El]||c_(El,{});(Cl.versions||(Cl.versions=[])).push({version:"3.38.0",mode:"pure",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"});var T0=Ah.exports,uo,Al;function Pr(){if(Al)return uo;Al=1;var u=T0;return uo=function(e,t){return u[e]||(u[e]=t||{})},uo}var to,vl;function _t(){if(vl)return to;vl=1;var u=ln,e=Object;return to=function(t){return e(u(t))},to}var ro,yl;function Nu(){if(yl)return ro;yl=1;var u=hu(),e=_t(),t=u({}.hasOwnProperty);return ro=Object.hasOwn||function(n,a){return t(e(n),a)},ro}var no,gl;function P0(){if(gl)return no;gl=1;var u=hu(),e=0,t=Math.random(),r=u(1 .toString);return no=function(n){return"Symbol("+(n===void 0?"":n)+")_"+r(++e+t,36)},no}var ao,bl;function bu(){if(bl)return ao;bl=1;var u=wu,e=Pr(),t=Nu(),r=P0(),n=qr(),a=Ch(),o=u.Symbol,s=e("wks"),i=a?o.for||o:o&&o.withoutSetter||r;return ao=function(c){return t(s,c)||(s[c]=n&&t(o,c)?o[c]:i("Symbol."+c)),s[c]},ao}var D_=ot,Bl=st,_l=pn,l_=q0,d_=a_,f_=bu(),p_=TypeError,F_=f_("toPrimitive"),m_=function(u,e){if(!Bl(u)||_l(u))return u;var t=l_(u,F_),r;if(t){if(e===void 0&&(e="default"),r=D_(t,u,e),!Bl(r)||_l(r))return r;throw new p_("Can't convert object to primitive value")}return e===void 0&&(e="number"),d_(u,e)},h_=m_,E_=pn,O0=function(u){var e=h_(u,"string");return E_(e)?e:e+""},C_=wu,Sl=st,Sc=C_.document,A_=Sl(Sc)&&Sl(Sc.createElement),vh=function(u){return A_?Sc.createElement(u):{}},v_=Hu,y_=yu,g_=vh,yh=!v_&&!y_(function(){return Object.defineProperty(g_("div"),"a",{get:function(){return 7}}).a!==7}),b_=Hu,B_=ot,__=$0,S_=Dn,$_=Pt,w_=O0,k_=Nu(),q_=yh,$l=Object.getOwnPropertyDescriptor;S0.f=b_?$l:function(e,t){if(e=$_(e),t=w_(t),q_)try{return $l(e,t)}catch{}if(k_(e,t))return S_(!B_(__.f,e,t),e[t])};var T_=yu,P_=Iu,O_=/#|\.prototype\./,Fn=function(u,e){var t=j_[I_(u)];return t===R_?!0:t===x_?!1:P_(e)?T_(e):!!e},I_=Fn.normalize=function(u){return String(u).replace(O_,".").toLowerCase()},j_=Fn.data={},x_=Fn.NATIVE="N",R_=Fn.POLYFILL="P",N_=Fn,wl=_0,M_=Tr,U_=la,V_=wl(wl.bind),I0=function(u,e){return M_(u),e===void 0?u:U_?V_(u,e):function(){return u.apply(e,arguments)}},it={},z_=Hu,W_=yu,gh=z_&&W_(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),L_=st,G_=String,H_=TypeError,Ot=function(u){if(L_(u))return u;throw new H_(G_(u)+" is not an object")},J_=Hu,K_=yh,Z_=gh,On=Ot,kl=O0,Y_=TypeError,oo=Object.defineProperty,Q_=Object.getOwnPropertyDescriptor,so="enumerable",io="configurable",co="writable";it.f=J_?Z_?function(e,t,r){if(On(e),t=kl(t),On(r),typeof e=="function"&&t==="prototype"&&"value"in r&&co in r&&!r[co]){var n=Q_(e,t);n&&n[co]&&(e[t]=r.value,r={configurable:io in r?r[io]:n[io],enumerable:so in r?r[so]:n[so],writable:!1})}return oo(e,t,r)}:oo:function(e,t,r){if(On(e),t=kl(t),On(r),K_)try{return oo(e,t,r)}catch{}if("get"in r||"set"in r)throw new Y_("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var X_=Hu,e6=it,u6=Dn,fa=X_?function(u,e,t){return e6.f(u,e,u6(1,t))}:function(u,e,t){return u[e]=t,u},zr=wu,t6=mh,r6=_0,n6=Iu,a6=S0.f,o6=N_,Fr=Et,s6=I0,mr=fa,ql=Nu(),i6=function(u){var e=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new u;case 1:return new u(t);case 2:return new u(t,r)}return new u(t,r,n)}return t6(u,this,arguments)};return e.prototype=u.prototype,e},lu=function(u,e){var t=u.target,r=u.global,n=u.stat,a=u.proto,o=r?zr:n?zr[t]:zr[t]&&zr[t].prototype,s=r?Fr:Fr[t]||mr(Fr,t,{})[t],i=s.prototype,c,D,l,f,C,F,A,m,p;for(f in e)c=o6(r?f:t+(n?".":"#")+f,u.forced),D=!c&&o&&ql(o,f),F=s[f],D&&(u.dontCallGetSet?(p=a6(o,f),A=p&&p.value):A=o[f]),C=D&&A?A:e[f],!(!c&&!a&&typeof F==typeof C)&&(u.bind&&D?m=s6(C,zr):u.wrap&&D?m=i6(C):a&&n6(C)?m=r6(C):m=C,(u.sham||C&&C.sham||F&&F.sham)&&mr(m,"sham",!0),mr(s,f,m),a&&(l=t+"Prototype",ql(Fr,l)||mr(Fr,l,{}),mr(Fr[l],f,C),u.real&&i&&(c||!i[f])&&mr(i,f,C)))},c6=lu,D6=Hu,Tl=it.f;c6({target:"Object",stat:!0,forced:Object.defineProperty!==Tl,sham:!D6},{defineProperty:Tl});var l6=Et,bh=l6.Object,d6=ph.exports=function(e,t,r){return bh.defineProperty(e,t,r)};bh.defineProperty.sham&&(d6.sham=!0);var f6=ph.exports,p6=f6,F6=p6,It=F6,Bh={exports:{}};(function(u){function e(t){return t&&t.__esModule?t:{default:t}}u.exports=e,u.exports.__esModule=!0,u.exports.default=u.exports})(Bh);var jt=Bh.exports,In={exports:{}},Pl={},Do,Ol;function Or(){if(Ol)return Do;Ol=1;var u=Qt();return Do=Array.isArray||function(t){return u(t)==="Array"},Do}var lo,Il;function j0(){if(Il)return lo;Il=1;var u=bu(),e=u("toStringTag"),t={};return t[e]="z",lo=String(t)==="[object z]",lo}var fo,jl;function mn(){if(jl)return fo;jl=1;var u=j0(),e=Iu,t=Qt(),r=bu(),n=r("toStringTag"),a=Object,o=t(function(){return arguments}())==="Arguments",s=function(i,c){try{return i[c]}catch{}};return fo=u?t:function(i){var c,D,l;return i===void 0?"Undefined":i===null?"Null":typeof(D=s(c=a(i),n))=="string"?D:o?t(c):(l=t(c))==="Object"&&e(c.callee)?"Arguments":l},fo}var po,xl;function m6(){if(xl)return po;xl=1;var u=hu(),e=Iu,t=T0,r=u(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(n){return r(n)}),po=t.inspectSource,po}var Fo,Rl;function x0(){if(Rl)return Fo;Rl=1;var u=hu(),e=yu,t=Iu,r=mn(),n=Bt(),a=m6(),o=function(){},s=n("Reflect","construct"),i=/^\s*(?:class|function)\b/,c=u(i.exec),D=!i.test(o),l=function(F){if(!t(F))return!1;try{return s(o,[],F),!0}catch{return!1}},f=function(F){if(!t(F))return!1;switch(r(F)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return D||!!c(i,a(F))}catch{return!0}};return f.sham=!0,Fo=!s||e(function(){var C;return l(l.call)||!l(Object)||!l(function(){C=!0})||C})?f:l,Fo}var mo,Nl;function h6(){if(Nl)return mo;Nl=1;var u=Math.ceil,e=Math.floor;return mo=Math.trunc||function(r){var n=+r;return(n>0?e:u)(n)},mo}var ho,Ml;function R0(){if(Ml)return ho;Ml=1;var u=h6();return ho=function(e){var t=+e;return t!==t||t===0?0:u(t)},ho}var Eo,Ul;function _h(){if(Ul)return Eo;Ul=1;var u=R0(),e=Math.max,t=Math.min;return Eo=function(r,n){var a=u(r);return a<0?e(a+n,0):t(a,n)},Eo}var Co,Vl;function E6(){if(Vl)return Co;Vl=1;var u=R0(),e=Math.min;return Co=function(t){var r=u(t);return r>0?e(r,9007199254740991):0},Co}var Ao,zl;function xt(){if(zl)return Ao;zl=1;var u=E6();return Ao=function(e){return u(e.length)},Ao}var vo,Wl;function N0(){if(Wl)return vo;Wl=1;var u=Hu,e=it,t=Dn;return vo=function(r,n,a){u?e.f(r,n,t(0,a)):r[n]=a},vo}var yo,Ll;function M0(){if(Ll)return yo;Ll=1;var u=yu,e=bu(),t=fn(),r=e("species");return yo=function(n){return t>=51||!u(function(){var a=[],o=a.constructor={};return o[r]=function(){return{foo:1}},a[n](Boolean).foo!==1})},yo}var go,Gl;function pa(){if(Gl)return go;Gl=1;var u=hu();return go=u([].slice),go}var Hl;function C6(){if(Hl)return Pl;Hl=1;var u=lu,e=Or(),t=x0(),r=st,n=_h(),a=xt(),o=Pt,s=N0(),i=bu(),c=M0(),D=pa(),l=c("slice"),f=i("species"),C=Array,F=Math.max;return u({target:"Array",proto:!0,forced:!l},{slice:function(m,p){var d=o(this),h=a(d),S=n(m,h),B=n(p===void 0?h:p,h),x,U,R;if(e(d)&&(x=d.constructor,t(x)&&(x===C||e(x.prototype))?x=void 0:r(x)&&(x=x[f],x===null&&(x=void 0)),x===C||x===void 0))return D(d,S,B);for(U=new(x===void 0?C:x)(F(B-S,0)),R=0;S<B;S++,R++)S in d&&s(U,R,d[S]);return U.length=R,U}}),Pl}var bo,Jl;function Rt(){if(Jl)return bo;Jl=1;var u=wu,e=Et;return bo=function(t,r){var n=e[t+"Prototype"],a=n&&n[r];if(a)return a;var o=u[t],s=o&&o.prototype;return s&&s[r]},bo}var Bo,Kl;function A6(){if(Kl)return Bo;Kl=1,C6();var u=Rt();return Bo=u("Array","slice"),Bo}var _o,Zl;function v6(){if(Zl)return _o;Zl=1;var u=Ju(),e=A6(),t=Array.prototype;return _o=function(r){var n=r.slice;return r===t||u(t,r)&&n===t.slice?e:n},_o}var So,Yl;function Sh(){if(Yl)return So;Yl=1;var u=v6();return So=u,So}var $o,Ql;function ra(){return Ql||(Ql=1,$o=Sh()),$o}var Xl={},wo,ed;function Nt(){if(ed)return wo;ed=1;var u=mn(),e=String;return wo=function(t){if(u(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},wo}var ko,ud;function y6(){if(ud)return ko;ud=1;var u=hu(),e=R0(),t=Nt(),r=ln,n=u("".charAt),a=u("".charCodeAt),o=u("".slice),s=function(i){return function(c,D){var l=t(r(c)),f=e(D),C=l.length,F,A;return f<0||f>=C?i?"":void 0:(F=a(l,f),F<55296||F>56319||f+1===C||(A=a(l,f+1))<56320||A>57343?i?n(l,f):F:i?o(l,f,f+2):(F-55296<<10)+(A-56320)+65536)}};return ko={codeAt:s(!1),charAt:s(!0)},ko}var qo,td;function g6(){if(td)return qo;td=1;var u=wu,e=Iu,t=u.WeakMap;return qo=e(t)&&/native code/.test(String(t)),qo}var To,rd;function Fa(){if(rd)return To;rd=1;var u=Pr(),e=P0(),t=u("keys");return To=function(r){return t[r]||(t[r]=e(r))},To}var Po,nd;function ma(){return nd||(nd=1,Po={}),Po}var Oo,ad;function U0(){if(ad)return Oo;ad=1;var u=g6(),e=wu,t=st,r=fa,n=Nu(),a=T0,o=Fa(),s=ma(),i="Object already initialized",c=e.TypeError,D=e.WeakMap,l,f,C,F=function(d){return C(d)?f(d):l(d,{})},A=function(d){return function(h){var S;if(!t(h)||(S=f(h)).type!==d)throw new c("Incompatible receiver, "+d+" required");return S}};if(u||a.state){var m=a.state||(a.state=new D);m.get=m.get,m.has=m.has,m.set=m.set,l=function(d,h){if(m.has(d))throw new c(i);return h.facade=d,m.set(d,h),h},f=function(d){return m.get(d)||{}},C=function(d){return m.has(d)}}else{var p=o("state");s[p]=!0,l=function(d,h){if(n(d,p))throw new c(i);return h.facade=d,r(d,p,h),h},f=function(d){return n(d,p)?d[p]:{}},C=function(d){return n(d,p)}}return Oo={set:l,get:f,has:C,enforce:F,getterFor:A},Oo}var Io,od;function b6(){if(od)return Io;od=1;var u=Hu,e=Nu(),t=Function.prototype,r=u&&Object.getOwnPropertyDescriptor,n=e(t,"name"),a=n&&(function(){}).name==="something",o=n&&(!u||u&&r(t,"name").configurable);return Io={EXISTS:n,PROPER:a,CONFIGURABLE:o},Io}var jo={},xo,sd;function $h(){if(sd)return xo;sd=1;var u=Pt,e=_h(),t=xt(),r=function(n){return function(a,o,s){var i=u(a),c=t(i);if(c===0)return!n&&-1;var D=e(s,c),l;if(n&&o!==o){for(;c>D;)if(l=i[D++],l!==l)return!0}else for(;c>D;D++)if((n||D in i)&&i[D]===o)return n||D||0;return!n&&-1}};return xo={includes:r(!0),indexOf:r(!1)},xo}var Ro,id;function wh(){if(id)return Ro;id=1;var u=hu(),e=Nu(),t=Pt,r=$h().indexOf,n=ma(),a=u([].push);return Ro=function(o,s){var i=t(o),c=0,D=[],l;for(l in i)!e(n,l)&&e(i,l)&&a(D,l);for(;s.length>c;)e(i,l=s[c++])&&(~r(D,l)||a(D,l));return D},Ro}var No,cd;function V0(){return cd||(cd=1,No=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),No}var Mo,Dd;function kh(){if(Dd)return Mo;Dd=1;var u=wh(),e=V0();return Mo=Object.keys||function(r){return u(r,e)},Mo}var ld;function qh(){if(ld)return jo;ld=1;var u=Hu,e=gh,t=it,r=Ot,n=Pt,a=kh();return jo.f=u&&!e?Object.defineProperties:function(s,i){r(s);for(var c=n(i),D=a(i),l=D.length,f=0,C;l>f;)t.f(s,C=D[f++],c[C]);return s},jo}var Uo,dd;function B6(){if(dd)return Uo;dd=1;var u=Bt();return Uo=u("document","documentElement"),Uo}var Vo,fd;function ha(){if(fd)return Vo;fd=1;var u=Ot,e=qh(),t=V0(),r=ma(),n=B6(),a=vh,o=Fa(),s=">",i="<",c="prototype",D="script",l=o("IE_PROTO"),f=function(){},C=function(d){return i+D+s+d+i+"/"+D+s},F=function(d){d.write(C("")),d.close();var h=d.parentWindow.Object;return d=null,h},A=function(){var d=a("iframe"),h="java"+D+":",S;return d.style.display="none",n.appendChild(d),d.src=String(h),S=d.contentWindow.document,S.open(),S.write(C("document.F=Object")),S.close(),S.F},m,p=function(){try{m=new ActiveXObject("htmlfile")}catch{}p=typeof document<"u"?document.domain&&m?F(m):A():F(m);for(var d=t.length;d--;)delete p[c][t[d]];return p()};return r[l]=!0,Vo=Object.create||function(h,S){var B;return h!==null?(f[c]=u(h),B=new f,f[c]=null,B[l]=h):B=p(),S===void 0?B:e.f(B,S)},Vo}var zo,pd;function _6(){if(pd)return zo;pd=1;var u=yu;return zo=!u(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),zo}var Wo,Fd;function Th(){if(Fd)return Wo;Fd=1;var u=Nu(),e=Iu,t=_t(),r=Fa(),n=_6(),a=r("IE_PROTO"),o=Object,s=o.prototype;return Wo=n?o.getPrototypeOf:function(i){var c=t(i);if(u(c,a))return c[a];var D=c.constructor;return e(D)&&c instanceof D?D.prototype:c instanceof o?s:null},Wo}var Lo,md;function Ea(){if(md)return Lo;md=1;var u=fa;return Lo=function(e,t,r,n){return n&&n.enumerable?e[t]=r:u(e,t,r),e},Lo}var Go,hd;function Ph(){if(hd)return Go;hd=1;var u=yu,e=Iu,t=st,r=ha(),n=Th(),a=Ea(),o=bu(),s=o("iterator"),i=!1,c,D,l;[].keys&&(l=[].keys(),"next"in l?(D=n(n(l)),D!==Object.prototype&&(c=D)):i=!0);var f=!t(c)||u(function(){var C={};return c[s].call(C)!==C});return f?c={}:c=r(c),e(c[s])||a(c,s,function(){return this}),Go={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:i},Go}var Ho,Ed;function S6(){if(Ed)return Ho;Ed=1;var u=j0(),e=mn();return Ho=u?{}.toString:function(){return"[object "+e(this)+"]"},Ho}var Jo,Cd;function Ir(){if(Cd)return Jo;Cd=1;var u=j0(),e=it.f,t=fa,r=Nu(),n=S6(),a=bu(),o=a("toStringTag");return Jo=function(s,i,c,D){var l=c?s:s&&s.prototype;l&&(r(l,o)||e(l,o,{configurable:!0,value:i}),D&&!u&&t(l,"toString",n))},Jo}var Ko,Ad;function jr(){return Ad||(Ad=1,Ko={}),Ko}var Zo,vd;function $6(){if(vd)return Zo;vd=1;var u=Ph().IteratorPrototype,e=ha(),t=Dn,r=Ir(),n=jr(),a=function(){return this};return Zo=function(o,s,i,c){var D=s+" Iterator";return o.prototype=e(u,{next:t(+!c,i)}),r(o,D,!1,!0),n[D]=a,o},Zo}var Yo,yd;function w6(){if(yd)return Yo;yd=1;var u=hu(),e=Tr;return Yo=function(t,r,n){try{return u(e(Object.getOwnPropertyDescriptor(t,r)[n]))}catch{}},Yo}var Qo,gd;function k6(){if(gd)return Qo;gd=1;var u=st;return Qo=function(e){return u(e)||e===null},Qo}var Xo,bd;function q6(){if(bd)return Xo;bd=1;var u=k6(),e=String,t=TypeError;return Xo=function(r){if(u(r))return r;throw new t("Can't set "+e(r)+" as a prototype")},Xo}var es,Bd;function T6(){if(Bd)return es;Bd=1;var u=w6(),e=st,t=ln,r=q6();return es=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,a={},o;try{o=u(Object.prototype,"__proto__","set"),o(a,[]),n=a instanceof Array}catch{}return function(i,c){return t(i),r(c),e(i)&&(n?o(i,c):i.__proto__=c),i}}():void 0),es}var us,_d;function Oh(){if(_d)return us;_d=1;var u=lu,e=ot,t=b6(),r=$6(),n=Th();T6();var a=Ir(),o=Ea(),s=bu(),i=jr(),c=Ph(),D=t.PROPER;t.CONFIGURABLE,c.IteratorPrototype;var l=c.BUGGY_SAFARI_ITERATORS,f=s("iterator"),C="keys",F="values",A="entries",m=function(){return this};return us=function(p,d,h,S,B,x,U){r(h,d,S);var R=function(M){if(M===B&&G)return G;if(!l&&M&&M in J)return J[M];switch(M){case C:return function(){return new h(this,M)};case F:return function(){return new h(this,M)};case A:return function(){return new h(this,M)}}return function(){return new h(this)}},T=d+" Iterator",L=!1,J=p.prototype,K=J[f]||J["@@iterator"]||B&&J[B],G=!l&&K||R(B),te=d==="Array"&&J.entries||K,Z,ie,ve;if(te&&(Z=n(te.call(new p)),Z!==Object.prototype&&Z.next&&(a(Z,T,!0,!0),i[T]=m)),D&&B===F&&K&&K.name!==F&&(L=!0,G=function(){return e(K,this)}),B)if(ie={values:R(F),keys:x?G:R(C),entries:R(A)},U)for(ve in ie)(l||L||!(ve in J))&&o(J,ve,ie[ve]);else u({target:d,proto:!0,forced:l||L},ie);return U&&J[f]!==G&&o(J,f,G,{name:B}),i[d]=G,ie},us}var ts,Sd;function Ih(){return Sd||(Sd=1,ts=function(u,e){return{value:u,done:e}}),ts}var $d;function jh(){if($d)return Xl;$d=1;var u=y6().charAt,e=Nt(),t=U0(),r=Oh(),n=Ih(),a="String Iterator",o=t.set,s=t.getterFor(a);return r(String,"String",function(i){o(this,{type:a,string:e(i),index:0})},function(){var c=s(this),D=c.string,l=c.index,f;return l>=D.length?n(void 0,!0):(f=u(D,l),c.index+=f.length,n(f,!1))}),Xl}var wd={},rs,kd;function P6(){if(kd)return rs;kd=1;var u=ot,e=Ot,t=q0;return rs=function(r,n,a){var o,s;e(r);try{if(o=t(r,"return"),!o){if(n==="throw")throw a;return a}o=u(o,r)}catch(i){s=!0,o=i}if(n==="throw")throw a;if(s)throw o;return e(o),a},rs}var ns,qd;function O6(){if(qd)return ns;qd=1;var u=Ot,e=P6();return ns=function(t,r,n,a){try{return a?r(u(n)[0],n[1]):r(n)}catch(o){e(t,"throw",o)}},ns}var as,Td;function I6(){if(Td)return as;Td=1;var u=bu(),e=jr(),t=u("iterator"),r=Array.prototype;return as=function(n){return n!==void 0&&(e.Array===n||r[t]===n)},as}var os,Pd;function z0(){if(Pd)return os;Pd=1;var u=mn(),e=q0,t=k0,r=jr(),n=bu(),a=n("iterator");return os=function(o){if(!t(o))return e(o,a)||e(o,"@@iterator")||r[u(o)]},os}var ss,Od;function j6(){if(Od)return ss;Od=1;var u=ot,e=Tr,t=Ot,r=da,n=z0(),a=TypeError;return ss=function(o,s){var i=arguments.length<2?n(o):s;if(e(i))return t(u(i,o));throw new a(r(o)+" is not iterable")},ss}var is,Id;function x6(){if(Id)return is;Id=1;var u=I0,e=ot,t=_t(),r=O6(),n=I6(),a=x0(),o=xt(),s=N0(),i=j6(),c=z0(),D=Array;return is=function(f){var C=t(f),F=a(this),A=arguments.length,m=A>1?arguments[1]:void 0,p=m!==void 0;p&&(m=u(m,A>2?arguments[2]:void 0));var d=c(C),h=0,S,B,x,U,R,T;if(d&&!(this===D&&n(d)))for(B=F?new this:[],U=i(C,d),R=U.next;!(x=e(R,U)).done;h++)T=p?r(U,m,[x.value,h],!0):x.value,s(B,h,T);else for(S=o(C),B=F?new this(S):D(S);S>h;h++)T=p?m(C[h],h):C[h],s(B,h,T);return B.length=h,B},is}var cs,jd;function R6(){if(jd)return cs;jd=1;var u=bu(),e=u("iterator"),t=!1;try{var r=0,n={next:function(){return{done:!!r++}},return:function(){t=!0}};n[e]=function(){return this},Array.from(n,function(){throw 2})}catch{}return cs=function(a,o){try{if(!o&&!t)return!1}catch{return!1}var s=!1;try{var i={};i[e]=function(){return{next:function(){return{done:s=!0}}}},a(i)}catch{}return s},cs}var xd;function N6(){if(xd)return wd;xd=1;var u=lu,e=x6(),t=R6(),r=!t(function(n){Array.from(n)});return u({target:"Array",stat:!0,forced:r},{from:e}),wd}var Ds,Rd;function M6(){if(Rd)return Ds;Rd=1,jh(),N6();var u=Et;return Ds=u.Array.from,Ds}var ls,Nd;function xh(){if(Nd)return ls;Nd=1;var u=M6();return ls=u,ls}var ds,Md;function Rh(){return Md||(Md=1,ds=xh()),ds}var Ud={},fs,Vd;function Nh(){if(Vd)return fs;Vd=1;var u=TypeError,e=9007199254740991;return fs=function(t){if(t>e)throw u("Maximum allowed index exceeded");return t},fs}var ps,zd;function U6(){if(zd)return ps;zd=1;var u=Or(),e=x0(),t=st,r=bu(),n=r("species"),a=Array;return ps=function(o){var s;return u(o)&&(s=o.constructor,e(s)&&(s===a||u(s.prototype))?s=void 0:t(s)&&(s=s[n],s===null&&(s=void 0))),s===void 0?a:s},ps}var Fs,Wd;function Mh(){if(Wd)return Fs;Wd=1;var u=U6();return Fs=function(e,t){return new(u(e))(t===0?0:t)},Fs}var Ld;function Uh(){if(Ld)return Ud;Ld=1;var u=lu,e=yu,t=Or(),r=st,n=_t(),a=xt(),o=Nh(),s=N0(),i=Mh(),c=M0(),D=bu(),l=fn(),f=D("isConcatSpreadable"),C=l>=51||!e(function(){var m=[];return m[f]=!1,m.concat()[0]!==m}),F=function(m){if(!r(m))return!1;var p=m[f];return p!==void 0?!!p:t(m)},A=!C||!c("concat");return u({target:"Array",proto:!0,arity:1,forced:A},{concat:function(p){var d=n(this),h=i(d,0),S=0,B,x,U,R,T;for(B=-1,U=arguments.length;B<U;B++)if(T=B===-1?d:arguments[B],F(T))for(R=a(T),o(S+R),x=0;x<R;x++,S++)x in T&&s(h,S,T[x]);else o(S+1),s(h,S++,T);return h.length=S,h}}),Ud}var Gd={},Hd={},ms={},Jd;function Vh(){if(Jd)return ms;Jd=1;var u=wh(),e=V0(),t=e.concat("length","prototype");return ms.f=Object.getOwnPropertyNames||function(n){return u(n,t)},ms}var hs={},Kd;function V6(){if(Kd)return hs;Kd=1;var u=Qt(),e=Pt,t=Vh().f,r=pa(),n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(o){try{return t(o)}catch{return r(n)}};return hs.f=function(s){return n&&u(s)==="Window"?a(s):t(e(s))},hs}var Es={},Zd;function zh(){return Zd||(Zd=1,Es.f=Object.getOwnPropertySymbols),Es}var Cs,Yd;function z6(){if(Yd)return Cs;Yd=1;var u=it;return Cs=function(e,t,r){return u.f(e,t,r)},Cs}var As={},Qd;function Wh(){if(Qd)return As;Qd=1;var u=bu();return As.f=u,As}var vs,Xd;function du(){if(Xd)return vs;Xd=1;var u=Et,e=Nu(),t=Wh(),r=it.f;return vs=function(n){var a=u.Symbol||(u.Symbol={});e(a,n)||r(a,n,{value:t.f(n)})},vs}var ys,ef;function Lh(){if(ef)return ys;ef=1;var u=ot,e=Bt(),t=bu(),r=Ea();return ys=function(){var n=e("Symbol"),a=n&&n.prototype,o=a&&a.valueOf,s=t("toPrimitive");a&&!a[s]&&r(a,s,function(i){return u(o,this)},{arity:1})},ys}var gs,uf;function W0(){if(uf)return gs;uf=1;var u=I0,e=hu(),t=w0,r=_t(),n=xt(),a=Mh(),o=e([].push),s=function(i){var c=i===1,D=i===2,l=i===3,f=i===4,C=i===6,F=i===7,A=i===5||C;return function(m,p,d,h){for(var S=r(m),B=t(S),x=n(B),U=u(p,d),R=0,T=h||a,L=c?T(m,x):D||F?T(m,0):void 0,J,K;x>R;R++)if((A||R in B)&&(J=B[R],K=U(J,R,S),i))if(c)L[R]=K;else if(K)switch(i){case 3:return!0;case 5:return J;case 6:return R;case 2:o(L,J)}else switch(i){case 4:return!1;case 7:o(L,J)}return C?-1:l||f?f:L}};return gs={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)},gs}var tf;function W6(){if(tf)return Hd;tf=1;var u=lu,e=wu,t=ot,r=hu(),n=Hu,a=qr(),o=yu,s=Nu(),i=Ju(),c=Ot,D=Pt,l=O0,f=Nt(),C=Dn,F=ha(),A=kh(),m=Vh(),p=V6(),d=zh(),h=S0,S=it,B=qh(),x=$0,U=Ea(),R=z6(),T=Pr(),L=Fa(),J=ma(),K=P0(),G=bu(),te=Wh(),Z=du(),ie=Lh(),ve=Ir(),M=U0(),N=W0().forEach,w=L("hidden"),_="Symbol",O="prototype",$=M.set,E=M.getterFor(_),g=Object[O],P=e.Symbol,ee=P&&P[O],z=e.RangeError,ae=e.TypeError,oe=e.QObject,Be=h.f,qe=S.f,Ue=p.f,Ie=x.f,He=r([].push),Xe=T("symbols"),nu=T("op-symbols"),Eu=T("wks"),Je=!oe||!oe[O]||!oe[O].findChild,Ke=function(ue,H,ce){var he=Be(g,H);he&&delete g[H],qe(ue,H,ce),he&&ue!==g&&qe(g,H,he)},cu=n&&o(function(){return F(qe({},"a",{get:function(){return qe(this,"a",{value:7}).a}})).a!==7})?Ke:qe,ne=function(ue,H){var ce=Xe[ue]=F(ee);return $(ce,{type:_,tag:ue,description:H}),n||(ce.description=H),ce},tu=function(H,ce,he){H===g&&tu(nu,ce,he),c(H);var $e=l(ce);return c(he),s(Xe,$e)?(he.enumerable?(s(H,w)&&H[w][$e]&&(H[w][$e]=!1),he=F(he,{enumerable:C(0,!1)})):(s(H,w)||qe(H,w,C(1,F(null))),H[w][$e]=!0),cu(H,$e,he)):qe(H,$e,he)},b=function(H,ce){c(H);var he=D(ce),$e=A(he).concat(de(he));return N($e,function(Ve){(!n||t(V,he,Ve))&&tu(H,Ve,he[Ve])}),H},k=function(H,ce){return ce===void 0?F(H):b(F(H),ce)},V=function(H){var ce=l(H),he=t(Ie,this,ce);return this===g&&s(Xe,ce)&&!s(nu,ce)?!1:he||!s(this,ce)||!s(Xe,ce)||s(this,w)&&this[w][ce]?he:!0},Y=function(H,ce){var he=D(H),$e=l(ce);if(!(he===g&&s(Xe,$e)&&!s(nu,$e))){var Ve=Be(he,$e);return Ve&&s(Xe,$e)&&!(s(he,w)&&he[w][$e])&&(Ve.enumerable=!0),Ve}},Fe=function(H){var ce=Ue(D(H)),he=[];return N(ce,function($e){!s(Xe,$e)&&!s(J,$e)&&He(he,$e)}),he},de=function(ue){var H=ue===g,ce=Ue(H?nu:D(ue)),he=[];return N(ce,function($e){s(Xe,$e)&&(!H||s(g,$e))&&He(he,Xe[$e])}),he};return a||(P=function(){if(i(ee,this))throw new ae("Symbol is not a constructor");var H=!arguments.length||arguments[0]===void 0?void 0:f(arguments[0]),ce=K(H),he=function($e){var Ve=this===void 0?e:this;Ve===g&&t(he,nu,$e),s(Ve,w)&&s(Ve[w],ce)&&(Ve[w][ce]=!1);var fu=C(1,$e);try{cu(Ve,ce,fu)}catch(eu){if(!(eu instanceof z))throw eu;Ke(Ve,ce,fu)}};return n&&Je&&cu(g,ce,{configurable:!0,set:he}),ne(ce,H)},ee=P[O],U(ee,"toString",function(){return E(this).tag}),U(P,"withoutSetter",function(ue){return ne(K(ue),ue)}),x.f=V,S.f=tu,B.f=b,h.f=Y,m.f=p.f=Fe,d.f=de,te.f=function(ue){return ne(G(ue),ue)},n&&R(ee,"description",{configurable:!0,get:function(){return E(this).description}})),u({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:P}),N(A(Eu),function(ue){Z(ue)}),u({target:_,stat:!0,forced:!a},{useSetter:function(){Je=!0},useSimple:function(){Je=!1}}),u({target:"Object",stat:!0,forced:!a,sham:!n},{create:k,defineProperty:tu,defineProperties:b,getOwnPropertyDescriptor:Y}),u({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:Fe}),ie(),ve(P,_),J[w]=!0,Hd}var rf={},bs,nf;function Gh(){if(nf)return bs;nf=1;var u=qr();return bs=u&&!!Symbol.for&&!!Symbol.keyFor,bs}var af;function L6(){if(af)return rf;af=1;var u=lu,e=Bt(),t=Nu(),r=Nt(),n=Pr(),a=Gh(),o=n("string-to-symbol-registry"),s=n("symbol-to-string-registry");return u({target:"Symbol",stat:!0,forced:!a},{for:function(i){var c=r(i);if(t(o,c))return o[c];var D=e("Symbol")(c);return o[c]=D,s[D]=c,D}}),rf}var of={},sf;function G6(){if(sf)return of;sf=1;var u=lu,e=Nu(),t=pn,r=da,n=Pr(),a=Gh(),o=n("symbol-to-string-registry");return u({target:"Symbol",stat:!0,forced:!a},{keyFor:function(i){if(!t(i))throw new TypeError(r(i)+" is not a symbol");if(e(o,i))return o[i]}}),of}var cf={},Bs,Df;function H6(){if(Df)return Bs;Df=1;var u=hu(),e=Or(),t=Iu,r=Qt(),n=Nt(),a=u([].push);return Bs=function(o){if(t(o))return o;if(e(o)){for(var s=o.length,i=[],c=0;c<s;c++){var D=o[c];typeof D=="string"?a(i,D):(typeof D=="number"||r(D)==="Number"||r(D)==="String")&&a(i,n(D))}var l=i.length,f=!0;return function(C,F){if(f)return f=!1,F;if(e(this))return F;for(var A=0;A<l;A++)if(i[A]===C)return F}}},Bs}var lf;function J6(){if(lf)return cf;lf=1;var u=lu,e=Bt(),t=mh,r=ot,n=hu(),a=yu,o=Iu,s=pn,i=pa(),c=H6(),D=qr(),l=String,f=e("JSON","stringify"),C=n(/./.exec),F=n("".charAt),A=n("".charCodeAt),m=n("".replace),p=n(1 .toString),d=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,B=!D||a(function(){var T=e("Symbol")("stringify detection");return f([T])!=="[null]"||f({a:T})!=="{}"||f(Object(T))!=="{}"}),x=a(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),U=function(T,L){var J=i(arguments),K=c(L);if(!(!o(K)&&(T===void 0||s(T))))return J[1]=function(G,te){if(o(K)&&(te=r(K,this,l(G),te)),!s(te))return te},t(f,null,J)},R=function(T,L,J){var K=F(J,L-1),G=F(J,L+1);return C(h,T)&&!C(S,G)||C(S,T)&&!C(h,K)?"\\u"+p(A(T,0),16):T};return f&&u({target:"JSON",stat:!0,arity:3,forced:B||x},{stringify:function(L,J,K){var G=i(arguments),te=t(B?U:f,null,G);return x&&typeof te=="string"?m(te,d,R):te}}),cf}var df={},ff;function K6(){if(ff)return df;ff=1;var u=lu,e=qr(),t=yu,r=zh(),n=_t(),a=!e||t(function(){r.f(1)});return u({target:"Object",stat:!0,forced:a},{getOwnPropertySymbols:function(s){var i=r.f;return i?i(n(s)):[]}}),df}var pf;function Z6(){return pf||(pf=1,W6(),L6(),G6(),J6(),K6()),Gd}var Ff={},mf;function Y6(){if(mf)return Ff;mf=1;var u=du();return u("asyncIterator"),Ff}var hf={},Ef;function Q6(){if(Ef)return hf;Ef=1;var u=du();return u("hasInstance"),hf}var Cf={},Af;function X6(){if(Af)return Cf;Af=1;var u=du();return u("isConcatSpreadable"),Cf}var vf={},yf;function e9(){if(yf)return vf;yf=1;var u=du();return u("iterator"),vf}var gf={},bf;function u9(){if(bf)return gf;bf=1;var u=du();return u("match"),gf}var Bf={},_f;function t9(){if(_f)return Bf;_f=1;var u=du();return u("matchAll"),Bf}var Sf={},$f;function r9(){if($f)return Sf;$f=1;var u=du();return u("replace"),Sf}var wf={},kf;function n9(){if(kf)return wf;kf=1;var u=du();return u("search"),wf}var qf={},Tf;function a9(){if(Tf)return qf;Tf=1;var u=du();return u("species"),qf}var Pf={},Of;function o9(){if(Of)return Pf;Of=1;var u=du();return u("split"),Pf}var If={},jf;function s9(){if(jf)return If;jf=1;var u=du(),e=Lh();return u("toPrimitive"),e(),If}var xf={},Rf;function i9(){if(Rf)return xf;Rf=1;var u=Bt(),e=du(),t=Ir();return e("toStringTag"),t(u("Symbol"),"Symbol"),xf}var Nf={},Mf;function c9(){if(Mf)return Nf;Mf=1;var u=du();return u("unscopables"),Nf}var Uf={},Vf;function D9(){if(Vf)return Uf;Vf=1;var u=wu,e=Ir();return e(u.JSON,"JSON",!0),Uf}var _s,zf;function l9(){if(zf)return _s;zf=1,Uh(),Z6(),Y6(),Q6(),X6(),e9(),u9(),t9(),r9(),n9(),a9(),o9(),s9(),i9(),c9(),D9();var u=Et;return _s=u.Symbol,_s}var Wf={},Ss,Lf;function d9(){return Lf||(Lf=1,Ss=function(){}),Ss}var $s,Gf;function Hh(){if(Gf)return $s;Gf=1;var u=Pt,e=d9(),t=jr(),r=U0();it.f;var n=Oh(),a=Ih(),o="Array Iterator",s=r.set,i=r.getterFor(o);return $s=n(Array,"Array",function(c,D){s(this,{type:o,target:u(c),index:0,kind:D})},function(){var c=i(this),D=c.target,l=c.index++;if(!D||l>=D.length)return c.target=void 0,a(void 0,!0);switch(c.kind){case"keys":return a(l,!1);case"values":return a(D[l],!1)}return a([l,D[l]],!1)},"values"),t.Arguments=t.Array,e("keys"),e("values"),e("entries"),$s}var ws,Hf;function f9(){return Hf||(Hf=1,ws={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),ws}var Jf;function Jh(){if(Jf)return Wf;Jf=1,Hh();var u=f9(),e=wu,t=Ir(),r=jr();for(var n in u)t(e[n],n),r[n]=r.Array;return Wf}var ks,Kf;function Kh(){if(Kf)return ks;Kf=1;var u=l9();return Jh(),ks=u,ks}var qs,Zf;function Zh(){return Zf||(Zf=1,qs=Kh()),qs}var Ts,Yf;function p9(){if(Yf)return Ts;Yf=1,Hh(),jh();var u=z0();return Ts=u,Ts}var Ps,Qf;function F9(){if(Qf)return Ps;Qf=1;var u=p9();return Jh(),Ps=u,Ps}var Os,Xf;function m9(){if(Xf)return Os;Xf=1;var u=F9();return Os=u,Os}var Is,ep;function h9(){if(ep)return Is;ep=1;var u=m9();return Is=u,Is}var js,up;function Yh(){return up||(up=1,js=h9()),js}var xs,tp;function Qh(){return tp||(tp=1,xs=Yh()),xs}var rp={},np;function E9(){if(np)return rp;np=1;var u=lu,e=Or();return u({target:"Array",stat:!0},{isArray:e}),rp}var Rs,ap;function C9(){if(ap)return Rs;ap=1,E9();var u=Et;return Rs=u.Array.isArray,Rs}var Ns,op;function Xh(){if(op)return Ns;op=1;var u=C9();return Ns=u,Ns}var Ms,sp;function eE(){return sp||(sp=1,Ms=Xh()),Ms}var Us={exports:{}},Vs={exports:{}},zs,ip;function A9(){if(ip)return zs;ip=1;var u=Xh();return zs=u,zs}var Ws,cp;function v9(){if(cp)return Ws;cp=1;var u=A9();return Ws=u,Ws}var Ls,Dp;function y9(){return Dp||(Dp=1,Ls=v9()),Ls}var lp;function g9(){return lp||(lp=1,function(u){var e=y9();function t(r){if(e(r))return r}u.exports=t,u.exports.__esModule=!0,u.exports.default=u.exports}(Vs)),Vs.exports}var Gs={exports:{}},dp={},fp;function b9(){if(fp)return dp;fp=1;var u=bu(),e=it.f,t=u("metadata"),r=Function.prototype;return r[t]===void 0&&e(r,t,{value:null}),dp}var pp={},Fp;function B9(){if(Fp)return pp;Fp=1;var u=du();return u("asyncDispose"),pp}var mp={},hp;function _9(){if(hp)return mp;hp=1;var u=du();return u("dispose"),mp}var Ep={},Cp;function S9(){if(Cp)return Ep;Cp=1;var u=du();return u("metadata"),Ep}var Hs,Ap;function $9(){if(Ap)return Hs;Ap=1;var u=Kh();return b9(),B9(),_9(),S9(),Hs=u,Hs}var vp={},Js,yp;function uE(){if(yp)return Js;yp=1;var u=Bt(),e=hu(),t=u("Symbol"),r=t.keyFor,n=e(t.prototype.valueOf);return Js=t.isRegisteredSymbol||function(o){try{return r(n(o))!==void 0}catch{return!1}},Js}var gp;function w9(){if(gp)return vp;gp=1;var u=lu,e=uE();return u({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),vp}var bp={},Ks,Bp;function tE(){if(Bp)return Ks;Bp=1;for(var u=Pr(),e=Bt(),t=hu(),r=pn,n=bu(),a=e("Symbol"),o=a.isWellKnownSymbol,s=e("Object","getOwnPropertyNames"),i=t(a.prototype.valueOf),c=u("wks"),D=0,l=s(a),f=l.length;D<f;D++)try{var C=l[D];r(a[C])&&n(C)}catch{}return Ks=function(A){if(o&&o(A))return!0;try{for(var m=i(A),p=0,d=s(c),h=d.length;p<h;p++)if(c[d[p]]==m)return!0}catch{}return!1},Ks}var _p;function k9(){if(_p)return bp;_p=1;var u=lu,e=tE();return u({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),bp}var Sp={},$p;function q9(){if($p)return Sp;$p=1;var u=du();return u("customMatcher"),Sp}var wp={},kp;function T9(){if(kp)return wp;kp=1;var u=du();return u("observable"),wp}var qp={},Tp;function P9(){if(Tp)return qp;Tp=1;var u=lu,e=uE();return u({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),qp}var Pp={},Op;function O9(){if(Op)return Pp;Op=1;var u=lu,e=tE();return u({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),Pp}var Ip={},jp;function I9(){if(jp)return Ip;jp=1;var u=du();return u("matcher"),Ip}var xp={},Rp;function j9(){if(Rp)return xp;Rp=1;var u=du();return u("metadataKey"),xp}var Np={},Mp;function x9(){if(Mp)return Np;Mp=1;var u=du();return u("patternMatch"),Np}var Up={},Vp;function R9(){if(Vp)return Up;Vp=1;var u=du();return u("replaceAll"),Up}var Zs,zp;function N9(){if(zp)return Zs;zp=1;var u=$9();return w9(),k9(),q9(),T9(),P9(),O9(),I9(),j9(),x9(),R9(),Zs=u,Zs}var Ys,Wp;function M9(){return Wp||(Wp=1,Ys=N9()),Ys}var Lp={},Qs,Gp;function U9(){if(Gp)return Qs;Gp=1;var u=Hu,e=Or(),t=TypeError,r=Object.getOwnPropertyDescriptor,n=u&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(a){return a instanceof TypeError}}();return Qs=n?function(a,o){if(e(a)&&!r(a,"length").writable)throw new t("Cannot set read only .length");return a.length=o}:function(a,o){return a.length=o},Qs}var Hp;function V9(){if(Hp)return Lp;Hp=1;var u=lu,e=_t(),t=xt(),r=U9(),n=Nh(),a=yu,o=a(function(){return[].push.call({length:4294967296},1)!==4294967297}),s=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(c){return c instanceof TypeError}},i=o||!s();return u({target:"Array",proto:!0,arity:1,forced:i},{push:function(D){var l=e(this),f=t(l),C=arguments.length;n(f+C);for(var F=0;F<C;F++)l[f]=arguments[F],f++;return r(l,f),f}}),Lp}var Xs,Jp;function z9(){if(Jp)return Xs;Jp=1,V9();var u=Rt();return Xs=u("Array","push"),Xs}var ei,Kp;function W9(){if(Kp)return ei;Kp=1;var u=Ju(),e=z9(),t=Array.prototype;return ei=function(r){var n=r.push;return r===t||u(t,r)&&n===t.push?e:n},ei}var ui,Zp;function L9(){if(Zp)return ui;Zp=1;var u=W9();return ui=u,ui}var ti,Yp;function G9(){if(Yp)return ti;Yp=1;var u=L9();return ti=u,ti}var ri,Qp;function H9(){if(Qp)return ri;Qp=1;var u=G9();return ri=u,ri}var ni,Xp;function J9(){return Xp||(Xp=1,ni=H9()),ni}var e1;function K9(){return e1||(e1=1,function(u){var e=M9(),t=Yh(),r=J9();function n(a,o){var s=a==null?null:typeof e<"u"&&t(a)||a["@@iterator"];if(s!=null){var i,c,D,l,f=[],C=!0,F=!1;try{if(D=(s=s.call(a)).next,o===0){if(Object(s)!==s)return;C=!1}else for(;!(C=(i=D.call(s)).done)&&(r(f).call(f,i.value),f.length!==o);C=!0);}catch(A){F=!0,c=A}finally{try{if(!C&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(F)throw c}}return f}}u.exports=n,u.exports.__esModule=!0,u.exports.default=u.exports}(Gs)),Gs.exports}var ai={exports:{}},oi,u1;function Z9(){if(u1)return oi;u1=1;var u=Sh();return oi=u,oi}var si,t1;function Y9(){if(t1)return si;t1=1;var u=Z9();return si=u,si}var ii,r1;function Q9(){return r1||(r1=1,ii=Y9()),ii}var ci,n1;function X9(){if(n1)return ci;n1=1;var u=xh();return ci=u,ci}var Di,a1;function e5(){if(a1)return Di;a1=1;var u=X9();return Di=u,Di}var li,o1;function u5(){return o1||(o1=1,li=e5()),li}var di={exports:{}},s1;function t5(){return s1||(s1=1,function(u){function e(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=Array(r);n<r;n++)a[n]=t[n];return a}u.exports=e,u.exports.__esModule=!0,u.exports.default=u.exports}(di)),di.exports}var i1;function r5(){return i1||(i1=1,function(u){var e=Q9(),t=u5(),r=t5();function n(a,o){if(a){var s;if(typeof a=="string")return r(a,o);var i=e(s={}.toString.call(a)).call(s,8,-1);return i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set"?t(a):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(a,o):void 0}}u.exports=n,u.exports.__esModule=!0,u.exports.default=u.exports}(ai)),ai.exports}var fi={exports:{}},c1;function n5(){return c1||(c1=1,function(u){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u.exports=e,u.exports.__esModule=!0,u.exports.default=u.exports}(fi)),fi.exports}var D1;function rE(){return D1||(D1=1,function(u){var e=g9(),t=K9(),r=r5(),n=n5();function a(o,s){return e(o)||t(o,s)||r(o,s)||n()}u.exports=a,u.exports.__esModule=!0,u.exports.default=u.exports}(Us)),Us.exports}var pi,l1;function a5(){if(l1)return pi;l1=1;var u=Ot;return pi=function(){var e=u(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},pi}var Fi,d1;function o5(){if(d1)return Fi;d1=1;var u=ot,e=Nu(),t=Ju(),r=a5(),n=RegExp.prototype;return Fi=function(a){var o=a.flags;return o===void 0&&!("flags"in n)&&!e(a,"flags")&&t(n,a)?u(r,a):o},Fi}var mi,f1;function s5(){if(f1)return mi;f1=1;var u=o5();return mi=u,mi}var hi,p1;function i5(){if(p1)return hi;p1=1;var u=Ju(),e=s5(),t=RegExp.prototype;return hi=function(r){return r===t||u(t,r)?e(r):r.flags},hi}var Ei,F1;function c5(){if(F1)return Ei;F1=1;var u=i5();return Ei=u,Ei}var Ci,m1;function D5(){return m1||(m1=1,Ci=c5()),Ci}var h1={},Ai,E1;function l5(){if(E1)return Ai;E1=1;var u=da,e=TypeError;return Ai=function(t,r){if(!delete t[r])throw new e("Cannot delete property "+u(r)+" of "+u(t))},Ai}var vi,C1;function d5(){if(C1)return vi;C1=1;var u=pa(),e=Math.floor,t=function(r,n){var a=r.length;if(a<8)for(var o=1,s,i;o<a;){for(i=o,s=r[o];i&&n(r[i-1],s)>0;)r[i]=r[--i];i!==o++&&(r[i]=s)}else for(var c=e(a/2),D=t(u(r,0,c),n),l=t(u(r,c),n),f=D.length,C=l.length,F=0,A=0;F<f||A<C;)r[F+A]=F<f&&A<C?n(D[F],l[A])<=0?D[F++]:l[A++]:F<f?D[F++]:l[A++];return r};return vi=t,vi}var yi,A1;function Ca(){if(A1)return yi;A1=1;var u=yu;return yi=function(e,t){var r=[][e];return!!r&&u(function(){r.call(null,t||function(){return 1},1)})},yi}var gi,v1;function f5(){if(v1)return gi;v1=1;var u=dn(),e=u.match(/firefox\/(\d+)/i);return gi=!!e&&+e[1],gi}var bi,y1;function p5(){if(y1)return bi;y1=1;var u=dn();return bi=/MSIE|Trident/.test(u),bi}var Bi,g1;function F5(){if(g1)return Bi;g1=1;var u=dn(),e=u.match(/AppleWebKit\/(\d+)\./);return Bi=!!e&&+e[1],Bi}var b1;function m5(){if(b1)return h1;b1=1;var u=lu,e=hu(),t=Tr,r=_t(),n=xt(),a=l5(),o=Nt(),s=yu,i=d5(),c=Ca(),D=f5(),l=p5(),f=fn(),C=F5(),F=[],A=e(F.sort),m=e(F.push),p=s(function(){F.sort(void 0)}),d=s(function(){F.sort(null)}),h=c("sort"),S=!s(function(){if(f)return f<70;if(!(D&&D>3)){if(l)return!0;if(C)return C<603;var U="",R,T,L,J;for(R=65;R<76;R++){switch(T=String.fromCharCode(R),R){case 66:case 69:case 70:case 72:L=3;break;case 68:case 71:L=4;break;default:L=2}for(J=0;J<47;J++)F.push({k:T+J,v:L})}for(F.sort(function(K,G){return G.v-K.v}),J=0;J<F.length;J++)T=F[J].k.charAt(0),U.charAt(U.length-1)!==T&&(U+=T);return U!=="DGBEFHACIJK"}}),B=p||!d||!h||!S,x=function(U){return function(R,T){return T===void 0?-1:R===void 0?1:U!==void 0?+U(R,T)||0:o(R)>o(T)?1:-1}};return u({target:"Array",proto:!0,forced:B},{sort:function(R){R!==void 0&&t(R);var T=r(this);if(S)return R===void 0?A(T):A(T,R);var L=[],J=n(T),K,G;for(G=0;G<J;G++)G in T&&m(L,T[G]);for(i(L,x(R)),K=n(L),G=0;G<K;)T[G]=L[G++];for(;G<J;)a(T,G++);return T}}),h1}var _i,B1;function h5(){if(B1)return _i;B1=1,m5();var u=Rt();return _i=u("Array","sort"),_i}var Si,_1;function E5(){if(_1)return Si;_1=1;var u=Ju(),e=h5(),t=Array.prototype;return Si=function(r){var n=r.sort;return r===t||u(t,r)&&n===t.sort?e:n},Si}var $i,S1;function C5(){if(S1)return $i;S1=1;var u=E5();return $i=u,$i}var wi,$1;function A5(){return $1||($1=1,wi=C5()),wi}var w1={},ki,k1;function nE(){return k1||(k1=1,ki=`	
\v\f\r \u2028\u2029\uFEFF`),ki}var qi,q1;function v5(){if(q1)return qi;q1=1;var u=hu(),e=ln,t=Nt(),r=nE(),n=u("".replace),a=RegExp("^["+r+"]+"),o=RegExp("(^|[^"+r+"])["+r+"]+$"),s=function(i){return function(c){var D=t(e(c));return i&1&&(D=n(D,a,"")),i&2&&(D=n(D,o,"$1")),D}};return qi={start:s(1),end:s(2),trim:s(3)},qi}var Ti,T1;function y5(){if(T1)return Ti;T1=1;var u=wu,e=yu,t=hu(),r=Nt(),n=v5().trim,a=nE(),o=u.parseInt,s=u.Symbol,i=s&&s.iterator,c=/^[+-]?0x/i,D=t(c.exec),l=o(a+"08")!==8||o(a+"0x16")!==22||i&&!e(function(){o(Object(i))});return Ti=l?function(C,F){var A=n(r(C));return o(A,F>>>0||(D(c,A)?16:10))}:o,Ti}var P1;function g5(){if(P1)return w1;P1=1;var u=lu,e=y5();return u({global:!0,forced:parseInt!==e},{parseInt:e}),w1}var Pi,O1;function b5(){if(O1)return Pi;O1=1,g5();var u=Et;return Pi=u.parseInt,Pi}var Oi,I1;function B5(){if(I1)return Oi;I1=1;var u=b5();return Oi=u,Oi}var Ii,j1;function _5(){return j1||(j1=1,Ii=B5()),Ii}var x1={},R1;function S5(){if(R1)return x1;R1=1;var u=lu,e=_0,t=$h().indexOf,r=Ca(),n=e([].indexOf),a=!!n&&1/n([1],1,-0)<0,o=a||!r("indexOf");return u({target:"Array",proto:!0,forced:o},{indexOf:function(i){var c=arguments.length>1?arguments[1]:void 0;return a?n(this,i,c)||0:t(this,i,c)}}),x1}var ji,N1;function $5(){if(N1)return ji;N1=1,S5();var u=Rt();return ji=u("Array","indexOf"),ji}var xi,M1;function w5(){if(M1)return xi;M1=1;var u=Ju(),e=$5(),t=Array.prototype;return xi=function(r){var n=r.indexOf;return r===t||u(t,r)&&n===t.indexOf?e:n},xi}var Ri,U1;function k5(){if(U1)return Ri;U1=1;var u=w5();return Ri=u,Ri}var Ni,V1;function Aa(){return V1||(V1=1,Ni=k5()),Ni}var z1={},Mi,W1;function q5(){if(W1)return Mi;W1=1;var u=W0().forEach,e=Ca(),t=e("forEach");return Mi=t?[].forEach:function(n){return u(this,n,arguments.length>1?arguments[1]:void 0)},Mi}var L1;function T5(){if(L1)return z1;L1=1;var u=lu,e=q5();return u({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),z1}var Ui,G1;function P5(){if(G1)return Ui;G1=1,T5();var u=Rt();return Ui=u("Array","forEach"),Ui}var Vi,H1;function O5(){if(H1)return Vi;H1=1;var u=P5();return Vi=u,Vi}var zi,J1;function I5(){if(J1)return zi;J1=1;var u=mn(),e=Nu(),t=Ju(),r=O5(),n=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return zi=function(o){var s=o.forEach;return o===n||t(n,o)&&s===n.forEach||e(a,u(o))?r:s},zi}var Wi,K1;function aE(){return K1||(K1=1,Wi=I5()),Wi}var Z1={},Y1;function j5(){if(Y1)return Z1;Y1=1;var u=lu,e=Hu,t=ha();return u({target:"Object",stat:!0,sham:!e},{create:t}),Z1}var Li,Q1;function x5(){if(Q1)return Li;Q1=1,j5();var u=Et,e=u.Object;return Li=function(r,n){return e.create(r,n)},Li}var Gi,X1;function R5(){if(X1)return Gi;X1=1;var u=x5();return Gi=u,Gi}var Hi,eF;function N5(){return eF||(eF=1,Hi=R5()),Hi}var Ji,uF;function M5(){if(uF)return Ji;uF=1,Uh();var u=Rt();return Ji=u("Array","concat"),Ji}var Ki,tF;function U5(){if(tF)return Ki;tF=1;var u=Ju(),e=M5(),t=Array.prototype;return Ki=function(r){var n=r.concat;return r===t||u(t,r)&&n===t.concat?e:n},Ki}var Zi,rF;function V5(){if(rF)return Zi;rF=1;var u=U5();return Zi=u,Zi}var Yi,nF;function va(){return nF||(nF=1,Yi=V5()),Yi}var aF;function z5(){return aF||(aF=1,function(u,e){var t=ra(),r=Rh(),n=Zh(),a=Qh(),o=eE(),s=It,i=jt;s(e,"__esModule",{value:!0}),e.default=void 0;var c=i(rE()),D=i(D5()),l=i(A5()),f=i(ra()),C=i(_5()),F=i(Aa()),A=i(aE()),m=i(N5()),p=i(va());function d(b,k){var V=typeof n<"u"&&a(b)||b["@@iterator"];if(!V){if(o(b)||(V=h(b))||k){V&&(b=V);var Y=0,Fe=function(){};return{s:Fe,n:function(){return Y>=b.length?{done:!0}:{done:!1,value:b[Y++]}},e:function(he){throw he},f:Fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var de=!0,ue=!1,H;return{s:function(){V=V.call(b)},n:function(){var he=V.next();return de=he.done,he},e:function(he){ue=!0,H=he},f:function(){try{!de&&V.return!=null&&V.return()}finally{if(ue)throw H}}}}function h(b,k){var V;if(b){if(typeof b=="string")return S(b,k);var Y=t(V=Object.prototype.toString.call(b)).call(V,8,-1);if(Y==="Object"&&b.constructor&&(Y=b.constructor.name),Y==="Map"||Y==="Set")return r(b);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return S(b,k)}}function S(b,k){(k==null||k>b.length)&&(k=b.length);for(var V=0,Y=new Array(k);V<k;V++)Y[V]=b[V];return Y}/*!
 * XRegExp 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2007-present MIT License
 */var B="xregexp",x={astral:!1,namespacing:!0},U={},R={},T={},L=[],J="default",K="class",G={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?(?:[:=!]|<[=!])|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},te=/\$(?:\{([^\}]+)\}|<([^>]+)>|(\d\d?|[\s\S]?))/g,Z=/()??/.exec("")[1]===void 0,ie=(0,D.default)(/x/)!==void 0;function ve(b){var k=!0;try{if(new RegExp("",b),b==="y"){var V=function(){return"gy"}(),Y=".a".replace(new RegExp("a",V),".")==="..";Y&&(k=!1)}}catch{k=!1}return k}var M=ve("d"),N=ve("s"),w=ve("u"),_=ve("y"),O={d:M,g:!0,i:!0,m:!0,s:N,u:w,y:_},$=N?/[^dgimsuy]+/g:/[^dgimuy]+/g;function E(b,k,V,Y,Fe){var de;if(b[B]={captureNames:k},Fe)return b;if(b.__proto__)b.__proto__=ne.prototype;else for(var ue in ne.prototype)b[ue]=ne.prototype[ue];return b[B].source=V,b[B].flags=Y&&(0,l.default)(de=Y.split("")).call(de).join(""),b}function g(b){return b.replace(/([\s\S])(?=[\s\S]*\1)/g,"")}function P(b,k){var V;if(!ne.isRegExp(b))throw new TypeError("Type RegExp expected");var Y=b[B]||{},Fe=ae(b),de="",ue="",H=null,ce=null;return k=k||{},k.removeG&&(ue+="g"),k.removeY&&(ue+="y"),ue&&(Fe=Fe.replace(new RegExp("[".concat(ue,"]+"),"g"),"")),k.addG&&(de+="g"),k.addY&&(de+="y"),de&&(Fe=g(Fe+de)),k.isInternalOnly||(Y.source!==void 0&&(H=Y.source),(0,D.default)(Y)!=null&&(ce=de?g((0,D.default)(Y)+de):(0,D.default)(Y))),b=E(new RegExp(k.source||b.source,Fe),oe(b)?(0,f.default)(V=Y.captureNames).call(V,0):null,H,ce,k.isInternalOnly),b}function ee(b){return(0,C.default)(b,16)}function z(b,k,V){var Y=b.index+b[0].length,Fe=b.input[b.index-1],de=b.input[Y];return/^[()|]$/.test(Fe)||/^[()|]$/.test(de)||b.index===0||Y===b.input.length||/\(\?(?:[:=!]|<[=!])$/.test(b.input.substring(b.index-4,b.index))||qe(b.input,Y,V)?"":"(?:)"}function ae(b){return ie?(0,D.default)(b):/\/([a-z]*)$/i.exec(RegExp.prototype.toString.call(b))[1]}function oe(b){return!!(b[B]&&b[B].captureNames)}function Be(b){return(0,C.default)(b,10).toString(16)}function qe(b,k,V){var Y=(0,F.default)(V).call(V,"x")!==-1?/^(?:\s|#[^#\n]*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/;return Y.test((0,f.default)(b).call(b,k))}function Ue(b,k){return Object.prototype.toString.call(b)==="[object ".concat(k,"]")}function Ie(b){if(b==null)throw new TypeError("Cannot convert null or undefined to object");return b}function He(b){for(;b.length<4;)b="0".concat(b);return b}function Xe(b,k){if(g(k)!==k)throw new SyntaxError("Invalid duplicate regex flag ".concat(k));b=b.replace(/^\(\?([\w$]+)\)/,function(de,ue){if(/[dgy]/.test(ue))throw new SyntaxError("Cannot use flags dgy in mode modifier ".concat(de));return k=g(k+ue),""});var V=d(k),Y;try{for(V.s();!(Y=V.n()).done;){var Fe=Y.value;if(!O[Fe])throw new SyntaxError("Unknown regex flag ".concat(Fe))}}catch(de){V.e(de)}finally{V.f()}return{pattern:b,flags:k}}function nu(b){var k={};return Ue(b,"String")?((0,A.default)(ne).call(ne,b,/[^\s,]+/,function(V){k[V]=!0}),k):b}function Eu(b){if(!/^[\w$]$/.test(b))throw new Error("Flag must be a single character A-Za-z0-9_$");O[b]=!0}function Je(b,k,V,Y,Fe){for(var de=L.length,ue=b[V],H=null,ce,he;de--;)if(he=L[de],!(he.leadChar&&he.leadChar!==ue||he.scope!==Y&&he.scope!=="all"||he.flag&&(0,F.default)(k).call(k,he.flag)===-1)&&(ce=ne.exec(b,he.regex,V,"sticky"),ce)){H={matchLength:ce[0].length,output:he.handler.call(Fe,ce,Y,k),reparse:he.reparse};break}return H}function Ke(b){x.astral=b}function cu(b){x.namespacing=b}function ne(b,k){if(ne.isRegExp(b)){if(k!==void 0)throw new TypeError("Cannot supply flags when copying a RegExp");return P(b)}if(b=b===void 0?"":String(b),k=k===void 0?"":String(k),ne.isInstalled("astral")&&(0,F.default)(k).call(k,"A")===-1&&(k+="A"),T[b]||(T[b]={}),!T[b][k]){for(var V={hasNamedCapture:!1,captureNames:[]},Y=J,Fe="",de=0,ue,H=Xe(b,k),ce=H.pattern,he=(0,D.default)(H);de<ce.length;){do ue=Je(ce,he,de,Y,V),ue&&ue.reparse&&(ce=(0,f.default)(ce).call(ce,0,de)+ue.output+(0,f.default)(ce).call(ce,de+ue.matchLength));while(ue&&ue.reparse);if(ue)Fe+=ue.output,de+=ue.matchLength||1;else{var $e=ne.exec(ce,G[Y],de,"sticky"),Ve=(0,c.default)($e,1),fu=Ve[0];Fe+=fu,de+=fu.length,fu==="["&&Y===J?Y=K:fu==="]"&&Y===K&&(Y=J)}}T[b][k]={pattern:Fe.replace(/(?:\(\?:\))+/g,"(?:)"),flags:he.replace($,""),captures:V.hasNamedCapture?V.captureNames:null}}var eu=T[b][k];return E(new RegExp(eu.pattern,(0,D.default)(eu)),eu.captures,b,k)}ne.prototype=/(?:)/,ne.version="5.1.1",ne._clipDuplicates=g,ne._hasNativeFlag=ve,ne._dec=ee,ne._hex=Be,ne._pad4=He,ne.addToken=function(b,k,V){V=V||{};var Y=V,Fe=Y.optionalFlags;if(V.flag&&Eu(V.flag),Fe){Fe=Fe.split("");var de=d(Fe),ue;try{for(de.s();!(ue=de.n()).done;){var H=ue.value;Eu(H)}}catch(ce){de.e(ce)}finally{de.f()}}L.push({regex:P(b,{addG:!0,addY:_,isInternalOnly:!0}),handler:k,scope:V.scope||J,flag:V.flag,reparse:V.reparse,leadChar:V.leadChar}),ne.cache.flush("patterns")},ne.cache=function(b,k){return R[b]||(R[b]={}),R[b][k]||(R[b][k]=ne(b,k))},ne.cache.flush=function(b){b==="patterns"?T={}:R={}},ne.escape=function(b){return String(Ie(b)).replace(/[\\\[\]{}()*+?.^$|]/g,"\\$&").replace(/[\s#\-,]/g,function(k){return"\\u".concat(He(Be(k.charCodeAt(0))))})},ne.exec=function(b,k,V,Y){var Fe="g",de=!1,ue=!1,H;de=_&&!!(Y||k.sticky&&Y!==!1),de?Fe+="y":Y&&(ue=!0,Fe+="FakeY"),k[B]=k[B]||{};var ce=k[B][Fe]||(k[B][Fe]=P(k,{addG:!0,addY:de,source:ue?"".concat(k.source,"|()"):void 0,removeY:Y===!1,isInternalOnly:!0}));return V=V||0,ce.lastIndex=V,H=U.exec.call(ce,b),ue&&H&&H.pop()===""&&(H=null),k.global&&(k.lastIndex=H?ce.lastIndex:0),H},ne.forEach=function(b,k,V){for(var Y=0,Fe=-1,de;de=ne.exec(b,k,Y);)V(de,++Fe,b,k),Y=de.index+(de[0].length||1)},ne.globalize=function(b){return P(b,{addG:!0})},ne.install=function(b){b=nu(b),!x.astral&&b.astral&&Ke(!0),!x.namespacing&&b.namespacing&&cu(!0)},ne.isInstalled=function(b){return!!x[b]},ne.isRegExp=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},ne.match=function(b,k,V){var Y=k.global&&V!=="one"||V==="all",Fe=(Y?"g":"")+(k.sticky?"y":"")||"noGY";k[B]=k[B]||{};var de=k[B][Fe]||(k[B][Fe]=P(k,{addG:!!Y,removeG:V==="one",isInternalOnly:!0})),ue=String(Ie(b)).match(de);return k.global&&(k.lastIndex=V==="one"&&ue?ue.index+ue[0].length:0),Y?ue||[]:ue&&ue[0]},ne.matchChain=function(b,k){return function V(Y,Fe){var de=k[Fe].regex?k[Fe]:{regex:k[Fe]},ue=[];function H(Ve){if(de.backref){var fu="Backreference to undefined group: ".concat(de.backref),eu=isNaN(de.backref);if(eu&&ne.isInstalled("namespacing")){if(!(Ve.groups&&de.backref in Ve.groups))throw new ReferenceError(fu)}else if(!Ve.hasOwnProperty(de.backref))throw new ReferenceError(fu);var Zu=eu&&ne.isInstalled("namespacing")?Ve.groups[de.backref]:Ve[de.backref];ue.push(Zu||"")}else ue.push(Ve[0])}var ce=d(Y),he;try{for(ce.s();!(he=ce.n()).done;){var $e=he.value;(0,A.default)(ne).call(ne,$e,de.regex,H)}}catch(Ve){ce.e(Ve)}finally{ce.f()}return Fe===k.length-1||!ue.length?ue:V(ue,Fe+1)}([b],0)},ne.replace=function(b,k,V,Y){var Fe=ne.isRegExp(k),de=k.global&&Y!=="one"||Y==="all",ue=(de?"g":"")+(k.sticky?"y":"")||"noGY",H=k;Fe?(k[B]=k[B]||{},H=k[B][ue]||(k[B][ue]=P(k,{addG:!!de,removeG:Y==="one",isInternalOnly:!0}))):de&&(H=new RegExp(ne.escape(String(k)),"g"));var ce=U.replace.call(Ie(b),H,V);return Fe&&k.global&&(k.lastIndex=0),ce},ne.replaceEach=function(b,k){var V=d(k),Y;try{for(V.s();!(Y=V.n()).done;){var Fe=Y.value;b=ne.replace(b,Fe[0],Fe[1],Fe[2])}}catch(de){V.e(de)}finally{V.f()}return b},ne.split=function(b,k,V){return U.split.call(Ie(b),k,V)},ne.test=function(b,k,V,Y){return!!ne.exec(b,k,V,Y)},ne.uninstall=function(b){b=nu(b),x.astral&&b.astral&&Ke(!1),x.namespacing&&b.namespacing&&cu(!1)},ne.union=function(b,k,V){V=V||{};var Y=V.conjunction||"or",Fe=0,de,ue;function H(Zu,St,Ct){var At=ue[Fe-de];if(St){if(++Fe,At)return"(?<".concat(At,">")}else if(Ct)return"\\".concat(+Ct+de);return Zu}if(!(Ue(b,"Array")&&b.length))throw new TypeError("Must provide a nonempty array of patterns to merge");var ce=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*\]/g,he=[],$e=d(b),Ve;try{for($e.s();!(Ve=$e.n()).done;){var fu=Ve.value;ne.isRegExp(fu)?(de=Fe,ue=fu[B]&&fu[B].captureNames||[],he.push(ne(fu.source).source.replace(ce,H))):he.push(ne.escape(fu))}}catch(Zu){$e.e(Zu)}finally{$e.f()}var eu=Y==="none"?"":"|";return ne(he.join(eu),k)},U.exec=function(b){var k=this.lastIndex,V=RegExp.prototype.exec.apply(this,arguments);if(V){if(!Z&&V.length>1&&(0,F.default)(V).call(V,"")!==-1){var Y,Fe=P(this,{removeG:!0,isInternalOnly:!0});(0,f.default)(Y=String(b)).call(Y,V.index).replace(Fe,function(){for(var ce=arguments.length,he=1;he<ce-2;++he)(he<0||arguments.length<=he?void 0:arguments[he])===void 0&&(V[he]=void 0)})}if(this[B]&&this[B].captureNames){var de=V;ne.isInstalled("namespacing")&&(V.groups=(0,m.default)(null),de=V.groups);for(var ue=1;ue<V.length;++ue){var H=this[B].captureNames[ue-1];H&&(de[H]=V[ue])}}else!V.groups&&ne.isInstalled("namespacing")&&(V.groups=void 0);this.global&&!V[0].length&&this.lastIndex>V.index&&(this.lastIndex=V.index)}return this.global||(this.lastIndex=k),V},U.test=function(b){return!!U.exec.call(this,b)},U.match=function(b){if(!ne.isRegExp(b))b=new RegExp(b);else if(b.global){var k=String.prototype.match.apply(this,arguments);return b.lastIndex=0,k}return U.exec.call(b,Ie(this))},U.replace=function(b,k){var V=ne.isRegExp(b),Y,Fe,de;return V?(b[B]&&(Fe=b[B].captureNames),Y=b.lastIndex):b+="",Ue(k,"Function")?de=String(this).replace(b,function(){for(var ue=arguments.length,H=new Array(ue),ce=0;ce<ue;ce++)H[ce]=arguments[ce];if(Fe){var he;ne.isInstalled("namespacing")?(he=(0,m.default)(null),H.push(he)):(H[0]=new String(H[0]),he=H[0]);for(var $e=0;$e<Fe.length;++$e)Fe[$e]&&(he[Fe[$e]]=H[$e+1])}return k.apply(void 0,H)}):de=String(Ie(this)).replace(b,function(){for(var ue=arguments.length,H=new Array(ue),ce=0;ce<ue;ce++)H[ce]=arguments[ce];return String(k).replace(te,he);function he($e,Ve,fu,eu){Ve=Ve||fu;var Zu=Ue(H[H.length-1],"Object")?4:3,St=H.length-Zu;if(Ve){if(/^\d+$/.test(Ve)){var Ct=+Ve;if(Ct<=St)return H[Ct]||""}var At=Fe?(0,F.default)(Fe).call(Fe,Ve):-1;if(At<0)throw new SyntaxError("Backreference to undefined group ".concat($e));return H[At+1]||""}if(eu===""||eu===" ")throw new SyntaxError("Invalid token ".concat($e));if(eu==="&"||+eu==0)return H[0];if(eu==="$")return"$";if(eu==="`"){var er;return(0,f.default)(er=H[H.length-1]).call(er,0,H[H.length-2])}if(eu==="'"){var ur;return(0,f.default)(ur=H[H.length-1]).call(ur,H[H.length-2]+H[0].length)}if(eu=+eu,!isNaN(eu)){if(eu>St)throw new SyntaxError("Backreference to undefined group ".concat($e));return H[eu]||""}throw new SyntaxError("Invalid token ".concat($e))}}),V&&(b.global?b.lastIndex=0:b.lastIndex=Y),de},U.split=function(b,k){if(!ne.isRegExp(b))return String.prototype.split.apply(this,arguments);var V=String(this),Y=[],Fe=b.lastIndex,de=0,ue;return k=(k===void 0?-1:k)>>>0,(0,A.default)(ne).call(ne,V,b,function(H){H.index+H[0].length>de&&(Y.push((0,f.default)(V).call(V,de,H.index)),H.length>1&&H.index<V.length&&Array.prototype.push.apply(Y,(0,f.default)(H).call(H,1)),ue=H[0].length,de=H.index+ue)}),de===V.length?(!b.test("")||ue)&&Y.push(""):Y.push((0,f.default)(V).call(V,de)),b.lastIndex=Fe,Y.length>k?(0,f.default)(Y).call(Y,0,k):Y},ne.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,function(b,k){if(b[1]==="B"&&k===J)return b[0];throw new SyntaxError("Invalid escape ".concat(b[0]))},{scope:"all",leadChar:"\\"}),ne.addToken(/\\u{([\dA-Fa-f]+)}/,function(b,k,V){var Y=ee(b[1]);if(Y>1114111)throw new SyntaxError("Invalid Unicode code point ".concat(b[0]));if(Y<=65535)return"\\u".concat(He(Be(Y)));if(w&&(0,F.default)(V).call(V,"u")!==-1)return b[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")},{scope:"all",leadChar:"\\"}),ne.addToken(/\(\?#[^)]*\)/,z,{leadChar:"("}),ne.addToken(/\s+|#[^\n]*\n?/,z,{flag:"x"}),N||ne.addToken(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."}),ne.addToken(/\\k<([^>]+)>/,function(b){var k,V,Y=isNaN(b[1])?(0,F.default)(k=this.captureNames).call(k,b[1])+1:+b[1],Fe=b.index+b[0].length;if(!Y||Y>this.captureNames.length)throw new SyntaxError("Backreference to undefined group ".concat(b[0]));return(0,p.default)(V="\\".concat(Y)).call(V,Fe===b.input.length||isNaN(b.input[Fe])?"":"(?:)")},{leadChar:"\\"}),ne.addToken(/\\(\d+)/,function(b,k){if(!(k===J&&/^[1-9]/.test(b[1])&&+b[1]<=this.captureNames.length)&&b[1]!=="0")throw new SyntaxError("Cannot use octal escape or backreference to undefined group ".concat(b[0]));return b[0]},{scope:"all",leadChar:"\\"}),ne.addToken(/\(\?P?<((?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0898-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]|\uDB40[\uDD00-\uDDEF])*)>/,function(b){var k;if(!ne.isInstalled("namespacing")&&(b[1]==="length"||b[1]==="__proto__"))throw new SyntaxError("Cannot use reserved word as capture name ".concat(b[0]));if((0,F.default)(k=this.captureNames).call(k,b[1])!==-1)throw new SyntaxError("Cannot use same name for multiple groups ".concat(b[0]));return this.captureNames.push(b[1]),this.hasNamedCapture=!0,"("},{leadChar:"("}),ne.addToken(/\((?!\?)/,function(b,k,V){return(0,F.default)(V).call(V,"n")!==-1?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n",leadChar:"("});var tu=ne;e.default=tu,u.exports=e.default}(In,In.exports)),In.exports}var jn={exports:{}},oF={},Qi,sF;function W5(){if(sF)return Qi;sF=1;var u=Tr,e=_t(),t=w0,r=xt(),n=TypeError,a="Reduce of empty array with no initial value",o=function(s){return function(i,c,D,l){var f=e(i),C=t(f),F=r(f);if(u(c),F===0&&D<2)throw new n(a);var A=s?F-1:0,m=s?-1:1;if(D<2)for(;;){if(A in C){l=C[A],A+=m;break}if(A+=m,s?A<0:F<=A)throw new n(a)}for(;s?A>=0:F>A;A+=m)A in C&&(l=c(l,C[A],A,f));return l}};return Qi={left:o(!1),right:o(!0)},Qi}var Xi,iF;function L5(){if(iF)return Xi;iF=1;var u=wu,e=dn(),t=Qt(),r=function(n){return e.slice(0,n.length)===n};return Xi=function(){return r("Bun/")?"BUN":r("Cloudflare-Workers")?"CLOUDFLARE":r("Deno/")?"DENO":r("Node.js/")?"NODE":u.Bun&&typeof Bun.version=="string"?"BUN":u.Deno&&typeof Deno.version=="object"?"DENO":t(u.process)==="process"?"NODE":u.window&&u.document?"BROWSER":"REST"}(),Xi}var ec,cF;function G5(){if(cF)return ec;cF=1;var u=L5();return ec=u==="NODE",ec}var DF;function H5(){if(DF)return oF;DF=1;var u=lu,e=W5().left,t=Ca(),r=fn(),n=G5(),a=!n&&r>79&&r<83,o=a||!t("reduce");return u({target:"Array",proto:!0,forced:o},{reduce:function(i){var c=arguments.length;return e(this,i,c,c>1?arguments[1]:void 0)}}),oF}var uc,lF;function J5(){if(lF)return uc;lF=1,H5();var u=Rt();return uc=u("Array","reduce"),uc}var tc,dF;function K5(){if(dF)return tc;dF=1;var u=Ju(),e=J5(),t=Array.prototype;return tc=function(r){var n=r.reduce;return r===t||u(t,r)&&n===t.reduce?e:n},tc}var rc,fF;function Z5(){if(fF)return rc;fF=1;var u=K5();return rc=u,rc}var nc,pF;function Y5(){return pF||(pF=1,nc=Z5()),nc}var FF={},mF;function Q5(){if(mF)return FF;mF=1;var u=lu,e=W0().map,t=M0(),r=t("map");return u({target:"Array",proto:!0,forced:!r},{map:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),FF}var ac,hF;function X5(){if(hF)return ac;hF=1,Q5();var u=Rt();return ac=u("Array","map"),ac}var oc,EF;function eS(){if(EF)return oc;EF=1;var u=Ju(),e=X5(),t=Array.prototype;return oc=function(r){var n=r.map;return r===t||u(t,r)&&n===t.map?e:n},oc}var sc,CF;function uS(){if(CF)return sc;CF=1;var u=eS();return sc=u,sc}var ic,AF;function tS(){return AF||(AF=1,ic=uS()),ic}var vF;function rS(){return vF||(vF=1,function(u,e){var t=It,r=jt;t(e,"__esModule",{value:!0}),e.default=void 0;var n=r(Y5()),a=r(tS()),o=r(Aa()),s=r(va());/*!
 * XRegExp.build 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2012-present MIT License
 */var i=function(D){var l="xregexp",f=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*\]/g,C=D.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,f],"g",{conjunction:"or"});function F(h){var S=/^(?:\(\?:\))*\^/,B=/\$(?:\(\?:\))*$/;return S.test(h)&&B.test(h)&&B.test(h.replace(/\\[\s\S]/g,""))?h.replace(S,"").replace(B,""):h}function A(h,S){var B=S?"x":"";return D.isRegExp(h)?h[l]&&h[l].captureNames?h:D(h.source,B):D(h,B)}function m(h){return h instanceof RegExp?h:D.escape(h)}function p(h,S,B){return h["subpattern".concat(B)]=S,h}function d(h,S,B){var x=S<B.length-1;return h+(x?"{{subpattern".concat(S,"}}"):"")}D.tag=function(h){return function(S){for(var B,x,U=arguments.length,R=new Array(U>1?U-1:0),T=1;T<U;T++)R[T-1]=arguments[T];var L=(0,n.default)(B=(0,a.default)(R).call(R,m)).call(B,p,{}),J=(0,a.default)(x=S.raw).call(x,d).join("");return D.build(J,L,h)}},D.build=function(h,S,B){B=B||"";var x=(0,o.default)(B).call(B,"x")!==-1,U=/^\(\?([\w$]+)\)/.exec(h);U&&(B=D._clipDuplicates(B+U[1]));var R={};for(var T in S)if(S.hasOwnProperty(T)){var L=A(S[T],x);R[T]={pattern:F(L.source),names:L[l].captureNames||[]}}var J=A(h,x),K=0,G,te=0,Z=[0],ie=J[l].captureNames||[],ve=J.source.replace(C,function(M,N,w,_,O){var $=N||w,E,g,P;if($){var ee;if(!R.hasOwnProperty($))throw new ReferenceError("Undefined property ".concat(M));N?(E=ie[te],Z[++te]=++K,g="(?<".concat(E||$,">")):g="(?:",G=K;var z=R[$].pattern.replace(f,function(ae,oe,Be){if(oe){if(E=R[$].names[K-G],++K,E)return"(?<".concat(E,">")}else if(Be)return P=+Be-1,R[$].names[P]?"\\k<".concat(R[$].names[P],">"):"\\".concat(+Be+G);return ae});return(0,s.default)(ee="".concat(g)).call(ee,z,")")}if(_){if(E=ie[te],Z[++te]=++K,E)return"(?<".concat(E,">")}else if(O)return P=+O-1,ie[P]?"\\k<".concat(ie[P],">"):"\\".concat(Z[+O]);return M});return D(ve,B)}};e.default=i,u.exports=e.default}(jn,jn.exports)),jn.exports}var xn={exports:{}},yF;function nS(){return yF||(yF=1,function(u,e){var t=It,r=jt;t(e,"__esModule",{value:!0}),e.default=void 0;var n=r(Aa()),a=r(va()),o=r(ra());/*!
 * XRegExp.matchRecursive 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2009-present MIT License
 */var s=function(c){function D(l,f,C,F){return{name:l,value:f,start:C,end:F}}c.matchRecursive=function(l,f,C,F,A){F=F||"",A=A||{};var m=(0,n.default)(F).call(F,"g")!==-1,p=(0,n.default)(F).call(F,"y")!==-1,d=F.replace(/y/g,"");f=c(f,d),C=c(C,d);var h,S=A,B=S.escapeChar;if(B){var x,U;if(B.length>1)throw new Error("Cannot use more than one escape character");B=c.escape(B),h=new RegExp((0,a.default)(x=(0,a.default)(U="(?:".concat(B,"[\\S\\s]|(?:(?!")).call(U,c.union([f,C],"",{conjunction:"or"}).source,")[^")).call(x,B,"])+)+"),F.replace(c._hasNativeFlag("s")?/[^imsu]/g:/[^imu]/g,""))}for(var R=0,T=0,L=0,J=0,K,G,te,Z,ie=A.valueNames,ve=[];;){if(B&&(L+=(c.exec(l,h,L,"sticky")||[""])[0].length),te=c.exec(l,f,L),Z=c.exec(l,C,L),te&&Z&&(te.index<=Z.index?Z=null:te=null),te||Z)T=(te||Z).index,L=T+(te||Z)[0].length;else if(!R)break;if(p&&!R&&T>J)break;if(te)R||(K=T,G=L),R+=1;else if(Z&&R){if(R-=1,!R&&(ie?(ie[0]&&K>J&&ve.push(D(ie[0],(0,o.default)(l).call(l,J,K),J,K)),ie[1]&&ve.push(D(ie[1],(0,o.default)(l).call(l,K,G),K,G)),ie[2]&&ve.push(D(ie[2],(0,o.default)(l).call(l,G,T),G,T)),ie[3]&&ve.push(D(ie[3],(0,o.default)(l).call(l,T,L),T,L))):ve.push((0,o.default)(l).call(l,G,T)),J=L,!m))break}else{var M=A.unbalanced||"error";if(M==="skip"||M==="skip-lazy")if(Z)Z=null;else{if(M==="skip"){var N=c.exec(l,f,K,"sticky")[0].length;L=K+(N||1)}else L=K+1;R=0}else if(M==="error"){var w,_=Z?"right":"left",O=Z?T:K;throw new Error((0,a.default)(w="Unbalanced ".concat(_," delimiter found in string at position ")).call(w,O))}else throw new Error("Unsupported value for unbalanced: ".concat(M))}T===L&&(L+=1)}return m&&ve.length>0&&!p&&ie&&ie[0]&&l.length>J&&ve.push(D(ie[0],(0,o.default)(l).call(l,J),J,l.length)),ve}};e.default=s,u.exports=e.default}(xn,xn.exports)),xn.exports}var Rn={exports:{}},gF;function aS(){return gF||(gF=1,function(u,e){var t=ra(),r=Rh(),n=Zh(),a=Qh(),o=eE(),s=It,i=jt;s(e,"__esModule",{value:!0}),e.default=void 0;var c=i(rE()),D=i(aE()),l=i(va()),f=i(Aa());function C(p,d){var h=typeof n<"u"&&a(p)||p["@@iterator"];if(!h){if(o(p)||(h=F(p))||d){h&&(p=h);var S=0,B=function(){};return{s:B,n:function(){return S>=p.length?{done:!0}:{done:!1,value:p[S++]}},e:function(L){throw L},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=!0,U=!1,R;return{s:function(){h=h.call(p)},n:function(){var L=h.next();return x=L.done,L},e:function(L){U=!0,R=L},f:function(){try{!x&&h.return!=null&&h.return()}finally{if(U)throw R}}}}function F(p,d){var h;if(p){if(typeof p=="string")return A(p,d);var S=t(h=Object.prototype.toString.call(p)).call(h,8,-1);if(S==="Object"&&p.constructor&&(S=p.constructor.name),S==="Map"||S==="Set")return r(p);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return A(p,d)}}function A(p,d){(d==null||d>p.length)&&(d=p.length);for(var h=0,S=new Array(d);h<d;h++)S[h]=p[h];return S}/*!
 * XRegExp Unicode Base 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2008-present MIT License
 */var m=function(d){var h={},S={},B=d._dec,x=d._hex,U=d._pad4;function R(te){return te.replace(/[- _]+/g,"").toLowerCase()}function T(te){var Z=/^\\[xu](.+)/.exec(te);return Z?B(Z[1]):te.charCodeAt(te[0]==="\\"?1:0)}function L(te){var Z="",ie=-1;return(0,D.default)(d).call(d,te,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(ve){var M=T(ve[1]);M>ie+1&&(Z+="\\u".concat(U(x(ie+1))),M>ie+2&&(Z+="-\\u".concat(U(x(M-1))))),ie=T(ve[2]||ve[1])}),ie<65535&&(Z+="\\u".concat(U(x(ie+1))),ie<65534&&(Z+="-\\uFFFF")),Z}function J(te){var Z="b!";return h[te][Z]||(h[te][Z]=L(h[te].bmp))}function K(te,Z){var ie=h[te],ve="";if(ie.bmp&&!ie.isBmpLast){var M;ve=(0,l.default)(M="[".concat(ie.bmp,"]")).call(M,ie.astral?"|":"")}if(ie.astral&&(ve+=ie.astral),ie.isBmpLast&&ie.bmp){var N;ve+=(0,l.default)(N="".concat(ie.astral?"|":"","[")).call(N,ie.bmp,"]")}return Z?"(?:(?!".concat(ve,")(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|[\0-]))"):"(?:".concat(ve,")")}function G(te,Z){var ie=Z?"a!":"a=";return h[te][ie]||(h[te][ie]=K(te,Z))}d.addToken(/\\([pP])(?:{(\^?)(?:(\w+)=)?([^}]*)}|([A-Za-z]))/,function(te,Z,ie){var ve="Invalid double negation ",M="Unknown Unicode token ",N="Unicode token missing data ",w="Astral mode required for Unicode token ",_="Astral mode does not support Unicode tokens within character classes",O=(0,c.default)(te,6),$=O[0],E=O[1],g=O[2],P=O[3],ee=O[4],z=O[5],ae=E==="P"||!!g,oe=(0,f.default)(ie).call(ie,"A")!==-1,Be=R(z||ee),qe=h[Be];if(E==="P"&&g)throw new SyntaxError(ve+$);if(!h.hasOwnProperty(Be))throw new SyntaxError(M+$);if(P&&!(S[P]&&S[P][Be]))throw new SyntaxError(M+$);if(qe.inverseOf){if(Be=R(qe.inverseOf),!h.hasOwnProperty(Be)){var Ue;throw new ReferenceError((0,l.default)(Ue="".concat(N+$," -> ")).call(Ue,qe.inverseOf))}qe=h[Be],ae=!ae}if(!(qe.bmp||oe))throw new SyntaxError(w+$);if(oe){if(Z==="class")throw new SyntaxError(_);return G(Be,ae)}return Z==="class"?ae?J(Be):qe.bmp:"".concat((ae?"[^":"[")+qe.bmp,"]")},{scope:"all",optionalFlags:"A",leadChar:"\\"}),d.addUnicodeData=function(te,Z){var ie="Unicode token requires name",ve="Unicode token has no character data ";Z&&(S[Z]={});var M=C(te),N;try{for(M.s();!(N=M.n()).done;){var w=N.value;if(!w.name)throw new Error(ie);if(!(w.inverseOf||w.bmp||w.astral))throw new Error(ve+w.name);var _=R(w.name);if(h[_]=w,Z&&(S[Z][_]=!0),w.alias){var O=R(w.alias);h[O]=w,Z&&(S[Z][O]=!0)}}}catch($){M.e($)}finally{M.f()}d.cache.flush("patterns")},d._getUnicodeProperty=function(te){var Z=R(te);return h[Z]}};e.default=m,u.exports=e.default}(Rn,Rn.exports)),Rn.exports}var Nn={exports:{}},cc,bF;function oS(){return bF||(bF=1,cc=[{name:"C",alias:"Other",isBmpLast:!0,bmp:"\0----------------------------------------------------------------------------------------------------------------------------------------",astral:"\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDCFF\uDD03-\uDD06\uDD34-\uDD36\uDD8F\uDD9D-\uDD9F\uDDA1-\uDDCF\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDFC4-\uDFC7\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6E\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1E\uDD3A-\uDD3E\uDD40-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE49-\uDE4F\uDE59-\uDE5F\uDEA0-\uDEBF\uDEE7-\uDEEA\uDEF7-\uDEFF\uDF36-\uDF38\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDF98\uDF9D-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD28-\uDD2F\uDD3A-\uDE5F\uDE7F\uDEAA\uDEAE\uDEAF\uDEB2-\uDEFF\uDF28-\uDF2F\uDF5A-\uDF6F\uDF8A-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC4E-\uDC51\uDC76-\uDC7E\uDCBD\uDCC3-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD48-\uDD4F\uDD77-\uDD7F\uDDE0\uDDF5-\uDDFF\uDE12\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEAA-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC5C\uDC62-\uDC7F\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDDE-\uDDFF\uDE45-\uDE4F\uDE5A-\uDE5F\uDE6D-\uDE7F\uDEBA-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF47-\uDFFF]|\uD806[\uDC3C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD47-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE5-\uDDFF\uDE48-\uDE4F\uDEA3-\uDEAF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC46-\uDC4F\uDC6D-\uDC6F\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF9-\uDFAF\uDFB1-\uDFBF\uDFF2-\uDFFE]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F\uDC75-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80E-\uD810\uD812-\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF3-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6D\uDEBF\uDECA-\uDECF\uDEEE\uDEEF\uDEF6-\uDEFF\uDF46-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE9B-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A\uDC9B\uDCA0-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDF4F\uDFC4-\uDFFF]|\uD834[\uDCF6-\uDCFF\uDD27\uDD28\uDD73-\uDD7A\uDDEB-\uDDFF\uDE46-\uDEDF\uDEF4-\uDEFF\uDF57-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]|\uD836[\uDE8C-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD50-\uDE8F\uDEAF-\uDEBF\uDEFA-\uDEFE\uDF00-\uDFFF]|\uD839[\uDC00-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDD5D\uDD60-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCB5-\uDD00\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDEEF\uDEF2-\uDFFF]|\uD83C[\uDC2C-\uDC2F\uDC94-\uDC9F\uDCAF\uDCB0\uDCC0\uDCD0\uDCF6-\uDCFF\uDDAE-\uDDE5\uDE03-\uDE0F\uDE3C-\uDE3F\uDE49-\uDE4F\uDE52-\uDE5F\uDE66-\uDEFF]|\uD83D[\uDED8-\uDEDC\uDEED-\uDEEF\uDEFD-\uDEFF\uDF74-\uDF7F\uDFD9-\uDFDF\uDFEC-\uDFEF\uDFF1-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE\uDCAF\uDCB2-\uDCFF\uDE54-\uDE5F\uDE6E\uDE6F\uDE75-\uDE77\uDE7D-\uDE7F\uDE87-\uDE8F\uDEAD-\uDEAF\uDEBB-\uDEBF\uDEC6-\uDECF\uDEDA-\uDEDF\uDEE8-\uDEEF\uDEF7-\uDEFF\uDF93\uDFCB-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF39-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]"},{name:"Cc",alias:"Control",bmp:"\0--"},{name:"Cf",alias:"Format",bmp:"-----\uFEFF-",astral:"\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC38]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]"},{name:"Cn",alias:"Unassigned",bmp:"----------------------------------------------------------------------------------------------------------------------------------",astral:"\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDCFF\uDD03-\uDD06\uDD34-\uDD36\uDD8F\uDD9D-\uDD9F\uDDA1-\uDDCF\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDFC4-\uDFC7\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6E\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1E\uDD3A-\uDD3E\uDD40-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE49-\uDE4F\uDE59-\uDE5F\uDEA0-\uDEBF\uDEE7-\uDEEA\uDEF7-\uDEFF\uDF36-\uDF38\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDF98\uDF9D-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD28-\uDD2F\uDD3A-\uDE5F\uDE7F\uDEAA\uDEAE\uDEAF\uDEB2-\uDEFF\uDF28-\uDF2F\uDF5A-\uDF6F\uDF8A-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC4E-\uDC51\uDC76-\uDC7E\uDCC3-\uDCCC\uDCCE\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD48-\uDD4F\uDD77-\uDD7F\uDDE0\uDDF5-\uDDFF\uDE12\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEAA-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC5C\uDC62-\uDC7F\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDDE-\uDDFF\uDE45-\uDE4F\uDE5A-\uDE5F\uDE6D-\uDE7F\uDEBA-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF47-\uDFFF]|\uD806[\uDC3C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD47-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE5-\uDDFF\uDE48-\uDE4F\uDEA3-\uDEAF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC46-\uDC4F\uDC6D-\uDC6F\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF9-\uDFAF\uDFB1-\uDFBF\uDFF2-\uDFFE]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F\uDC75-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80E-\uD810\uD812-\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDB7F][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF3-\uDFFF]|\uD80D[\uDC2F\uDC39-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6D\uDEBF\uDECA-\uDECF\uDEEE\uDEEF\uDEF6-\uDEFF\uDF46-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE9B-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A\uDC9B\uDCA4-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDF4F\uDFC4-\uDFFF]|\uD834[\uDCF6-\uDCFF\uDD27\uDD28\uDDEB-\uDDFF\uDE46-\uDEDF\uDEF4-\uDEFF\uDF57-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]|\uD836[\uDE8C-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD50-\uDE8F\uDEAF-\uDEBF\uDEFA-\uDEFE\uDF00-\uDFFF]|\uD839[\uDC00-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDD5D\uDD60-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCB5-\uDD00\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDEEF\uDEF2-\uDFFF]|\uD83C[\uDC2C-\uDC2F\uDC94-\uDC9F\uDCAF\uDCB0\uDCC0\uDCD0\uDCF6-\uDCFF\uDDAE-\uDDE5\uDE03-\uDE0F\uDE3C-\uDE3F\uDE49-\uDE4F\uDE52-\uDE5F\uDE66-\uDEFF]|\uD83D[\uDED8-\uDEDC\uDEED-\uDEEF\uDEFD-\uDEFF\uDF74-\uDF7F\uDFD9-\uDFDF\uDFEC-\uDFEF\uDFF1-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE\uDCAF\uDCB2-\uDCFF\uDE54-\uDE5F\uDE6E\uDE6F\uDE75-\uDE77\uDE7D-\uDE7F\uDE87-\uDE8F\uDEAD-\uDEAF\uDEBB-\uDEBF\uDEC6-\uDECF\uDEDA-\uDEDF\uDEE8-\uDEEF\uDEF7-\uDEFF\uDF93\uDFCB-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF39-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00\uDC02-\uDC1F\uDC80-\uDCFF\uDDF0-\uDFFF]|[\uDBBF\uDBFF][\uDFFE\uDFFF]"},{name:"Co",alias:"Private_Use",bmp:"-",astral:"[\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uDBBF\uDBFF][\uDC00-\uDFFD]"},{name:"Cs",alias:"Surrogate",bmp:"\uD800-\uDFFF"},{name:"L",alias:"Letter",bmp:"A-Za-z----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]"},{name:"LC",alias:"Cased_Letter",bmp:"A-Za-z-----------------------------------------------------------------",astral:"\uD801[\uDC00-\uDC4F\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC]|\uD803[\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD806[\uDCA0-\uDCDF]|\uD81B[\uDE40-\uDE7F]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF09\uDF0B-\uDF1E]|\uD83A[\uDD00-\uDD43]"},{name:"Ll",alias:"Lowercase_Letter",bmp:"a-z---------------------------------------------------",astral:"\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD837[\uDF00-\uDF09\uDF0B-\uDF1E]|\uD83A[\uDD22-\uDD43]"},{name:"Lm",alias:"Modifier_Letter",bmp:"-------------",astral:"\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD838[\uDD37-\uDD3D]|"},{name:"Lo",alias:"Other_Letter",bmp:"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF4A\uDF50]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]||\uD838[\uDD00-\uDD2C\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]"},{name:"Lt",alias:"Titlecase_Letter",bmp:"---"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-Z------------------------------------------",astral:"\uD801[\uDC00-\uDC27\uDCB0-\uDCD3\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]"},{name:"M",alias:"Mark",bmp:"----------------------------------------------------------------------------------------------------------------",astral:"\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]"},{name:"Mc",alias:"Spacing_Mark",bmp:"-----------------------------",astral:"\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3E\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB0-\uDCB2\uDCB9\uDCBB-\uDCBE\uDCC1\uDDAF-\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF20\uDF21\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD30-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD65\uDD66\uDD6D-\uDD72]"},{name:"Me",alias:"Enclosing_Mark",bmp:"---"},{name:"Mn",alias:"Nonspacing_Mark",bmp:"---------------------------------------------------------------------------------",astral:"\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]"},{name:"N",alias:"Number",bmp:"0-9-------------------------------------------------------------",astral:"\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]"},{name:"Nd",alias:"Decimal_Number",bmp:"0-9------------------------------------",astral:"\uD801[\uDCA0-\uDCA9]|\uD803[\uDD30-\uDD39]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9\uDD50-\uDD59]|\uD807[\uDC50-\uDC59\uDD50-\uDD59\uDDA0-\uDDA9]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDD50-\uDD59]|\uD83E[\uDFF0-\uDFF9]"},{name:"Nl",alias:"Letter_Number",bmp:"------",astral:"\uD800[\uDD40-\uDD74\uDF41\uDF4A\uDFD1-\uDFD5]|\uD809[\uDC00-\uDC6E]"},{name:"No",alias:"Other_Number",bmp:"-----------------------",astral:"\uD800[\uDD07-\uDD33\uDD75-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC65\uDDE1-\uDDF4]|\uD805[\uDF3A\uDF3B]|\uD806[\uDCEA-\uDCF2]|\uD807[\uDC5A-\uDC6C\uDFC0-\uDFD4]|\uD81A[\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD83A[\uDCC7-\uDCCF]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]"},{name:"P",alias:"Punctuation",bmp:"!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}---------------------------------------------------",astral:"\uD800[\uDD00-\uDD02\uDF9F\uDFD0]||\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]||\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_-"},{name:"Pd",alias:"Dash_Punctuation",bmp:"\\--",astral:""},{name:"Pe",alias:"Close_Punctuation",bmp:"\\)\\]\\}"},{name:"Pf",alias:"Final_Punctuation",bmp:""},{name:"Pi",alias:"Initial_Punctuation",bmp:""},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\*,\\.\\/:;\\?@\\-------------------------------------------------",astral:"\uD800[\uDD00-\uDD02\uDF9F\uDFD0]||\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]||\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\(\\[\\{"},{name:"S",alias:"Symbol",bmp:"\\$\\+<->\\^`\\|~----------------------------------------------------------------------",astral:"\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]||\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]||\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA]"},{name:"Sc",alias:"Currency_Symbol",bmp:"\\$--",astral:"\uD807[\uDFDD-\uDFE0]||"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\^`----------",astral:"\uD83C[\uDFFB-\uDFFF]"},{name:"Sm",alias:"Math_Symbol",bmp:"\\+<->\\|~---------------------",astral:"\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD83B[\uDEF0\uDEF1]"},{name:"So",alias:"Other_Symbol",bmp:"--------------------------------------------------------",astral:"\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]||\uD807[\uDFD5-\uDFDC\uDFE1-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]||\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]||\uD83B[\uDCAC\uDD2E]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFA]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA]"},{name:"Z",alias:"Separator",bmp:" -\u2028\u2029"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:" -"}]),cc}var BF;function sS(){return BF||(BF=1,function(u,e){var t=It,r=jt;t(e,"__esModule",{value:!0}),e.default=void 0;var n=r(oS());/*!
 * XRegExp Unicode Categories 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2010-present MIT License
 * Unicode data by Mathias Bynens <mathiasbynens.be>
 */var a=function(s){if(!s.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");s.addUnicodeData(n.default)};e.default=a,u.exports=e.default}(Nn,Nn.exports)),Nn.exports}var Mn={exports:{}},Dc,_F;function iS(){return _F||(_F=1,Dc=[{name:"ASCII",bmp:"\0-"},{name:"Alphabetic",bmp:"A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC45\uDC71-\uDC75\uDC82-\uDCB8\uDCC2\uDCD0-\uDCE8\uDD00-\uDD32\uDD44-\uDD47\uDD50-\uDD72\uDD76\uDD80-\uDDBF\uDDC1-\uDDC4\uDDCE\uDDCF\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE34\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEE8\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D-\uDF44\uDF47\uDF48\uDF4B\uDF4C\uDF50\uDF57\uDF5D-\uDF63]|\uD805[\uDC00-\uDC41\uDC43-\uDC45\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCC1\uDCC4\uDCC5\uDCC7\uDD80-\uDDB5\uDDB8-\uDDBE\uDDD8-\uDDDD\uDE00-\uDE3E\uDE40\uDE44\uDE80-\uDEB5\uDEB8\uDF00-\uDF1A\uDF1D-\uDF2A\uDF40-\uDF46]|\uD806[\uDC00-\uDC38\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B\uDD3C\uDD3F-\uDD42\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDDF\uDDE1\uDDE3\uDDE4\uDE00-\uDE32\uDE35-\uDE3E\uDE50-\uDE97\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC3E\uDC40\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD41\uDD43\uDD46\uDD47\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD96\uDD98\uDEE0-\uDEF6\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9E]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD47\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]"},{name:"Any",isBmpLast:!0,bmp:"\0-",astral:"[\uD800-\uDBFF][\uDC00-\uDFFF]"},{name:"Default_Ignorable_Code_Point",bmp:"-----\uFEFF-",astral:"\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|[\uDB40-\uDB43][\uDC00-\uDFFF]"},{name:"Lowercase",bmp:"a-z-------------------------------------------------------",astral:"\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDF80\uDF83-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD837[\uDF00-\uDF09\uDF0B-\uDF1E]|\uD83A[\uDD22-\uDD43]"},{name:"Noncharacter_Code_Point",bmp:"-",astral:"[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]"},{name:"Uppercase",bmp:"A-Z--------------------------------------------",astral:"\uD801[\uDC00-\uDC27\uDCB0-\uDCD3\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89]"},{name:"White_Space",bmp:"	-\r -\u2028\u2029"}]),Dc}var SF;function cS(){return SF||(SF=1,function(u,e){var t=It,r=jt;t(e,"__esModule",{value:!0}),e.default=void 0;var n=r(iS());/*!
 * XRegExp Unicode Properties 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2012-present MIT License
 * Unicode data by Mathias Bynens <mathiasbynens.be>
 */var a=function(s){if(!s.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Properties");var i=n.default;i.push({name:"Assigned",inverseOf:"Cn"}),s.addUnicodeData(i)};e.default=a,u.exports=e.default}(Mn,Mn.exports)),Mn.exports}var Un={exports:{}},lc,$F;function DS(){return $F||($F=1,lc=[{name:"Adlam",astral:"\uD83A[\uDD00-\uDD4B\uDD50-\uDD59\uDD5E\uDD5F]"},{name:"Ahom",astral:"\uD805[\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF46]"},{name:"Anatolian_Hieroglyphs",astral:"\uD811[\uDC00-\uDE46]"},{name:"Arabic",bmp:"--------------------",astral:"\uD803[\uDE60-\uDE7E]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},{name:"Armenian",bmp:"----"},{name:"Avestan",astral:"\uD802[\uDF00-\uDF35\uDF39-\uDF3F]"},{name:"Balinese",bmp:"--"},{name:"Bamum",bmp:"-",astral:"\uD81A[\uDC00-\uDE38]"},{name:"Bassa_Vah",astral:"\uD81A[\uDED0-\uDEED\uDEF0-\uDEF5]"},{name:"Batak",bmp:"--"},{name:"Bengali",bmp:"---------"},{name:"Bhaiksuki",astral:"\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC45\uDC50-\uDC6C]"},{name:"Bopomofo",bmp:"--"},{name:"Brahmi",astral:"\uD804[\uDC00-\uDC4D\uDC52-\uDC75\uDC7F]"},{name:"Braille",bmp:"-"},{name:"Buginese",bmp:"-"},{name:"Buhid",bmp:"-"},{name:"Canadian_Aboriginal",bmp:"--",astral:"\uD806[\uDEB0-\uDEBF]"},{name:"Carian",astral:"\uD800[\uDEA0-\uDED0]"},{name:"Caucasian_Albanian",astral:"\uD801[\uDD30-\uDD63\uDD6F]"},{name:"Chakma",astral:"\uD804[\uDD00-\uDD34\uDD36-\uDD47]"},{name:"Cham",bmp:"----"},{name:"Cherokee",bmp:"---"},{name:"Chorasmian",astral:"\uD803[\uDFB0-\uDFCB]"},{name:"Common",bmp:"\0-@\\[-`\\{------------------------------------------------\uFEFF------",astral:"\uD800[\uDD00-\uDD02\uDD07-\uDD33\uDD37-\uDD3F\uDD90-\uDD9C\uDDD0-\uDDFC\uDEE1-\uDEFB]|\uD82F[\uDCA0-\uDCA3]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD66\uDD6A-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDEE0-\uDEF3\uDF00-\uDF56\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDFCB\uDFCE-\uDFFF]|\uD83B[\uDC71-\uDCB4\uDD01-\uDD3D]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD00-\uDDAD\uDDE6-\uDDFF\uDE01\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA\uDFF0-\uDFF9]|\uDB40[\uDC01\uDC20-\uDC7F]"},{name:"Coptic",bmp:"---"},{name:"Cuneiform",astral:"\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC70-\uDC74\uDC80-\uDD43]"},{name:"Cypriot",astral:"\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F]"},{name:"Cypro_Minoan",astral:"\uD80B[\uDF90-\uDFF2]"},{name:"Cyrillic",bmp:"-----"},{name:"Deseret",astral:"\uD801[\uDC00-\uDC4F]"},{name:"Devanagari",bmp:"----"},{name:"Dives_Akuru",astral:"\uD806[\uDD00-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD46\uDD50-\uDD59]"},{name:"Dogra",astral:"\uD806[\uDC00-\uDC3B]"},{name:"Duployan",astral:"\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9C-\uDC9F]"},{name:"Egyptian_Hieroglyphs",astral:"\uD80C[\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E\uDC30-\uDC38]"},{name:"Elbasan",astral:"\uD801[\uDD00-\uDD27]"},{name:"Elymaic",astral:"\uD803[\uDFE0-\uDFF6]"},{name:"Ethiopic",bmp:"------------------------------",astral:"\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]"},{name:"Georgian",bmp:"------"},{name:"Glagolitic",bmp:"-",astral:"\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]"},{name:"Gothic",astral:"\uD800[\uDF30-\uDF4A]"},{name:"Grantha",astral:"\uD804[\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]"},{name:"Greek",bmp:"-----------------------",astral:"\uD800[\uDD40-\uDD8E\uDDA0]|\uD834[\uDE00-\uDE45]"},{name:"Gujarati",bmp:"------------"},{name:"Gunjala_Gondi",astral:"\uD807[\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9]"},{name:"Gurmukhi",bmp:"--------"},{name:"Han",bmp:"---------",astral:"\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]"},{name:"Hangul",bmp:"-------------"},{name:"Hanifi_Rohingya",astral:"\uD803[\uDD00-\uDD27\uDD30-\uDD39]"},{name:"Hanunoo",bmp:"-"},{name:"Hatran",astral:"\uD802[\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDCFF]"},{name:"Hebrew",bmp:"------"},{name:"Hiragana",bmp:"--",astral:"\uD82C[\uDC01-\uDD1F\uDD50-\uDD52]|"},{name:"Imperial_Aramaic",astral:"\uD802[\uDC40-\uDC55\uDC57-\uDC5F]"},{name:"Inherited",bmp:"------------",astral:"\uD800[\uDDFD\uDEE0]||\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uDB40[\uDD00-\uDDEF]"},{name:"Inscriptional_Pahlavi",astral:"\uD802[\uDF60-\uDF72\uDF78-\uDF7F]"},{name:"Inscriptional_Parthian",astral:"\uD802[\uDF40-\uDF55\uDF58-\uDF5F]"},{name:"Javanese",bmp:"--"},{name:"Kaithi",astral:"\uD804[\uDC80-\uDCC2\uDCCD]"},{name:"Kannada",bmp:"----------"},{name:"Katakana",bmp:"-------",astral:"\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD64-\uDD67]"},{name:"Kayah_Li",bmp:"-"},{name:"Kharoshthi",astral:"\uD802[\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F-\uDE48\uDE50-\uDE58]"},{name:"Khitan_Small_Script",astral:"|\uD822[\uDF00-\uDFFF]|\uD823[\uDC00-\uDCD5]"},{name:"Khmer",bmp:"----"},{name:"Khojki",astral:"\uD804[\uDE00-\uDE11\uDE13-\uDE3E]"},{name:"Khudawadi",astral:"\uD804[\uDEB0-\uDEEA\uDEF0-\uDEF9]"},{name:"Lao",bmp:"-------"},{name:"Latin",bmp:"A-Za-z-----------------------",astral:"\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E]"},{name:"Lepcha",bmp:"---"},{name:"Limbu",bmp:"----"},{name:"Linear_A",astral:"\uD801[\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]"},{name:"Linear_B",astral:"\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA]"},{name:"Lisu",bmp:"-",astral:""},{name:"Lycian",astral:"\uD800[\uDE80-\uDE9C]"},{name:"Lydian",astral:"\uD802[\uDD20-\uDD39\uDD3F]"},{name:"Mahajani",astral:"\uD804[\uDD50-\uDD76]"},{name:"Makasar",astral:"\uD807[\uDEE0-\uDEF8]"},{name:"Malayalam",bmp:"-------"},{name:"Mandaic",bmp:"-"},{name:"Manichaean",astral:"\uD802[\uDEC0-\uDEE6\uDEEB-\uDEF6]"},{name:"Marchen",astral:"\uD807[\uDC70-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]"},{name:"Masaram_Gondi",astral:"\uD807[\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]"},{name:"Medefaidrin",astral:"\uD81B[\uDE40-\uDE9A]"},{name:"Meetei_Mayek",bmp:"---"},{name:"Mende_Kikakui",astral:"\uD83A[\uDC00-\uDCC4\uDCC7-\uDCD6]"},{name:"Meroitic_Cursive",astral:"\uD802[\uDDA0-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDDFF]"},{name:"Meroitic_Hieroglyphs",astral:"\uD802[\uDD80-\uDD9F]"},{name:"Miao",astral:"\uD81B[\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F]"},{name:"Modi",astral:"\uD805[\uDE00-\uDE44\uDE50-\uDE59]"},{name:"Mongolian",bmp:"---",astral:"\uD805[\uDE60-\uDE6C]"},{name:"Mro",astral:"\uD81A[\uDE40-\uDE5E\uDE60-\uDE69\uDE6E\uDE6F]"},{name:"Multani",astral:"\uD804[\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA9]"},{name:"Myanmar",bmp:"---"},{name:"Nabataean",astral:"\uD802[\uDC80-\uDC9E\uDCA7-\uDCAF]"},{name:"Nandinagari",astral:"\uD806[\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE4]"},{name:"New_Tai_Lue",bmp:"---"},{name:"Newa",astral:"\uD805[\uDC00-\uDC5B\uDC5D-\uDC61]"},{name:"Nko",bmp:"--"},{name:"Nushu",astral:"|\uD82C[\uDD70-\uDEFB]"},{name:"Nyiakeng_Puachue_Hmong",astral:"\uD838[\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDD4F]"},{name:"Ogham",bmp:"-"},{name:"Ol_Chiki",bmp:"-"},{name:"Old_Hungarian",astral:"\uD803[\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF]"},{name:"Old_Italic",astral:"\uD800[\uDF00-\uDF23\uDF2D-\uDF2F]"},{name:"Old_North_Arabian",astral:"\uD802[\uDE80-\uDE9F]"},{name:"Old_Permic",astral:"\uD800[\uDF50-\uDF7A]"},{name:"Old_Persian",astral:"\uD800[\uDFA0-\uDFC3\uDFC8-\uDFD5]"},{name:"Old_Sogdian",astral:"\uD803[\uDF00-\uDF27]"},{name:"Old_South_Arabian",astral:"\uD802[\uDE60-\uDE7F]"},{name:"Old_Turkic",astral:"\uD803[\uDC00-\uDC48]"},{name:"Old_Uyghur",astral:"\uD803[\uDF70-\uDF89]"},{name:"Oriya",bmp:"----------"},{name:"Osage",astral:"\uD801[\uDCB0-\uDCD3\uDCD8-\uDCFB]"},{name:"Osmanya",astral:"\uD801[\uDC80-\uDC9D\uDCA0-\uDCA9]"},{name:"Pahawh_Hmong",astral:"\uD81A[\uDF00-\uDF45\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]"},{name:"Palmyrene",astral:"\uD802[\uDC60-\uDC7F]"},{name:"Pau_Cin_Hau",astral:"\uD806[\uDEC0-\uDEF8]"},{name:"Phags_Pa",bmp:"-"},{name:"Phoenician",astral:"\uD802[\uDD00-\uDD1B\uDD1F]"},{name:"Psalter_Pahlavi",astral:"\uD802[\uDF80-\uDF91\uDF99-\uDF9C\uDFA9-\uDFAF]"},{name:"Rejang",bmp:"-"},{name:"Runic",bmp:"--"},{name:"Samaritan",bmp:"--"},{name:"Saurashtra",bmp:"--"},{name:"Sharada",astral:"\uD804[\uDD80-\uDDDF]"},{name:"Shavian",astral:"\uD801[\uDC50-\uDC7F]"},{name:"Siddham",astral:"\uD805[\uDD80-\uDDB5\uDDB8-\uDDDD]"},{name:"SignWriting",astral:"\uD836[\uDC00-\uDE8B\uDE9B-\uDE9F\uDEA1-\uDEAF]"},{name:"Sinhala",bmp:"---------",astral:"\uD804[\uDDE1-\uDDF4]"},{name:"Sogdian",astral:"\uD803[\uDF30-\uDF59]"},{name:"Sora_Sompeng",astral:"\uD804[\uDCD0-\uDCE8\uDCF0-\uDCF9]"},{name:"Soyombo",astral:"\uD806[\uDE50-\uDEA2]"},{name:"Sundanese",bmp:"--"},{name:"Syloti_Nagri",bmp:"-"},{name:"Syriac",bmp:"----"},{name:"Tagalog",bmp:"-"},{name:"Tagbanwa",bmp:"--"},{name:"Tai_Le",bmp:"--"},{name:"Tai_Tham",bmp:"-----"},{name:"Tai_Viet",bmp:"--"},{name:"Takri",astral:"\uD805[\uDE80-\uDEB9\uDEC0-\uDEC9]"},{name:"Tamil",bmp:"---------",astral:"\uD807[\uDFC0-\uDFF1\uDFFF]"},{name:"Tangsa",astral:"\uD81A[\uDE70-\uDEBE\uDEC0-\uDEC9]"},{name:"Tangut",astral:"|[\uD81C-\uD820][\uDC00-\uDFFF]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEFF]|\uD823[\uDD00-\uDD08]"},{name:"Telugu",bmp:"-----------"},{name:"Thaana",bmp:"-"},{name:"Thai",bmp:"--"},{name:"Tibetan",bmp:"------"},{name:"Tifinagh",bmp:"-"},{name:"Tirhuta",astral:"\uD805[\uDC80-\uDCC7\uDCD0-\uDCD9]"},{name:"Toto",astral:"\uD838[\uDE90-\uDEAE]"},{name:"Ugaritic",astral:"\uD800[\uDF80-\uDF9D\uDF9F]"},{name:"Vai",bmp:"-"},{name:"Vithkuqi",astral:"\uD801[\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC]"},{name:"Wancho",astral:"\uD838[\uDEC0-\uDEF9\uDEFF]"},{name:"Warang_Citi",astral:"\uD806[\uDCA0-\uDCF2\uDCFF]"},{name:"Yezidi",astral:"\uD803[\uDE80-\uDEA9\uDEAB-\uDEAD\uDEB0\uDEB1]"},{name:"Yi",bmp:"--"},{name:"Zanabazar_Square",astral:"\uD806[\uDE00-\uDE47]"}]),lc}var wF;function lS(){return wF||(wF=1,function(u,e){var t=It,r=jt;t(e,"__esModule",{value:!0}),e.default=void 0;var n=r(DS());/*!
 * XRegExp Unicode Scripts 5.1.1
 * <xregexp.com>
 * Steven Levithan (c) 2010-present MIT License
 * Unicode data by Mathias Bynens <mathiasbynens.be>
 */var a=function(s){if(!s.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Scripts");s.addUnicodeData(n.default,"Script")};e.default=a,u.exports=e.default}(Un,Un.exports)),Un.exports}(function(u,e){var t=It,r=jt;t(e,"__esModule",{value:!0}),e.default=void 0;var n=r(z5()),a=r(rS()),o=r(nS()),s=r(aS()),i=r(sS()),c=r(cS()),D=r(lS());(0,a.default)(n.default),(0,o.default)(n.default),(0,s.default)(n.default),(0,i.default)(n.default),(0,c.default)(n.default),(0,D.default)(n.default);var l=n.default;e.default=l,u.exports=e.default})(_c,_c.exports);var xr=_c.exports,kF=xr,oE=u=>{var e=[];for(var t of u)if(t.tag&&t.tag==="zaln")if(t.children[0].tag==="w")e.push(t);else{var r=oE(t.children),n=r[r.length-1].children;for(var a of[t,...r])a.children=n,e.push(a)}return e},sE=u=>{var e=kF("([\\p{Letter}\\p{Number}\\p{Mark}\\u2060]{1,127})");return kF.match(u,e,"all")},dS=u=>{var e=sE(u);return e[0]},fS=u=>{var e=sE(u);return e[e.length-1]},pS=u=>{var e={};for(var[t,r]of Object.entries(u.chapters)){e[t]={};for(var[n,a]of Object.entries(r)){e[t][n]={before:{},after:{}};for(var o of oE(a.verseObjects)){var s="".concat(dS(o.children[0].text),"_").concat(o.children[0].occurrence);s in e[t][n].before||(e[t][n].before[s]=[]);var i={strong:o.strong,lemma:o.lemma,morph:o.morph,occurrence:o.occurrence,occurrences:o.occurrences,content:o.content};e[t][n].before[s].push(i);var c="".concat(fS(o.children[o.children.length-1].text),"_").concat(o.children[o.children.length-1].occurrence);c in e[t][n].after||(e[t][n].after[c]=[]),i={strong:o.strong,lemma:o.lemma,morph:o.morph,occurrence:o.occurrence,occurrences:o.occurrences,content:o.content},e[t][n].after[c].unshift(i)}}}return e},iE={alignmentLookupFromUsfmJs:pS},qF=FS(xr);function FS(u){return u&&u.__esModule?u:{default:u}}var mS={startDocument:[{description:"Set up storage",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;e.verseContent=[],e.chapter=null,e.verses=null,t.cv={}}}],mark:[{description:"Update CV state",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u,{element:n}=e.sequences[0];if(n.subType==="chapter"){if(t.chapter=n.atts.number,t.verses=0,r.cv[t.chapter])throw new Error("Duplicate chapter ".concat(t.chapter," in verseWords"));r.cv[t.chapter]={},r.cv[t.chapter][t.verses]={}}else if(n.subType==="verses"){if(t.verses=n.atts.number,r.cv[t.chapter][t.verses])throw new Error("Duplicate verse ".concat(t.chapter,":").concat(t.verses," in verseWords"));r.cv[t.chapter][t.verses]={}}}}],text:[{description:"Log occurrences",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u,{chapter:n,verses:a}=t,{text:o}=e.sequences[0].element,s=(0,qF.default)("([\\p{Letter}\\p{Number}\\p{Mark}\\u2060]{1,127})"),i=qF.default.match(o,s,"all");for(var c of i){var D,l;(l=(D=r.cv[n][a])[c])!==null&&l!==void 0||(D[c]=0),r.cv[n][a][c]+=1}}}]},cE={verseWordsActions:mS},TF=hS(xr);function hS(u){return u&&u.__esModule?u:{default:u}}function PF(u,e){var t=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),t.push.apply(t,r)}return t}function Vn(u){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PF(Object(t),!0).forEach(function(r){ES(u,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(t)):PF(Object(t)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(t,r))})}return u}function ES(u,e,t){return e=CS(e),e in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}function CS(u){var e=AS(u,"string");return typeof e=="symbol"?e:e+""}function AS(u,e){if(typeof u!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}var vS={startDocument:[{description:"Set up",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;return e.chapter=null,e.verses=null,e.lastWord="",e.waitingMarkup=[],e.currentOccurrences={},e.PendingStartMilestones=[],t.stripped={},t.unalignedWords={},!0}}],startMilestone:[{description:"Ignore zaln startMilestone events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element;r.subtype=r.subType,delete r.subType,t.waitingMarkup.push(r),t.PendingStartMilestones.push(r)}}],endMilestone:[{description:"Ignore zaln endMilestone events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:u=>{var{context:e,workspace:t,output:r,config:n}=u,{chapter:a,verses:o,lastWord:s}=t,{verseWords:i}=n,c=["after",s,t.currentOccurrences[s],i[a][o][s]].join("--"),D=Vn({},e.sequences[0].element);D.subtype=D.subType,delete D.subType;var l={chapter:a,verses:o,occurrence:t.currentOccurrences[s],occurrences:i[a][o][s],position:"after",word:s,payload:D,startMilestone:t.PendingStartMilestones.shift()};return r.stripped[t.chapter][t.verses][c]?r.stripped[t.chapter][t.verses][c].push(l):r.stripped[t.chapter][t.verses][c]=[l],!1}}],startWrapper:[{description:"Ignore w startWrapper events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:u=>{var{context:e,workspace:t}=u,r=Vn({},e.sequences[0].element);r.subtype=r.subType,delete r.subType,t.waitingMarkup.push(r)}}],endWrapper:[{description:"Ignore w endWrapper events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:u=>{}}],text:[{description:"Log occurrences",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r,config:n}=u;try{var a=e.sequences[0];if(a.type!=="main")return!0;var o=a.element.text,s=(0,TF.default)("([\\p{Letter}\\p{Number}\\p{Mark}\\u2060]{1,127})"),i=TF.default.match(o,s,"all"),{chapter:c,verses:D}=t,{verseWords:l}=n;for(var f of i){var C,F;if((F=(C=t.currentOccurrences)[f])!==null&&F!==void 0||(C[f]=0),t.currentOccurrences[f]++,!t.PendingStartMilestones.length&&t.waitingMarkup.length){var A,m,p,d;(m=(A=r.unalignedWords)[c])!==null&&m!==void 0||(A[c]={}),(d=(p=r.unalignedWords[c])[D])!==null&&d!==void 0||(p[D]=[]),r.unalignedWords[c][D].push({word:f,occurrence:t.currentOccurrences[f],totalOccurrences:l[c][D][f]})}for(;t.waitingMarkup.length;){var h=t.waitingMarkup.shift(),S=["before",f,t.currentOccurrences[f],l[c][D][f]].join("--"),B={chapter:c,verses:D,occurrence:t.currentOccurrences[f],occurrences:l[c][D][f],position:"before",word:f,payload:Vn(Vn({},h),h.subtype==="usfm:w"&&{content:[f]})};r.stripped[t.chapter][t.verses][S]?r.stripped[t.chapter][t.verses][S].push(B):r.stripped[t.chapter][t.verses][S]=[B]}t.lastWord=f}}catch(x){throw console.error(x),x}return!0}}],mark:[{description:"Update CV state",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u;try{var n=e.sequences[0].element;n.subType==="chapter"?(t.chapter=n.atts.number,t.verses=0,t.lastWord="",t.currentOccurrences={},r.stripped[t.chapter]={},r.stripped[t.chapter][t.verses]={}):n.subType==="verses"&&(t.verses=n.atts.number,t.lastWord="",t.currentOccurrences={},r.stripped[t.chapter][t.verses]={})}catch(a){throw console.error(a),a}return!0}}]},DE={stripMarkupActions:vS},Kt=yS(xr);function yS(u){return u&&u.__esModule?u:{default:u}}var lE=[["printable","wordLike",(0,Kt.default)("([\\p{Letter}\\p{Number}\\p{Mark}\\u2060]{1,127})")],["printable","lineSpace",(0,Kt.default)("([\\p{Separator}	]{1,127})")],["printable","punctuation",(0,Kt.default)("([\\p{Punctuation}\\p{Math_Symbol}\\p{Currency_Symbol}\\p{Modifier_Symbol}\\p{Other_Symbol}])")],["bad","unknown",(0,Kt.default)("(.)")]],gS=Kt.default.union(lE.map(u=>u[2])),bS={type:"end_milestone",subtype:"usfm:zaln"},BS={startDocument:[{description:"setup",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;return e.chapter=null,e.verses=null,e.currentOccurrences={},t.unalignedWords={},!0}}],text:[{description:"add-to-text",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;try{let p=function(){for(;F.length;)r.outputContentStack[0].push(F.shift())};var a=t.sequences[0];if(a.type!=="main")return!0;var o=t.sequences[0].element.text,s=Kt.default.match(o,gS,"all"),{chapter:i,verses:c}=r;if(!c)return!0;var{totalOccurrences:D,strippedAlignment:l}=e,f={opened:null},C=d=>{var{subtype:h,content:S=[],atts:B={}}=d;return Object.keys(B).length>0?{type:"wrapper",subtype:h,content:S,atts:B}:{type:"wrapper",subtype:h,content:S}},F=[],A=function(h){var S,B,x,U=(S=Kt.default.match(h,lE[0][2],"all"))===null||S===void 0?void 0:S.length;if(!U)return F.push(h),1;(x=(B=r.currentOccurrences)[h])!==null&&x!==void 0||(B[h]=0),r.currentOccurrences[h]++;var R=N=>[N,h,r.currentOccurrences[h],D[i][c][h]].join("--"),T=l[i],L=T?T[c]||{}:{},J=!1,K=L[R("after")],G=L[R("before")];if(G!=null&&G.length&&p(),K!=null&&K.length&&!f.opened&&(K.map(N=>{var{startMilestone:w}=N;return r.outputContentStack[0].push(w)}),J=!0),G==null||G.forEach(N=>{var{payload:w}=N;w.type!=="start_milestone"&&r.outputContentStack[0].push(w),w.type==="start_milestone"&&!J&&(r.outputContentStack[0].push(w),f.opened=!0)}),K==null||K.forEach(N=>{var{payload:w}=N;f.opened=!1,r.outputContentStack[0].push(w)}),!(G!=null&&G.length)){var te,Z,ie,ve;f.opened&&(r.outputContentStack[0].push(bS),f.opened=!1),p(),(Z=(te=n.unalignedWords)[i])!==null&&Z!==void 0||(te[i]={}),(ve=(ie=n.unalignedWords[i])[c])!==null&&ve!==void 0||(ie[c]=[]),n.unalignedWords[r.chapter][r.verses].push({word:h,occurrence:r.currentOccurrences[h],totalOccurrences:D[i][c][h]});var M=C({subtype:"usfm:w",content:[h]});r.outputContentStack[0].push(M)}};for(var m of s)A(m);return p(),!1}catch(p){throw console.error(p),p}}}],mark:[{description:"mark-chapters",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="chapter"},action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element;return r.chapter=a.atts.number,r.verses=0,!0}},{description:"mark-verses",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="verses"},action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element;return r.verses=a.atts.number,r.currentOccurrences={},!0}}]},dE={mergeAlignmentActions:BS},{verseWordsActions:_S}=cE,{stripMarkupActions:SS}=DE,{mergeAlignmentActions:$S}=dE,wS={verseWordsActions:_S,stripMarkupActions:SS,mergeAlignmentActions:$S};let kS=class{constructor(e){if(!e)throw new Error("Must provide a constructor object to constructor");this.description=e.description?e.description:(()=>{throw new Error("Must provide a description in constructor object")})(),this.test=e.test||(()=>!0),this.action=e.action||(()=>null)}};var qS=kS,OF=qS;let TS=class fE{constructor(e){if(this.constructor===fE)throw new Error("Abstract class ProskommaRender cannot be instantiated - make as subclass!");var t=e.actions||{};this.debugLevel=e.debugLevel||0,this.actions={};for(var r of["startDocument","endDocument","startSequence","startTable","endTable","endSequence","unresolvedBlockGraft","blockGraft","startParagraph","endParagraph","startRow","endRow","startCell","endCell","metaContent","mark","unresolvedInlineGraft","inlineGraft","startWrapper","endWrapper","startMilestone","endMilestone","startVerses","endVerses","startChapter","endChapter","text"])t[r]?this.actions[r]=t[r].map(n=>new OF(n)):this.actions[r]=[]}addRenderActionObject(e,t){if(!this.actions[e])throw new Error("Unknown event '".concat(e));this.actions[e].push(t)}addRenderAction(e,t){this.addRenderActionObject(e,new OF(t))}describeRenderActions(e){if(!this.actions[e])throw new Error("Unknown event '".concat(e));var t=["**Actions for ".concat(e,`**
`)];for(var r of this.actions[e])t.push("IF ".concat(r.test.toString(),":")),t.push("    DO ".concat(r.description));return t.join(`
`)}renderDocument(e){var{docId:t,config:r,output:n}=e,a={},o={};return this.renderDocument1({docId:t,config:r,context:a,workspace:o,output:n}),n}renderDocument1(e){throw new Error("Define renderDocument1() in subclass")}renderEvent(e,t){var r=t.context;if(this.debugLevel>1&&console.log("".concat("    ".repeat(r.sequences.length),"EVENT ").concat(e)),!this.actions[e])throw new Error("Unknown event '".concat(e));var n=!1;for(var a of this.actions[e]){var o=!1;try{o=a.test(t)}catch(c){var s="Exception from test of action '".concat(a.description,"' for event ").concat(e," in ").concat(r.sequences.length>0?r.sequences[0].type:"no"," sequence: ").concat(c);throw new Error(s)}if(o){n=!0,this.debugLevel>0&&console.log("".concat("    ".repeat(r.sequences.length),"    ").concat(e," action: ").concat(a.description));var i=!1;try{i=a.action(t)}catch(c){throw new Error("Exception from action '".concat(a.description,"' for event ").concat(e," in ").concat(r.sequences.length>0?r.sequences[0].type:"no"," sequence: ").concat(c))}if(!i)break}}if(["unresolvedBlockGraft","unresolvedInlineGraft"].includes(e)&&this.actions[e].length===0)throw new Error("No action for ".concat(e," graft event in ").concat(r.sequences.length>0?r.sequences[0].type:"no"," sequence: add an action or fix your data!"));!n&&this.debugLevel>1&&console.log("".concat("    ".repeat(r.sequences.length),"    No matching action"))}};var hn=TS,PS=hn;let OS=class extends PS{constructor(e){if(super(e),!e.srcJson)throw new Error("Must provide srcJson");this.srcJson=e.srcJson}renderDocument1(e){var{docId:t,config:r,context:n,workspace:a,output:o}=e,s={config:r,context:n,workspace:a,output:o};n.renderer=this,n.document={id:t,schema:this.srcJson.schema,metadata:this.srcJson.metadata,mainSequenceId:this.srcJson.main_sequence_id,nSequences:Object.keys(this.srcJson.sequences).length},n.sequences=[],this.renderEvent("startDocument",s),this.renderSequenceId(s,this.srcJson.main_sequence_id),this.renderEvent("endDocument",s)}sequenceContext(e,t){return{id:t,type:e.type,nBlocks:e.blocks.length,milestones:new Set([])}}renderSequenceId(e,t){var r=e.context,n=this.srcJson.sequences[t];if(!n)throw new Error("Sequence '".concat(t,"' not found in renderSequenceId()"));r.sequences.unshift(this.sequenceContext(n,t)),this.renderEvent("startSequence",e);for(var[a,o]of n.blocks.entries())r.sequences[0].block={type:o.type,subType:o.subtype,blockN:a,wrappers:[]},o.type==="graft"?o.target&&!this.srcJson.sequences[o.target]?(r.sequences[0].block.target=o.target,this.renderEvent("unresolvedBlockGraft",e)):(r.sequences[0].block.target=o.target,r.sequences[0].block.isNew=o.new||!1,this.renderEvent("blockGraft",e)):o.type==="row"?(this.renderEvent("startRow",e),this.renderContent(o.content,e),this.renderEvent("endRow",e)):(this.renderEvent("startParagraph",e),this.renderContent(o.content,e),this.renderEvent("endParagraph",e)),delete r.sequences[0].block;this.renderEvent("endSequence",e),r.sequences.shift()}renderContent(e,t){for(var r of e)this.renderElement(r,t)}renderElement(e,t){var r=o=>{e.meta_content&&(o.metaContent=e.meta_content,this.renderEvent("metaContent",t))},n=t.context,a={type:e.type||"text"};if(e.subtype&&(a.subType=e.subtype),e.atts?a.atts=e.atts:a.type!=="end_milestone"&&a.type!=="meta_content"&&(a.atts={}),e.target&&(a.target=e.target),e.type==="graft"&&(a.isNew=e.new||!1),a.type==="text"&&(a.text=e),n.sequences[0].element=a,a.type==="text")this.renderEvent("text",t),r(a);else if(a.type==="mark")this.renderEvent("mark",t),r(a);else if(a.type==="start_milestone")this.renderEvent("startMilestone",t),r(a);else if(a.type==="end_milestone")this.renderEvent("endMilestone",t),r(a);else if(a.type==="graft"){if(e.target&&e.target&&!this.srcJson.sequences[e.target]){this.renderEvent("unresolvedInlineGraft",t);return}this.renderEvent("inlineGraft",t),r(a)}else if(a.type==="wrapper")n.sequences[0].block.wrappers.unshift(a.subType),this.renderEvent("startWrapper",t),this.renderContent(e.content,t),n.sequences[0].element=a,r(a),this.renderEvent("endWrapper",t),n.sequences[0].block.wrappers.shift();else throw new Error("Unexpected element type '".concat(a.type));delete n.sequences[0].element}};var Ku=OS,IS=jS(Ku);function jS(u){return u&&u.__esModule?u:{default:u}}var{verseWordsActions:xS}=cE,RS=function(e){var{perf:t}=e,r=new IS.default({srcJson:t,actions:xS}),n={};try{r.renderDocument({docId:"",config:{},output:n})}catch(a){throw new Error("Error from renderDocument in verseWords: ".concat(a.message))}return{verseWords:n.cv}},NS={name:"verseWords",type:"Transform",description:"PERF=>JSON: Counts words occurrences",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"verseWords",type:"json"}],code:RS},MS={verseWords:NS},US=u=>{var e={};for(var t of u)for(var r of Object.keys(t))e[r]?e[r].push(...t[r]):e[r]=t[r];return e},Xt=US,VS={startDocument:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;n.perf={},n.perf.schema=t.document.schema,n.perf.metadata=t.document.metadata,n.perf.sequences={}}}],endDocument:[{description:"identity",test:()=>!0,action:u=>{}}],startSequence:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;n.perf.sequences[t.sequences[0].id]={type:t.sequences[0].type,blocks:[]},r.outputSequence=n.perf.sequences[t.sequences[0].id],t.sequences[0].type==="main"&&(n.perf.main_sequence_id=t.sequences[0].id)}}],endSequence:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;t.sequences.length>1&&(r.outputSequence=n.perf.sequences[t.sequences[1].id])}}],blockGraft:[{description:"identity",test:()=>!0,action:u=>{var e=u.context.sequences[0].block,t={type:e.type,subtype:e.subType};e.target&&(t.target=e.target,u.context.renderer.renderSequenceId(u,t.target)),e.isNew&&(t.new=e.isNew),u.workspace.outputSequence.blocks.push(t)}}],startParagraph:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].block,o={type:a.type,subtype:a.subType,content:[]};r.outputSequence.blocks.push(o),r.currentContent=o.content,r.outputBlock=r.outputSequence.blocks[r.outputSequence.blocks.length-1],r.outputContentStack=[r.outputBlock.content]}}],endParagraph:[{description:"identity",test:()=>!0,action:u=>{}}],metaContent:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element;r.currentContent=a.metaContent;var o=r.outputContentStack[1][r.outputContentStack[1].length-1];o.meta_content=[],r.outputContentStack.unshift(o.meta_content),t.renderer.renderContent(r.currentContent,u),r.outputContentStack.shift()}}],mark:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element,o={type:a.type,subtype:a.subType};a.atts&&typeof a.atts=="object"&&Object.keys(a.atts).length!==0&&(o.atts=a.atts),r.outputContentStack[0].push(o)}}],inlineGraft:[{description:"identity",test:()=>!0,action:u=>{var e=u.context.sequences[0].element,t={type:e.type,subtype:e.subType};if(e.target){t.target=e.target;var r=u.workspace.outputContentStack[0];u.context.renderer.renderSequenceId(u,e.target),u.workspace.outputContentStack[0]=r}e.isNew&&(t.new=e.isNew),u.workspace.outputContentStack[0].push(t)}}],startRow:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].block,n={type:r.type,subtype:r.subType,content:[]};t.outputSequence.blocks.push(n),t.currentContent=n.content,t.outputBlock=t.outputSequence.blocks[t.outputSequence.blocks.length-1],t.outputContentStack=[t.outputBlock.content]}}],endRow:[{description:"identity",test:()=>!0,action:u=>{}}],startWrapper:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element,o={type:a.type,subtype:a.subType,content:[]};"atts"in a&&typeof a.atts=="object"&&Object.keys(a.atts).length!==0&&(o.atts=a.atts),r.outputContentStack[0].push(o),r.outputContentStack.unshift(o.content)}}],endWrapper:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;r.outputContentStack.shift()}}],startMilestone:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element,o={type:a.type,subtype:a.subType};a.atts&&typeof a.atts=="object"&&Object.keys(a.atts).length!==0&&(o.atts=a.atts),r.outputContentStack[0].push(o)}}],endMilestone:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element,o={type:a.type,subtype:a.subType};r.outputContentStack[0].push(o)}}],text:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element;r.outputContentStack[0].push(a.text)}}]},Mt={identityActions:VS},zS=pE(Ku),WS=pE(Xt);function pE(u){return u&&u.__esModule?u:{default:u}}var{identityActions:LS}=Mt,{stripMarkupActions:GS}=DE,HS=function(e){var{perf:t,verseWords:r}=e,n=new zS.default({srcJson:t,actions:(0,WS.default)([GS,LS])}),a={};return n.renderDocument({docId:"",config:{verseWords:r},output:a}),{perf:a.perf,strippedAlignment:a.stripped,unalignedWords:a.unalignedWords}},JS={name:"stripAlignment",type:"Transform",description:"PERF=>PERF: Strips alignment markup",inputs:[{name:"perf",type:"json",source:""},{name:"verseWords",type:"json",source:""}],outputs:[{name:"perf",type:"json"},{name:"strippedAlignment",type:"json"},{name:"unalignedWords",type:"json"}],code:HS},KS={stripAlignment:JS},ZS=FE(Ku),YS=FE(Xt);function FE(u){return u&&u.__esModule?u:{default:u}}var{identityActions:QS}=Mt,{mergeAlignmentActions:XS}=dE,e$=function(e){var{perf:t,verseWords:r,strippedAlignment:n}=e,a=new ZS.default({srcJson:t,actions:(0,YS.default)([XS,QS])}),o={};return a.renderDocument({docId:"",config:{totalOccurrences:r,strippedAlignment:n},output:o}),{perf:o.perf,unalignedWords:o.unalignedWords}},u$={name:"mergeAlignment",type:"Transform",description:"PERF=>PERF adds report to verses",inputs:[{name:"perf",type:"json",source:""},{name:"strippedAlignment",type:"json",source:""},{name:"verseWords",type:"json",source:""}],outputs:[{name:"perf",type:"json"},{name:"unalignedWords",type:"json"}],code:e$},t$={mergeAlignment:u$},{verseWords:r$}=MS,{stripAlignment:n$}=KS,{mergeAlignment:a$}=t$,o$={verseWords:r$,stripAlignment:n$,mergeAlignment:a$},s$=wS,i$=o$,c$={transforms:i$,renderActions:s$},D$={},mE=function(e){var{usfm:t,selectors:r,proskomma:n}=e;n.importDocuments(r,"usfm",[t]);var a=n.gqlQuerySync("{documents {id docSetId perf} }").data.documents[0],o=a.id,s=a.docSetId;n.gqlQuerySync('mutation { deleteDocument(docSetId: "'.concat(s,'", documentId: "').concat(o,'") }'));var i=JSON.parse(a.perf);return{perf:i}},l$={name:"usfmToPerf",type:"Transform",description:"USFM=>PERF: Conversion via Proskomma",inputs:[{name:"usfm",type:"text",source:""},{name:"selectors",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:mE},d$={usfmToPerf:l$,usfmToPerfCode:mE},{usfmToPerf:f$,usfmToPerfCode:p$}=d$,F$={usfmToPerf:f$,usfmToPerfCode:p$},m$=D$,h$=F$,E$={transforms:h$,renderActions:m$};function IF(u,e){var t=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),t.push.apply(t,r)}return t}function C$(u){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(t),!0).forEach(function(r){A$(u,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(t)):IF(Object(t)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(t,r))})}return u}function A$(u,e,t){return e=v$(e),e in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}function v$(u){var e=y$(u,"string");return typeof e=="symbol"?e:e+""}function y$(u,e){if(typeof u!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}var g$={startDocument:[{description:"identity",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;n.sofria={},n.paras=[],n.sofria.schema=t.document.schema,n.sofria.metadata=t.document.metadata,n.sofria.sequence={},r.currentSequence=n.sofria.sequence,r.chapter=null,r.verses=null,r.cachedChapter=null,r.cachedVerses=null}}],endDocument:[{description:"identity",test:()=>!0,action:u=>{}}],startSequence:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u;t.currentSequence==null&&(t.currentSequence={}),t.currentSequence.type=e.sequences[0].type,t.currentSequence.blocks=[]}}],endSequence:[{description:"identity",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;e.currentSequence.type==="main"&&(e.chapter=null,e.verses=null),t.paras==null?t.paras=e.currentSequence.blocks:e.currentSequence.type==="main"&&(t.paras=t.paras.concat(e.currentSequence.blocks)),e.currentSequence=null}}],blockGraft:[{description:"identity",test:()=>!0,action:u=>{var e=u.context.sequences[0].block,t={type:e.type};if(e.sequence){t.sequence={};var r=u.workspace.currentSequence;u.workspace.currentSequence=t.sequence,u.context.renderer.renderSequence(u),u.workspace.currentSequence=r}u.workspace.currentSequence.blocks.push(t)}}],startParagraph:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].block,n={type:r.type,subtype:r.subType,content:[]};if(t.currentSequence.blocks.push(n),t.currentContent=n.content,t.outputBlock=t.currentSequence.blocks[t.currentSequence.blocks.length-1],t.outputContentStack=[t.outputBlock.content],t.currentSequence.type==="main"){for(var a of["chapter","verses"])if(t[a]){var o={type:"wrapper",subtype:a,content:[],atts:{number:t[a]}};t.outputContentStack[0].push(o),t.outputContentStack.unshift(o.content)}}}}],endParagraph:[{description:"identity",test:()=>!0,action:u=>{}}],startRow:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].block,n={type:r.type,subtype:r.subType,content:[]};if(t.currentSequence.blocks.push(n),t.currentContent=n.content,t.outputBlock=t.currentSequence.blocks[t.currentSequence.blocks.length-1],t.outputContentStack=[t.outputBlock.content],t.currentSequence.type==="main"){for(var a of["chapter","verses"])if(t[a]){var o={type:"wrapper",subtype:a,content:[],atts:{number:t[a]}};t.outputContentStack[0].push(o),t.outputContentStack.unshift(o.content)}}}}],endRow:[{description:"identity",test:()=>!0,action:u=>{}}],metaContent:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element;t.currentContent=r.metaContent;var n=t.outputContentStack[1][t.outputContentStack[1].length-1];n.meta_content=[],t.outputContentStack.unshift(n.meta_content),e.renderer.renderContent(t.currentContent,u),t.outputContentStack.shift()}}],mark:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element,n={type:r.type,subtype:r.subType};r.atts&&(n.atts=r.atts),t.outputContentStack[0].push(n)}}],inlineGraft:[{description:"identity",test:()=>!0,action:u=>{var e=u.context.sequences[0].element,t={type:e.type,subtype:e.subType,sequence:{}},r=u.workspace.currentSequence,n=[...u.workspace.outputContentStack];u.workspace.currentSequence=t.sequence,u.context.renderer.renderSequence(u),u.workspace.outputContentStack=n,u.workspace.currentSequence=r,u.workspace.outputContentStack[0].push(t)}}],startWrapper:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element;r.subType==="chapter"?(t.chapter=r.atts.number,t.cachedChapter=t.chapter):r.subType==="verses"&&(t.verses=r.atts.number,t.cachedVerses=t.verses);var n={type:r.type,subtype:r.subType,content:[]};if("atts"in r&&(n.atts=C$({},r.atts)),t.outputContentStack.length===0)throw new Error("outputContentStack is empty before pushing to its first element, near ".concat(e.document.metadata.document.bookCode," ").concat(t.cachedChapter,":").concat(t.cachedVerses));t.outputContentStack[0].push(n),t.outputContentStack.unshift(n.content)}}],endWrapper:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element;r.subType==="chapter"?t.chapter=null:r.subType==="verses"&&(t.verses=null),t.outputContentStack.shift()}}],startMilestone:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element,n={type:r.type,subtype:r.subType};r.atts&&(n.atts=r.atts),t.outputContentStack[0].push(n)}}],endMilestone:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element,n={type:r.type,subtype:r.subType};t.outputContentStack[0].push(n)}}],text:[{description:"identity",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element;t.outputContentStack&&t.outputContentStack[0].push(r.text)}}]},hE={identityActions:g$},{identityActions:b$}=hE,B$={identityActions:b$},{identityActions:_$}=hE,S$=function(e){var{perf:t}=e,r=new PerfRenderFromJson({srcJson:t,actions:_$}),n={};return r.renderDocument({docId:"",config:{},output:n}),{verseWords:n.cv}},$$={name:"identity",type:"Transform",description:"identity operation",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:S$},w$={identity:$$},{identity:k$}=w$,q$={identity:k$},T$=B$,P$=q$,O$={transforms:P$,renderActions:T$},I$={startDocument:[{description:"Set up word object",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;r.words={}}}],text:[{description:"Split strings and add words to word object",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;for(var a of t.sequences[0].element.text.split(/[\s:;,.]+/).filter(o=>o.length>0))a=a.toLowerCase(),a in r.words?r.words[a]+=1:r.words[a]=1}}],endDocument:[{description:"Sort words",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;n.words=[...Object.entries(r.words)].sort((a,o)=>o[1]-a[1])}}]},EE={wordCountActions:I$},jF=u=>({type:u.sequences[0].block.type,subType:u.sequences[0].block.subType,pos:u.sequences[0].block.blockN,perfChapter:null}),j$={startDocument:[{description:"Set up storage",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;e.blockRecords=[],t.report={}}}],startParagraph:[{description:"Set up block record",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u;t.blockRecords.push(jF(e))}}],blockGraft:[{description:"Set up block record",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u;t.blockRecords.push(jF(e))}}],mark:[{description:"Add chapter number to block record",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="chapter"},action:u=>{var{config:e,context:t,workspace:r,output:n}=u;r.blockRecords[r.blockRecords.length-1].perfChapter=t.sequences[0].element.atts.number}}],endDocument:[{description:"Populate report",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;for(var[r,n]of Object.entries(e.blockRecords))if(n.perfChapter){for(var a=r,o=!1;a>0&&!o;)e.blockRecords[a-1].type==="paragraph"||e.blockRecords[a-1].subType==="title"?o=!0:a--;t.report[a.toString()]=n.perfChapter}}}]},CE={calculateUsfmChapterPositionsActions:j$},ju=u=>["toc","toca","mt","imt","s","ms","mte","sd"].includes(u)?u+"1":u,x$=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t==null&&(t={});var r="\\".concat(e,"-s |");for(var[n,a]of Object.entries(t))n==="x-morph"&&typeof a!="string"?r=r+ju(n)+'="'+a.join(",")+'" ':r=r+ju(n)+'="'+a+'" ';return r+"\\*"},R$=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t==null&&(t={});var n="|";for(var[a,o]of Object.entries(t))n=n+ju(a)+'="'+o+'" ';return n=n+"\\",r&&(n=n+"+"),n+e+"*"},N$={startDocument:[{description:"Set up environment",test:()=>!0,action:u=>{var{context:e,workspace:t}=u;t.usfmBits=[""],t.nestedWrapper=0;for(var[r,n]of Object.entries(e.document.metadata.document).filter(a=>!["tags","properties","bookCode","cl"].includes(a[0])))t.usfmBits.push("\\".concat(ju(r)," ").concat(n,`
`))}}],blockGraft:[{description:"Follow block grafts",test:u=>{var{context:e}=u;return["title","heading","introduction"].includes(e.sequences[0].block.subType)},action:u=>{var e=u.context.sequences[0],t=u.config.report[e.block.blockN.toString()],r=e.block.target;t&&e.type==="main"&&u.workspace.usfmBits.push(`
\\c `.concat(t,`
`)),r&&u.context.renderer.renderSequenceId(u,r)}}],inlineGraft:[{description:"Follow inline grafts",test:()=>!0,action:u=>{var e=u.context.sequences[0].element.target;e&&u.context.renderer.renderSequenceId(u,e)}}],startParagraph:[{description:"Output footnote paragraph tag (footnote)",test:u=>{var{context:e}=u;return e.sequences[0].block.subType==="usfm:f"&&e.sequences[0].type==="footnote"||e.sequences[0].block.subType==="usfm:x"&&e.sequences[0].type==="xref"},action:u=>{var{context:e,workspace:t,config:r}=u;t.nestedWrapper=0;var n=e.sequences[0];t.usfmBits.push("\\".concat(ju(n.block.subType.split(":")[1])," "))}},{description:"Output footnote note_caller tag (footnote)",test:u=>{var{context:e}=u;return e.sequences[0].block.subType==="usfm:f"||e.sequences[0].block.subType==="usfm:x"},action:u=>{var{context:e,workspace:t,config:r}=u;t.nestedWrapper=0}},{description:"Output paragraph tag (main)",test:()=>!0,action:u=>{var{context:e,workspace:t,config:r}=u;t.nestedWrapper=0;var n=e.sequences[0],a=r.report[n.block.blockN.toString()];a&&n.type==="main"&&t.usfmBits.push(`
\\c `.concat(a,`
`)),t.usfmBits.push(`
\\`.concat(ju(n.block.subType.split(":")[1]),`
`))}}],endParagraph:[{description:"Output footnote paragraph tag (footnote)",test:u=>{var{context:e}=u;return e.sequences[0].block.subType==="usfm:f"&&e.sequences[0].type==="footnote"||e.sequences[0].block.subType==="usfm:x"&&e.sequences[0].type==="xref"},action:u=>{var{context:e,workspace:t,config:r}=u,n=e.sequences[0];t.usfmBits.push("\\".concat(ju(n.block.subType.split(":")[1]),"*"))}},{description:"Output footnote note_caller tag (footnote)",test:u=>{var{context:e}=u;return e.sequences[0].block.subType==="usfm:f"||e.sequences[0].block.subType==="usfm:x"},action:u=>{}},{description:"Output nl",test:()=>!0,action:u=>{var{workspace:e}=u;e.usfmBits.push(`
`)}}],startMilestone:[{description:"Output start milestone",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element,n=x$(ju(r.subType.split(":")[1]),r.atts);t.usfmBits.push(n)}}],endMilestone:[{description:"Output end milestone",test:()=>!0,action:u=>{var{context:e,workspace:t}=u;t.usfmBits.push("\\".concat(ju(e.sequences[0].element.subType.split(":")[1]),"-e\\*"))}}],text:[{description:"Output text",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element.text;t.usfmBits.push(r)}}],mark:[{description:"Output chapter or verses",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].element;r.subType==="verses"&&t.usfmBits.push(`
\\v `.concat(r.atts.number,`
`))}}],endSequence:[{description:"Output \\cl",test:u=>{var{context:e}=u;return e.document.metadata.document.cl&&e.sequences[0].type==="title"},action:u=>{var{context:e,workspace:t}=u;t.usfmBits.push(`
\\cl `.concat(e.document.metadata.document.cl,`
`))}}],startWrapper:[{description:"Output start tag",test:()=>!0,action:u=>{var{workspace:e,context:t}=u,r=t.sequences[0];e.nestedWrapper>0?e.usfmBits.push("\\+".concat(ju(r.element.subType.split(":")[1])," ")):e.usfmBits.push("\\".concat(ju(r.element.subType.split(":")[1])," ")),e.nestedWrapper+=1}}],endWrapper:[{description:"Output end tag",test:u=>{var{context:e}=u;return!["fr","fq","fqa","fk","fl","fw","fp","ft","xo","xk","xq","xt","xta"].includes(e.sequences[0].element.subType.split(":")[1])},action:u=>{var{workspace:e,context:t}=u;e.nestedWrapper-=1;var r=t.sequences[0],n=r.element.subType.split(":")[1],a=e.nestedWrapper>0;if(n==="w"){var o=R$(ju(n),r.element.atts,a);e.usfmBits.push(o)}else a?e.usfmBits.push("\\+".concat(ju(r.element.subType.split(":")[1]),"*")):e.usfmBits.push("\\".concat(ju(r.element.subType.split(":")[1]),"*"))}},{description:"Do NOT output end tag",test:()=>!0,action:u=>{var{workspace:e}=u;e.nestedWrapper-=1}}],endDocument:[{description:"Build output",test:()=>!0,action:u=>{var{workspace:e,output:t}=u;t.usfm=e.usfmBits.join("").replace(/(\s*)\n(\s*)/gm,`
`)}}]},AE={perfToUsfmActions:N$},{wordCountActions:M$}=EE,{calculateUsfmChapterPositionsActions:U$}=CE,{perfToUsfmActions:V$}=AE,z$={wordCountActions:M$,perfToUsfmActions:V$,calculateUsfmChapterPositionsActions:U$},W$=L$(Ku);function L$(u){return u&&u.__esModule?u:{default:u}}var{wordCountActions:G$}=EE,H$=function(e){var{perf:t}=e,r=new W$.default({srcJson:t,actions:G$}),n={};return r.renderDocument({docId:"",config:{},output:n}),{report:n.report}},J$={name:"wordCount",type:"Transform",description:"PERF=>JSON: Generates positions for inserting chapter numbers into USFM",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"report",type:"json"}],code:H$},K$={wordCount:J$},Z$=Y$(Ku);function Y$(u){return u&&u.__esModule?u:{default:u}}var{calculateUsfmChapterPositionsActions:Q$}=CE,X$=function(e){var{perf:t}=e,r=new Z$.default({srcJson:t,actions:Q$}),n={};return r.renderDocument({docId:"",config:{maxLength:60},output:n}),{report:n.report}},ew={name:"calculateUsfmChapterPositions",type:"Transform",description:"PERF=>JSON: Generates positions for inserting chapter numbers into USFM",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"report",type:"json"}],code:X$},uw={calculateUsfmChapterPositions:ew},tw=rw(Ku);function rw(u){return u&&u.__esModule?u:{default:u}}var{perfToUsfmActions:nw}=AE,aw=function(e){var{perf:t,report:r}=e,n=new tw.default({srcJson:t,actions:nw}),a={};return n.renderDocument({docId:"",config:{report:r},output:a}),{usfm:a.usfm}},ow={name:"perfToUsfm",type:"Transform",description:"PERF=>USFM",inputs:[{name:"perf",type:"json",source:""},{name:"report",type:"json",source:""}],outputs:[{name:"usfm",type:"text"}],code:aw},sw={perfToUsfm:ow},xF=xr,RF=u=>["toc","toca","mt","imt","s","ms","mte","sd"].includes(u)?u+"1":u,iw={startDocument:[{description:"Setup",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u;t.chapter="front",t.verses="front",t.zalns=[],t.inW=!1,r.usfmJs={headers:[],chapters:{}};for(var[n,a]of Object.entries(e.document.metadata.document))["bookCode","properties","tags"].includes(n)||r.usfmJs.headers.push({tag:n==="toc"?"toc1":n,content:a})}}],startParagraph:[{description:"Output paragraph tag (main), currently always to front",test:u=>{var{context:e,workspace:t,output:r}=u;return e.sequences[0].type==="main"&&r.usfmJs.chapters[t.chapter]},action:u=>{var{context:e,workspace:t,output:r}=u;r.usfmJs.chapters[t.chapter].front||(r.usfmJs.chapters[t.chapter].front={verseObjects:[]}),r.usfmJs.chapters[t.chapter].front.verseObjects.push({tag:RF(e.sequences[0].block.subType.split(":")[1]),type:"paragraph",nextChar:`
`})}},{description:"mt (title)",test:u=>{var{context:e,workspace:t,output:r}=u;return e.sequences[0].type==="title"},action:u=>{var{context:e,output:t}=u;t.usfmJs.headers.push({tag:RF(e.sequences[0].block.subType.split(":")[1]),content:""})}}],mark:[{description:"Update chapter number",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="chapter"},action:u=>{var{context:e,workspace:t,output:r}=u;t.chapter=e.sequences[0].element.atts.number,t.verses="front",r.usfmJs.chapters[t.chapter]={}}},{description:"Update verses number",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="verses"},action:u=>{var{context:e,workspace:t,output:r}=u;t.verses=e.sequences[0].element.atts.number,r.usfmJs.chapters[t.chapter][t.verses]={verseObjects:[]}}}],startMilestone:[{description:"Start zaln: make milestone and add to stack",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:u=>{var{context:e,workspace:t,output:r}=u,n=e.sequences[0].element,a={tag:"zaln",type:"milestone"};for(var o of["strong","lemma","morph","occurrence","occurrences","content"])n.atts["x-".concat(o)]&&(a[o]=n.atts["x-".concat(o)].join(","));a.children=[],a.endTag=null,t.zalns.length===0?r.usfmJs.chapters[t.chapter][t.verses].verseObjects.push(a):t.zalns[0].children.push(a),t.zalns.unshift(a)}}],endMilestone:[{description:"End zaln: pop stack",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:u=>{var{workspace:e}=u;e.zalns[0].endTag="zaln-e\\*",e.zalns.shift()}}],startWrapper:[{description:"start of w wrapper: make a new object with empty text",test:u=>{var{context:e,workspace:t}=u;return e.sequences[0].element.subType==="usfm:w"&&t.zalns.length>0},action:u=>{var{context:e,workspace:t}=u,r={tag:"w",type:"word",text:""},n=e.sequences[0].element;for(var a of["occurrence","occurrences","content"])n.atts["x-".concat(a)]&&(r[a]=n.atts["x-".concat(a)].join(","));t.zalns[0].children.push(r),t.inW=!0}}],endWrapper:[{description:"end of w wrapper: clear flag",test:u=>{var{context:e,workspace:t}=u;return e.sequences[0].element.subType==="usfm:w"&&t.zalns.length>0},action:u=>{var{context:e,workspace:t}=u;t.inW=!1}}],text:[{description:"Main sequence: add text either as text object or to existing word object in milestone",test:u=>{var{context:e}=u;return e.sequences[0].type==="main"},action:u=>{var{context:e,workspace:t,output:r}=u,n=e.sequences[0].element.text,a=r.usfmJs.chapters[t.chapter][t.verses].verseObjects.slice(-1)[0];if(t.zalns[0]?a=t.zalns[0]:a.type==="milestone"&&(a={type:"text",text:""},r.usfmJs.chapters[t.chapter][t.verses].verseObjects.push(a)),a)if(a.type==="text")"text"in a&&(a.text=""),a.text+=n;else if(a.type==="milestone"){var o=a.children,s=xF.test(n,xF("^[\\p{Letter}\\p{Number}\\p{Mark}\\u2060]{1,127}$"),0);(o.length===0||!("text"in o[o.length-1])||!s)&&o.push({type:"text",text:""}),o[o.length-1].text+=n}else throw new Error("Child is either text nor milestone")}},{description:"Title sequence: add text to mt in header",test:u=>{var{context:e}=u;return e.sequences[0].type==="title"},action:u=>{var{context:e,output:t}=u,r=e.sequences[0].element.text,n=t.usfmJs.headers;n[n.length-1].content+=r}}],blockGraft:[{description:"Process title grafts",test:u=>u.context.sequences[0].block.subType==="title",action:u=>{var e=u.context.sequences[0].block,t={type:e.type,subtype:e.subType};e.target&&(t.target=e.target,u.context.renderer.renderSequenceId(u,t.target)),e.isNew&&(t.new=e.isNew)}}]},cw={perfToUsfmJsActions:iw},Dw=lw(Ku);function lw(u){return u&&u.__esModule?u:{default:u}}var{perfToUsfmJsActions:dw}=cw,fw=function(e){var{perf:t,report:r}=e,n=new Dw.default({srcJson:t,actions:dw}),a={};return n.renderDocument({docId:"",config:{report:r},output:a}),{usfmJs:a.usfmJs}},pw={name:"perfToUsfmJs",type:"Transform",description:"PERF=>USFMJS",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"usfmJs",type:"json"}],code:fw},Fw={perfToUsfmJs:pw},{wordCount:mw}=K$,{calculateUsfmChapterPositions:hw}=uw,{perfToUsfm:Ew}=sw,{perfToUsfmJs:Cw}=Fw,Aw={wordCount:mw,perfToUsfm:Ew,perfToUsfmJs:Cw,calculateUsfmChapterPositions:hw},vw=z$,yw=Aw,gw={transforms:yw,renderActions:vw},bw={startMilestone:[{description:"Ignore startMilestone events",test:()=>!0,action:()=>{}}],endMilestone:[{description:"Ignore endMilestone events",test:()=>!0,action:()=>{}}],startWrapper:[{description:"Ignore startWrapper events",test:()=>!0,action:()=>{}}],endWrapper:[{description:"Ignore endWrapper events",test:()=>!0,action:()=>{}}],blockGraft:[{description:"Ignore blockGraft events, except for title (\\mt)",test:u=>u.context.sequences[0].block.subType!=="title",action:u=>{}}],inlineGraft:[{description:"Ignore inlineGraft events",test:()=>!0,action:()=>{}}],mark:[{description:"Ignore mark events, except for chapter and verses",test:u=>{var{context:e}=u;return!["chapter","verses"].includes(e.sequences[0].element.subType)},action:()=>{}}]},vE={justTheBibleActions:bw},Bw={startMilestone:[{description:"Ignore zaln startMilestone events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:()=>{}}],endMilestone:[{description:"Ignore zaln endMilestone events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:()=>{}}],startWrapper:[{description:"Ignore w startWrapper events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:()=>{}}],endWrapper:[{description:"Ignore w endWrapper events",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:()=>{}}]},yE={stripUwAlignmentActions:Bw},_w=iE,Wr=xr,Sw={startDocument:[{description:"Make alignment lookup",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;return r.chapter=null,r.verses=null,r.verseWordOccurrences={},r.alignmentLookup=_w.alignmentLookupFromUsfmJs(e.usfmJs),r.zalnNesting=0,n.perf={},n.occurrences={},!0}}],mark:[{description:"Update CV state",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u;try{var n=e.sequences[0].element;n.subType==="chapter"?(t.chapter=n.atts.number,t.verses=null,r.occurrences[t.chapter]={}):n.subType==="verses"&&(t.verses=n.atts.number,t.verseWordOccurrences={},r.occurrences[t.chapter][t.verses]=[])}catch(a){throw console.error(a),a}return!0}}],text:[{description:"Maintain occurrences, add alignment when match found",test:u=>{var{context:e}=u;return e.sequences[0].type==="main"},action:u=>{var{context:e,workspace:t,output:r}=u,n={wordlike:Wr("([\\p{Letter}\\p{Number}\\p{Mark}\\u2060]{1,127})"),unwordlike:Wr("(([\\p{Separator}	]{1,127})|([\\p{Punctuation}\\p{Math_Symbol}\\p{Currency_Symbol}\\p{Modifier_Symbol}\\p{Other_Symbol}]))+")};n.all=Wr.union([n.wordlike,n.unwordlike]);var a=e.sequences[0].element.text,o=Wr.match(a,n.all,"all");for(var s of o){var i=a;if(Wr.test(i,n.wordlike)){t.verseWordOccurrences[i]||(t.verseWordOccurrences[i]=0),t.verseWordOccurrences[i]++,r.occurrences[t.chapter][t.verses].push(t.verseWordOccurrences[i]);var c="".concat(i,"_").concat(t.verseWordOccurrences[i]),D=t.alignmentLookup[t.chapter][t.verses].before[c];if(D){for(var l of D){var f={type:"start_milestone",subtype:"usfm:zaln",atts:{"x-strong":[l.strong],"x-lemma":[l.lemma],"x-morph":[l.morph.split(",")],"x-occurrence":["".concat(l.occurrence)],"x-occurrences":["".concat(l.occurrences)],"x-content":[l.content]}};t.outputContentStack[0].push(f),t.zalnNesting++}if(t.zalnNesting>0){var C={type:"wrapper",subtype:"usfm:w",content:[i],atts:{"x-occurrence":["".concat(t.verseWordOccurrences[i])],"x-occurrences":["0"]}};t.outputContentStack[0].push(C)}else t.outputContentStack[0].push(i);var F=t.alignmentLookup[t.chapter][t.verses].after[c];if(F)for(var A of F){var m={type:"end_milestone",subtype:"usfm:zaln",atts:{"x-strong":[A.strong],"x-lemma":[A.lemma],"x-morph":[A.morph.split(",")],"x-occurrence":["".concat(A.occurrence)],"x-occurrences":["".concat(A.occurrences)],"x-content":[A.content]}};t.outputContentStack[0].push(m),t.zalnNesting--}}}else t.outputContentStack[0].push(i)}return!1}}]},gE={mergeUwAlignmentActions:Sw},$w={startDocument:[{description:"Set up w counter",test:u=>!0,action:u=>{var{workspace:e}=u;return e.wInVerse=0,!0}}],mark:[{description:"Update CV state",test:()=>!0,action:u=>{var{context:e,workspace:t,output:r}=u;try{var n=e.sequences[0].element;n.subType==="chapter"?(t.chapter=n.atts.number,t.verses=null):n.subType==="verses"&&(t.verses=n.atts.number,t.verseWordOccurrences={},t.wInVerse=0)}catch(a){throw console.error(a),a}return!0}}],startWrapper:[{description:"Add occurrences to w wrapper",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:u=>{var{config:e,context:t,workspace:r,output:n}=u,a=t.sequences[0].element,o={type:a.type,subtype:a.subType,content:[]};"atts"in a&&typeof a.atts=="object"&&Object.keys(a.atts).length!==0&&(o.atts=a.atts);var s=e.occurrences[r.chapter][r.verses][r.wInVerse];if(!s)throw new Error("No occurrences data for ".concat(r.chapter,":").concat(r.verses,"#").concat(r.wInVerse));return o.atts["x-occurrences"]=[s],r.wInVerse++,r.outputContentStack[0].push(o),r.outputContentStack.unshift(o.content),!1}}]},bE={addUwAlignmentOccurrencesActions:$w},{identityActions:ww}=Mt,{justTheBibleActions:kw}=vE,{stripUwAlignmentActions:qw}=yE,{mergeUwAlignmentActions:Tw}=gE,{addUwAlignmentOccurrences:Pw}=bE,Ow={identityActions:ww,justTheBibleActions:kw,stripUwAlignmentActions:qw,mergeUwAlignmentActions:Tw,addUwAlignmentOccurrences:Pw},{identityActions:Iw}=Mt,jw=function(e){var{perf:t}=e,r=new PerfRenderFromJson({srcJson:t,actions:Iw}),n={};return r.renderDocument({docId:"",config:{},output:n}),{verseWords:n.cv}},xw={name:"identityTransform",type:"Transform",description:"identity operation",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:jw},Rw={identity:xw},Nw=BE(Ku),Mw=BE(Xt);function BE(u){return u&&u.__esModule?u:{default:u}}var{identityActions:Uw}=Mt,{justTheBibleActions:Vw}=vE,zw=function(e){var{perf:t}=e,r=new Nw.default({srcJson:t,actions:(0,Mw.default)([Vw,Uw])}),n={};return r.renderDocument({docId:"",config:{},output:n}),{perf:n.perf}},Ww={name:"justTheBible",type:"Transform",description:"PERF=>PERF: Strips most markup",documentation:"This transform removes milestones, wrappers and most marks. It has been used in several pipelines. It may also be stripping metaContent.",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:zw},Lw={justTheBible:Ww},Gw=_E(Ku),Hw=_E(Xt);function _E(u){return u&&u.__esModule?u:{default:u}}var{identityActions:Jw}=Mt,{stripUwAlignmentActions:Kw}=yE,Zw=function(e){var{perf:t}=e,r=new Gw.default({srcJson:t,actions:(0,Hw.default)([Kw,Jw])}),n={};return r.renderDocument({docId:"",config:{},output:n}),{perf:n.perf}},Yw={name:"stripUwAlignment",type:"Transform",description:"PERF=>PERF: Strips uW alignment markup",documentation:"This transform removes zaln milestones and w wrappers and most marks.",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:Zw},Qw={stripUwAlignment:Yw},Xw=SE(Ku),ek=SE(Xt);function SE(u){return u&&u.__esModule?u:{default:u}}var{identityActions:uk}=Mt,{mergeUwAlignmentActions:tk}=gE,rk=function(e){var{perf:t,usfmJs:r}=e,n=new Xw.default({srcJson:t,actions:(0,ek.default)([tk,uk])}),a={};return n.renderDocument({docId:"",config:{usfmJs:r},output:a}),{perf:a.perf,occurrences:a.occurrences}},nk={name:"mergeUwAlignment",type:"Transform",description:"PERF=>PERF: Adds uW alignment markup from usfmJs",documentation:"This transform adds uW alignment from an equivalent usfmJs document.",inputs:[{name:"perf",type:"json",source:""},{name:"usfmJs",type:"json",source:""}],outputs:[{name:"perf",type:"json"},{name:"occurrences",type:"json"}],code:rk},ak={mergeUwAlignment:nk},ok=$E(Ku),sk=$E(Xt);function $E(u){return u&&u.__esModule?u:{default:u}}var{identityActions:ik}=Mt,{addUwAlignmentOccurrencesActions:ck}=bE,Dk=function(e){var{perf:t,occurrences:r}=e,n=new ok.default({srcJson:t,actions:(0,sk.default)([ck,ik])}),a={};return n.renderDocument({docId:"",config:{occurrences:r},output:a}),{perf:a.perf}},lk={name:"addUwAlignmentOccurrences",type:"Transform",description:"PERF=>PERF: Adds uW alignment markup from usfmJs",documentation:"This transform adds uW alignment from an equivalent usfmJs document.",inputs:[{name:"perf",type:"json",source:""},{name:"occurrences",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:Dk},dk={addUwAlignmentOccurrences:lk};const gu={},wE=u=>{let e=typeof u;return e==="number"||e==="string"||e==="boolean"||e==="undefined"||e==="bigint"||e==="symbol"||u===null},En=u=>{if(wE(u)||!(u instanceof Object))return"primitive";const e=u.constructor&&u.constructor.name&&u.constructor.name.toLowerCase();if(typeof e=="string"&&e.length&&gu[e])return e;let t;for(const r in gu)if(t=gu[r].type,!t||u instanceof t)return r;return"unknown"},fk=(u,e,t)=>Array.prototype.push.call(u,t),pk=u=>{const e=[];return Object.setPrototypeOf(e,Object.getPrototypeOf(u)),e},Fk=u=>{const e=[...u];return Object.setPrototypeOf(e,Object.getPrototypeOf(u)),e},mk=(u,e,t)=>{const r=u.length;for(let n=0;n<r;n++){const a=u[n],o={key:n,value:a,type:En(a)};t(o)}},hk=()=>{Object.assign(gu,{array:{type:Array,mayDeepCopy:!0,addElement:fk,makeEmpty:pk,makeShallow:Fk,iterate:mk}})},Ek=()=>{Object.assign(gu,{date:{type:Date,makeShallow:u=>new Date(u.getTime())}})},Ck=()=>{Object.assign(gu,{regexp:{type:RegExp,makeShallow:u=>new RegExp(u)}})},Ak=()=>{Object.assign(gu,{function:{type:Function,makeShallow:u=>u}})},vk=()=>{Object.assign(gu,{error:{type:Error,makeShallow:u=>{const e=new Error(u.message);return e.stack=u.stack,e}}})},yk=u=>{let e=typeof vr<"u"&&vr[u]||typeof window<"u"&&window[u]||typeof WorkerGlobalScope<"u"&&WorkerGlobalScope[u];typeof e<"u"&&(gu[u.toLowerCase()]={type:e,makeShallow:t=>e.from(t)})},gk=()=>{["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].forEach(e=>yk(e))},bk=()=>{typeof ArrayBuffer<"u"&&Object.assign(gu,{arraybuffer:{type:ArrayBuffer,makeShallow:u=>u.slice(0)}})},Bk=()=>{typeof Map>"u"||Object.assign(gu,{map:{type:Map,mayDeepCopy:!0,addElement:(u,e,t)=>u.set(e,t),makeEmpty:()=>new Map,makeShallow:u=>new Map(u),iterate:(u,e,t)=>{u.forEach((r,n)=>{const a={key:n,value:r,type:En(r)};t(a)})}}})},_k=()=>{typeof Set>"u"||Object.assign(gu,{set:{type:Set,mayDeepCopy:!0,addElement:(u,e,t)=>u.add(t),makeEmpty:()=>new Set,makeShallow:u=>new Set(u),iterate:(u,e,t)=>{u.forEach(r=>{const n={key:null,value:r,type:En(r)};t(n)})}}})},Sk=()=>{typeof WeakSet>"u"||Object.assign(gu,{weakset:{type:WeakSet,makeShallow:u=>u}})},$k=()=>{typeof WeakMap>"u"||Object.assign(gu,{weakmap:{type:WeakMap,makeShallow:u=>u}})},wk=()=>{typeof Pa.Buffer>"u"||Object.assign(gu,{buffer:{type:Pa.Buffer,makeShallow:u=>Pa.Buffer.from(u)}})},kk=(u,e,t,r=void 0)=>{r?Object.defineProperty(u,e,r):u[e]=t},qk=u=>{const e={};return Object.setPrototypeOf(e,Object.getPrototypeOf(u)),e},Tk=u=>{const e=Object.assign({},u);return Object.setPrototypeOf(e,Object.getPrototypeOf(u)),e},Pk=(u,e,t)=>{const r=e?Object.getOwnPropertyNames(u):Object.keys(u),n=r.length;for(let a=0;a<n;a++){const o=r[a],s=u[o],i={key:o,value:s,type:En(s)};e&&!u.propertyIsEnumerable(o)&&(i.descriptor=Object.getOwnPropertyDescriptor(u,o)),t(i)}},Ok=()=>{Object.assign(gu,{object:{type:Object,mayDeepCopy:!0,addElement:kk,makeEmpty:qk,makeShallow:Tk,iterate:Pk}})},Ik=()=>{Object.assign(gu,{unknown:{makeShallow:u=>u},primitive:{makeShallow:u=>u}})};hk();Ek();Ck();Ak();vk();gk();bk();Bk();_k();Sk();$k();wk();Ok();Ik();function jk(u){return gu[u]}var xk=[wE,En,jk];const[Rk,Nk,$c]=xk,wc={goDeep:!0,includeNonEnumerable:!1,detectCircular:!0,maxDepth:20};function Mk(u){Object.keys(wc).forEach(e=>{u[e]===void 0&&(u[e]=wc[e])})}class Uk{constructor(){this._seenMap=new WeakMap}setAsCopied(e,t){e instanceof Object&&this._seenMap.set(e,t)}wasCopied(e){return e instanceof Object&&this._seenMap.has(e)}getCopy(e){return this._seenMap.get(e)}}function Vk(u,e,t){const{options:r,watcher:n}=t;let a;return e.mayDeepCopy?(a=e.makeEmpty(u),r.detectCircular&&n.setAsCopied(u,a)):a=e.makeShallow(u),a}function zk(u,e){if(u>=e)throw`Error max depth of ${e} levels exceeded, possible circular reference`}const kE=(u,e,t)=>{const{destObject:r,srcType:n,watcher:a,options:o}=e,s=o.detectCircular;zk(++t,o.maxDepth);const i=$c(n);if(!i.mayDeepCopy)return;const c=i.addElement;i.iterate(u,o.includeNonEnumerable,D=>{const l=D.value,f=D.type,C=$c(f);let F,A=!1;s&&a.wasCopied(l)?(F=a.getCopy(l),A=!0):F=Vk(l,C,{options:o,watcher:a}),c(r,D.key,F,D.descriptor),C.mayDeepCopy&&!A&&kE(l,{destObject:F,srcType:f,watcher:a,options:o},t)})};function Wk(u,e=wc){if(Mk(e),Rk(u))return u;const t=Nk(u),r=$c(t);if(!e.goDeep||!r.mayDeepCopy)return r.makeShallow(u);const n=e.detectCircular?new Uk:null;let a=r.makeEmpty(u);return e.detectCircular&&n.setAsCopied(u,a),kE(u,{destObject:a,srcType:t,watcher:n,options:e},0),a}var Lk=Wk,Gk=Hk(Lk);function Hk(u){return u&&u.__esModule?u:{default:u}}var na=u=>{var e=[];for(var t of u)typeof t=="string"?e.length>0&&typeof e[e.length-1]=="string"?e[e.length-1]+=t:e.push(t):(t.content&&(t.content=na(t.content)),t.metaContent&&(t.metaContent=na(t.content)),e.push(t));return e},Jk=u=>{var e=(0,Gk.default)(u);for(var t of Object.values(e.sequences))for(var r of t.blocks)r.content&&(r.content=na(r.content)),r.metaContent&&(r.metaContent=na(r.metaContent));return e},qE=function(e){var{perf:t}=e;return{perf:Jk(t)}},Kk={name:"mergePerfText",type:"Transform",description:"PERF=>PERF: Merge consecutive text strings",inputs:[{name:"perf",type:"json",source:""}],outputs:[{name:"perf",type:"json"}],code:qE},Zk={mergePerfText:Kk,mergePerfTextCode:qE},{identity:Yk}=Rw,{justTheBible:Qk}=Lw,{stripUwAlignment:Xk}=Qw,{mergeUwAlignment:eq}=ak,{addUwAlignmentOccurrences:uq}=dk,{mergePerfText:tq,mergePerfTextCode:rq}=Zk,nq={identity:Yk,justTheBible:Qk,mergePerfText:tq,stripUwAlignment:Xk,mergeUwAlignment:eq,addUwAlignmentOccurrences:uq,mergePerfTextCode:rq},aq=Ow,oq=nq,sq={transforms:oq,renderActions:aq};function NF(u,e){var t=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),t.push.apply(t,r)}return t}function MF(u){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(t),!0).forEach(function(r){iq(u,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(t)):NF(Object(t)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(t,r))})}return u}function iq(u,e,t){return e=cq(e),e in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}function cq(u){var e=Dq(u,"string");return typeof e=="symbol"?e:e+""}function Dq(u,e){if(typeof u!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}var lq={showWordAtts:!1,showTitles:!0,showHeadings:!0,showFootnotes:!0,showXrefs:!0,showChapterLabels:!0,showVersesLabels:!0,showFirstVerseLabel:!1,showCharacterMarkup:!0,showParaStyles:!0,selectedBcvNotes:[]},dq={startDocument:[{description:"Set up",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r,output:n}=u;if(e.displayPartOfText!=null&&!["begin","continue"].includes(e.displayPartOfText.state))throw new Error("state must be typeof string and one of begin or continue");r.settings=MF(MF({},lq),e),r.webParas=[],r.currentIndex=0,n.sofria={},n.sofria.sequence={},r.currentSequence=n.sofria.sequence,r.paraContentStack=[],r.footnoteNo=1,r.bookCode=t.document.metadata.document.bookCode,r.chapter=0,r.foundPara=!1}}],startSequence:[{description:"startSequence",test:()=>!0,action:u=>{var{context:e,workspace:t}=u;t.currentIndex+=1,t.currentSequence.type=e.sequences[0].type,t.currentSequence.blocks=[]}}],endSequence:[{description:"endSequence",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u;r.currentSequence.type==="footnote"&&r.footnoteNo++,r.currentSequence={}}}],startTable:[{description:"Initialise table",test:()=>!0,action:u=>{var{context:e,workspace:t}=u;t.currentIndex+=1,t.paraContentStack.unshift({subType:"table",content:[]})}}],endTable:[{description:"Add completed table to webParas",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u;r.webParas.push(e.renderers.table(r.paraContentStack[0].content)),r.paraContentStack.shift()}}],startRow:[{description:"Initialise content stack",test:()=>!0,action:u=>{var{context:e,workspace:t}=u,r=e.sequences[0].block;t.currentIndex+=1,t.paraContentStack.unshift({subType:r.subType,content:[]})}}],endRow:[{description:"Add completed table to webParas",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u,n=r.paraContentStack.shift();r.paraContentStack[0].content.push(e.renderers.row(n.content,r.currentIndex))}}],blockGraft:[{description:"Process block grafts",test:()=>!0,action:u=>{var e=u.context.sequences[0].block;if(e.subType!=="remark"&&!(["title","endTitle"].includes(e.subType)&&!u.workspace.settings.showTitles)&&!(["heading"].includes(e.subType)&&!u.workspace.settings.showHeadings)&&!(["introduction"].includes(e.subType)&&!u.workspace.settings.showIntroductions)){var t={type:e.type};if(e.sequence){t.sequence={};var r=u.workspace.currentSequence;u.workspace.currentSequence=t.sequence;var n=u.workspace.paraContentStack;u.context.renderer.renderSequence(u),u.workspace.paraContentStack=n,u.workspace.currentSequence=r}u.workspace.currentSequence.blocks.push(t)}}}],inlineGraft:[{description:"inlineGraft",test:u=>{var{context:e,workspace:t}=u;return e.sequences[0].element.subType!=="note_caller"&&!(["footnote"].includes(e.sequences[0].element.subType)&&!t.settings.showFootnotes)&&!(["xref"].includes(e.sequences[0].element.subType)&&!t.settings.showXrefs)},action:u=>{var e=u.context.sequences[0].element,t={type:e.type};if(e.sequence){t.sequence={};var r=u.workspace.currentSequence,n=[...u.workspace.paraContentStack],a=u.workspace.webParas;u.workspace.webParas=[],u.workspace.currentSequence=t.sequence,u.context.renderer.renderSequence(u);var o=u.workspace.webParas;u.workspace.webParas=a,u.workspace.paraContentStack=n,u.workspace.paraContentStack[0].content.push(o),u.workspace.currentSequence=r}}}],startParagraph:[{description:"Initialise content stack",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u;t.sequences[0].type!=="title"&&!r.foundPara&&(r.webParas.push(e.renderers.startChapters(r.settings.nColumns)),r.foundPara=!0),r.currentIndex+=1;var n=t.sequences[0].block;r.paraContentStack.unshift({subType:n.subType,content:[]})}}],endParagraph:[{description:"Add completed para to webParas",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u;r.webParas.push(e.renderers.paragraph(r.settings.showParaStyles||["footnote","xref"].includes(t.sequences[0].type)?r.paraContentStack[0].subType:"usfm:m",r.paraContentStack[0].content,r.footnoteNo,r.currentIndex)),r.paraContentStack.shift()}}],startWrapper:[{description:"Skip usfm:w outside main sequence",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"&&e.sequences[0].type!=="main"},action:()=>{}},{description:"Handle standard w attributes",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:u=>{var{context:e,workspace:t}=u;t.currentIndex+=1;var r=e.sequences[0].element.atts,n={};for(var[a,o]of Object.entries(r))["strong","lemma","gloss"].includes(a)&&(n[a]=o);return t.paraContentStack.unshift({subType:e.sequences[0].element.subType,atts:n,content:[]}),!1}},{description:"Push to paraContent Stack",test:u=>{var{context:e,workspace:t}=u;return!["chapter","verses"].includes(e.sequences[0].element.subType)&&t.settings.showCharacterMarkup},action:u=>{var{context:e,workspace:t}=u,r={subType:e.sequences[0].element.subType,content:[]};e.sequences[0].element.subType==="cell"&&(r.atts=e.sequences[0].element.atts),t.currentIndex+=1,t.paraContentStack.unshift(r)}}],endWrapper:[{description:"Skip usfm:w outside main sequence",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"&&e.sequences[0].type!=="main"},action:()=>{}},{description:"Handle standard w attributes",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:w"},action:u=>{var{config:e,workspace:t}=u,r=t.paraContentStack.shift(),n=e.renderers.wWrapper(t.settings.showWordAtts?r.atts:{},r.content.join(""),t.currentIndex);return t.paraContentStack[0].content.push(n),t.settings.showGlossaryStar&&t.paraContentStack[0].content.push('<span class="glossary_star">*</span>'),!1}},{description:"Collapse one level of paraContent Stack",test:u=>{var{context:e,workspace:t}=u;return!["chapter","verses"].includes(e.sequences[0].element.subType)&&t.settings.showCharacterMarkup},action:u=>{var{config:e,workspace:t}=u,r=t.paraContentStack.shift();t.paraContentStack[0].content.push(e.renderers.wrapper(r.subType==="cell"?r.atts:{},r.subType,r.content,t.currentIndex))}}],startMilestone:[{description:"Handle zaln word-like atts",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:u=>{var{config:e,context:t,workspace:r}=u,n=t.sequences[0].element.atts,a={};for(var[o,s]of Object.entries(n))["x-strong","x-lemma","x-morph","x-content"].includes(o)&&(a[o.split("-")[1]]=s);return r.currentIndex+=1,r.paraContentStack[0].content.push(e.renderers.milestone("usfm:zaln",a)),!1}}],endMilestone:[{description:"Handle zaln word-like atts",test:u=>{var{context:e}=u;return e.sequences[0].element.subType==="usfm:zaln"},action:u=>{var{config:e,context:t,workspace:r}=u,n=t.sequences[0].element.atts,a={};for(var[o,s]of Object.entries(n))["x-strong","x-lemma","x-morph","x-content"].includes(o)&&(a[o.split("-")[1]]=s);return r.paraContentStack[0].content.push(e.renderers.milestone("usfm:zaln",a)),!1}}],text:[{description:"Push text to para",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u,n=t.sequences[0].element;n.text.split(" ").map((a,o)=>{r.currentIndex+=1;var s=e.renderers.text(o===n.text.split(" ").length-1?a:a+" ",r.currentIndex);r.paraContentStack[0].content.push(s)})}}],mark:[{description:"Show chapter/verse markers",test:()=>!0,action:u=>{var{config:e,context:t,workspace:r}=u;r.currentIndex+=1;var n=t.sequences[0].element;if(n.subType==="chapter_label"&&r.settings.showChapterLabels)r.chapter=n.atts.number,r.paraContentStack[0].content.push(e.renderers.chapter_label(n.atts.number,r.currentIndex));else if(n.subType==="verses_label"&&r.settings.showVersesLabels){if(n.atts.number==="1"&&!r.settings.showFirstVerseLabel)return!1;var a=[];e.selectedBcvNotes.length>0&&(a=[r.bookCode,r.chapter,n.atts.number]),r.paraContentStack[0].content.push(e.renderers.verses_label(n.atts.number,a,e.bcvNotesCallback,r.currentIndex))}}}],endDocument:[{description:"Build output",test:()=>!0,action:u=>{var{config:e,workspace:t,output:r}=u;t.foundPara&&(t.webParas.push(e.renderers.endChapters()),t.foundPara=!0),r.paras=e.renderers.mergeParas(t.webParas)}}]},fq={sofria2WebActions:dq},{sofria2WebActions:pq}=fq,Fq={sofria2WebActions:pq},mq={paras:{default:{fontSize:"medium",marginTop:"0.5ex",marginBottom:"0.5ex"},"usfm:b":{height:"1em"},"usfm:d":{fontStyle:"italic"},"usfm:f":{fontSize:"small"},"usfm:hangingGraft":{},"usfm:imt":{fontWeight:"bold",fontStyle:"italic",fontSize:"xx-large",textAlign:"center"},"usfm:imt2":{fontWeight:"bold",fontStyle:"italic",fontSize:"x-large",textAlign:"center"},"usfm:imt3":{fontWeight:"bold",fontStyle:"italic",fontSize:"large",textAlign:"center"},"usfm:ip":{textIndent:"1.5em"},"usfm:ipi":{paddingLeft:"1.5em",textIndent:"1.5em"},"usfm:io":{paddingLeft:"1.5em"},"usfm:iot":{fontWeight:"bold",fontSize:"large"},"usfm:is":{fontStyle:"italic",fontSize:"xx-large"},"usfm:is2":{fontStyle:"italic",fontSize:"x-large"},"usfm:is3":{fontStyle:"italic",fontSize:"large"},"usfm:li":{listStyleType:"disc",paddingLeft:"3em",textIndent:"-1.5em"},"usfm:li2":{listStyleType:"disc",paddingLeft:"4.5em",textIndent:"-1.5em"},"usfm:li3":{listStyleType:"disc",paddingLeft:"6em",textIndent:"-1.5em"},"usfm:m":{},"usfm:mi":{paddingLeft:"1.5em"},"usfm:mr":{fontSize:"large",fontStyle:"italic"},"usfm:ms":{fontSize:"large",fontWeight:"bold"},"usfm:ms2":{fontWeight:"bold"},"usfm:mt":{fontWeight:"bold",fontStyle:"italic",fontSize:"xx-large",textAlign:"center"},"usfm:mt2":{fontWeight:"bold",fontStyle:"italic",fontSize:"x-large",textAlign:"center"},"usfm:mt3":{fontWeight:"bold",fontStyle:"italic",fontSize:"large",textAlign:"center"},"usfm:nb":{},"usfm:p":{textIndent:"1.5em"},"usfm:pc":{textAlign:"center"},"usfm:pi":{paddingLeft:"1.5em",textIndent:"1.5em"},"usfm:pi2":{paddingLeft:"3em",textIndent:"1.5em"},"usfm:pi3":{paddingLeft:"4.5em",textIndent:"1.5em"},"usfm:q":{paddingLeft:"1.5em",marginTop:"0.5ex",marginBottom:"0.5ex"},"usfm:q2":{paddingLeft:"3em",marginTop:"0.5ex",marginBottom:"0.5ex"},"usfm:q3":{paddingLeft:"4.5em",marginTop:"0.5ex",marginBottom:"0.5ex"},"usfm:q4":{paddingLeft:"6em",marginTop:"0.5ex",marginBottom:"0.5ex"},"usfm:qa":{fontWeight:"bold",fontSize:"x-large"},"usfm:qr":{textAlign:"right"},"usfm:r":{fontWeight:"bold"},"usfm:s":{fontStyle:"italic",fontSize:"xx-large"},"usfm:s2":{fontStyle:"italic",fontSize:"x-large"},"usfm:s3":{fontStyle:"italic",fontSize:"large"},"usfm:sr":{fontSize:"large"},"usfm:tr":{},"usfm:x":{fontSize:"small"}},marks:{default:{},chapter_label:{float:"left",fontSize:"xx-large",marginRight:"0.5em"},verses_label:{fontWeight:"bold",fontSize:"small",verticalAlign:"super",marginRight:"0.5em"}},wrappers:{default:{},"usfm:add":{fontStyle:"italic"},"usfm:bd":{fontWeight:"bold"},"usfm:bdit":{fontWeight:"bold",fontStyle:"italic"},"usfm:bk":{fontWeight:"bold"},chapter:{},"usfm:fl":{},"usfm:fm":{},"usfm:fq":{fontStyle:"italic"},"usfm:fqa":{fontStyle:"italic"},"usfm:fr":{fontWeight:"bold"},"usfm:ft":{},"usfm:it":{fontStyle:"italic"},"usfm:nd":{fontWeight:"bold",fontSize:"smaller",textTransform:"uppercase"},"usfm:qs":{float:"right",fontStyle:"italic"},"usfm:sc":{fontSize:"smaller",textTransform:"uppercase"},"usfm:tl":{fontStyle:"italic"},verses:{},"usfm:wj":{color:"#D00"},"usfm:xk":{},"usfm:xo":{fontWeight:"bold"},"usfm:xt":{}}},hq=u=>{var e=[];for(var t in u){e.push("/* ".concat(t,` CSS format : */
`));for(var r in u[t]){if(r.includes(":")){var n=r.replace(":","_");e.push("  .".concat(t,"_").concat(n.replace(/([A-Z])/g,"_$1").toLowerCase(),` {
`))}else e.push("  .".concat(t,"_").concat(r.replace(/([A-Z])/g,"_$1").toLowerCase(),` {
`));var a=u[t][r];for(var o in a)for(var s in o)if(o[s]===o[s].toUpperCase()){var i=o.replace(/([A-Z])/g,"-$1").toLowerCase();e.push("      ".concat(i,": ").concat(a[o],`;
`))}e.push(`  }
`)}}return e.join("")};function Eq(u){var e=u,t=Object.keys(e);return t.map(r=>{var n=Object.keys(e[r]);n.map(a=>{var o=Object.keys(e[r][a]);o.map(s=>{if(s==="float"&&e[r][a][s]==="left"&&(e[r][a].textAlign="left",delete e[r][a][s]),s==="verticalAlign"&&e[r][a][s]==="super"&&(e[r][a][s]="top"),s==="textIndent"){if(e[r][a][s].includes("em")){var i=e[r][a][s];i.replace("em",""),e[r][a].marginLeft=parseFloat(i)*16,delete e[r][a][s]}delete e[r][a][s]}if(e[r][a][s]==="medium"&&(e[r][a][s]=16),e[r][a][s]==="x-small"&&(e[r][a][s]=10),e[r][a][s]==="xx-small"&&(e[r][a][s]=9),e[r][a][s]==="small"&&(e[r][a][s]=13.333),e[r][a][s]==="large"&&(e[r][a][s]=18),e[r][a][s]==="x-large"&&(e[r][a][s]=24),e[r][a][s]==="xx-large"&&(e[r][a][s]=32),typeof e[r][a][s]=="string"){if(e[r][a][s].includes("em")){var c=e[r][a][s];c.replace("em",""),e[r][a][s]=parseFloat(c)*16;return}if(e[r][a][s].includes("ex")){var D=e[r][a][s];D.replace("ex",""),e[r][a][s]=parseFloat(D);return}}})})}),e}var Cq={styles:mq,styleAsCSS:hq,convertCssToReactNativeStyle:Eq},Aq={text:u=>u.replace(/{/g,"<i>").replace(/}/g,"</i>"),chapter_label:u=>'<span class="marks_chapter_label">'.concat(u,"</span>"),verses_label:u=>'<span class="marks_verses_label">'.concat(u,"</span>"),paragraph:(u,e,t)=>{var r=u.split(":")[1],n="p";return["f","x"].includes(r)?n="span":["s","ms","imt","imte","mt"].includes(r)?n="h1":["s2","ms2","imt2","imte2","mt2","mr","sr"].includes(r)?n="h2":["s3","ms3","imt3","imte3","mt3","r","d"].includes(r)?n="h3":["s4","ms4","imt4","imte4","mt4"].includes(r)&&(n="h4"),"<".concat(n,' class="',"paras_usfm_".concat(r),'">').concat(e.join(""),"</").concat(n,">")},wrapper:(u,e,t)=>e==="cell"?u.role==="body"?"<td colspan=".concat(u.nCols,' style="text-align:').concat(u.alignment,'">').concat(t.join(""),"</td>"):"<th colspan=".concat(u.nCols,' style="text-align:').concat(u.alignment,'">').concat(t.join(""),"</th>"):'<span class="'.concat("wrappers_usfm_".concat(e.split(":")[1]),'">',t.join(""),"</span>"),wWrapper:(u,e)=>Object.keys(u).length===0?e:`<span
            style={{
                display: "inline-block",
                verticalAlign: "top",
                textAlign: "center"
            }}
        >
        <div>`.concat(e,"</div>").concat(Object.entries(u).map(t=>`<div
                            style={{
                                fontSize: "xx-small",
                                fontWeight: "bold"
                            }}
                        >
                        {`.concat(t[0]," = ").concat(t[1],`} 
                        </div>`)).join(""),"</span>"),milestone:(u,e)=>"",startChapters:u=>'<section class="chapters" style="columns: '.concat(u,'">'),endChapters:()=>"</section>",mergeParas:u=>u.join(`
`),row:u=>"<tr>".concat(u.join(""),"</tr>"),table:u=>"<table border>".concat(u.join(" "),"</table>")},vq={renderers:Aq},yq=Fq,gq=Cq,bq=vq,Bq={renderStyles:gq,renderActions:yq,sofria2html:bq},_q=c$,Sq=E$,$q=O$,wq=gw,kq=sq,qq=Bq,TE={xToPerf:Sq,perfToX:wq,sofriaToSofria:$q,alignment:_q,perfToPerf:kq,sofria2web:qq};const Tq=[{id:0,type:"Inputs",inputs:{usfm:"text",selectors:"json"}},{id:2,title:"USFM to PERF",name:"usfmToPerf",type:"Transform",inputs:[{name:"usfm",type:"text",source:"Input usfm"},{name:"selectors",type:"json",source:"Input selectors"}],outputs:[{name:"perf",type:"json"}],description:"USFM=>PERF: Conversion via Proskomma"},{id:999,type:"Outputs",outputs:[{name:"perf",type:"json",source:"Transform 2 perf"}]}],Pq=[{id:0,type:"Inputs",inputs:{perf:"json",strippedAlignment:"json"}},{id:1,title:"Count stripped perf words",name:"verseWords",transformName:"verseWords",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"verseWords",type:"json"}],description:"PERF=>JSON: Counts words occurrences"},{id:2,title:"Merge Back Into Stripped (roundtrip)",name:"mergeAlignment",transformName:"mergeAlignment",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"},{name:"strippedAlignment",type:"json",source:"Input strippedAlignment"},{name:"verseWords",type:"json",source:"Transform 1 verseWords"}],outputs:[{name:"perf",type:"json"},{name:"unalignedWords",type:"json"}],description:"PERF=>PERF adds report to verses"},{id:3,title:"Merge Merged PERF Text",name:"mergePerfText",transformName:"mergePerfText",type:"Transform",inputs:[{name:"perf",type:"json",source:"Transform 2 perf"}],outputs:[{name:"perf",type:"json"}],description:"PERF=>PERF: Merge consecutive text strings"},{id:999,type:"Outputs",outputs:[{name:"perf",type:"json",source:"Transform 3 perf"},{name:"unalignedWords",type:"json",source:"Transform 2 unalignedWords"}]}],Oq=[{id:0,type:"Inputs",inputs:{perf:"json"}},{id:1,title:"Count stripped perf words",name:"verseWords",type:"Transform",transformName:"verseWords",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"verseWords",type:"json"}],description:"PERF=>JSON: Counts words occurrences"},{id:2,title:"Strip Alignment",name:"stripAlignment",type:"Transform",transformName:"stripAlignment",inputs:[{name:"perf",type:"json",source:"Input perf"},{name:"verseWords",type:"json",source:"Transform 1 verseWords"}],outputs:[{name:"perf",type:"json"},{name:"strippedAlignment",type:"json"},{name:"unalignedWords",type:"json"}],description:"PERF=>PERF: Strips alignment markup"},{id:3,title:"Merge stripped perf",name:"mergePerfText",type:"Transform",transformName:"mergePerfText",inputs:[{name:"perf",type:"json",source:"Transform 2 perf"}],outputs:[{name:"perf",type:"json"}],description:"PERF=>PERF: Merge consecutive text strings"},{id:999,type:"Outputs",outputs:[{name:"perf",type:"json",source:"Transform 3 perf"},{name:"strippedAlignment",type:"json",source:"Transform 2 strippedAlignment"},{name:"unalignedWords",type:"json",source:"Transform 2 unalignedWords"}]}],Iq=[{id:0,type:"Inputs",inputs:{perf:"json"}},{id:1,title:"Strip uW alignment",name:"stripUwAlignment",transformName:"stripUwAlignment",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"perf",type:"json"}]},{id:999,type:"Outputs",outputs:[{name:"perf",type:"json",source:"Transform 1 perf"}]}],jq=[{id:0,type:"Inputs",inputs:{perf:"json",usfmJs:"json"}},{id:1,title:"Strip uW alignment",name:"stripUwAlignment",transformName:"stripUwAlignment",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"perf",type:"json"}]},{id:2,title:"Merge uW alignment",name:"mergeUwAlignment",transformName:"mergeUwAlignment",type:"Transform",inputs:[{name:"perf",type:"json",source:"Transform 1 perf"},{name:"usfmJs",type:"json",source:"Input usfmJs"}],outputs:[{name:"perf",type:"json"},{name:"occurrences",type:"json"}]},{id:3,title:"Add occurrences",name:"addUwAlignmentOccurrences",transformName:"addUwAlignmentOccurrences",type:"Transform",inputs:[{name:"perf",type:"json",source:"Transform 2 perf"},{name:"occurrences",type:"json",source:"Transform 2 occurrences"}],outputs:[{name:"perf",type:"json"}]},{id:999,type:"Outputs",outputs:[{name:"perf",type:"json",source:"Transform 3 perf"},{name:"occurrences",type:"json",source:"Transform 2 perf"}]}],xq=[{id:0,type:"Inputs",inputs:{perf:"json"}},{id:1,title:"Generate report",name:"calculateUsfmChapterPositions",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"report",type:"json"}],description:"Generate report from perf to calculate the position of the chapters"},{id:2,title:"PERF to USFM",name:"perfToUsfm",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"},{name:"report",type:"json",source:"Transform 1 report"}],outputs:[{name:"usfm",type:"text"}],description:"PERF=>USFM: Conversion via Proskomma"},{id:999,type:"Outputs",outputs:[{name:"usfm",type:"text",source:"Transform 2 usfm"}]}],Rq=[{id:0,type:"Inputs",inputs:{perf:"json"}},{id:1,title:"PERF to USFMJS",name:"perfToUsfmJs",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"usfmJs",type:"json"}],description:"USFM=>PERF: Conversion via Proskomma"},{id:999,type:"Outputs",outputs:[{name:"usfmJs",type:"json",source:"Transform 1 usfmJs"}]}],Nq=[{id:0,type:"Inputs",inputs:{perf:"json"}},{id:1,title:"Simplify Input PERF",name:"justTheBible",transformName:"justTheBible",type:"Transform",inputs:[{name:"perf",type:"json",source:"Input perf"}],outputs:[{name:"perf",type:"json"}]},{id:999,type:"Outputs",outputs:[{name:"perf",type:"json",source:"Transform 1 perf"}]}];var Mq=Ut(Tq),Uq=Ut(Pq),Vq=Ut(Oq),zq=Ut(Iq),Wq=Ut(jq),Lq=Ut(xq),Gq=Ut(Rq),Hq=Ut(Nq);function Ut(u){return u&&u.__esModule?u:{default:u}}var PE={usfmToPerfPipeline:Mq.default,mergeAlignmentPipeline:Uq.default,stripAlignmentPipeline:Vq.default,stripUwAlignmentPipeline:zq.default,mergeUwAlignmentPipeline:Wq.default,perfToUsfmPipeline:Lq.default,perfToUsfmJsPipeline:Gq.default,justTheBiblePipeline:Hq.default};function UF(u,e){var t=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),t.push.apply(t,r)}return t}function VF(u){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(t),!0).forEach(function(r){Jq(u,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(t)):UF(Object(t)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(t,r))})}return u}function Jq(u,e,t){return e=Kq(e),e in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}function Kq(u){var e=Zq(u,"string");return typeof e=="symbol"?e:e+""}function Zq(u,e){if(typeof u!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}var Yq=TE,Qq=PE;let Xq=class{constructor(e){var{pipelines:t=null,transforms:r=null,proskomma:n=null,verbose:a=!1}=e;if(n!==null){this.proskomma=n;var o="{ id }",s=n.gqlQuerySync(o)||{};if(!s||!s.data.id)throw new Error("Provided Proskomma instance does not have any ID")}if(this.pipelines=Qq,this.namespaces=Yq,this.transforms={},t!=null)for(var i of Object.keys(t))this.pipelines[i]=t[i];if(r!=null)for(var c of Object.keys(r))this.transforms[c]=r[c];this.verbose=a}getProskomma(){return this.proskomma}setProskomma(e){this.proskomma=e}listPipelinesNames(){return Object.keys(this.pipelines).join(`
`)}listTransformsNames(){return Object.keys(this.transforms).join(`
`)}listNamespacesNames(){return Object.keys(this.namespaces).join(`
`)}getPipeline(e,t){if(!this.pipelines[e])throw new Error("Unknown pipeline name '".concat(e,"'"));var r=this.pipelines[e],n=r[0].inputs;if(Object.keys(n).length!==Object.keys(t).length)throw new Error("".concat(Object.keys(n).length," input(s) expected by ").concat(e," but ").concat(Object.keys(t).length," provided (").concat(Object.keys(t).join(", "),")"));for(var[a,o]of Object.entries(n)){if(!t[a])throw new Error("Input ".concat(a," not provided as input to ").concat(e));if(typeof t[a]=="string"!=(o==="text"))throw new Error("Input ".concat(a," must be ").concat(o," but ").concat(typeof t[a]=="string"?"text":"json"," was provided"))}return r}runPipeline(e,t){var r=this.getPipeline(e,t);this.loadTransforms(r,"perf");try{return this.evaluateSteps({specSteps:r,inputValues:t})}catch(n){throw new Error("Error from runPipeline while running ".concat(e,": ").concat(n.message))}}loadTransforms(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"perf",r=e.filter(A=>A.type==="Transform");if(r.length===0)throw new Error("No Transform steps found in report steps");var n=Object.keys(r).map(A=>r[A].name);if(t==="sofria"){var a=null;for(var[o,s]of Object.entries(this.namespaces))if(o==="sofriaToSofria"){s.transforms?a=Object.entries(s.transforms):a=Object.entries(s);for(var[i,c]of a)n.includes(i)&&(this.transforms[i]=c)}}else{var D=null;for(var[l,f]of Object.entries(this.namespaces))if(l!=="sofriaToSofria"){f.transforms?D=Object.entries(f.transforms):D=Object.entries(f);for(var[C,F]of D)n.includes(C)&&(this.transforms[C]=F)}}}evaluateSteps(e){var{specSteps:t,inputValues:r}=e;this.verbose&&console.log("** Evaluate **");var n=t.filter(L=>L.type==="Inputs")[0];if(!n)throw new Error("No Inputs step found in report steps");var a=t.filter(L=>L.type==="Outputs")[0];if(!a)throw new Error("No Outputs step found in report steps");var o=t.filter(L=>L.type==="Transform");if(o.length===0)throw new Error("No Transform steps found in report steps");var s={},i={};for(var c of Object.values(o)){s[c.id]={};for(var D of c.inputs)s[c.id][D.name]=null;i[c.id]={};for(var l of c.outputs)i[c.id][l]=null}for(var[f,C]of Object.entries(r))for(var F of o)for(var A of F.inputs)A.source==="Input ".concat(f)&&(this.verbose&&console.log("Copying Input ".concat(f," to Transform ").concat(F.id," ").concat(A.name," input")),s[F.id][A.name]=C);for(var m=new Set([]),p=!0;p;){p=!1;for(var d of o)if(Object.values(s[d.id]).filter(L=>!L).length===0&&Object.values(i[d.id]).filter(L=>!L).length>0){if(!this.transforms[d.name])throw new Error("Could not find transform called ".concat(d.name));if(m.has(d.id))throw new Error("Transform ".concat(d.id," called more than once"));m.add(d.id),this.verbose&&console.log("Evaluating Transform ".concat(d.id));try{if(i[d.id]=this.transforms[d.name].code(VF(VF({},s[d.id]),{},{proskomma:this.getProskomma()})),Object.values(i[d.id]).filter(L=>!L).length>0)throw new Error("Transform ".concat(d.id," returned at least one false/undefined value: ").concat(JSON.stringify(i[d.id])))}catch(L){var h="Error evaluating Transform ".concat(d.id," (name=").concat(d.name,", type=").concat(typeof d.code,"): ").concat(L);throw new Error(h)}for(var S of o)for(var B of S.inputs)for(var x of Object.keys(i[d.id]))B.source==="Transform ".concat(d.id," ").concat(x)&&(this.verbose&&console.log("Copying Transform ".concat(d.id," ").concat(x," output to Transform ").concat(S.id," ").concat(B.name," input")),s[S.id][B.name]=i[d.id][x]);p=!0}}var U={};for(var R of a.outputs){var T=R.source.split(" ")[1];this.verbose&&console.log("Copying Transform ".concat(T," ").concat(R.name," to Output ").concat(R.name)),U[R.name]=i[T][R.name]}return this.verbose&&console.log("****"),U}};var eT=Xq;function zF(u,e){var t=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),t.push.apply(t,r)}return t}function WF(u){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(t),!0).forEach(function(r){uT(u,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(t)):zF(Object(t)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(t,r))})}return u}function uT(u,e,t){return e=tT(e),e in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}function tT(u){var e=rT(u,"string");return typeof e=="symbol"?e:e+""}function rT(u,e){if(typeof u!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}var nT=hn,Wt=u=>{var e=[];for(var t of u.split(""))t.toUpperCase()===t&&t.toLowerCase()!==t?e.push("_".concat(t.toLowerCase())):e.push(t);return e.join("")};let aT=class extends nT{constructor(e){if(super(e),!e.proskomma)throw new Error("No Proskomma");this.pk=e.proskomma,this._tokens=[],this._container=null}renderDocument1(e){var{docId:t,config:r,context:n,workspace:a,output:o}=e,s={config:r,context:n,workspace:a,output:o};n.renderer=this;var i=this.pk.gqlQuerySync('{document(id: "'.concat(t,'") {docSetId mainSequence { id } nSequences sequences {id} headers { key value } } }')),c=i.data.document.docSetId,D=i.data.document.mainSequence.id,l=i.data.document.nSequences;i.data.document.sequences.map(p=>p.id);var f={};for(var C of i.data.document.headers)f[C.key]=C.value;var F=this.pk.gqlQuerySync('{docSet(id: "'.concat(c,'") {selectors {key value}}}')),A={};for(var m of F.data.docSet.selectors)A[m.key]=m.value;n.document={id:t,schema:{structure:"flat",structure_version:"0.2.1",constraints:[{name:"perf",version:"0.2.1"}]},metadata:{translation:{id:c,selectors:A,properties:{},tags:[]},document:WF(WF({},f),{},{properties:{},tags:[]})},mainSequenceId:D,nSequences:l},n.sequences=[],this.renderEvent("startDocument",s),this.renderSequenceId(s,D),this.renderEvent("endDocument",s)}sequenceContext(e,t){return{id:t,type:Wt(e.type),nBlocks:e.nBlocks,milestones:new Set([])}}renderSequenceId(e,t){var r=e.context,n=this.pk.gqlQuerySync('{document(id: "'.concat(r.document.id,'") {sequence(id:"').concat(t,'") {id type nBlocks } } }')),a=n.data.document.sequence;if(!a)throw new Error("Sequence '".concat(t,"' not found in renderSequenceId()"));r.sequences.unshift(this.sequenceContext(a,t)),this.renderEvent("startSequence",e);for(var o=0,s=0;s<a.nBlocks;s++){var i=this.pk.gqlQuerySync(`{
               document(id: "`.concat(r.document.id,`") {
                 sequence(id:"`).concat(t,`") {
                   blocks(positions:`).concat(s,`) {
                     bg {subType payload}
                     bs {payload}
                     items {type subType payload}
                   }
                 }
               }
             }`)),c=i.data.document.sequence.blocks[0];for(var D of c.bg)r.sequences[0].block={type:"graft",subType:Wt(D.subType),blockN:o},r.sequences[0].block.target=D.payload,r.sequences[0].block.isNew=!1,this.renderEvent("blockGraft",e),o++;var l=c.bs.payload.split("/"),f=void 0;l[1]&&["tr","zrow"].includes(l[1])?f=l[1]==="tr"?"usfm:tr":"pk":l[1]?f="usfm:".concat(l[1]):f=l[0],r.sequences[0].block={type:["usfm:tr","pk"].includes(f)?"row":"paragraph",subType:f,blockN:o,wrappers:[]},f==="row"?this.renderEvent("startRow",e):this.renderEvent("startParagraph",e),this._tokens=[],this.renderContent(c.items,e),this._tokens=[],f==="row"?this.renderEvent("endRow",e):this.renderEvent("endParagraph",e),delete r.sequences[0].block,o++}this.renderEvent("endSequence",e),r.sequences.shift()}renderContent(e,t){for(var r of e)this.renderItem(r,t);this.maybeRenderText(t)}renderItem(e,t){if(e.type==="scope"&&e.payload.startsWith("attribute")){var r=e.payload.split("/");e.subType==="start"?(this._container||(this._container={direction:"start",subType:"usfm:w",type:"wrapper",atts:{}}),r[3]in this._container.atts?this._container.atts[r[3]].push(r[5]):this._container.atts[r[3]]=[r[5]]):this._container||(this._container={direction:"end",subType:"usfm:".concat(Wt(r[2]))},r[1]==="milestone"?this._container.type="end_milestone":(this._container.type="wrapper",this._container.atts={}))}else if(this._container&&(this.maybeRenderText(t),this.renderContainer(t)),e.type==="token")this._tokens.push(e.payload.replace(/\s+/g," "));else if(e.type==="graft"){this.maybeRenderText(t);var n={type:"graft",subType:Wt(e.subType),target:e.payload,isNew:!1};t.context.sequences[0].element=n,this.renderEvent("inlineGraft",t),delete t.context.sequences[0].element}else{this.maybeRenderText(t);var a=e.payload.split("/");if(["chapter","verses","pubChapter","pubVerse","altChapter","altVerse"].includes(a[0])){if(e.subType==="start"){var o={type:"mark",subType:Wt(a[0]),atts:{number:a[1]}};t.context.sequences[0].element=o,this.renderEvent("mark",t),delete t.context.sequences[0].element}}else if(a[0]==="span"){var s={type:"wrapper",subType:"usfm:".concat(a[1]),atts:{}};t.context.sequences[0].element=s,e.subType==="start"?(t.context.sequences[0].block.wrappers.unshift(s.subType),this.renderEvent("startWrapper",t)):(this.renderEvent("endWrapper",t),t.context.sequences[0].block.wrappers.shift()),delete t.context.sequences[0].element}else if(a[0]==="spanWithAtts")e.subType==="start"&&(this._container={direction:"start",type:"wrapper",subType:"usfm:".concat(a[1]),atts:{}});else if(a[0]==="cell"){var i={direction:"start",type:"wrapper",subType:a[0],atts:{role:a[1],alignment:a[2],nCols:parseInt(a[3])}};t.context.sequences[0].element=i,e.subType==="start"?(t.context.sequences[0].block.wrappers.unshift(i.subType),this.renderEvent("startWrapper",t)):(this.renderEvent("endWrapper",t),t.context.sequences[0].block.wrappers.shift()),delete t.context.sequences[0].element}else if(a[0]==="milestone"&&e.subType==="start")if(a[1]==="ts"){var c={type:"mark",subType:"usfm:".concat(Wt(a[1])),atts:{}};t.context.sequences[0].element=c,this.renderEvent("mark",t),delete t.context.sequences[0].element}else this._container={type:"start_milestone",subType:"usfm:".concat(Wt(a[1])),atts:{}}}}maybeRenderText(e){if(this._tokens.length!==0){var t={type:"text",text:this._tokens.join("")};e.context.sequences[0].element=t,this._tokens=[],this.renderEvent("text",e),delete e.context.sequences[0].element}}renderContainer(e){if(this._container.type==="wrapper"){var t=this._container.direction;delete this._container.direction,t==="start"?(e.context.sequences[0].element=this._container,e.context.sequences[0].block.wrappers.unshift(this._container.subType),this.renderEvent("startWrapper",e),delete e.context.sequences[0].element):(e.context.sequences[0].element=this._container,this.renderEvent("endWrapper",e),e.context.sequences[0].block.wrappers.shift(),delete e.context.sequences[0].element)}else this._container.type==="start_milestone"?(e.context.sequences[0].element=this._container,this.renderEvent("startMilestone",e),delete e.context.sequences[0].element):this._container.type==="end_milestone"&&(e.context.sequences[0].element=this._container,this.renderEvent("endMilestone",e),delete e.context.sequences[0].element);this._container=null}};var oT=aT,sT=hn;let iT=class extends sT{constructor(e){if(super(e),!e.srcJson)throw new Error("Must provide srcJson");this.srcJson=e.srcJson,this.cachedSequences=[]}renderDocument1(e){var{docId:t,config:r,context:n,workspace:a,output:o}=e,s={config:r,context:n,workspace:a,output:o};n.renderer=this,n.document={id:t,schema:this.srcJson.schema,metadata:this.srcJson.metadata},n.sequences=[],this.renderEvent("startDocument",s),this.renderSequence(s,this.srcJson.sequence),this.renderEvent("endDocument",s)}sequenceContext(e){return{type:e.type,nBlocks:e.blocks.length,milestones:new Set([])}}renderSequence(e,t){var r;if(t)r=t;else{if(this.cachedSequences.length===0)throw new Error("No sequence provided and no sequences cached");r=this.cachedSequences[0]}var n=e.context;n.sequences.unshift(r),this.renderEvent("startSequence",e);for(var[a,o]of r.blocks.entries())n.sequences[0].block={type:o.type,subType:o.subtype,blockN:a,wrappers:[]},o.type==="graft"?(n.sequences[0].block.sequence=this.sequenceContext(o.sequence),this.cachedSequences.unshift(o.sequence),this.renderEvent("blockGraft",e),this.cachedSequences.shift()):o.type==="row"?(e.workspace.inTable||(this.renderEvent("startTable",e),e.workspace.inTable=!0),this.renderEvent("startRow",e),this.renderContent(o.content,e),e.workspace.skipEndRow?e.workspace.skipEndRow=!1:this.renderEvent("endRow",e)):(e.workspace.inTable&&n.sequences[0].type.includes("main")&&(this.renderEvent("endTable",e),e.workspace.inTable=!1),this.renderEvent("startParagraph",e),this.renderContent(o.content,e),this.renderEvent("endParagraph",e)),delete n.sequences[0].block;e.workspace.inTable&&n.sequences[0].type.includes("main")&&(this.renderEvent("endTable",e),e.workspace.inTable=!1,e.workspace.tableHasContent=!1,e.workspace.skipEndRow=!1,e.workspace.changingChapter=!1),this.renderEvent("endSequence",e),this.cachedSequence=null,n.sequences.shift()}renderContent(e,t){for(var r of e)this.renderElement(r,t)}renderElement(e,t){var r=o=>{e.meta_content&&(o.metaContent=e.meta_content,this.renderEvent("metaContent",t))},n=t.context,a={type:e.type||"text"};if(e.subtype&&(a.subType=e.subtype),e.atts?a.atts=e.atts:a.type!=="end_milestone"&&a.type!=="meta_content"&&(a.atts={}),e.sequence&&(a.sequence=this.sequenceContext(e.sequence)),a.type==="text"&&(a.text=e),n.sequences[0].element=a,a.type==="text")t.workspace.inTable&&(t.workspace.tableHasContent=!0),this.renderEvent("text",t),r(a);else if(a.type==="mark")this.renderEvent("mark",t),r(a);else if(a.type==="start_milestone")this.renderEvent("startMilestone",t),r(a);else if(a.type==="end_milestone")this.renderEvent("endMilestone",t),r(a);else if(a.type==="graft")this.cachedSequences.unshift(e.sequence),this.renderEvent("inlineGraft",t),this.cachedSequences.shift(),r(a);else if(a.type==="wrapper")a.subType==="chapter"&&(t.workspace.chapterCurent?t.workspace.chapterCurent!=a.atts.number&&(t.workspace.changingChapter=!0):t.workspace.chapterCurent=a.atts.number),t.workspace.changingChapter&&t.workspace.inTable&&t.workspace.tableHasContent&&a.subType==="chapter"&&(this.renderEvent("endRow",t),this.renderEvent("endTable",t),t.workspace.inTable=!1,t.workspace.tableHasContent=!1,t.workspace.skipEndRow=!0,t.workspace.changingChapter=!1),n.sequences[0].block.wrappers.unshift(a.subType),this.renderEvent("startWrapper",t),this.renderContent(e.content,t),n.sequences[0].element=a,r(a),this.renderEvent("endWrapper",t),n.sequences[0].block.wrappers.shift();else throw new Error("Unexpected element type '".concat(a.type));delete n.sequences[0].element}};var cT=iT;function LF(u,e){var t=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(u,n).enumerable})),t.push.apply(t,r)}return t}function GF(u){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LF(Object(t),!0).forEach(function(r){DT(u,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(t)):LF(Object(t)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(t,r))})}return u}function DT(u,e,t){return e=lT(e),e in u?Object.defineProperty(u,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):u[e]=t,u}function lT(u){var e=dT(u,"string");return typeof e=="symbol"?e:e+""}function dT(u,e){if(typeof u!="object"||!u)return u;var t=u[Symbol.toPrimitive];if(t!==void 0){var r=t.call(u,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(u)}var fT=hn,lt=u=>{var e=[];for(var t of u.split(""))t.toUpperCase()===t&&t.toLowerCase()!==t?e.push("_".concat(t.toLowerCase())):e.push(t);return e.join("")};let pT=class extends fT{constructor(e){if(super(e),!e.proskomma)throw new Error("No Proskomma");this.pk=e.proskomma,this._tokens=[],this._container=null,this.cachedSequenceIds=[],this.sequences=null,this.currentCV={chapter:null,verses:null}}renderDocument1(e){var{docId:t,config:r,context:n,workspace:a,output:o}=e,s={config:r,context:n,workspace:a,output:o};n.renderer=this;var i=this.pk.gqlQuerySync(`{
          document(id: "`.concat(t,`") {
            docSetId
            mainSequence { id }
            nSequences
            sequences {
              id
              type
              nBlocks
            }
            headers {
              key
              value
            }
          } 
        }`)),c=i.data.document.docSetId,D=i.data.document.mainSequence.id,l=i.data.document.nSequences;this.sequences={};for(var f of i.data.document.sequences)this.sequences[f.id]=f;var C={};for(var F of i.data.document.headers)C[F.key]=F.value;var A=this.pk.gqlQuerySync('{docSet(id: "'.concat(c,'") {selectors {key value}}}')),m={};for(var p of A.data.docSet.selectors)m[p.key]=p.value;n.document={id:t,schema:{structure:"nested",structure_version:"0.2.1",constraints:[{name:"sofria",version:"0.2.1"}]},metadata:{translation:{id:c,selectors:m,properties:{},tags:[]},document:GF(GF({},C),{},{properties:{},tags:[]})},mainSequenceId:D,nSequences:l},n.sequences=[{}],this.renderEvent("startDocument",s),this.cachedSequenceIds.unshift(D),s.config.nbBlock&&(s.workspace.nbBlock=s.config.nbBlock),r.chapters&&(a.chapters?a.chapters.length===0&&(a.chapters=[...r.chapters]):a.chapters=[...r.chapters]),a.chapters&&(n.document.metadata.document.properties.chapters=a.chapters[0]),this.renderSequence(s),this.cachedSequenceIds.shift(),this.renderEvent("endDocument",s)}sequenceContext(e,t){return{id:t,type:lt(e.type),nBlocks:e.nBlocks,milestones:new Set([])}}renderSequence(e){var t,r,n=e.context,a=this.cachedSequenceIds[0],o=this.pk.gqlQuerySync('{document(id: "'.concat(n.document.id,'") {sequence(id:"').concat(a,'") {type} } }')).data.document.sequence.type,s={},i=null,c=null,D=[];o==="main"&&e.workspace.blockId&&(D=e.workspace.blockId);var l=0;if(o==="main"){var f;if(e.workspace.chapters&&!((f=e.config)!==null&&f!==void 0&&f.byVerseExperimental))for(;e.workspace.chapters.length>0;){if(i=e.workspace.chapters.shift(),i&&(c=this.pk.gqlQuerySync('{document(id: "'.concat(n.document.id,'") {cIndex(chapter: ').concat(i,`) {
                          startBlock
                          endBlock
                        }}}`))),i&&c)if(typeof c.data.document.cIndex.startBlock=="number"&&typeof c.data.document.cIndex.endBlock=="number")for(var C=c.data.document.cIndex.startBlock;C<c.data.document.cIndex.endBlock+1;C++)D.push(C);else throw new Error("Chapter '".concat(i,"' not found in document"));e.workspace.blockId=D}else for(var F=this.pk.gqlQuerySync('{document(id: "'.concat(n.document.id,'") {sequence(id:"').concat(a,'") {nBlocks} }}')).data.document.sequence.nBlocks,A=0;A<F;A++)D.push(A);D.sort((ie,ve)=>ve-ie),e.workspace.nbBlock||(e.workspace.nbBlock=D.length)}else for(var m=this.pk.gqlQuerySync('{document(id: "'.concat(n.document.id,'") {sequence(id:"').concat(a,'") {nBlocks} }}')).data.document.sequence.nBlocks,p=0;p<m;p++)D.push(p);o==="main"?l=e.workspace.nbBlock:l=D.length,s=this.pk.gqlQuerySync('{document(id: "'.concat(n.document.id,'") {id sequence(id:"').concat(a,'") {id type nBlocks  } } }'));var d=s.data.document.sequence;if(!d)throw new Error("Sequence '".concat(a,"' not found in renderSequenceId()"));n.sequences.unshift(this.sequenceContext(d,a)),this.renderEvent("startSequence",e);var h=0;if(((t=e.workspace)===null||t===void 0||(t=t.chapters)===null||t===void 0?void 0:t.length)>0&&(r=e.config)!==null&&r!==void 0&&r.byVerseExperimental)this.blockForCv(e,a,o);else{for(var S=0;S<l;S++)if(D.length!==0){var B={};o==="main"?B=D.pop():B=D.shift();var x=void 0;if(e.config.excludeScopeTypes)if(e.config.excludeScopeTypes.length>0){var U=e.config.excludeScopeTypes.map(ie=>'"'.concat(ie,'"'));x=this.pk.gqlQuerySync(`{
                   document(id: "`.concat(n.document.id,`") {
                     sequence(id:"`).concat(a,`") {
                       blocks(positions:`).concat(B,`) {
                         bg {subType payload}
                         bs {payload}
                         items (excludeScopeTypes : [`).concat(U,`] ) {type subType payload}
                       }        
                     }
                   }
                 }`))}else x=this.pk.gqlQuerySync(`{
                   document(id: "`.concat(n.document.id,`") {
                     sequence(id:"`).concat(a,`") {
                       blocks(positions:`).concat(B,`) {
                         bg {subType payload}
                         bs {payload}
                         items{type subType payload}
                       }
                     }
                   }
                 }`));else x=this.pk.gqlQuerySync(`{
                   document(id: "`.concat(n.document.id,`") {
                     sequence(id:"`).concat(a,`") {
                       blocks(positions:`).concat(B,`) {
                         bg {subType payload}
                         bs {payload}
                         items {type subType payload}
                       }
                     }
                   }
                 }`));var R=x.data.document.sequence.blocks[0];for(var T of R.bg)n.sequences[0].block={type:"graft",subType:lt(T.subType),blockN:h,sequence:this.sequences[T.payload]},this.cachedSequenceIds.unshift(T.payload),this.renderEvent("blockGraft",e),this.cachedSequenceIds.shift(),h++;var L=R.bs.payload.split("/"),J=void 0;if(L[1]&&["tr","zrow"].includes(L[1])?J=L[1]==="tr"?"usfm:tr":"pk":L[1]?J="usfm:".concat(L[1]):J=L[0],n.sequences[0].block={type:["usfm:tr","pk"].includes(J)?"row":"paragraph",subType:J,blockN:h,wrappers:[]},n.sequences[0].block.type==="row"?(e.workspace.inTable||(this.renderEvent("startTable",e),e.workspace.inTable=!0),this.renderEvent("startRow",e)):(e.workspace.inTable&&n.sequences[0].type.includes("main")&&(this.renderEvent("endTable",e),e.workspace.tableHasContent=!1,e.workspace.inTable=!1,e.workspace.skipEndRow=!1),this.renderEvent("startParagraph",e)),this._tokens=[],o==="main"&&this.currentCV.chapter){var K={type:"wrapper",subType:"chapter",atts:{number:this.currentCV.chapter}};e.context.sequences[0].element=K,e.context.sequences[0].block.wrappers.unshift(K.subType),this.renderEvent("startWrapper",e)}if(o==="main"&&this.currentCV.verses){var G={type:"wrapper",subType:"verses",atts:{number:this.currentCV.verses}};e.context.sequences[0].element=G,e.context.sequences[0].block.wrappers.unshift(G.subType),this.renderEvent("startWrapper",e)}if(this.renderContent(R.items,e),this._tokens=[],o==="main"&&this.currentCV.verses){var te={type:"wrapper",subType:"verses",atts:{number:this.currentCV.verses}};e.context.sequences[0].element=te,e.context.sequences[0].block.wrappers.shift(),this.renderEvent("endWrapper",e)}if(o==="main"&&this.currentCV.chapter){var Z={type:"wrapper",subType:"chapter",atts:{number:this.currentCV.chapter}};e.context.sequences[0].element=Z,e.context.sequences[0].block.wrappers.shift(),this.renderEvent("endWrapper",e)}n.sequences[0].block.type==="row"&&!e.workspace.skipEndRow?this.renderEvent("endRow",e):e.workspace.skipEndRow&&n.sequences[0].block.type==="row"?e.workspace.skipEndRow=!1:this.renderEvent("endParagraph",e),delete n.sequences[0].block,h++}e.workspace.inTable&&n.sequences[0].type.includes("main")&&(this.renderEvent("endTable",e),e.workspace.tableHasContent=!1,e.workspace.inTable=!1,e.workspace.skipEndRow=!1),this.renderEvent("endSequence",e),o==="main"&&(e.workspace.blockId=D),n.sequences.shift()}}renderContent(e,t){for(var r=0;r<e.length;r++)this.renderItem(e[r],t);this.maybeRenderText(t)}renderItem(e,t){if(e.type==="scope"&&e.payload.startsWith("attribute")){var r=e.payload.split("/");e.subType==="start"?(this._container||(this._container={direction:"start",subType:"usfm:w",type:"wrapper",atts:{}}),r[3]in this._container.atts?this._container.atts[r[3]].push(r[5]):this._container.atts[r[3]]=[r[5]]):this._container||(this._container={direction:"end",subType:"usfm:".concat(lt(r[2]))},r[1]!=="milestone"&&(this._container.type="wrapper",this._container.atts={}))}else{if(this._container&&(this.maybeRenderText(t),this.renderContainer(t),e.payload.includes("spanWith"))){this.maybeRenderText(t);return}if(e.type==="token")this._tokens.push(e.payload.replace(/[\r\n\t ]+/g," "));else if(e.type==="graft"){this.maybeRenderText(t);var n={type:"graft",subType:lt(e.subType),sequence:this.sequences[e.payload]};t.context.sequences[0].element=n,this.cachedSequenceIds.unshift(e.payload),this.renderEvent("inlineGraft",t),this.cachedSequenceIds.shift(),delete t.context.sequences[0].element}else{this.maybeRenderText(t);var a=e.payload.split("/");if(["chapter","verses"].includes(a[0])){var o={type:"wrapper",subType:lt(a[0]),atts:{number:a[1]}};if(t.context.sequences[0].element=o,e.subType==="start"){t.workspace.tableHasContent&&t.workspace.inTable&&(this.renderEvent("endRow",t),this.renderEvent("endTable",t),t.workspace.tableHasContent=!1,t.workspace.inTable=!1,t.workspace.skipEndRow=!0),this.currentCV[a[0]]=a[1],t.context.sequences[0].block.wrappers.unshift(o.subType),this.renderEvent("start".concat(a[0]==="chapter"?"Chapter":"Verses"),t),this.renderEvent("startWrapper",t);var s={type:"mark",subType:"".concat(a[0],"_label"),atts:{number:a[1]}};t.context.sequences[0].element=s,this.renderEvent("mark",t),t.context.sequences[0].element=o}else this.renderEvent("endWrapper",t),this.renderEvent("end".concat(a[0]==="chapter"?"Chapter":"Verses"),t),t.context.sequences[0].block.wrappers.shift(),delete t.context.sequences[0].element,this.currentCV[a[0]]=null}else if(["pubChapter","pubVerse","altChapter","altVerse"].includes(a[0])){if(e.subType==="start"){var i={type:"mark",subType:lt(a[0]),atts:{number:a[1]}};t.context.sequences[0].element=i,this.renderEvent("mark",t),delete t.context.sequences[0].element}}else if(a[0]==="span"){var c={type:"wrapper",subType:"usfm:".concat(a[1]),atts:{}};t.context.sequences[0].element=c,e.subType==="start"?(t.context.sequences[0].block.wrappers.unshift(c.subType),this.renderEvent("startWrapper",t)):(this.renderEvent("endWrapper",t),t.context.sequences[0].block.wrappers.shift()),delete t.context.sequences[0].element}else if(a[0]==="spanWithAtts")if(e.subType==="start")this._container={direction:"start",type:"wrapper",subType:"usfm:".concat(a[1]),atts:{}};else{var D={type:"wrapper",subType:"usfm:".concat(a[1]),atts:{}};e.payload.includes("spanWith"),t.context.sequences[0].element=D,this.renderEvent("endWrapper",t),t.context.sequences[0].block.wrappers.shift()}else if(a[0]==="cell"){var l={direction:"start",type:"wrapper",subType:a[0],atts:{role:a[1],alignment:a[2],nCols:parseInt(a[3])}};t.context.sequences[0].element=l,e.subType==="start"?(t.context.sequences[0].block.wrappers.unshift(l.subType),this.renderEvent("startWrapper",t)):(this.renderEvent("endWrapper",t),t.context.sequences[0].block.wrappers.shift()),delete t.context.sequences[0].element}else if(a[0]==="milestone"&&e.subType==="start")if(a[1]==="ts"){var f={type:"mark",subType:"usfm:".concat(lt(a[1])),atts:{}};t.context.sequences[0].element=f,this.renderEvent("mark",t),delete t.context.sequences[0].element}else this._container={type:"start_milestone",subType:"usfm:".concat(lt(a[1])),atts:{}};else a[0]==="milestone"&&(this._container={type:"end_milestone",subType:"usfm:".concat(lt(a[1])),atts:{}})}}}maybeRenderText(e,t){if(this._tokens.length!==0){var r={type:"text",text:this._tokens.join("")};e.context.sequences[0].element=r,this._tokens=[],this.renderEvent("text",e),e.workspace.inTable&&(e.workspace.tableHasContent=!0),delete e.context.sequences[0].element}}blockForCv(e,t,r){for(var n=[];e.workspace.chapters.length>0;){var a=e.workspace.chapters.shift();n.push(this.pk.gqlQuerySync(`{
                 document(id: "`.concat(e.context.document.id,`") {
                      cvIndex(chapter: `).concat(a,`) {
                        verses {
                          verse {
                            items(includeContext: true) {
                              payload
                              type
                              subType
                            }
                          }
                        }
                      
                   }
                 }
               }`)).data.document.cvIndex.verses.map(d=>d.verse))}n=n.flat().filter(d=>d.length>0).map(d=>d[0]);for(var o=0;o<n.length;o++){var s,i,c;if(((s=e.config)===null||s===void 0||(s=s.excludeScopeTypes)===null||s===void 0?void 0:s.length)>0)var D={items:n[o].items.filter(d=>d.subType!="heading"&&d.subType!="title"&&!e.config.excludeScopeTypes.some(h=>d.payload.includes(h)))};else var D={items:n[o].items.filter(h=>h.subType!="heading"&&h.subType!="title")};if(D.bs={payload:"blockTag/m"},((i=D)===null||i===void 0||(i=i.bg)===null||i===void 0?void 0:i.length)>0)for(var l of D.bg)e.context.sequences[0].block={type:"graft",subType:lt(l.subType),sequence:e.context.sequences[t]},this.cachedSequenceIds.unshift(l.payload),this.renderEvent("blockGraft",e),this.cachedSequenceIds.shift();var f=(c=D)===null||c===void 0||(c=c.bs)===null||c===void 0?void 0:c.payload.split("/"),C=void 0;if(f&&(f[1]&&["tr","zrow"].includes(f[1])?C=f[1]==="tr"?"usfm:tr":"pk":f[1]?C="usfm:".concat(f[1]):C=f[0]),e.context.sequences[0].block={type:["usfm:tr","pk"].includes(C)?"row":"paragraph",subType:C,wrappers:[]},e.context.sequences[0].block.type==="row"?(e.workspace.inTable||(this.renderEvent("startTable",e),e.workspace.inTable=!0),this.renderEvent("startRow",e)):(e.workspace.inTable&&e.context.sequences[0].type.includes("main")&&(this.renderEvent("endTable",e),e.workspace.tableHasContent=!1,e.workspace.inTable=!1,e.workspace.skipEndRow=!1),this.renderEvent("startParagraph",e)),this._tokens=[],r==="main"&&this.currentCV.chapter){var F={type:"wrapper",subType:"chapter",atts:{number:this.currentCV.chapter}};e.context.sequences[0].element=F,e.context.sequences[0].block.wrappers.unshift(F.subType),this.renderEvent("startWrapper",e)}if(r==="main"&&this.currentCV.verses){var A={type:"wrapper",subType:"verses",atts:{number:this.currentCV.verses}};e.context.sequences[0].element=A,e.context.sequences[0].block.wrappers.unshift(A.subType),this.renderEvent("startWrapper",e)}if(this.renderContent(D.items,e),this._tokens=[],r==="main"&&this.currentCV.verses){var m={type:"wrapper",subType:"verses",atts:{number:this.currentCV.verses}};e.context.sequences[0].element=m,e.context.sequences[0].block.wrappers.shift(),this.renderEvent("endWrapper",e)}if(r==="main"&&this.currentCV.chapter){var p={type:"wrapper",subType:"chapter",atts:{number:this.currentCV.chapter}};e.context.sequences[0].element=p,e.context.sequences[0].block.wrappers.shift(),this.renderEvent("endWrapper",e)}e.context.sequences[0].block.type==="row"&&!e.workspace.skipEndRow?this.renderEvent("endRow",e):e.workspace.skipEndRow&&e.context.sequences[0].block.type==="row"?e.workspace.skipEndRow=!1:this.renderEvent("endParagraph",e),delete e.context.sequences[0].block}e.workspace.inTable&&e.context.sequences[0].type.includes("main")&&(this.renderEvent("endTable",e),e.workspace.tableHasContent=!1,e.workspace.inTable=!1,e.workspace.skipEndRow=!1),this.renderEvent("endSequence",e),e.context.sequences.shift()}renderContainer(e){if(this._container.type==="wrapper"){var t=this._container.direction;delete this._container.direction,t==="start"?(e.context.sequences[0].element=this._container,e.context.sequences[0].block.wrappers.unshift(this._container.subType),this.renderEvent("startWrapper",e),delete e.context.sequences[0].element):(e.context.sequences[0].element=this._container,this.renderEvent("endWrapper",e),e.context.sequences[0].block.wrappers.shift(),delete e.context.sequences[0].element)}else this._container.type==="start_milestone"?(e.context.sequences[0].element=this._container,this.renderEvent("startMilestone",e),delete e.context.sequences[0].element):this._container.type==="end_milestone"&&(e.context.sequences[0].element=this._container,this.renderEvent("endMilestone",e),delete e.context.sequences[0].element,this._container=null);this._container=null}};var FT=pT,mT=b4,hT=k4,ET=iE,CT=eT,AT=hn,vT=Ku,yT=oT,gT=cT,bT=FT,BT=Xt,_T=PE,ST=TE,$T={Validator:mT,usfmHelps:hT,usfmJsHelps:ET,ProskommaRender:AT,PerfRenderFromJson:vT,SofriaRenderFromJson:gT,SofriaRenderFromProskomma:bT,PerfRenderFromProskomma:yT,mergeActions:BT,PipelineHandler:CT,pipelines:_T,render:ST};function wT(u,e,t){let r=u.target;for(;!HF(r)&&!TT(r)&&!PT(r);)r=r.parentNode;if(HF(r)){const n=OE(r.id);r.classList.contains("selected")?e.removeVerse(n):e.length()<t&&e.addVerse(n)}}function kT(u){const e=Array.from(document.getElementsByClassName("selected"));let t="";for(let r=0;r<e.length;r++){const n=OE(e[r].id);n!==t&&(t=n,u.getVerseByVerseNumber(n).verse===""&&JF(n,"selected",!1))}for(let r=0;r<u.length();r++){const n=u.getVerseByIndex(r).verse;JF(n,"selected",!0)}}function qT(u){const e=document.getElementsByTagName("div");for(let t=0;t<e.length;t++)e[t].id!=""&&e[t].classList.remove("selected");u.reset()}function OE(u){u.indexOf("+")>0&&(u=u.substring(0,u.indexOf("+")));const e=u.match(/[0-9]+(-[0-9]+)?/)[0];return e&&(u=u.substring(0,u.indexOf(e)+e.length)),u}function HF(u){return u.classList.contains("seltxt")}function TT(u){return u.tagName==="A"}function PT(u){return u.tagName==="MAIN"}function JF(u,e,t){let r=KF(u,e,t);for(let n=97;n<=122;n++){const a=String.fromCharCode(n);if(r=KF(u+a,e,t),!r)break}}function KF(u,e,t){let r=!1,n=0,a=document.getElementById(u);for(;a;)t?a.classList.contains(e)||a.classList.add(e):a.classList.remove(e),n++,a=document.getElementById(u+"+"+n),r=!0;return r}const OT='"',IT="",jT=")]",xT=(u,e)=>{const t=[],r=u.length;let n=0,a="";for(;n<r;){const o=u.charAt(n);a+=o;let s=YF(o,e);if(s&&(s=!MT(u,n)),s&&(s=!UT(u,n)),s&&(s=!VT(a,n)),s){if(o===" ")a=a.slice(0,-1),n--;else if(o==="")for(;n<r-1&&IE(u.charAt(n+1));)a+=u.charAt(n+1),n++;if(n<r-1){let i=n<r-1?u.charAt(n+1):0,c=n<r-2?u.charAt(n+2):0;for(;(zT(i)||ZF(i)||i!==" "&&YF(i,e)||i===" "&&(ZF(c)||WT(c)))&&(i===" "?(a+=i,a+=c,n+=2):(a+=i,n++),n<r-1);)i=n<r-1?u.charAt(n+1):0,c=n<r-2?u.charAt(n+2):0}for(r-n<4&&(a+=u.substring(n+1),n=r-1);n<r-1&&u.charAt(n+1)===" ";)a+=" ",n++;t.push(a),a=""}n++}return a.trim()!==""&&t.push(a),t};function RT(u){let e=u;return e=e.replaceAll(" ",""),e=e.replace("\\s"," "),e=NT(e),e}function NT(u){let e=u;const t=new RegExp("\\\\u([0-9a-fA-F]+)","g");let r=t.exec(e),n=[];for(;r;)n.push(r[0]),r=t.exec(e);for(let a=0;a<n.length;a++){const o=n[a].substring(2),s=parseInt(o,16),i=String.fromCharCode(s);e=e.replaceAll(n[a],i)}if(e.includes("U+")){const a=new RegExp("U\\+([0-9a-fA-F]+)","g");for(n=[],r=a.exec(e);r;)n.push(r[0]),r=a.exec(e);for(let o=0;o<n.length;o++){const s=n[o].substring(2),i=parseInt(s,16),c=String.fromCharCode(i);e=e.replaceAll(n[o],c)}}return e}const dc=u=>/^\d$/.test(u),IE=u=>new RegExp("^\\p{L}","u").test(u),MT=(u,e)=>{let t=!1;const r=".,:-;";if(e>0&&e<u.length-4){const n=u.charAt(e);if(r.indexOf(n)>=0){const a=u.charAt(e-1);if(dc(a)){const o=u.charAt(e+1),s=u.charAt(e+2);(dc(o)||o==" "&&dc(s))&&(t=!0)}}}return t},UT=(u,e)=>{let t=!1;const r=u.charAt(e);if(e<u.length-2&&(r==="!"||r==="?")){const n=u.charAt(e+1);IE(n)&&(t=!0)}return t},VT=(u,e)=>{let t=!1;if(u.charAt(e)===";"){const n=u.lastIndexOf("&");if(n>=0&&u.length-n<8){const a=u.slice(n);(a==="&nbsp;"||a==="&lt;"||a==="&gt;")&&(t=!0)}}return t},zT=u=>OT.indexOf(u)>=0,ZF=u=>IT.indexOf(u)>=0,WT=u=>jT.indexOf(u)>=0,YF=(u,e)=>u.match(e)!=null;function L0(u){let e="none";return u&&u.length>0&&(u.includes("youtube")||u.includes("youtu.be")?e="youtube":u.includes("vimeo")?e="vimeo":u.includes("api.arclight.org")?e="jesus":u.includes("dbt.io")?e="gospel":u.includes("dai.ly")?e="daily":u.toLowerCase().endsWith(".mp4")?e="mp4":u.toLowerCase().endsWith(".m3u8")&&(e="hls")),e}function LT(u){let e="",t=/https:\/\/(?:www\.)?youtube\.(?:\w+)\/watch\?v=([a-zA-Z0-9-_]+)(?:&.+)*/,r=u.match(t);return r?e=r[1]:(t=/https:\/\/(?:www\.)?youtu\.be\/([a-zA-Z0-9-_]+)(?:&.+)*/,r=u.match(t),r&&(e=r[1])),e}function GT(u,e,t){let r=u;switch(L0(u)){case"youtube":const a=LT(u);a&&(r="https://www.youtube.com/embed/"+a,t&&t["video-youtube-related-same-channel"]&&(r+="?",r+="rel=0"));break;case"vimeo":let o=/https:\/\/(?:www\.)?vimeo\.(\w+)\/([0-9]+)/,s=r.match(o);s&&(r=`https://player.vimeo.com/video/${s[2]}`);break;case"daily":o=/https?:\/\/dai\\.ly\/(.*)/,s=r.match(o),s&&(r=`https://www.dailymotion.com/embed/video/${s[1]}`);break;case"jesus":r.includes("playerStyle")||(r=r+"&playerStyle=default&player=bc.vanilla5");break}return r}function HT(u,e,t){const r=GT(e,!1,t),n=u.createElement("div");n.classList.add("video-block");const a=u.createElement("div");a.classList.add("video-container"),n.appendChild(a),a.classList.add("video-16-9");const o=u.createElement("iframe");return o.setAttribute("width","420"),o.setAttribute("src",r),o.setAttribute("frameborder","0"),o.setAttribute("webkitallowfullscreen",""),o.setAttribute("mozallowfullscreen",""),o.setAttribute("allowfullscreen",""),a.appendChild(o),n}function QF(u,e,t){const r=L0(e.onlineUrl),n=u.createElement("div");n.classList.add("video-block");const a=u.createElement("div"),o="VIDEO"+t;a.setAttribute("id",o),a.classList.add("video-container");let s=e.onlineUrl;switch(r){case"youtube":Se.mainFeatures["video-youtube-related-same-channel"]||(s+=(s.includes("?")?"&":"?")+"rel=0"),a.classList.add("video-YouTube","video-16-9");break;case"mp4":case"vimeo":case"hls":case"gospel":case"daily":case"other":a.classList.add("video-"+r,"video-16-9");break;case"jesus":a.classList.add("video-"+r);break;case"none":a.classList.add("video-16-9");break}a.style.setProperty("background-image",`url('${tt}/images/${e.thumbnail}')`);const i=u.createElement("a");i.setAttribute("href","#");let c="";e.src&&(c=Se.audio.sources[e.src].type),c==="assets"?i.setAttribute("onclick","playVideoFile('"+o+"', 'videos/"+e.filename+"'); return false;"):i.setAttribute("onclick","playOnlineVideo('"+o+"', '"+s+"'); return false;");const D=u.createElement("img");if(D.setAttribute("src",`${tt}/video_play_01.svg`),i.appendChild(D),a.appendChild(i),n.appendChild(a),Se.mainFeatures["video-show-titles"]&&e.title){const l=u.createElement("div");l.classList.add("video-title");const f=u.createElement("span");f.classList.add("video-title");const C=u.createTextNode(e.title);f.appendChild(C),l.appendChild(f),n.appendChild(l)}return n}function JT(u){let e=!1;for(let t=0;t<u.length;++t){const r=u[t],n=L0(r.onlineUrl);(n==="hls"||n==="gospel")&&(e=!0)}return e}function KT(u,e){const t=u.createElement("script");if(t.id="js_video",t.type="text/javascript",t.src=`${tt}/js/app-builder-video.js`,u.getElementById(t.id)||u.head.appendChild(t),JT(e)){const r=u.createElement("script");r.id="js_hls",r.type="text/javascript",r.src="https://cdn.jsdelivr.net/npm/hls.js@latest",u.getElementById(r.id)||u.head.appendChild(r)}}function ZT(u,e,t,r,n,a,o,s,i){switch(o){case"usfm:zaudioc":{const[c,D]=eP(n,r,a,s,i);hr(u,e,t,c,!1),hr(u,e,t,D,!0);break}case"usfm:zreflink":{const c=uP(n,r);hr(u,e,t,c,!0);break}case"usfm:zweblink":{const c=YT(n,r);hr(u,e,t,c,!0);break}case"usfm:ztellink":{const c=XT(n,r);hr(u,e,t,c,!0);break}case"usfm:zelink":{const c=QT(n,r);hr(u,e,t,c,!0);break}}}function hr(u,e,t,r,n){u.includes("footnote")?e.appendChild(r):t.appendChild(r),n&&u.pop()}function YT(u,e){const t=document.createElement("a");return t.href=u,t.setAttribute("target","_blank"),t.classList.add("web-link"),t.innerHTML=e,t}function QT(u,e){const t=document.createElement("a");return t.href=u,t.setAttribute("target","_blank"),t.classList.add("email-link"),t.innerHTML=e,t}function XT(u,e){const t=document.createElement("a");return t.href=u,t.setAttribute("target","_blank"),t.classList.add("tel-link"),t.innerHTML=e,t}function eP(u,e,t,r,n){const a=document.createElement("audio"),o="audio"+XE(t.toString(),3),s=eC(u);let i="",c="";if(r!=null&&r.files&&(r!=null&&r.sources)){const l=r.files.find(f=>f.name===s);if(l){const f=r.sources[l.src];if(f){if(c=f.type,f.type==="assets")i="clips/"+s;else if(f.type==="download"){const C=f.address;i=tP(C)+s}}}}else console.warn("Audio configuration is not properly initialized.");a.id=o,a.src=i,a.setAttribute("preload","auto");const D=document.createElement("a");return D.href="#",c==="assets"?D.setAttribute("onClick",`document.getElementById('${o}').play();`):c==="download"&&(D.classList.add("audioclip"),D.setAttribute("filelink",o),D.addEventListener("click",n,!1)),D.innerHTML=e,[a,D]}function uP(u,e){const t=document.createElement("a");return t.classList.add("web-link"),t.classList.add("ref-link"),t.setAttribute("ref",u),t.innerHTML=e,t}function tP(u){return u.endsWith("/")?u:u+"/"}function XF(u){let e;return{c(){e=fe("span"),this.h()},l(t){e=pe(t,"SPAN",{class:!0}),le(e).forEach(j),this.h()},h(){q(e,"class","spin")},m(t,r){be(t,e,r)},d(t){t&&j(e)}}}function rP(u){let e,t,r,n=u[4]&&XF();return{c(){e=fe("article"),n&&n.c(),t=Te(),r=fe("div"),this.h()},l(a){e=pe(a,"ARTICLE",{class:!0});var o=le(e);n&&n.l(o),t=Pe(o),r=pe(o,"DIV",{id:!0,class:!0}),le(r).forEach(j),o.forEach(j),this.h()},h(){q(r,"id","content"),q(r,"class","single"),Br(r,"hidden",u[4]),we(r,"font-family",u[1]),we(r,"font-size",u[7]),we(r,"line-height",u[6]),we(r,"direction",u[5]),q(e,"class","container")},m(a,o){be(a,e,o),n&&n.m(e,null),X(e,t),X(e,r),u[38](r),u[39](e)},p(a,o){a[4]?n||(n=XF(),n.c(),n.m(e,t)):n&&(n.d(1),n=null),o[0]&16&&Br(r,"hidden",a[4]),o[0]&2&&we(r,"font-family",a[1]),o[0]&128&&we(r,"font-size",a[7]),o[0]&64&&we(r,"line-height",a[6]),o[0]&32&&we(r,"direction",a[5])},i:iu,o:iu,d(a){a&&j(e),n&&n.d(),u[38](null),u[39](null)}}}const em="abcdefghijklmnopqrstuvwxyz";function nP(u){return u.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function aP(u){u.stopPropagation();const e=u.target.getAttribute("filelink"),t=document.querySelector(`audio[id="${e}" ]`);if(t){const r=t.getAttribute("src");new Audio(r).play()}}function oP(u){var r;const e=document.createElement("span");e.id="notes"+u.currentVerse;let t=(r=u.paragraphDiv)==null?void 0:r.querySelector(`div[data-verse="${u.currentVerse}"][data-phrase=${u.lastPhrase}]`);t===null&&(t=u.root.querySelector(`div[data-verse="${u.currentVerse}"][data-phrase=${u.lastPhrase}]`)),t==null||t.parentNode.insertBefore(e,t.nextSibling)}function sP(u){var r;const e=document.createElement("span");e.id="bookmarks"+u.currentVerse;let t=(r=u.paragraphDiv)==null?void 0:r.querySelector(`div[data-verse="${u.currentVerse}"][data-phrase=${u.lastPhrase}]`);t===null&&(t=u.root.querySelector(`div[data-verse="${u.currentVerse}"][data-phrase=${u.lastPhrase}]`)),t==null||t.parentNode.insertBefore(e,t.nextSibling)}function um(u){const e=document.createElement("div");e.classList.add("caption");const t=document.createElement("span");t.classList.add("caption");const r=document.createTextNode(u);return t.append(r),e.append(t),e}function iP(u){const e=document.createElement("div");e.classList.add("fullscreen-popup");const t=document.createElement("img");t.setAttribute("src",u);const r=document.createElement("button");r.classList.add("close-btn"),r.addEventListener("click",()=>{document.body.removeChild(e)}),e.appendChild(t),e.appendChild(r),document.body.appendChild(e)}function cP(u){let e;return"src"in u.atts?e=u.atts.src[0]:"unknownDefault_fig"in u.atts&&(e=u.atts.unknownDefault_fig[0]),e}async function DP(u,e){try{(await fetch(u,{method:"HEAD"})).ok||(e.style.display="none")}catch(t){console.error("Error checking image existence:",t)}}function Fu(u,e){!e.inRow&&e.inTable&&u!=="startRow"&&(e.inTable=!1,e.root.appendChild(e.tableElement))}function lP(u,e,t){let r,n,a,o,s,i,c,D,l,f,C,F,A,m,p,d,h,S,B,x,U,R,T=iu,L=()=>(T(),T=qC($,y=>t(35,R=y)),$),J,K;ke(u,Lu,y=>t(32,m=y)),ke(u,kc,y=>t(50,p=y)),ke(u,bn,y=>t(33,d=y)),ke(u,uC,y=>t(51,h=y)),ke(u,tC,y=>t(34,S=y)),ke(u,nn,y=>t(52,B=y)),ke(u,rC,y=>t(53,x=y)),ke(u,dt,y=>t(54,U=y)),ke(u,nC,y=>t(36,J=y)),ke(u,un,y=>t(37,K=y)),u.$$.on_destroy.push(()=>T());let{audioPhraseEndChars:G}=e,{bodyFontSize:te}=e,{bodyLineHeight:Z}=e,{bookmarks:ie}=e,{notes:ve}=e,{highlights:M}=e,{maxSelections:N}=e,{redLetters:w}=e,{references:_}=e,{glossary:O}=e,{selectedVerses:$}=e;L();let{themeColors:E}=e,{verseLayout:g}=e,{viewShowBibleImages:P}=e,{viewShowBibleVideos:ee}=e,{viewShowIllustrations:z}=e,{viewShowVerses:ae}=e,{viewShowGlossaryWords:oe}=e,{font:Be}=e,{proskomma:qe}=e,Ue,Ie=!1,He,Xe=!1;function nu(){if(He&&(He.disconnect(),He=null),Le()&&!d.completed){const y=document.getElementById("PLAN-next");y&&(Xe=!1,He=new IntersectionObserver(W=>{W.forEach(I=>{I.isIntersecting&&!Xe&&(pt(bn,d.completed=!0,d),Xe=!0,He.disconnect(),He=null,rA({id:d.planId,day:d.planDay,itemIndex:d.planEntry}),cu&&(oC({id:d.planId,state:"completed"}),nA(d.planId)))})},{threshold:.1}),He.observe(y))}}pm(()=>{Le&&nu()}),Fm(()=>{_&&nu()}),Fc(()=>{He&&(He.disconnect(),He=null)});const Eu=y=>{let W=RT(y),I="(";for(let re=0;re<W.length;re++)re>0&&(I+="|"),I+=nP(W[re]);return I+=")",new RegExp(I,"g")},Je=y=>y.trim().length===0;let Ke,cu;const ne=(y,W)=>{let I=0;for(let Q in y)y[Q]===W&&I++;return I},tu=y=>y.match(n)!=null,b=y=>y.textType[y.textType.length-1],k=(y,W="advance")=>{r!=null&&r.phrase&&console.log("Start phrase!!!"),y.phraseDiv!=null&&(y.phraseDiv.innerText.length===0?W==="advance"&&(W="keep"):$e(y));const I=document.createElement("div");if(y.introductionGraft)I.id="+"+parseInt(y.introductionIndex),I.classList.add("txs"),y.introductionIndex++;else{switch(W){case"reset":y.currentPhraseIndex=0;break;case"advance":y.currentPhraseIndex++;break}const Q=em.charAt(y.currentPhraseIndex);I.id=y.currentVerse+Q,I.setAttribute("data-verse",y.currentVerse),I.setAttribute("data-phrase",Q),I.classList.add("txs","seltxt","scroll-item")}return I.cloneNode(!0)},V=(y,W)=>{if(y.inRow)if(y.textType.includes("usfm")&&y.usfmWrapperType==="xt"){const I=W.split("; ");for(let Q=0;Q<I.length;Q++){const re=I[Q].split("|"),Ae=re[0],ge=re.length>1?re[1]:re[0],je=document.createElement("span");je.classList.add("reflink");const ou=document.createElement("a");ou.setAttribute("href",ge);const Yu=document.createTextNode(Ae);if(ou.appendChild(Yu),je.appendChild(ou),y.tableCellElement.appendChild(je),Q<I.length-1){const Rr=document.createTextNode("; ");y.tableCellElement.appendChild(Rr)}}}else{const I=ce(y.tableCellElement,W,y);y.tableCellElement=I.cloneNode(!0)}},Y=(y,W,I)=>{let Q="default",re=W,Ae="",ge=!1;switch(I){case"xref":Q=Er("crossref-caller-type",_.collection,_.book),Ae=Er("crossref-caller-symbol",_.collection,_.book),ge=Kr("crossref-caller-no-caller-to-auto",_.collection,_.book);break;default:Q=Er("footnote-caller-type",_.collection,_.book),Ae=Er("footnote-caller-symbol",_.collection,_.book),ge=Kr("footnote-caller-no-caller-to-auto",_.collection,_.book);break}return Q==="custom-symbol"?Ae:((Q==="abc"||ge&&re==="-")&&(re="+"),re==="-"&&(re=null),re==="+"&&(re=em.charAt(y.footnoteIndex%26),y.footnoteIndex++),re)},Fe=(y,W,I,Q)=>{if(y.textType.includes(I)){if($a(y.footnoteDiv))if(y.textType.includes("note_caller")){const re=Y(y,W,I);if(!re)y.foootnoteSpan=null;else{const Ae=y.footnoteSpan.querySelectorAll("sup.footnote");Ae&&Ae.length>0&&(Ae[0].innerHTML=re)}}else{const re=ce(y.footnoteDiv,W,y);y.footnoteDiv=re.cloneNode(!0)}}else console.warn("%s ignored: %s",Q,W)},de=y=>(y==='| default=""'&&(y="| "),y),ue=(y,W)=>{if(W=de(W),r!=null&&r.text&&console.log("Adding text:",W),!Je(W)){let I=[];!y.introductionGraft&&_.hasAudio?I=xT(W,n):I[0]=W;for(let Q=0;Q<I.length;Q++){y.lastPhraseTerminated&&(r!=null&&r.text&&console.log("Add text start phrase (terminated)"),y.phraseDiv=k(y)),y.phraseDiv===null&&(r!=null&&r.text&&console.log("Add text start phrase (null)"),y.phraseDiv=k(y,"keep"));let re=y.phraseDiv.cloneNode(!0);const Ae=I[Q];re=ce(re,Ae,y),Q<I.length-1?(y.phraseDiv=re.cloneNode(!0),r!=null&&r.text&&console.log("Add text start phrase"),y.phraseDiv=k(y)):y.phraseDiv=re.cloneNode(!0)}y.lastPhraseTerminated=I.length>0?tu(I[I.length-1]):!1}},H=(y,W,I,Q="")=>{const re=document.createElement("span");let Ae;switch(re.classList.add(W),W){case"xt":{re.innerHTML=I;break}case"glossary":{const ge=document.createElement("a");let je=I;iC(Q)&&(je=Q),ge.setAttribute("match",je.trim()),ge.setAttribute("href"," ");const ou=document.createTextNode(I);ge.classList.add("glossary"),ge.appendChild(ou),re.appendChild(ge);break}default:{Ae=document.createTextNode(I),re.appendChild(Ae);break}}return y.appendChild(re),y},ce=(y,W,I)=>{const Q=I.usfmWrapperType;if(Q)switch(Q){case"wj":{if(I.showWordsOfJesus)y=H(y,Q,W);else{const re=document.createTextNode(W);y.appendChild(re)}break}case"w":{const re=I.lemma;oe?y=H(y,"glossary",W,re):y=H(y,Q,W);break}default:{y=H(y,Q,W);break}}else{const re=document.createTextNode(W);y.appendChild(re)}return y},he=(y,W,I)=>{let Q=!1;return(y==W||I&&W)&&(Q=!0),Q};function $e(y){y.lastPhrase=y.phraseDiv.getAttribute("data-phrase"),f?y.verseDiv.appendChild(y.phraseDiv.cloneNode(!0)):y.paragraphDiv.appendChild(y.phraseDiv.cloneNode(!0))}function Ve(y,W,I){if(I===!0){const Q=document.createElement("span");Q.classList.add("v");const re=W.atts.number.split(A).map(ge=>Jr(l,ge));Q.innerText=re.join(A);const Ae=document.createElement("span");Ae.classList.add("vsp"),Ae.innerText="",y.phraseDiv.appendChild(Q),y.phraseDiv.appendChild(Ae)}}function fu(y,W,I){if(I.firstVerse===!0&&I.chapterNumText!==""){const Q=document.createElement("div");Er("chapter-number-format",_.collection,_.book)==="drop-cap"?(I.paragraphDiv.className="m",Q.classList.add("c-drop"),Q.style.float=F.toLowerCase()==="ltr"?"left":"right",Q.innerText=I.chapterNumText,I.paragraphDiv.appendChild(Q),Se.mainFeatures["hide-verse-number-1"]||Ve(I,y,W)):(Q.classList.add("c"),Q.innerText=I.chapterNumText,I.root.appendChild(Q),Ve(I,y,W))}else Ve(I,y,W);I.firstVerse=!1}function eu(y){if(!zC())return;const W=y.target.textContent,Q=document.querySelector('[data-verse="'+W+'"]').getAttribute("id");Oc(Q)}function Zu(y){if(U.length===0){y.stopPropagation();const W=y.target.parentNode.parentNode,Q=W.querySelector(`div#${W.getAttribute("data-graft")}`).cloneNode(!0);Q.querySelectorAll("span.xt").forEach(ge=>{ge.innerHTML=Ta(ge.innerHTML,"")});const Ae=Q.innerHTML;dt.push(Ae)}}function St(y){const W=y.target.getAttribute("ref"),I=dm(W,"."),Q=I[0],re=I[1],Ae=I[2],ge=I[3];let je=c;const ou=Se.bookCollections.find(Yu=>Yu.id===Q);if(ou)je=ou.languageCode+"_"+ou.id;else return;Lu.set({docSet:je,book:re,chapter:Ae,verse:ge})}async function Ct(y){y.stopPropagation();let W=JSON.parse(y.target.getAttribute("data-start-ref")),I=y.target.getAttribute("data-end-ref")==="undefined"?void 0:JSON.parse(y.target.getAttribute("data-end-ref"));if(Se.mainFeatures["scripture-refs-display"]==="viewer")er(W);else{const Q=await hm(W,I,E);dt.push(Q)}}function At(y){y.stopPropagation(),y.preventDefault();const W=y.target.getAttribute("match");O.then(I=>{$a(I.data.docSets[0].document)&&I.data.docSets[0].document.mainBlocks.forEach(Q=>{if(cC(Q.key,W)&&U.length===0){const re=document.createElement("div");re.classList.add("txs");const Ae=document.createElement("span");Ae.classList.add("k"),document.createTextNode(W),Ae.append(Q.key),re.append(Ae);const ge=Q.text.slice(W.length),je=document.createTextNode(ge);re.append(je);const ou=re.outerHTML;dt.push(ou)}})})}function er(y){Lu.set({docSet:y.docSet,book:y.book,chapter:y.chapter,verse:y.verse}),dt.reset()}const ur=()=>'<svg fill="#000000" style="display:inline" xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 96 96"><path d="M 21.07 74.80 L 8.76 87.35 Q 8.00 88.12 8.00 87.03 Q 8.00 52.12 8.00 18.00 Q 8.00 7.73 18.00 7.80 Q 48.00 8.00 78.00 8.00 Q 88.27 8.00 88.18 18.00 Q 88.00 40.13 88.09 62.25 Q 88.13 72.31 78.00 72.22 C 72.03 72.17 25.23 70.89 23.56 72.37 Q 22.78 73.07 21.07 74.80 Z M 72.00 21.60 A 0.60 0.60 0.0 0 0 71.40 21.00 L 24.60 21.00 A 0.60 0.60 0.0 0 0 24.00 21.60 L 24.00 28.40 A 0.60 0.60 0.0 0 0 24.60 29.00 L 71.40 29.00 A 0.60 0.60 0.0 0 0 72.00 28.40 L 72.00 21.60 Z M 72.00 35.60 A 0.60 0.60 0.0 0 0 71.40 35.00 L 24.60 35.00 A 0.60 0.60 0.0 0 0 24.00 35.60 L 24.00 42.40 A 0.60 0.60 0.0 0 0 24.60 43.00 L 71.40 43.00 A 0.60 0.60 0.0 0 0 72.00 42.40 L 72.00 35.60 Z M 60.00 49.60 A 0.60 0.60 0.0 0 0 59.40 49.00 L 24.60 49.00 A 0.60 0.60 0.0 0 0 24.00 49.60 L 24.00 56.40 A 0.60 0.60 0.0 0 0 24.60 57.00 L 59.40 57.00 A 0.60 0.60 0.0 0 0 60.00 56.40 L 60.00 49.60 Z"</path></svg>';function ya(y){Ar.open(fm,y)}function ga(y){y.then(W=>{for(var I=0;I<W.length;I++){const Q=W[I];let re=document.getElementById("bookmarks"+Q.verse),Ae=document.createElement("span");Ae.id="note"+I,Ae.innerHTML=ur(),Ae.onclick=ge=>ya(Q),re.appendChild(Ae)}})}const ba=()=>'<svg fill="#b10000" style="display:inline" xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path d="M5 21V5q0-.825.588-1.413Q6.175 3 7 3h10q.825 0 1.413.587Q19 4.175 19 5v16l-7-3Z"/></svg>';function Cn(y){y.then(W=>{for(var I=0;I<W.length;I++){let Q=document.getElementById("bookmarks"+W[I].verse),re=document.createElement("span");re.id="bookmark"+I,re.innerHTML=ba(),Q.appendChild(re)}})}function An(y){y.then(W=>{for(let I=0;I<W.length;I++){if(I<W.length-1&&W[I].verse===W[I+1].verse)continue;let Q=Ue==null?void 0:Ue.querySelectorAll(`div[data-verse="${W[I].verse}"]`);for(const re of Q){const Ae="hlp"+W[I].penColor;re.classList.add(Ae)}}})}function Ee(y,W){let I=null,Q=`X-${y.footnoteIdIndex+1}`;y.footnoteIdIndex++;let re=document.createElement("div");re.id=Q,re.style.display="none",re.setAttribute("type",W.subType),I=document.createElement("span"),I.setAttribute("data-graft",Q);const Ae=document.createElement("a"),ge=document.createElement("sup");return ge.classList.add("footnote"),Ae.appendChild(ge),Ae.classList.add("cursor-pointer"),I.appendChild(Ae),r!=null&&r.footnote&&console.log("Create Footnote %o %o",I,re),[I,re]}const Le=()=>{let y=!1;return d.planEntry!==-1&&d.planBookId===_.book&&d.planChapter.toString()===_.chapter&&(y=!0),y};function Du(y,W){if(Le()&&d.planToVerse.toString()===W){const I=document.createElement("div");if(I.id="plan-progress",I.classList.add("plan-progress-block"),cu)au(I,"plan-progress-title","",B.Plans_Progress_Congratulations,!1),au(I,"plan-progress-info","",B.Plans_Progress_Plan_Completed,!1),au(I,"plan-progress-info","",S.title[x]??S.title.default??"",!1),au(I,"plan-progress-button","PLAN-next",B.Plans_Button_View_Plans,!0);else{au(I,"plan-progress-info","",B.Plans_Progress_Item_Completed,!1),au(I,"plan-progress-reference","",Bu(d.planReference),!1);const Q=document.createElement("hr");d.planNextReference===""?au(I,"plan-progress-button","PLAN-next",B.Plans_Button_View_Plan,!0):(I.append(Q),au(I,"plan-progress-info","",B.Plans_Progress_Next_Reading,!1),au(I,"plan-progress-reference","",Bu(d.planNextReference),!1),au(I,"plan-progress-button","PLAN-next",B.Button_Next,!0))}y.root.appendChild(y.paragraphDiv),y.root.appendChild(I),y.paragraphDiv=document.createElement("div"),y.paragraphDiv.classList.add("p")}else Le()===!1&&d.completed===!0&&pt(bn,d={planId:"",planDay:0,planEntry:-1,planBookId:"",planChapter:0,planFromVerse:0,planToVerse:0,planReference:"",planNextReference:"",completed:!1},d)}function au(y,W,I,Q,re){const Ae=document.createElement("div");I!==""&&(Ae.id=I),re&&(Ae.onclick=je=>tr()),Ae.classList.add(W);const ge=document.createTextNode(Q);Ae.append(ge),y.append(Ae)}function Bu(y){let W=_.collection;const[I,Q,re,Ae,ge]=cD(y);return XC(W,Q,Ae,ge)}async function $t(){let y=_.collection;const[W,I,Q,re,Ae]=cD(d.planNextReference),[ge,je,ou]=Ae[0];let Yu=ge===-1?1:ge;if(S){const Rr=S.items[d.planDay-1],[_a,X0]=await aA(d.planId,Rr,d.planNextReferenceIndex),yn=d.planNextReferenceIndex,gn=d.planNextReference;pt(bn,d={planId:d.planId,planDay:d.planDay,planEntry:yn,planBookId:I,planChapter:re,planFromVerse:ge,planToVerse:je,planReference:gn,planNextReference:_a,planNextReferenceIndex:X0,completed:!1},d),Lu.set({docSet:y,book:I,chapter:re.toString(),verse:Yu.toString()})}}function tr(){d.planNextReference===""?h==="completed"?mc(`${tt}/plans`):mc(`${tt}/plans/${d.planId}`):$t()}function ku(y,W){const I=document.querySelectorAll('[id^="bookmarks"]');for(const Q of I){const re=Q.id.replace("bookmarks",""),Ae=W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ge=re.match(new RegExp(`^(\\d+)(?:${Ae}(\\d+))?$`));if(ge){const je=parseInt(ge[1],10),ou=ge[2]?parseInt(ge[2],10):je;if(y>=je&&y<=ou)return Q}}return null}function vn(y,W){const I=document.querySelectorAll('[data-verse][data-phrase="a"]');for(const Q of I){const re=Q.getAttribute("data-verse"),Ae=W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ge=re.match(new RegExp(`^(\\d+)(?:${Ae}(\\d+))?$`));if(ge){const je=parseInt(ge[1],10),ou=ge[2]?parseInt(ge[2],10):je;if(y>=je&&y<=ou)return Q}}return null}function H0(y,W,I,Q,re){var ge;if(r!=null&&r.placement&&console.log("Placing element:",I,"at",Q,"of verse",re),Q==="after"){const je=ku(re,A);je?(r!=null&&r.placement&&console.log(`Found bookmark element for verse ${re} at ${je.id}`),je.insertAdjacentElement("afterend",I)):console.log("Could not find bookmark element for verse",re)}else if(Q==="before"){var Ae=vn(re,A);Ae?((ge=Ae.previousElementSibling)!=null&&ge.classList.contains("c-drop")&&(Ae=Ae.previousElementSibling),Ae.insertAdjacentElement("beforebegin",I)):console.log("Could not find data element for verse",re)}else if(Q==="top")y.getElementsByClassName("m")[0].insertAdjacentElement("beforebegin",I);else if(Q==="bottom"){const je=W.querySelectorAll("span[id^=bookmarks]");je[je.length-1].insertAdjacentElement("afterend",I)}}function xE(y){y&&(y.forEach((W,I)=>{let Q=W.placement.ref.split(/[:.]/).at(-1);const re=QF(document,W,I);H0(document,Ue,re,W.placement.pos,Q)}),KT(document,y))}const J0=document.createElement("style");J0.innerHTML=`
    .fullscreen-popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }

    .fullscreen-popup img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border: 2px solid white;
    }
    .fullscreen-popup .close-btn {
        position: absolute;
        top: 10px;
        left: 40px;
        background: none;
        border: none;
        font-size: 35px;
        color: white;
        cursor: pointer;
        z-index: 1001;
    }

    .fullscreen-popup .close-btn::before {
        content: '\\2190'; /* Unicode for left arrow */
    }
    `,document.head.appendChild(J0);function RE(y){y&&y.forEach((W,I)=>{let Q=W.placement.ref.split(/[:.]/).at(-1);const re=K0(W.filename,W.placement.caption);H0(document,Ue,re,W.placement.pos,Q)})}function K0(y,W){const I=tt+"/illustrations/"+y,Q=document.createElement("div");Q.classList.add("image-block");const re=document.createElement("span");re.classList.add("image");const Ae=document.createElement("img");if(Ae.setAttribute("src",I),Ae.style.display="inline-block",Se.mainFeatures["zoom-illustrations"]&&Ae.addEventListener("click",()=>iP(I)),re.appendChild(Ae),Q.appendChild(re),W!==null&&W!==""){const ge=um(W);Q.appendChild(ge)}return Q}function NE(y,W,I){var ge;const Q=I.split("_")[1];let re=(ge=Se.bookCollections.find(je=>je.id===Q))==null?void 0:ge.footer;const Ae=Se.bookCollections.find(je=>je.id===Q).books.find(je=>je.id===i).footer;if(Ae&&(re=Ae),re&&W.getElementsByClassName("footer").length==0){const je=y.createElement("div");je.classList.add("footer");const ou=y.createElement("div");ou.classList.add("footer-line"),je.appendChild(ou);const Yu=y.createElement("span");Yu.classList.add("footer"),Yu.innerHTML=re,ou.appendChild(Yu),W.appendChild(je)}}function Ba(){return z&&ME()}function ME(){return!D||P==="normal"}function UE(){return!D||ee==="normal"}function VE(y,W){W.phraseDiv!=null&&W.phraseDiv.innerText!==""&&$e(W),W.phraseDiv=null;const I=K0(y,null),Q=tt+"/illustrations/"+y;W.figureDiv=I,Ba()&&DP(Q,I)}function Z0(y){switch(y.target.getAttribute("class")){case"v":eu(y);break;case"footnote":Zu(y);break;case"glossary":At(y);break;case"audioclip":aP(y);break;default:if(y.target.classList.contains("ref-link")){St(y);break}y.target.classList.contains("header-ref")&&Ct(y),p.playing||wT(y,$,N);break}}function zE(y){return Object.keys(C.find(I=>I.bookCode===y).versesByChapters).length}const WE=["seltext","r","s","mt","imt2","ip","is","io","io2"];function LE(y){return y.classList.contains("seltxt")&&y.id!=""?!0:WE.some(W=>y.classList.contains(W))}function GE(){for(var y=document.getElementsByTagName("div"),W=0;W<y.length;W++)LE(y[W])&&y[W].addEventListener("click",Z0,!1)}let Vt=document.createElement("div");r!=null&&r.root&&console.log("START: %o",Vt);let Y0=!0;const Q0={},HE=async(y,W,I,Q,re,Ae,ge,je,ou,Yu,Rr,_a,X0)=>{if(!qe)return;await sC(qe,y,fetch);const yn=new $T.SofriaRenderFromProskomma({proskomma:qe,actions:{startDocument:[{description:"Set up; Book heading",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.document&&console.log("Start Document: %o, %o",Ce,Ce.document.metadata.document),Fu("startDocument",v),Vt.replaceChildren(),v.root=Vt,v.footnoteIndex=0,v.footnoteIdIndex=0,v.introductionIndex=0,v.firstVerse=!0,v.currentVerse="none",v.currentPhraseIndex=0,v.milestoneLink="",v.milestoneText="",v.lastPhrase="a",v.introductionGraft=!1,v.titleGraft=!1,v.paragraphDiv=document.createElement("div"),v.titleBlockDiv=document.createElement("div"),v.titleSpan=null,v.verseDiv=null,v.phraseDiv=null,v.videoDiv=null,v.footnoteDiv=null,v.figureDiv=null,v.subheaders=[],v.textType=[],v.headerDiv=null,v.headerInnerDiv=null,v.audioClips=[],v.usfmWrapperType="",v.showWordsOfJesus=Ae,v.lastPhraseTerminated=!1,v.currentVideoIndex=0,v.chapterNumText="",v.inTable=!1,v.inRow=!1,v.tableElement=null,v.tableRowElement=null,v.tableCellElement=null,v.rowCellNumber=0,v.lemma="",qT($);const De=document.createElement("div");De.setAttribute("data-verse","start"),De.setAttribute("data-phrase","none"),v.root.append(De)}}],endDocument:[{description:"Set up",test:()=>!0,action:({context:Ce,workspace:v,output:De})=>{r!=null&&r.document&&console.log("End Document"),Fu("endDocument",v),GE(),Ie||(ga(ou),Cn(je),An(Yu),UE()&&xE(Rr),Ba()&&RE(_a),Du(v,"-1")),NE(document,v.root,y)}}],startParagraph:[{description:"Start HTML para with appropriate class",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.paragraph&&console.log("Start Paragraph %o %o",Ce.sequences[0].block,Ce.sequences[0].type);const De=Ce.sequences[0].type;if(Fu("startPara",v),he(v.introductionGraft,Ie,v.titleGraft)){var xe=Ce.sequences[0].block.subType.split(":")[1]||Ce.sequences[0].block.subType;switch(De){case"main":{Ie||(v.lastPhraseTerminated=!1,v.currentVerse!="none"&&(v.phraseDiv=k(v),r!=null&&r.paragraph&&console.log("Paragraph Start phrase: %o",v.phraseDiv)),v.paragraphDiv=document.createElement("div"),v.paragraphDiv.classList.add(xe));break}case"introduction":{r!=null&&r.paragraph&&console.log("Introduction start phrase"),v.phraseDiv=k(v,"keep"),v.paragraphDiv=document.createElement("div"),v.paragraphDiv.classList.add(xe);break}case"heading":{v.headerDiv=document.createElement("div");var uu=Ce.sequences[0].block.subType.split(":")[1]||Ce.sequences[0].block.subType;v.headerDiv.classList.add(uu);const pu=uu.replaceAll(/[0-9]/g,"");v.subheaders.push(pu);const Nr=ne(v.subheaders,pu);v.headerInnerDiv=document.createElement("div"),v.headerInnerDiv.id=pu+Nr;break}case"title":{v.titleSpan=document.createElement("span"),v.titleSpan.classList.add(xe);break}}}}}],endParagraph:[{description:"End HTML para",test:()=>!0,action:({context:Ce,workspace:v})=>{const De=Ce.sequences[0].type;if(r!=null&&r.paragraph&&(console.log("End paragraph: Sequence type "+De),console.log("End Paragraph %o %o",Ce.sequences[0].block,Ce.sequences[0].type)),Fu("endPara",v),he(v.introductionGraft,Ie,v.titleGraft)){switch(De){case"main":{r!=null&&r.paragraph&&console.log("End main paragraph"),v.phraseDiv!=null&&v.phraseDiv.innerText!==""&&($e(v),v.phraseDiv=null),ge&&v.verseDiv!==null&&(v.paragraphDiv.appendChild(v.verseDiv.cloneNode(!0)),v.verseDiv=document.createElement("div")),v.paragraphDiv.innerHTML!==""&&v.root.appendChild(v.paragraphDiv),v.videoDiv&&(v.root.appendChild(v.videoDiv),v.videoDiv=null);break}}if(De=="main")r!=null&&r.paragraph&&console.log("End main paragraph"),v.phraseDiv!=null&&v.phraseDiv.innerText!==""&&($e(v),v.phraseDiv=null),ge&&v.verseDiv!==null&&(v.paragraphDiv.appendChild(v.verseDiv.cloneNode(!0)),v.verseDiv=document.createElement("div")),v.paragraphDiv.innerHTML!==""&&v.root.appendChild(v.paragraphDiv),v.videoDiv&&(v.root.appendChild(v.videoDiv),v.videoDiv=null);else if(De=="title"){const uu=document.createElement("div");var xe=Ce.sequences[0].block.subType.split(":")[1]||Ce.sequences[0].block.subType;uu.classList.add(xe),uu.appendChild(v.titleSpan),v.titleBlockDiv.appendChild(uu),v.titleSpan=null}else De=="heading"?(v.headerDiv.appendChild(v.headerInnerDiv),v.root.appendChild(v.headerDiv),v.headerInnerDiv=null,v.headerDiv=null):De=="introduction"&&(v.phraseDiv!=null&&v.phraseDiv.innerText!==""&&($e(v),v.phraseDiv=null),v.root.appendChild(v.paragraphDiv))}}}],startVerses:[{description:"Start Verses",test:()=>!0,action:({context:Ce,workspace:v})=>{const De=Ce.sequences[0].element;r!=null&&r.verses&&console.log("Start Verses %o %o",De.atts.number,De),Fu("startVerses",v),v.textType.push("verses"),Ie||(v.lastPhraseTerminated=!1,v.currentVerse=De.atts.number,r!=null&&r.verses&&console.log("verses %o start phrase",De.atts.number),v.phraseDiv=k(v,"reset"),ge&&(v.verseDiv=document.createElement("div"),v.verseDiv.classList.add("verse-block")),r!=null&&r.verses&&console.log("IN: %o",v.phraseDiv))}}],endVerses:[{description:"End Verses",test:()=>!0,action:({context:Ce,workspace:v})=>{const De=Ce.sequences[0].element;r!=null&&r.verses&&console.log("End Verses %o %o",De.atts.number,De),Fu("endVerses",v),v.textType.pop(),Ie||(v.phraseDiv!=null&&v.phraseDiv.innerText!==""&&$e(v),ge&&(v.paragraphDiv.appendChild(v.verseDiv.cloneNode(!0)),v.verseDiv=null),v.phraseDiv=null,sP(v),oP(v),Du(v,De.atts.number),v.currentVerse="none")}}],startChapter:[{description:"Start Chapter",test:()=>!0,action:({context:Ce,workspace:v})=>{if(r!=null&&r.chapter){const De=Ce.sequences[0].element;console.log("Start Chapter %o %o",De.atts.number,De)}Fu("startChapter",v)}}],endChapter:[{description:"End Chapter",test:()=>!0,action:({context:Ce,workspace:v})=>{if(r!=null&&r.chapter){const De=Ce.sequences[0].element;console.log("End Chapter %o %o",De.atts.number,De)}Fu("endChapter",v)}}],text:[{description:"Output text",test:()=>!0,action:({context:Ce,workspace:v})=>{if(r!=null&&r.text&&(console.log("Text element: %o %o %o",Ce.sequences[0].element.type,Ce.sequences[0].element.text,Ce.sequences[0].block),console.log("Text Type: %o",b(v))),Fu("text",v),he(v.introductionGraft,Ie,v.titleGraft)){const xe=Ce.sequences[0].element.text;switch(b(v)){case"title":{const uu=document.createTextNode(xe);v.titleSpan.append(uu);break}case"heading":{if(Ce.sequences[0].block.subType.includes("usfm:r")){const pu=Ta(xe,"header-ref");v.headerInnerDiv.innerHTML=pu}else{const pu=document.createTextNode(xe);v.headerInnerDiv.appendChild(pu)}break}case"fig":{if(xe!=="NO_CAPTION"){const uu=um(xe);v.figureDiv.append(uu)}break}case"audioc":case"reflink":case"tellink":case"elink":case"weblink":{v.milestoneText=xe;break}default:{const uu=Ce.sequences[0].block.subType;if(uu.includes("usfm:x"))Fe(v,xe,"xref","usfm:x");else if(uu.includes("usfm:f"))Fe(v,xe,"footnote","usfm:f");else if(uu==="usfm:ip")ue(v,xe);else if(uu==="usfm:tr")V(v,xe);else if(v.usfmWrapperType==="xt"){var De=document.createElement("span");De.classList.add("reflink");const pu=Ta(xe,"header-ref");De.innerHTML=pu,v.phraseDiv===null&&(v.phraseDiv=k(v,"keep")),v.phraseDiv.appendChild(De)}else ue(v,xe);break}}}r!=null&&r.text&&console.log("End text")}}],metaContent:[{description:"Meta Content",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.meta&&console.log("Meta Content %o",Ce.sequences[0].element),Fu("metaContent",v)}}],mark:[{description:"Mark",test:()=>!0,action:({context:Ce,workspace:v})=>{const De=Ce.sequences[0].element;r!=null&&r.mark&&console.log("Mark: SubType %o, Atts: %o",De.subType,De.atts),Fu("mark",v),he(v.introductionGraft,Ie,v.titleGraft)&&(De.subType==="chapter_label"?Kr("show-chapter-numbers",_.collection,_.book)?v.chapterNumText=Jr(l,De.atts.number):v.chapterNumText="":De.subType==="verses_label"&&fu(De,Q,v))}}],startSequence:[{description:"Start Sequence",test:()=>!0,action:({context:Ce,workspace:v})=>{const De=Ce.sequences[0].type;if(r!=null&&r.sequence&&console.log("start sequence %o",De),Fu("startSequence",v),he(v.introductionGraft,Ie,v.titleGraft)){switch(De){case"title":{v.textType.push("title");const xe=document.createElement("div");xe.setAttribute("data-verse","title"),xe.setAttribute("data-phrase","none"),xe.classList.add("scroll-item"),v.titleBlockDiv=xe;break}case"heading":{v.textType.push("heading");break}case"main":{v.textType.push("main");break}case"introduction":{v.textType.push("introduction");break}case"fig":{v.textType.push("fig");break}case"footnote":{v.textType.push("footnote");break}case"xref":{v.textType.push("xref");break}}r!=null&&r.sequence&&console.log("Processed: %o",v.textType)}}}],endSequence:[{description:"End Sequence",test:()=>!0,action:({context:Ce,workspace:v})=>{const De=Ce.sequences[0].type;if(r!=null&&r.sequence&&console.log("End sequence |%o|",De),Fu("endSequence",v),he(v.introductionGraft,Ie,v.titleGraft))switch(De){case"title":{v.textType.pop();const xe=v.titleBlockDiv;xe.innerHTML+='<div class="b"></div><div class="b"></div>',r!=null&&r.sequence&&console.log("TITLE DIV %o",xe),v.root.append(xe);break}case"heading":{v.textType.pop();break}case"main":{v.textType.pop();break}case"introduction":v.textType.pop();break;case"fig":{v.textType.pop();break}case"footnote":{v.textType.pop();break}case"xref":{v.textType.pop();break}}}}],blockGraft:[{description:"Block Graft",test:()=>!0,action:Ce=>{r!=null&&r.blockGraft&&console.log("Block Graft %o",Ce.context.sequences[0].block),Fu("blockGraft",Ce.workspace);const v=Ce.context.sequences[0].block,De={type:v.type,sequence:{}};if(v.subType==="introduction"?(r!=null&&r.blockGraft&&console.log("*** START INTRODUCTION ***"),Ce.workspace.introductionGraft=!0,Ce.workspace.introductionIndex=1):v.subType==="title"&&(Ce.workspace.titleGraft=!0),v.sequence){De.sequence={};const xe=Ce.workspace.currentSequence;Ce.workspace.currentSequence=De.sequence,Ce.context.renderer.renderSequence(Ce),Ce.workspace.currentSequence=xe}v.subType==="introduction"?(r!=null&&r.blockGraft&&console.log("*** END INTRODUCTION"),Ce.workspace.introductionGraft=!1):v.subType==="title"&&(Ce.workspace.titleGraft=!1),r!=null&&r.blockGraft&&console.log("Block Graft End %o %o",De,v)}}],inlineGraft:[{description:"Inline graft",test:()=>!0,action:Ce=>{const v=Ce.context.sequences[0].element,De=Ce.workspace;r!=null&&r.inlineGraft&&console.log("Inline Graft Type: %o, Subtype: %o, id: %o %o",v.type,v.subType,v.sequence.id,Ce.context.sequences[0].element),Fu("inlineGraft",De);let xe=null;const uu={type:v.type,subtype:v.subType,sequence:{}};if(v.subType==="xref"||v.subType==="footnote"){De.textType.push("footnote");const[Nr,Qu]=Ee(De,v);De.footnoteDiv=Qu.cloneNode(!0),De.footnoteSpan=xe=Nr}else v.subType==="note_caller"&&De.textType.push(v.subType);const pu=De.currentSequence;if(De.currentSequence=uu.sequence,Ce.context.renderer.renderSequence(Ce),De.currentSequence=pu,v.subType==="xref"||v.subType==="footnote"){if(xe){const Nr=document.createTextNode("");xe.appendChild(De.footnoteDiv);let Qu;De.textType.includes("heading")?Qu=De.headerInnerDiv:De.textType.includes("title")?Qu=De.titleSpan:Qu=De.phraseDiv,Qu==null||Qu.appendChild(xe),Qu==null||Qu.appendChild(Nr)}De.lastPhraseTerminated&&(De.phraseDiv=k(De),De.lastPhraseTerminated=!1),De.textType.pop()}else v.subType==="note_caller"&&De.textType.pop();r!=null&&r.inlineGraft&&console.log("Inline Graft End")}}],startWrapper:[{description:"Start Wrapper",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.wrapper&&console.log("Start Wrapper %o",Ce.sequences[0].element),Fu("startWrapper",v);let De=Ce.sequences[0].element,xe=De.subType;switch(De.subType.startsWith("usfm:")&&(xe="usfm"),xe){case"verses":break;case"usfm":{let uu=De.subType.split(":")[1];if(r!=null&&r.wrapper&&console.log("start wrapper usfmType: %o ",uu),uu==="fig"){let pu=cP(De);pu&&VE(pu,v)}else{if(v.textType.push("usfm"),uu==="w"){let pu="";$a(De.atts.lemma)&&(pu=De.atts.lemma[0]),v.lemma=pu}v.textType.includes("footnote")||v.lastPhraseTerminated===!0&&(v.phraseDiv=k(v),v.lastPhraseTerminated=!1),v.usfmWrapperType=uu}break}case"cell":{v.textType.push("cell"),v.rowCellNumber++;const uu="tc"+v.rowCellNumber;v.tableCellElement=document.createElement("td"),v.tableCellElement.classList.add(uu);break}}}}],endWrapper:[{description:"End Wrapper",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.wrapper&&console.log("End Wrapper %o",Ce.sequences[0].element),Fu("endWrapper",v);let De=Ce.sequences[0].element,xe=De.subType;switch(De.subType.startsWith("usfm:")&&(xe="usfm"),xe){case"verses":break;case"usfm":{v.textType.pop(),De.subType.split(":")[1]==="fig"&&Ba()&&v.paragraphDiv.appendChild(v.figureDiv),v.usfmWrapperType="";break}case"cell":{v.textType.pop(),v.tableRowElement!=null&&v.tableRowElement.appendChild(v.tableCellElement);break}}}}],startMilestone:[{description:"Start Milestone",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.milestone&&console.log("Start Milestone %o",Ce.sequences[0].element),Fu("startMilestone",v);const De=Ce.sequences[0].element;switch(De.subType){case"usfm:zvideo":{const xe=De.atts.id[0],uu=Se.videos.find(pu=>pu.id===xe);if(uu)v.videoDiv=QF(document,uu,v.currentVideoIndex++);else{const pu=xe.replace(//g,"/");v.videoDiv=HT(document,pu,Se.mainFeatures)}break}case"usfm:zaudioc":{v.textType.push("audioc"),v.milestoneLink=decodeURIComponent(De.atts.link[0]),v.audioClips.push(v.milestoneLink);break}case"usfm:zreflink":{v.textType.push("reflink"),v.milestoneLink=decodeURIComponent(De.atts.link[0]);break}case"usfm:zweblink":{v.textType.push("weblink"),v.milestoneLink=decodeURIComponent(De.atts.link[0]);break}case"usfm:ztellink":{v.textType.push("tellink"),v.milestoneLink=decodeURIComponent(De.atts.link[0]);break}case"usfm:zelink":{v.textType.push("elink"),v.milestoneLink=decodeURIComponent(De.atts.link[0]);break}}}}],endMilestone:[{description:"End Milestone",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.milestone&&console.log("End Milestone %o",Ce.sequences[0].element),Fu("endMilestone",v);const De=Ce.sequences[0].element;ZT(v.textType,v.footnoteDiv,v.phraseDiv??v.paragraphDiv,v.milestoneText,v.milestoneLink,v.audioClips.length,De.subType,Se.audio,Z0),v.milestoneLink="",v.milestoneText=""}}],startRow:[{description:"Start Row",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.row&&console.log("Start Row %o",Ce.sequences[0].element),Fu("startRow",v),v.inTable||(v.tableElement=document.createElement("table"),v.tableElement.setAttribute("cellpadding","5"),v.inTable=!0),v.inRow=!0,v.tableRowElement=document.createElement("tr")}}],endRow:[{description:"End Row",test:()=>!0,action:({context:Ce,workspace:v})=>{r!=null&&r.row&&console.log("End Row %o",Ce.sequences[0].element),Fu("endRow",v),v.tableElement.appendChild(v.tableRowElement),v.rowCellNumber=0,v.inRow=!1}}]},debugLevel:0});performance.mark("pk-query-books-start");const gn=qe.gqlQuerySync('{documents { docSetId id bookCode: header(id: "bookCode")} }');performance.mark("pk-query-books-end"),performance.measure("pk-query-books-duration","pk-query-books-start","pk-query-books-end"),r!=null&&r.docResult&&console.log("docsResult %o",gn);const eD={};for(const Ce of gn.data.documents)Ce.docSetId===y&&(eD[Ce.bookCode]=Ce.id);const uD=eD[W];performance.mark("cl-render-start"),zE(i)===0?yn.renderDocument({docId:uD,config:{},output:Q0}):yn.renderDocument({docId:uD,config:{chapters:[I]},output:Q0}),performance.mark("cl-render-end"),performance.measure("cl-render-duration","cl-render-start","cl-render-end"),t(4,Y0=!1),r!=null&&r.root&&console.log("DONE %o",Vt)};function JE(y,W,I){var Ae;let Q=y.split("_")[1];return(Ae=Se.videos)==null?void 0:Ae.filter(ge=>ge.placement&&ge.placement.collection===Q&&(ge.placement.ref.startsWith(W+" "+I+":")||ge.placement.ref.startsWith(W+"."+I+".")))}function KE(y,W,I){var Ae;let Q=y.split("_")[1];return(Ae=Se.illustrations)==null?void 0:Ae.filter(ge=>ge.placement&&ge.placement.collection===Q&&(ge.placement.ref.startsWith(W+" "+I+":")||ge.placement.ref.startsWith(W+"."+I+".")))}function ZE(y){br[y?"unshift":"push"](()=>{Vt=y,t(3,Vt)})}function YE(y){br[y?"unshift":"push"](()=>{Ue=y,t(2,Ue)})}return u.$$set=y=>{"audioPhraseEndChars"in y&&t(8,G=y.audioPhraseEndChars),"bodyFontSize"in y&&t(9,te=y.bodyFontSize),"bodyLineHeight"in y&&t(10,Z=y.bodyLineHeight),"bookmarks"in y&&t(11,ie=y.bookmarks),"notes"in y&&t(12,ve=y.notes),"highlights"in y&&t(13,M=y.highlights),"maxSelections"in y&&t(14,N=y.maxSelections),"redLetters"in y&&t(15,w=y.redLetters),"references"in y&&t(16,_=y.references),"glossary"in y&&t(17,O=y.glossary),"selectedVerses"in y&&L(t(0,$=y.selectedVerses)),"themeColors"in y&&t(18,E=y.themeColors),"verseLayout"in y&&t(19,g=y.verseLayout),"viewShowBibleImages"in y&&t(20,P=y.viewShowBibleImages),"viewShowBibleVideos"in y&&t(21,ee=y.viewShowBibleVideos),"viewShowIllustrations"in y&&t(22,z=y.viewShowIllustrations),"viewShowVerses"in y&&t(23,ae=y.viewShowVerses),"viewShowGlossaryWords"in y&&t(24,oe=y.viewShowGlossaryWords),"font"in y&&t(1,Be=y.font),"proskomma"in y&&t(25,qe=y.proskomma)},u.$$.update=()=>{u.$$.dirty[1]&96&&(r=K["scripture-logs"]?{root:1,docResult:1,document:1,paragraph:1,phrase:1,chapter:1,verses:1,text:1,sequence:1,wrapper:1,milestone:1,blockGraft:1,inlineGraft:1,mark:1,meta:1,row:1,placement:1}:J.scripture),u.$$.dirty[0]&256&&(n=Eu(G)),u.$$.dirty[0]&67108864|u.$$.dirty[1]&12&&(S&&d.planDay?tA(S,d.planDay).then(y=>{t(26,Ke=y),d.planId&&(d.planNextReference===""&&Ke===-1?cu=!0:aC(d.planId).then(W=>{cu=W==="completed"}))}):t(26,Ke=null)),u.$$.dirty[0]&1|u.$$.dirty[1]&16&&kT($),u.$$.dirty[0]&512&&t(7,a=te+"px"),u.$$.dirty[0]&1024&&t(6,o=Z+"%"),u.$$.dirty[0]&65536&&t(30,s=_.chapter),u.$$.dirty[0]&65536&&t(29,i=_.book),u.$$.dirty[0]&65536&&t(28,c=_.docSet),u.$$.dirty[0]&65536&&(D=QC(_)),u.$$.dirty[0]&536936448&&(l=mm(Se,_.collection,i)),u.$$.dirty[0]&524288&&t(27,f=g==="one-per-line"),u.$$.dirty[1]&2&&t(31,C=m.catalog.documents),u.$$.dirty[0]&65536&&t(5,F=Se.bookCollections.find(y=>y.id===_.collection).style.textDirection),u.$$.dirty[0]&65536&&(A=Se.bookCollections.find(y=>y.id===_.collection).features["ref-verse-range-separator"]),u.$$.dirty[0]&2105587712|u.$$.dirty[1]&1&&(()=>{var je;performance.mark("query-start");const y=(je=C.find(ou=>ou.bookCode===i))==null?void 0:je.hasIntroduction;let W=s;y&&W=="i"?(W="1",Ie=!0):Ie=!1;const I=i,Q=W,re=c,Ae=JE(re,I,Q),ge=KE(re,I,Q);HE(re,I,Q,ae,oe,w,f,ie,ve,M,Ae,ge),performance.mark("query-end"),performance.measure("query-duration","query-start","query-end")})()},[$,Be,Ue,Vt,Y0,F,o,a,G,te,Z,ie,ve,M,N,w,_,O,E,g,P,ee,z,ae,oe,qe,Ke,f,c,i,s,C,m,d,S,R,J,K,ZE,YE]}class dP extends Vu{constructor(e){super(),zu(this,e,lP,rP,Uu,{audioPhraseEndChars:8,bodyFontSize:9,bodyLineHeight:10,bookmarks:11,notes:12,highlights:13,maxSelections:14,redLetters:15,references:16,glossary:17,selectedVerses:0,themeColors:18,verseLayout:19,viewShowBibleImages:20,viewShowBibleVideos:21,viewShowIllustrations:22,viewShowVerses:23,viewShowGlossaryWords:24,font:1,proskomma:25},null,[-1,-1,-1,-1])}}function fP(u){let e,t,r,n,a;return{c(){e=new fc(!1),t=Gu(),r=Te(),n=fe("div"),a=new fc(!1),this.h()},l(o){const s=TC("svelte-14hui84",document.head);e=pc(s,!1),t=Gu(),s.forEach(j),r=Pe(o),n=pe(o,"DIV",{style:!0});var i=le(n);a=pc(i,!1),i.forEach(j),this.h()},h(){e.a=t,a.a=null,we(n,"line-height",u[2]),we(n,"font-size",u[3])},m(o,s){e.m(u[0],document.head),X(document.head,t),be(o,r,s),be(o,n,s),a.m(u[1],n)},p(o,[s]){s&1&&e.p(o[0]),s&2&&a.p(o[1]),s&4&&we(n,"line-height",o[2]),s&8&&we(n,"font-size",o[3])},i:iu,o:iu,d(o){o&&(e.d(),j(r),j(n)),j(t)}}}function pP(u,e,t){let r,n,{references:a}=e,{bodyLineHeight:o}=e,{bodyFontSize:s}=e,{fetch:i}=e,c,D;async function l(f,C){var A,m,p;console.log(`loadHtml: ${f}, ${C}`);const F=(A=Se.bookCollections.find(d=>d.id===f))==null?void 0:A.books.find(d=>d.id===C);if(F){const d=await i(`${tt}/collections/${a.collection}/${F.file}`);if(d.ok){const h=await d.text();t(0,c=((m=h.match(/<head[^>]*>([\s\S]*?)<\/head>/i))==null?void 0:m[1])||""),t(1,D=((p=h.match(/<body[^>]*>([\s\S]*?)<\/body>/i))==null?void 0:p[1])||"")}}}return u.$$set=f=>{"references"in f&&t(4,a=f.references),"bodyLineHeight"in f&&t(5,o=f.bodyLineHeight),"bodyFontSize"in f&&t(6,s=f.bodyFontSize),"fetch"in f&&t(7,i=f.fetch)},u.$$.update=()=>{u.$$.dirty&64&&t(3,r=s+"px"),u.$$.dirty&32&&t(2,n=o+"%"),u.$$.dirty&16&&l(a.collection,a.book)},[c,D,n,r,a,o,s,i]}class FP extends Vu{constructor(e){super(),zu(this,e,pP,fP,Uu,{references:4,bodyLineHeight:5,bodyFontSize:6,fetch:7})}}const mP=300,hP=60,G0="none";function EP(u){return Array.isArray(u)?u:[u]}function Lr(u,e,t){return u.addEventListener(e,t),()=>u.removeEventListener(e,t)}function CP(u,e){const t=u.getBoundingClientRect(),r=Math.abs(e[0].clientX-e[1].clientX),n=Math.abs(e[0].clientY-e[1].clientY),a=Math.min(e[0].clientX,e[1].clientX),o=Math.min(e[0].clientY,e[1].clientY),s=a+r/2,i=o+n/2,c=Math.round(s-t.left),D=Math.round(i-t.top);return{x:c,y:D}}function AP(u,e){return e.filter(t=>u.pointerId!==t.pointerId)}function zn(u,e,t,r,n){const a=u.getBoundingClientRect(),o=Math.round(t.clientX-a.left),s=Math.round(t.clientY-a.top);u.dispatchEvent(new CustomEvent(`${e}${n}`,{detail:{event:t,pointersCount:r.length,target:t.target,x:o,y:s}}))}function jE(u,e,t,r,n,a=G0){e.style.touchAction=EP(a).join(" ");let o=[];function s(c){o.push(c),zn(e,u,c,o,"down"),r==null||r(o,c);const D=c.pointerId;function l(p){D===p.pointerId&&(o=AP(p,o),o.length||f(),zn(e,u,p,o,"up"),n==null||n(o,p))}function f(){C(),F(),A(),m()}const C=Lr(e,"pointermove",p=>{o=o.map(d=>p.pointerId===d.pointerId?p:d),zn(e,u,p,o,"move"),t==null||t(o,p)}),F=Lr(e,"lostpointercapture",p=>{l(p)}),A=Lr(e,"pointerup",p=>{l(p)}),m=Lr(e,"pointerleave",p=>{o=[],f(),zn(e,u,p,o,"up"),n==null||n(o,p)})}const i=Lr(e,"pointerdown",s);return{destroy:()=>{i()}}}function tm(u){return Math.hypot(u[0].clientX-u[1].clientX,u[0].clientY-u[1].clientY)}function vP(u,e){const t={touchAction:G0,composed:!1,...e},r="pinch";let n,a=0,o;function s(D,l){D.length===1&&(n=void 0)}function i(D,l){D.length===2&&(a=tm(D),o=CP(u,D))}function c(D,l){if(D.length===2){const f=tm(D);if(n!==void 0&&f!==n){const C=f/a;u.dispatchEvent(new CustomEvent(r,{detail:{scale:C,center:o}}))}n=f}return!1}return t.composed?{onMove:c,onDown:i,onUp:null}:jE(r,u,c,i,s,t.touchAction)}function yP(u,e){const t={timeframe:mP,minSwipeDistance:hP,touchAction:G0,composed:!1,...e},r="swipe";let n,a,o,s;function i(D,l){a=l.clientX,o=l.clientY,n=Date.now(),D.length===1&&(s=l.target)}function c(D,l){if(l.type==="pointerup"&&D.length===0&&Date.now()-n<t.timeframe){const f=l.clientX-a,C=l.clientY-o,F=Math.abs(f),A=Math.abs(C);let m=null;F>=2*A&&F>t.minSwipeDistance?m=f>0?"right":"left":A>=2*F&&A>t.minSwipeDistance&&(m=C>0?"bottom":"top"),m&&u.dispatchEvent(new CustomEvent(r,{detail:{direction:m,target:s}}))}}return t.composed?{onMove:null,onDown:i,onUp:c}:jE(r,u,null,i,c,t.touchAction)}function gP(u){let e,t,r,n,a,o,s,i,c,D=u[9]&&u[0].hasAudio&&u[0].hasAudio.timingFile&&rm(u),l=u[10]&&u[0].hasAudio&&u[0].hasAudio.timingFile&&nm(u),f=u[11]&&BP(u),C=u[13]&&_P(u),F=u[14]&&SP(u),A=u[12]&&$P(u),m=u[7]&&am(u),p=u[6]&&om(u);return{c(){D&&D.c(),e=Te(),l&&l.c(),t=Te(),f&&f.c(),r=Te(),C&&C.c(),n=Te(),F&&F.c(),a=Te(),A&&A.c(),o=Te(),m&&m.c(),s=Te(),p&&p.c(),i=Gu()},l(d){D&&D.l(d),e=Pe(d),l&&l.l(d),t=Pe(d),f&&f.l(d),r=Pe(d),C&&C.l(d),n=Pe(d),F&&F.l(d),a=Pe(d),A&&A.l(d),o=Pe(d),m&&m.l(d),s=Pe(d),p&&p.l(d),i=Gu()},m(d,h){D&&D.m(d,h),be(d,e,h),l&&l.m(d,h),be(d,t,h),f&&f.m(d,h),be(d,r,h),C&&C.m(d,h),be(d,n,h),F&&F.m(d,h),be(d,a,h),A&&A.m(d,h),be(d,o,h),m&&m.m(d,h),be(d,s,h),p&&p.m(d,h),be(d,i,h),c=!0},p(d,h){d[9]&&d[0].hasAudio&&d[0].hasAudio.timingFile?D?(D.p(d,h),h[0]&1&&se(D,1)):(D=rm(d),D.c(),se(D,1),D.m(e.parentNode,e)):D&&(Au(),me(D,1,1,()=>{D=null}),vu()),d[10]&&d[0].hasAudio&&d[0].hasAudio.timingFile?l?(l.p(d,h),h[0]&1&&se(l,1)):(l=nm(d),l.c(),se(l,1),l.m(t.parentNode,t)):l&&(Au(),me(l,1,1,()=>{l=null}),vu()),d[11]&&f.p(d,h),d[13]&&C.p(d,h),d[14]&&F.p(d,h),d[12]&&A.p(d,h),d[7]?m?(m.p(d,h),h[0]&128&&se(m,1)):(m=am(d),m.c(),se(m,1),m.m(s.parentNode,s)):m&&(Au(),me(m,1,1,()=>{m=null}),vu()),d[6]?p?(p.p(d,h),h[0]&64&&se(p,1)):(p=om(d),p.c(),se(p,1),p.m(i.parentNode,i)):p&&(Au(),me(p,1,1,()=>{p=null}),vu())},i(d){c||(se(D),se(l),se(f),se(C),se(F),se(A),se(m),se(p),c=!0)},o(d){me(D),me(l),me(f),me(C),me(F),me(A),me(m),me(p),c=!1},d(d){d&&(j(e),j(t),j(r),j(n),j(a),j(o),j(s),j(i)),D&&D.d(d),l&&l.d(d),f&&f.d(d),C&&C.d(d),F&&F.d(d),A&&A.d(d),m&&m.d(d),p&&p.d(d)}}}function bP(u){let e,t,r,n,a,o,s,i,c,D,l,f,C,F;return{c(){e=fe("div"),t=fe("div"),r=Te(),n=fe("div"),a=Te(),o=fe("div"),s=Te(),i=fe("div"),c=Te(),D=fe("div"),l=Te(),f=fe("div"),this.h()},l(A){e=pe(A,"DIV",{class:!0});var m=le(e);t=pe(m,"DIV",{class:!0,role:!0}),le(t).forEach(j),r=Pe(m),n=pe(m,"DIV",{class:!0,role:!0}),le(n).forEach(j),a=Pe(m),o=pe(m,"DIV",{class:!0,role:!0}),le(o).forEach(j),s=Pe(m),i=pe(m,"DIV",{class:!0,role:!0}),le(i).forEach(j),c=Pe(m),D=pe(m,"DIV",{class:!0,role:!0}),le(D).forEach(j),l=Pe(m),f=pe(m,"DIV",{class:!0,role:!0}),le(f).forEach(j),m.forEach(j),this.h()},h(){q(t,"class","dy-btn-sm"),q(t,"role","button"),we(t,"background-color",u[8].HighlighterPenYellow),we(t,"border",u[5]),q(n,"class","dy-btn-sm"),q(n,"role","button"),we(n,"background-color",u[8].HighlighterPenGreen),we(n,"border",u[5]),q(o,"class","dy-btn-sm"),q(o,"role","button"),we(o,"background-color",u[8].HighlighterPenBlue),we(o,"border",u[5]),q(i,"class","dy-btn-sm"),q(i,"role","button"),we(i,"background-color",u[8].HighlighterPenOrange),we(i,"border",u[5]),q(D,"class","dy-btn-sm"),q(D,"role","button"),we(D,"background-color",u[8].HighlighterPenPink),we(D,"border",u[5]),q(f,"class","dy-btn-sm"),q(f,"role","button"),we(f,"background-color","white"),we(f,"border",u[5]),q(e,"class","pen-grid grid grid-rows-1 gap-2 my-2 svelte-nvcpa")},m(A,m){be(A,e,m),X(e,t),X(e,r),X(e,n),X(e,a),X(e,o),X(e,s),X(e,i),X(e,c),X(e,D),X(e,l),X(e,f),C||(F=[Ge(t,"click",u[23]),Ge(n,"click",u[24]),Ge(o,"click",u[25]),Ge(i,"click",u[26]),Ge(D,"click",u[27]),Ge(f,"click",u[28])],C=!0)},p(A,m){m[0]&256&&we(t,"background-color",A[8].HighlighterPenYellow),m[0]&32&&we(t,"border",A[5]),m[0]&256&&we(n,"background-color",A[8].HighlighterPenGreen),m[0]&32&&we(n,"border",A[5]),m[0]&256&&we(o,"background-color",A[8].HighlighterPenBlue),m[0]&32&&we(o,"border",A[5]),m[0]&256&&we(i,"background-color",A[8].HighlighterPenOrange),m[0]&32&&we(i,"border",A[5]),m[0]&256&&we(D,"background-color",A[8].HighlighterPenPink),m[0]&32&&we(D,"border",A[5]),m[0]&32&&we(f,"border",A[5])},i:iu,o:iu,d(A){A&&j(e),C=!1,an(F)}}}function rm(u){let e,t,r,n,a;return t=new Su.Play({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[29]),n=!0)},p(o,s){const i={};s[0]&8&&(i.color=o[3]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function nm(u){let e,t,r;return t=new Su.PlayRepeat({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(n){e=pe(n,"BUTTON",{class:!0});var a=le(e);We(t.$$.fragment,a),a.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(n,a){be(n,e,a),Ne(t,e,null),r=!0},p(n,a){const o={};a[0]&8&&(o.color=n[3]),t.$set(o)},i(n){r||(se(t.$$.fragment,n),r=!0)},o(n){me(t.$$.fragment,n),r=!1},d(n){n&&j(e),Me(t)}}}function BP(u){let e,t,r;return t=new jC.Image({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(n){e=pe(n,"BUTTON",{class:!0});var a=le(e);We(t.$$.fragment,a),a.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(n,a){be(n,e,a),Ne(t,e,null),r=!0},p(n,a){const o={};a[0]&8&&(o.color=n[3]),t.$set(o)},i(n){r||(se(t.$$.fragment,n),r=!0)},o(n){me(t.$$.fragment,n),r=!1},d(n){n&&j(e),Me(t)}}}function _P(u){let e,t,r,n,a;return t=new xC({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[30]),n=!0)},p(o,s){const i={};s[0]&8&&(i.color=o[3]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function SP(u){let e,t,r,n,a;return t=new sA({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[31]),n=!0)},p(o,s){const i={};s[0]&8&&(i.color=o[3]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function $P(u){let e,t,r,n,a,o;const s=[kP,wP],i=[];function c(D,l){return D[1]>=0?0:1}return t=c(u),r=i[t]=s[t](u),{c(){e=fe("button"),r.c(),this.h()},l(D){e=pe(D,"BUTTON",{class:!0});var l=le(e);r.l(l),l.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(D,l){be(D,e,l),i[t].m(e,null),n=!0,a||(o=Ge(e,"click",u[32]),a=!0)},p(D,l){let f=t;t=c(D),t===f?i[t].p(D,l):(Au(),me(i[f],1,1,()=>{i[f]=null}),vu(),r=i[t],r?r.p(D,l):(r=i[t]=s[t](D),r.c()),se(r,1),r.m(e,null))},i(D){n||(se(r),n=!0)},o(D){me(r),n=!1},d(D){D&&j(e),i[t].d(),a=!1,o()}}}function wP(u){let e,t;return e=new mA({props:{color:u[3]}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},p(r,n){const a={};n[0]&8&&(a.color=r[3]),e.$set(a)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function kP(u){let e,t;return e=new oA({props:{color:"#b10000"}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},p:iu,i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function am(u){let e,t,r,n,a;return t=new vA({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[18]),n=!0)},p(o,s){const i={};s[0]&8&&(i.color=o[3]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function om(u){let e,t,r,n,a;return t=new iA({props:{color:u[3]}}),{c(){e=fe("button"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"BUTTON",{class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"class","dy-btn-sm dy-btn-ghost")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[19]),n=!0)},p(o,s){const i={};s[0]&8&&(i.color=o[3]),t.$set(i)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function qP(u){let e,t,r,n,a,o;const s=[bP,gP],i=[];function c(D,l){return D[2]?0:1}return n=c(u),a=i[n]=s[n](u),{c(){e=fe("div"),t=fe("div"),r=fe("div"),a.c(),this.h()},l(D){e=pe(D,"DIV",{class:!0});var l=le(e);t=pe(l,"DIV",{class:!0});var f=le(t);r=pe(f,"DIV",{class:!0});var C=le(r);a.l(C),C.forEach(j),f.forEach(j),l.forEach(j),this.h()},h(){q(r,"class","dy-btn-group place-self-center"),q(t,"class","flex flex-col justify-center w-11/12 flex-grow"),q(e,"class","h-12 bg-base-100 mx-auto flex items-center flex-col"),we(e,"background-color",u[4])},m(D,l){be(D,e,l),X(e,t),X(t,r),i[n].m(r,null),o=!0},p(D,l){let f=n;n=c(D),n===f?i[n].p(D,l):(Au(),me(i[f],1,1,()=>{i[f]=null}),vu(),a=i[n],a?a.p(D,l):(a=i[n]=s[n](D),a.c()),se(a,1),a.m(r,null)),l[0]&16&&we(e,"background-color",D[4])},i(D){o||(se(a),o=!0)},o(D){me(a),o=!1},d(D){D&&j(e),i[n].d()}}}function TP(u,e,t){var E,g,P,ee,z,ae;let r,n,a,o,s,i,c,D,l,f,C;ke(u,rn,oe=>t(20,i=oe)),ke(u,Mu,oe=>t(21,c=oe)),ke(u,Zn,oe=>t(33,D=oe)),ke(u,DC,oe=>t(22,l=oe)),ke(u,Lu,oe=>t(0,f=oe)),ke(u,Kn,oe=>t(8,C=oe));const F=(E=Se)==null?void 0:E.mainFeatures["text-select-play-audio"],A=(g=Se)==null?void 0:g.mainFeatures["audio-repeat-selection-button"],m=(P=Se)==null?void 0:P.mainFeatures["text-on-image"],p=(ee=Se)==null?void 0:ee.mainFeatures["annotation-bookmarks"],d=(z=Se)==null?void 0:z.mainFeatures["annotation-highlights"],h=(ae=Se)==null?void 0:ae.mainFeatures["annotation-notes"];let S=-1,B=!1;async function x(oe){t(1,S=await lC({collection:oe[0].collection,book:oe[0].book,chapter:oe[0].chapter,verse:oe[0].verse}))}async function U(){if(S===-1){const oe=await Mu.getVerseTextByIndex(0);await dC({docSet:c[0].docSet,collection:c[0].collection,book:c[0].book,chapter:c[0].chapter,verse:c[0].verse,text:oe,reference:c[0].reference})}else await fC(S);Mu.reset()}async function R(oe){oe==6?await pC(c):await FC(oe,c,Mu.getVerseTextByIndex),Mu.reset()}function T(){const Be=c[0].verse+"a";Oc(Be),WC(),pt(Zn,D=!0,D),Mu.reset()}async function L(){var oe=await Mu.getCompositeText()+`
`+Mu.getCompositeReference();navigator.clipboard.writeText(oe),G(oe),Mu.reset()}async function J(){const oe=c[0].book,Be=Mu.getCompositeReference(),qe=await Mu.getCompositeText(),Ue=c[0].collection,Ie=DA({collection:Ue,book:oe}),He=Ie.abbreviation??Ie.name;cA(Se.name,Se.name+`

`+qe+`
`+Be,oe+".txt"),lA("Text",Ue,He,Be)}const K=PC();function G(oe){K("copied",{text:oe})}const te=()=>R(1),Z=()=>R(2),ie=()=>R(3),ve=()=>R(4),M=()=>R(5),N=()=>R(6),w=()=>T(),_=()=>t(2,B=!0),O=()=>Ar.open(fm),$=async function(){await U()};return u.$$.update=()=>{u.$$.dirty[0]&1&&t(7,r=Se.bookCollections.find(oe=>oe.id===f.collection).features["bc-allow-copy-text"]),u.$$.dirty[0]&1&&t(6,n=Se.bookCollections.find(oe=>oe.id===f.collection).features["bc-allow-share-text"]),u.$$.dirty[0]&2097152&&x(c),u.$$.dirty[0]&4194304&&t(5,a="1px solid "+(l==="Dark"?"#FFFFFF":"#888888")),u.$$.dirty[0]&1048576&&t(4,o=i["ui.bar.text-select"]["background-color"]),u.$$.dirty[0]&1048576&&t(3,s=i["ui.bar.text-select.icon"].color)},[f,S,B,s,o,a,n,r,C,F,A,m,p,d,h,U,R,T,L,J,i,c,l,te,Z,ie,ve,M,N,w,_,O,$]}class PP extends Vu{constructor(e){super(),zu(this,e,TP,qP,Uu,{},null,[-1,-1])}}function OP(u){let e,t,r,n,a,o;return t=new GC({}),n=new ZA({}),{c(){e=fe("div"),Re(t.$$.fragment),r=Te(),Re(n.$$.fragment),this.h()},l(s){e=pe(s,"DIV",{slot:!0,class:!0});var i=le(e);We(t.$$.fragment,i),r=Pe(i),We(n.$$.fragment,i),i.forEach(j),this.h()},h(){q(e,"slot","left-buttons"),q(e,"class",a=u[4]?"hidden md:flex flex-nowrap":"flex flex-nowrap")},m(s,i){be(s,e,i),Ne(t,e,null),X(e,r),Ne(n,e,null),o=!0},p(s,i){(!o||i[0]&16&&a!==(a=s[4]?"hidden md:flex flex-nowrap":"flex flex-nowrap"))&&q(e,"class",a)},i(s){o||(se(t.$$.fragment,s),se(n.$$.fragment,s),o=!0)},o(s){me(t.$$.fragment,s),me(n.$$.fragment,s),o=!1},d(s){s&&j(e),Me(t),Me(n)}}}function sm(u){let e,t,r,n,a,o;const s=[jP,IP],i=[];function c(D,l){return D[15]?0:1}return t=c(u),r=i[t]=s[t](u),{c(){e=fe("button"),r.c(),this.h()},l(D){e=pe(D,"BUTTON",{class:!0});var l=le(e);r.l(l),l.forEach(j),this.h()},h(){q(e,"class","dy-btn dy-btn-ghost dy-btn-circle")},m(D,l){be(D,e,l),i[t].m(e,null),n=!0,a||(o=Ge(e,"click",u[55]),a=!0)},p(D,l){let f=t;t=c(D),t!==f&&(Au(),me(i[f],1,1,()=>{i[f]=null}),vu(),r=i[t],r||(r=i[t]=s[t](D),r.c()),se(r,1),r.m(e,null))},i(D){n||(se(r),n=!0)},o(D){me(r),n=!1},d(D){D&&j(e),i[t].d(),a=!1,o()}}}function IP(u){let e,t;return e=new Su.Mute({props:{color:"white"}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function jP(u){let e,t;return e=new Su.Volume({props:{color:"white"}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function xP(u){let e,t,r,n;return t=new ZC({props:{color:"white"}}),{c(){e=fe("a"),Re(t.$$.fragment),this.h()},l(a){e=pe(a,"A",{href:!0,class:!0});var o=le(e);We(t.$$.fragment,o),o.forEach(j),this.h()},h(){q(e,"href",r=tt+"/search/"+u[1].collection),q(e,"class","dy-btn dy-btn-ghost dy-btn-circle")},m(a,o){be(a,e,o),Ne(t,e,null),n=!0},p(a,o){(!n||o[0]&2&&r!==(r=tt+"/search/"+a[1].collection))&&q(e,"href",r)},i(a){n||(se(t.$$.fragment,a),n=!0)},o(a){me(t.$$.fragment,a),n=!1},d(a){a&&j(e),Me(t)}}}function RP(u){let e,t,r,n,a;return t=new RC({props:{color:"white"}}),{c(){e=fe("label"),Re(t.$$.fragment),this.h()},l(o){e=pe(o,"LABEL",{for:!0,class:!0});var s=le(e);We(t.$$.fragment,s),s.forEach(j),this.h()},h(){q(e,"for","collectionSelector"),q(e,"class","dy-btn dy-btn-ghost p-0.5 dy-no-animation")},m(o,s){be(o,e,s),Ne(t,e,null),r=!0,n||(a=Ge(e,"click",u[57]),n=!0)},i(o){r||(se(t.$$.fragment,o),r=!0)},o(o){me(t.$$.fragment,o),r=!1},d(o){o&&j(e),Me(t),n=!1,a()}}}function im(u){let e,t,r,n,a,o;const s=[MP,NP],i=[];function c(D,l){return D[4]===(D[16]==="ltr")?0:1}return t=c(u),r=i[t]=s[t](u),{c(){e=fe("button"),r.c(),this.h()},l(D){e=pe(D,"BUTTON",{class:!0});var l=le(e);r.l(l),l.forEach(j),this.h()},h(){q(e,"class","md:hidden dy-btn dy-btn-ghost dy-btn-circle")},m(D,l){be(D,e,l),i[t].m(e,null),n=!0,a||(o=Ge(e,"click",u[58]),a=!0)},p(D,l){let f=t;t=c(D),t!==f&&(Au(),me(i[f],1,1,()=>{i[f]=null}),vu(),r=i[t],r||(r=i[t]=s[t](D),r.c()),se(r,1),r.m(e,null))},i(D){n||(se(r),n=!0)},o(D){me(r),n=!1},d(D){D&&j(e),i[t].d(),a=!1,o()}}}function NP(u){let e,t;return e=new bA({props:{color:"white",scale:1.25}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function MP(u){let e,t;return e=new SA({props:{color:"white",scale:1.25}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function UP(u){let e,t,r,n,a,o,s,i,c,D,l,f,C,F=u[1].hasAudio&&u[32]&&sm(u),A=u[28]&&xP(u);s=new YC({props:{color:"white"}});let m=u[30]&&u[29]&&RP(u),p=u[7]&&im(u);return{c(){e=fe("div"),t=fe("div"),F&&F.c(),r=Te(),n=fe("div"),A&&A.c(),a=Te(),o=fe("label"),Re(s.$$.fragment),i=Te(),m&&m.c(),D=Te(),p&&p.c(),this.h()},l(d){e=pe(d,"DIV",{slot:!0,class:!0});var h=le(e);t=pe(h,"DIV",{class:!0});var S=le(t);F&&F.l(S),S.forEach(j),r=Pe(h),n=pe(h,"DIV",{id:!0,class:!0});var B=le(n);A&&A.l(B),a=Pe(B),o=pe(B,"LABEL",{for:!0,class:!0});var x=le(o);We(s.$$.fragment,x),x.forEach(j),i=Pe(B),m&&m.l(B),B.forEach(j),D=Pe(h),p&&p.l(h),h.forEach(j),this.h()},h(){q(t,"class","flex"),q(o,"for","textAppearanceSelector"),q(o,"class","dy-btn dy-btn-ghost p-0.5 dy-no-animation"),q(n,"id","extraButtons"),q(n,"class",c=u[4]?"flex":"hidden md:flex"),q(e,"slot","right-buttons"),q(e,"class","flex flex-nowrap")},m(d,h){be(d,e,h),X(e,t),F&&F.m(t,null),X(e,r),X(e,n),A&&A.m(n,null),X(n,a),X(n,o),Ne(s,o,null),X(n,i),m&&m.m(n,null),X(e,D),p&&p.m(e,null),l=!0,f||(C=[Ge(o,"click",u[56]),Ge(e,"click",function(){OC(u[4]?u[33]:Dm)&&(u[4]?u[33]:Dm).apply(this,arguments)})],f=!0)},p(d,h){u=d,u[1].hasAudio&&u[32]?F?(F.p(u,h),h[0]&2&&se(F,1)):(F=sm(u),F.c(),se(F,1),F.m(t,null)):F&&(Au(),me(F,1,1,()=>{F=null}),vu()),u[28]&&A.p(u,h),(!l||h[0]&16&&c!==(c=u[4]?"flex":"hidden md:flex"))&&q(n,"class",c),u[7]?p?(p.p(u,h),h[0]&128&&se(p,1)):(p=im(u),p.c(),se(p,1),p.m(e,null)):p&&(Au(),me(p,1,1,()=>{p=null}),vu())},i(d){l||(se(F),se(A),se(s.$$.fragment,d),se(m),se(p),l=!0)},o(d){me(F),me(A),me(s.$$.fragment,d),me(m),me(p),l=!1},d(d){d&&j(e),F&&F.d(),A&&A.d(),Me(s),m&&m.d(),p&&p.d(),f=!1,an(C)}}}function VP(u){var s;let e,t=((s=Se.bookCollections.find(u[59]))==null?void 0:s.collectionAbbreviation)+"",r,n,a,o;return{c(){e=fe("div"),r=Tu(t),this.h()},l(i){e=pe(i,"DIV",{class:!0,style:!0});var c=le(e);r=Pu(c,t),c.forEach(j),this.h()},h(){q(e,"class","absolute dy-badge dy-badge-outline dy-badge-md rounded-sm p-1 end-3 m-1 cursor-pointer"),q(e,"style",n=Jt(u[17]["ui.pane1.name"])),we(e,"top",u[34]),we(e,"background-color",Jt(u[17]["ui.pane1"]))},m(i,c){be(i,e,c),X(e,r),a||(o=Ge(e,"click",u[60]),a=!0)},p(i,c){var l;c[0]&2&&t!==(t=((l=Se.bookCollections.find(i[59]))==null?void 0:l.collectionAbbreviation)+"")&&vt(r,t),c[0]&131072&&n!==(n=Jt(i[17]["ui.pane1.name"]))&&q(e,"style",n);const D=c[0]&131072;(c[0]&131072||D)&&we(e,"top",i[34]),(c[0]&131072||D)&&we(e,"background-color",Jt(i[17]["ui.pane1"]))},d(i){i&&j(e),a=!1,o()}}}function zP(u){let e,t;const r=[u[9]];let n={};for(let a=0;a<r.length;a+=1)n=qc(n,r[a]);return e=new dP({props:n}),{c(){Re(e.$$.fragment)},l(a){We(e.$$.fragment,a)},m(a,o){Ne(e,a,o),t=!0},p(a,o){const s=o[0]&512?Tc(r,[Pc(a[9])]):{};e.$set(s)},i(a){t||(se(e.$$.fragment,a),t=!0)},o(a){me(e.$$.fragment,a),t=!1},d(a){Me(e,a)}}}function WP(u){let e,t;const r=[u[9]];let n={};for(let a=0;a<r.length;a+=1)n=qc(n,r[a]);return e=new FP({props:n}),{c(){Re(e.$$.fragment)},l(a){We(e.$$.fragment,a)},m(a,o){Ne(e,a,o),t=!0},p(a,o){const s=o[0]&512?Tc(r,[Pc(a[9])]):{};e.$set(s)},i(a){t||(se(e.$$.fragment,a),t=!0)},o(a){me(e.$$.fragment,a),t=!1},d(a){Me(e,a)}}}function LP(u){let e,t,r,n;return r=new zA({}),{c(){e=fe("div"),t=fe("div"),Re(r.$$.fragment),this.h()},l(a){e=pe(a,"DIV",{class:!0});var o=le(e);t=pe(o,"DIV",{});var s=le(t);We(r.$$.fragment,s),s.forEach(j),o.forEach(j),this.h()},h(){q(e,"class","audio-bar p-0 svelte-1s9r6o0"),Br(e,"audio-bar-desktop",u[21])},m(a,o){be(a,e,o),X(e,t),Ne(r,t,null),n=!0},p(a,o){(!n||o[0]&2097152)&&Br(e,"audio-bar-desktop",a[21])},i(a){n||(se(r.$$.fragment,a),n=!0)},o(a){me(r.$$.fragment,a),n=!1},d(a){a&&j(e),Me(r)}}}function GP(u){let e,t,r;return t=new PP({}),t.$on("copied",u[35]),{c(){e=fe("div"),Re(t.$$.fragment),this.h()},l(n){e=pe(n,"DIV",{class:!0});var a=le(e);We(t.$$.fragment,a),a.forEach(j),this.h()},h(){q(e,"class","text-selection")},m(n,a){be(n,e,a),Ne(t,e,null),r=!0},p:iu,i(n){r||(se(t.$$.fragment,n),r=!0)},o(n){me(t.$$.fragment,n),r=!1},d(n){n&&j(e),Me(t)}}}function HP(u){let e,t=u[18].Text_Copied+"",r;return{c(){e=fe("div"),r=Tu(t),this.h()},l(n){e=pe(n,"DIV",{class:!0});var a=le(e);r=Pu(a,t),a.forEach(j),this.h()},h(){q(e,"class","flex h-12 p-2 bg-black text-white items-center justify-center text-center text-sm")},m(n,a){be(n,e,a),X(e,r)},p(n,a){a[0]&262144&&t!==(t=n[18].Text_Copied+"")&&vt(r,t)},i:iu,o:iu,d(n){n&&j(e)}}}function cm(u){let e,t;return e=new fA({props:{barType:KP}}),{c(){Re(e.$$.fragment)},l(r){We(e.$$.fragment,r)},m(r,n){Ne(e,r,n),t=!0},p:iu,i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){me(e.$$.fragment,r),t=!1},d(r){Me(e,r)}}}function JP(u){let e,t,r,n,a,o,s,i,c,D,l,f,C,F,A,m,p,d,h,S,B,x,U,R,T,L,J,K,G,te,Z,ie,ve;r=new eA({props:{showBackButton:u[6],$$slots:{"right-buttons":[UP],"left-buttons":[OP]},$$scope:{ctx:u}}}),r.$on("backNavigation",u[36]);let M=u[31]&&u[29]&&VP(u);D=new DD({props:{size:36,color:"gray",deg:u[16]==="ltr"?180:0}});const N=[WP,zP],w=[];function _(z,ae){return z[0]==="html"?0:1}p=_(u),d=w[p]=N[p](u),x=new DD({props:{size:36,color:"gray",deg:u[16]==="ltr"?0:180}});const O=[u[8]];let $={};for(let z=0;z<O.length;z+=1)$=qc($,O[z]);L=new XA({props:$});const E=[HP,GP,LP],g=[];function P(z,ae){return z[5]?0:z[19].length>0&&!z[20].playing?1:z[1].hasAudio&&z[15]?2:-1}~(K=P(u))&&(G=g[K]=E[K](u));let ee=u[2]&&u[24]&&!u[19].length>0&&cm();return{c(){e=fe("div"),t=fe("div"),Re(r.$$.fragment),n=Te(),M&&M.c(),a=Te(),o=fe("div"),s=fe("div"),i=fe("div"),c=fe("button"),Re(D.$$.fragment),f=Te(),C=fe("div"),F=fe("div"),A=fe("main"),m=fe("div"),d.c(),h=Te(),S=fe("div"),B=fe("button"),Re(x.$$.fragment),R=Te(),T=fe("div"),Re(L.$$.fragment),J=Te(),G&&G.c(),te=Te(),ee&&ee.c(),this.h()},l(z){e=pe(z,"DIV",{class:!0,style:!0});var ae=le(e);t=pe(ae,"DIV",{class:!0});var oe=le(t);We(r.$$.fragment,oe),oe.forEach(j),n=Pe(ae),M&&M.l(ae),a=Pe(ae),o=pe(ae,"DIV",{class:!0});var Be=le(o);s=pe(Be,"DIV",{class:!0});var qe=le(s);i=pe(qe,"DIV",{class:!0});var Ue=le(i);c=pe(Ue,"BUTTON",{class:!0});var Ie=le(c);We(D.$$.fragment,Ie),Ie.forEach(j),Ue.forEach(j),f=Pe(qe),C=pe(qe,"DIV",{class:!0});var He=le(C);F=pe(He,"DIV",{class:!0});var Xe=le(F);A=pe(Xe,"MAIN",{});var nu=le(A);m=pe(nu,"DIV",{class:!0});var Eu=le(m);d.l(Eu),Eu.forEach(j),nu.forEach(j),Xe.forEach(j),He.forEach(j),h=Pe(qe),S=pe(qe,"DIV",{class:!0});var Je=le(S);B=pe(Je,"BUTTON",{class:!0});var Ke=le(B);We(x.$$.fragment,Ke),Ke.forEach(j),Je.forEach(j),qe.forEach(j),Be.forEach(j),R=Pe(ae),T=pe(ae,"DIV",{class:!0});var cu=le(T);We(L.$$.fragment,cu),cu.forEach(j),J=Pe(ae),G&&G.l(ae),te=Pe(ae),ee&&ee.l(ae),ae.forEach(j),this.h()},h(){q(t,"class","navbar"),q(c,"class",l="fixed top-1/2 dy-btn dy-btn-circle dy-btn-ghost "+(u[12]&&u[14]?"visible":"invisible")),q(i,"class","hidden md:flex basis-1/12 justify-center"),q(m,"class","max-w-screen-md mx-auto"),q(F,"class","p-2 w-full"),q(C,"class","basis-5/6 max-w-screen-md"),q(B,"class",U="fixed mx-auto top-1/2 dy-btn dy-btn-circle dy-btn-ghost "+(u[11]&&u[13]?"visible":"invisible")),q(S,"class","hidden basis-1/12 md:flex justify-center"),q(s,"class","md:flex md:flex-row mx-auto justify-center"),we(s,"direction",u[16]),q(o,"class","overflow-y-auto svelte-1s9r6o0"),Br(o,"borderimg",u[10]),q(T,"class","flex justify-center"),q(e,"class","grid grid-rows-[auto,1fr,auto]"),we(e,"height","100vh"),we(e,"height","100dvh")},m(z,ae){be(z,e,ae),X(e,t),Ne(r,t,null),X(e,n),M&&M.m(e,null),X(e,a),X(e,o),X(o,s),X(s,i),X(i,c),Ne(D,c,null),X(s,f),X(s,C),X(C,F),X(F,A),X(A,m),w[p].m(m,null),X(s,h),X(s,S),X(S,B),Ne(x,B,null),u[61](o),X(e,R),X(e,T),Ne(L,T,null),X(e,J),~K&&g[K].m(e,null),X(e,te),ee&&ee.m(e,null),Z=!0,ie||(ve=[Ge(c,"click",u[25]),nD(vP.call(null,m)),Ge(m,"pinch",u[27]),nD(yP.call(null,m,{timeframe:300,minSwipeDistance:60,touchAction:"pan-y"})),Ge(m,"swipe",u[23]),Ge(B,"click",u[26]),Ge(o,"scroll",u[22])],ie=!0)},p(z,ae){const oe={};ae[0]&64&&(oe.showBackButton=z[6]),ae[0]&98450|ae[2]&262144&&(oe.$$scope={dirty:ae,ctx:z}),r.$set(oe),z[31]&&z[29]&&M.p(z,ae);const Be={};ae[0]&65536&&(Be.deg=z[16]==="ltr"?180:0),D.$set(Be),(!Z||ae[0]&20480&&l!==(l="fixed top-1/2 dy-btn dy-btn-circle dy-btn-ghost "+(z[12]&&z[14]?"visible":"invisible")))&&q(c,"class",l);let qe=p;p=_(z),p===qe?w[p].p(z,ae):(Au(),me(w[qe],1,1,()=>{w[qe]=null}),vu(),d=w[p],d?d.p(z,ae):(d=w[p]=N[p](z),d.c()),se(d,1),d.m(m,null));const Ue={};ae[0]&65536&&(Ue.deg=z[16]==="ltr"?0:180),x.$set(Ue),(!Z||ae[0]&10240&&U!==(U="fixed mx-auto top-1/2 dy-btn dy-btn-circle dy-btn-ghost "+(z[11]&&z[13]?"visible":"invisible")))&&q(B,"class",U),ae[0]&65536&&we(s,"direction",z[16]),(!Z||ae[0]&1024)&&Br(o,"borderimg",z[10]);const Ie=ae[0]&256?Tc(O,[Pc(z[8])]):{};L.$set(Ie);let He=K;K=P(z),K===He?~K&&g[K].p(z,ae):(G&&(Au(),me(g[He],1,1,()=>{g[He]=null}),vu()),~K?(G=g[K],G?G.p(z,ae):(G=g[K]=E[K](z),G.c()),se(G,1),G.m(e,te)):G=null),z[2]&&z[24]&&!z[19].length>0?ee?(ee.p(z,ae),ae[0]&524292&&se(ee,1)):(ee=cm(),ee.c(),se(ee,1),ee.m(e,null)):ee&&(Au(),me(ee,1,1,()=>{ee=null}),vu())},i(z){Z||(se(r.$$.fragment,z),se(D.$$.fragment,z),se(d),se(x.$$.fragment,z),se(L.$$.fragment,z),se(G),se(ee),Z=!0)},o(z){me(r.$$.fragment,z),me(D.$$.fragment,z),me(d),me(x.$$.fragment,z),me(L.$$.fragment,z),me(G),me(ee),Z=!1},d(z){z&&j(e),Me(r),M&&M.d(),Me(D),w[p].d(),Me(x),u[61](null),Me(L),~K&&g[K].d(),ee&&ee.d(),ie=!1,an(ve)}}}const KP="book";let ZP="default";const Dm=()=>({});function YP(u,e,t){var Cn,An;let r,n,a,o,s,i,c,D,l,f,C,F,A,m,p,d,h,S,B,x,U,R,T,L,J,K,G,te,Z,ie,ve,M,N,w,_,O;ke(u,tD,Ee=>t(42,p=Ee)),ke(u,mC,Ee=>t(67,d=Ee)),ke(u,Lu,Ee=>t(1,h=Ee)),ke(u,hC,Ee=>t(43,S=Ee)),ke(u,Kn,Ee=>t(44,B=Ee)),ke(u,EC,Ee=>t(45,x=Ee)),ke(u,CC,Ee=>t(46,U=Ee)),ke(u,rD,Ee=>t(47,R=Ee)),ke(u,dA,Ee=>t(48,T=Ee)),ke(u,lm,Ee=>t(49,L=Ee)),ke(u,AC,Ee=>t(50,J=Ee)),ke(u,vC,Ee=>t(51,K=Ee)),ke(u,yC,Ee=>t(52,G=Ee)),ke(u,gC,Ee=>t(53,te=Ee)),ke(u,un,Ee=>t(54,Z=Ee)),ke(u,Zn,Ee=>t(15,ie=Ee)),ke(u,bC,Ee=>t(16,ve=Ee)),ke(u,rn,Ee=>t(17,M=Ee)),ke(u,nn,Ee=>t(18,N=Ee)),ke(u,Mu,Ee=>t(19,w=Ee)),ke(u,kc,Ee=>t(20,_=Ee)),ke(u,BC,Ee=>t(21,O=Ee));let $=!0,E=0,g=0;function P(){if(tu){const Ee=Date.now(),Le=E;E=tu.scrollTop;const Du=Le-E>0;Du!=$&&Ee-g>500&&(t(2,$=Du),g=Ee)}}Fm(()=>{tu&&t(3,tu.scrollTop=E,tu)}),Lu.subscribe(Ee=>{E=0});const ee=Se.mainFeatures["book-swipe-between-books"];async function z(Ee){const Le=Ee.detail.direction;console.log("SWIPE",Le),(ee||h.prev.book===h.book&&Le==="right"||h.next.book===h.book&&Le==="left")&&await qa(Le==="right"?-1:1)}const ae=((Cn=Se)==null?void 0:Cn.bottomNavBarItems)&&((An=Se)==null?void 0:An.bottomNavBarItems.length)>0;async function oe(){await qa(-1)}async function Be(){await qa(1)}const qe=Se.mainFeatures["text-size-min"],Ue=Se.mainFeatures["text-size-max"];let Ie=1;function He(){const Ee=event.detail.scale;rD.update(Le=>{if(Math.abs(Ee-Ie)>.1){const Du=Ee>Ie?Le+1:Le-1;return Ie=Ee,Math.max(qe,Math.min(Ue,Du))}else return Le})}const Xe=Se.mainFeatures.search,nu=Se.bookCollections.length>1,Eu=Se.mainFeatures["layout-config-change-toolbar-button"],Je=Se.mainFeatures["layout-config-first-launch"],Ke=Se.mainFeatures["layout-config-change-viewer-button"],cu=Se.mainFeatures["audio-allow-turn-on-off"];function ne(Ee,Le){var Du,au;return(au=(Du=Se.bookCollections.find(Bu=>Bu.id===Ee))==null?void 0:Du.books.find(Bu=>Bu.id===Le))==null?void 0:au.format}let tu,b=!1;function k(Ee){t(4,b=!1)}const V={};let Y,Fe;const de=wa.subscribe((Ee,Le)=>{t(37,Y=Ee),Fe=Le},ZP);Fc(de);const ue=Ee=>{if(Fe===V||!Ee)return;let Le=document.querySelector(`div[data-verse="${Ee.split("-")[0]}"][data-phrase="${Ee.split("-")[1]}"]`);he(Le)};function H(Ee){let Le;clearTimeout(Le),Le=setTimeout(()=>{Oc(Ee)},1e3)}const ce=(()=>{let Ee;return()=>{clearTimeout(Ee),Ee=setTimeout(()=>{let Le=h.verse;if(Le===""||Le==="1")wa.set("start-none");else{let Du=Le+"-a",au=Le+"a";wa.set(Du),sD(h),H(au)}},50)}})();function he(Ee){var Le;if(Ee&&Ee.classList.contains("scroll-item")){const Du=Ee.getBoundingClientRect(),au=(Le=document.getElementsByClassName("container")[0])==null?void 0:Le.getBoundingClientRect(),Bu=tu.scrollTop,$t=tu.clientHeight;if(!(Du.top-au.top-30>=Bu&&Du.bottom-au.top+30<=$t+Bu)){let ku=Du.top-au.top-30;tu.scrollTo({top:ku,behavior:"smooth"}),ku>0&&(E=ku)}}}let $e="";const Ve=(Ee,Le)=>{let Du=document.getElementsByClassName("container")[0];const au=Du==null?void 0:Du.getElementsByClassName("highlighting");for(let Bu=0;Bu<(au==null?void 0:au.length);Bu++){const $t=au[Bu],tr=$t.getAttributeNode("style");$t.removeAttributeNode(tr),$t.classList.remove("highlighting")}for(const Bu of Ee){const tr=/[a-z]/.test(Bu)?Bu:Bu+"a",ku=document.getElementById(tr);if(ku===null)break;ku.setAttribute("style","background-color: "+Le+";"),ku.classList.add("highlighting");const vn=`${ku==null?void 0:ku.getAttribute("data-verse")}-${ku==null?void 0:ku.getAttribute("data-phrase")}`;vn!==$e&&($e=vn,he(ku))}},fu=_C;pm(()=>{d&&(SC.log("ab_first_run"),Je&&nu&&Ar.open(ka))});let eu=!1;function Zu(){t(5,eu=!0),setTimeout(()=>{t(5,eu=!1)},3e3)}function St(Ee){if(Ee.preventDefault(),p.length>0){const Le=tD.popItem();mc(`${tt}/contents/${Le}`)}}Fc(()=>{LC()});const Ct=()=>{pt(Zn,ie=!ie,ie)},At=()=>Ar.open($C),er=()=>Ar.open(ka),ur=()=>{t(4,b=!b),event.stopPropagation()},ya=Ee=>Ee.id===h.collection,ga=()=>Ar.open(ka);function ba(Ee){br[Ee?"unshift":"push"](()=>{tu=Ee,t(3,tu)})}return u.$$.update=()=>{var Ee,Le,Du;u.$$.dirty[0]&2&&t(14,r=ee||h.prev.book===h.book),u.$$.dirty[0]&2&&t(13,n=ee||h.next.book===h.book),u.$$.dirty[0]&2&&t(12,a=h.prev.chapter!==null),u.$$.dirty[0]&2&&t(11,o=h.next.chapter!==null),u.$$.dirty[0]&2|u.$$.dirty[1]&8388608&&t(39,s=Z["verse-numbers"]??Kr("show-verse-numbers",h.collection,h.book)),u.$$.dirty[0]&2&&t(40,i=Er("audio-phrase-end-chars",h.collection,h.book)),u.$$.dirty[0]&2&&t(41,c=Kr("show-border",h.collection,h.book)),u.$$.dirty[1]&8389632&&t(10,D=Se.traits["has-borders"]&&(Z["show-border"]??c)),u.$$.dirty[0]&2&&t(0,l=ne(h.collection,h.book)),u.$$.dirty[0]&3|u.$$.dirty[1]&8381184&&t(9,f=l==="html"?{references:h,bodyFontSize:R,bodyLineHeight:U,fetch:T.data.fetch}:{audioPhraseEndChars:i,bodyFontSize:R,bodyLineHeight:U,bookmarks:te,notes:G,highlights:K,maxSelections:Se.mainFeatures["annotation-max-select"],redLetters:L["red-letters"],references:h,glossary:J,selectedVerses:Mu,themeColors:B,verseLayout:L["verse-layout"],viewShowBibleImages:L["display-images-in-bible-text"],viewShowBibleVideos:L["display-videos-in-bible-text"],viewShowIllustrations:Se.mainFeatures["show-illustrations"],viewShowVerses:s,viewShowGlossaryWords:L["glossary-words"],font:x,proskomma:(Ee=T.data)==null?void 0:Ee.proskomma}),u.$$.dirty[1]&114688&&t(8,C={bodyFontSize:R,bodyLineHeight:U,font:x}),u.$$.dirty[1]&64&&ue(Y),u.$$.dirty[1]&8192&&t(38,A=B.TextHighlightColor),u.$$.dirty[1]&4224&&Ve(S,A),u.$$.dirty[0]&2&&sD(h),u.$$.dirty[0]&2&&ce(h),u.$$.dirty[1]&2048&&t(6,m=((Du=(Le=uA)==null?void 0:Le.features)==null?void 0:Du["navigation-type"])==="up"&&p.length>0)},t(7,F=Xe||Eu),[l,h,$,tu,b,eu,m,F,C,f,D,o,a,n,r,ie,ve,M,N,w,_,O,P,z,ae,oe,Be,He,Xe,nu,Eu,Ke,cu,k,fu,Zu,St,Y,A,s,i,c,p,S,B,x,U,R,T,L,J,K,G,te,Z,Ct,At,er,ur,ya,ga,ba]}class qO extends Vu{constructor(e){super(),zu(this,e,YP,JP,Uu,{},null,[-1,-1,-1])}}export{qO as component,gO as universal};
