import{g as se,c as ie}from"../chunks/history.D4VpaZ3J.js";import{h as M,r as le,t as ne,p as ae}from"../chunks/theme.CEnq8wkH.js";import{s as q,A as J,B as K,b as p,f as d,m as _,i as w,h as v,n as N,e as b,a as z,t as H,c as k,g as B,d as $,v as S,o as j,y as te,j as I,k as Q,r as R,q as ce}from"../chunks/scheduler.B2eiZa_g.js";import{S as L,i as Z,c as A,a as F,m as O,b as V,e as re,t as E,d as P,g as oe}from"../chunks/index.BNSRDwh8.js";import{e as W}from"../chunks/each.D6YF6ztN.js";import{a as fe}from"../chunks/dateUtils.Dj5s27ic.js";import{g as X,b as he}from"../chunks/entry.BaUVQd1j.js";import{N as ue}from"../chunks/Navbar.CLDGmXiL.js";function de(l){let t,r;return{c(){t=J("svg"),r=J("path"),this.h()},l(e){t=K(e,"svg",{fill:!0,xmlns:!0,height:!0,viewBox:!0,width:!0});var o=p(t);r=K(o,"path",{d:!0}),p(r).forEach(d),o.forEach(d),this.h()},h(){_(r,"d","M600 816v-80h160v80H600Zm0-320v-80h280v80H600Zm0 160v-80h240v80H600ZM120 416H80v-80h160v-60h160v60h160v80h-40v360q0 33-23.5 56.5T440 856H200q-33 0-56.5-23.5T120 776V416Z"),_(t,"fill",l[0]),_(t,"xmlns","http://www.w3.org/2000/svg"),_(t,"height","24"),_(t,"viewBox","0 96 960 960"),_(t,"width","24")},m(e,o){w(e,t,o),v(t,r)},p(e,[o]){o&1&&_(t,"fill",e[0])},i:N,o:N,d(e){e&&d(t)}}}function _e(l,t,r){let{color:e="black"}=t;return l.$$set=o=>{"color"in o&&r(0,e=o.color)},[e]}class me extends L{constructor(t){super(),Z(this,t,_e,de,q,{color:0})}}async function ve(){return{history:(await se()).filter(r=>M.bookCollections.some(e=>e.id===r.collection))}}const Be=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));function Y(l){let t,r;return{c(){t=b("div"),r=H(l[4]),this.h()},l(e){t=k(e,"DIV",{class:!0});var o=p(t);r=$(o,l[4]),o.forEach(d),this.h()},h(){_(t,"class","history-item-book-collection")},m(e,o){w(e,t,o),v(t,r)},p(e,o){o&16&&I(r,e[4])},d(e){e&&d(t)}}}function ge(l){let t,r,e,o,n,s,i,a,h,y,f,D,u,c=l[4]&&Y(l);return{c(){t=b("div"),r=b("div"),e=b("div"),c&&c.c(),o=z(),n=b("div"),s=H(l[3]),i=z(),a=H(l[2]),h=z(),y=b("div"),f=H(l[1]),this.h()},l(m){t=k(m,"DIV",{class:!0});var g=p(t);r=k(g,"DIV",{style:!0});var U=p(r);e=k(U,"DIV",{class:!0});var C=p(e);c&&c.l(C),o=B(C),n=k(C,"DIV",{class:!0});var T=p(n);s=$(T,l[3]),i=B(T),a=$(T,l[2]),T.forEach(d),h=B(C),y=k(C,"DIV",{class:!0});var G=p(y);f=$(G,l[1]),G.forEach(d),C.forEach(d),U.forEach(d),g.forEach(d),this.h()},h(){_(n,"class","history-item-reference justify-self-start"),S(n,"justify-self-end",l[0].toLowerCase()==="rtl"),_(y,"class","history-item-date justify-self-start"),_(e,"class","history-card grid grid-cols-1"),S(e,"grid-rows-2",!l[4]),S(e,"grid-rows-3",l[4]),j(r,"text-decoration","none"),_(t,"class","history-item-block dy-card w-100 bg-base-100 shadow-lg my-4"),j(t,"direction","ltr")},m(m,g){w(m,t,g),v(t,r),v(r,e),c&&c.m(e,null),v(e,o),v(e,n),v(n,s),v(n,i),v(n,a),v(e,h),v(e,y),v(y,f),D||(u=te(r,"click",l[5]),D=!0)},p(m,[g]){m[4]?c?c.p(m,g):(c=Y(m),c.c(),c.m(e,o)):c&&(c.d(1),c=null),g&8&&I(s,m[3]),g&4&&I(a,m[2]),g&1&&S(n,"justify-self-end",m[0].toLowerCase()==="rtl"),g&2&&I(f,m[1]),g&16&&S(e,"grid-rows-2",!m[4]),g&16&&S(e,"grid-rows-3",m[4])},i:N,o:N,d(m){m&&d(t),c&&c.d(),D=!1,u()}}}function pe(l,t,r){let e,o,n,s,i,a,h,y,{history:f}=t;function D(){f.url?X(f.url):(le.set({docSet:o,book:f.book,chapter:f.chapter,verse:f.verse}),X(`${he}/`))}return l.$$set=u=>{"history"in u&&r(6,f=u.history)},l.$$.update=()=>{var u;l.$$.dirty&64&&r(7,e=M.bookCollections.find(c=>c.id===f.collection)),l.$$.dirty&128&&(o=e.languageCode+"_"+e.id),l.$$.dirty&128&&r(4,n=M.bookCollections.length==1?null:e.collectionName),l.$$.dirty&192&&r(3,s=(u=e.books.find(c=>c.id===f.book))==null?void 0:u.name),l.$$.dirty&128&&r(8,i=e.features["ref-chapter-verse-separator"]),l.$$.dirty&320&&r(2,a=f.verse?f.chapter+i+f.verse:f.chapter),l.$$.dirty&64&&r(1,h=fe(new Date(f.date))),l.$$.dirty&128&&r(0,y=e.style.textDirection)},[y,h,a,s,n,D,f,e,i]}class ye extends L{constructor(t){super(),Z(this,t,pe,ge,q,{history:6})}}function x(l,t,r){const e=l.slice();return e[4]=t[r],e}function be(l){let t,r,e=l[1].Menu_History+"",o;return{c(){t=b("label"),r=b("div"),o=H(e),this.h()},l(n){t=k(n,"LABEL",{for:!0,slot:!0});var s=p(t);r=k(s,"DIV",{class:!0});var i=p(r);o=$(i,e),i.forEach(d),s.forEach(d),this.h()},h(){_(r,"class","btn btn-ghost normal-case text-xl"),_(t,"for","sidebar"),_(t,"slot","center")},m(n,s){w(n,t,s),v(t,r),v(r,o)},p(n,s){s&2&&e!==(e=n[1].Menu_History+"")&&I(o,e)},d(n){n&&d(t)}}}function ke(l){let t,r,e,o,n,s;return e=new me({props:{color:"white"}}),{c(){t=b("div"),r=b("button"),A(e.$$.fragment),this.h()},l(i){t=k(i,"DIV",{slot:!0});var a=p(t);r=k(a,"BUTTON",{class:!0});var h=p(r);F(e.$$.fragment,h),h.forEach(d),a.forEach(d),this.h()},h(){_(r,"class","dy-btn dy-btn-ghost dy-btn-circle"),_(t,"slot","right-buttons")},m(i,a){w(i,t,a),v(t,r),O(e,r,null),o=!0,n||(s=te(r,"click",l[3]),n=!0)},p:N,i(i){o||(E(e.$$.fragment,i),o=!0)},o(i){V(e.$$.fragment,i),o=!1},d(i){i&&d(t),P(e),n=!1,s()}}}function we(l){let t,r,e=W(l[0].history.reverse()),o=[];for(let s=0;s<e.length;s+=1)o[s]=ee(x(l,e,s));const n=s=>V(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=R()},l(s){for(let i=0;i<o.length;i+=1)o[i].l(s);t=R()},m(s,i){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,i);w(s,t,i),r=!0},p(s,i){if(i&1){e=W(s[0].history.reverse());let a;for(a=0;a<e.length;a+=1){const h=x(s,e,a);o[a]?(o[a].p(h,i),E(o[a],1)):(o[a]=ee(h),o[a].c(),E(o[a],1),o[a].m(t.parentNode,t))}for(oe(),a=e.length;a<o.length;a+=1)n(a);re()}},i(s){if(!r){for(let i=0;i<e.length;i+=1)E(o[i]);r=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)V(o[i]);r=!1},d(s){s&&d(t),ce(o,s)}}}function De(l){let t,r=l[1].History_None+"",e,o,n,s=l[1].History_None_Info+"",i;return{c(){t=b("div"),e=H(r),o=z(),n=b("div"),i=H(s),this.h()},l(a){t=k(a,"DIV",{class:!0});var h=p(t);e=$(h,r),h.forEach(d),o=B(a),n=k(a,"DIV",{class:!0});var y=p(n);i=$(y,s),y.forEach(d),this.h()},h(){_(t,"class","history-message-none"),_(n,"class","history-message-none-info")},m(a,h){w(a,t,h),v(t,e),w(a,o,h),w(a,n,h),v(n,i)},p(a,h){h&2&&r!==(r=a[1].History_None+"")&&I(e,r),h&2&&s!==(s=a[1].History_None_Info+"")&&I(i,s)},i:N,o:N,d(a){a&&(d(t),d(o),d(n))}}}function ee(l){let t,r;return t=new ye({props:{history:l[4]}}),{c(){A(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,o){O(t,e,o),r=!0},p(e,o){const n={};o&1&&(n.history=e[4]),t.$set(n)},i(e){r||(E(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function Ee(l){let t,r,e,o,n,s,i,a=`${l[2]}px`,h;e=new ue({props:{$$slots:{"right-buttons":[ke],center:[be]},$$scope:{ctx:l}}});const y=[De,we],f=[];function D(u,c){return u[0].history.length===0?0:1}return s=D(l),i=f[s]=y[s](l),{c(){t=b("div"),r=b("div"),A(e.$$.fragment),o=z(),n=b("div"),i.c(),this.h()},l(u){t=k(u,"DIV",{class:!0,style:!0});var c=p(t);r=k(c,"DIV",{class:!0});var m=p(r);F(e.$$.fragment,m),m.forEach(d),o=B(c),n=k(c,"DIV",{class:!0});var g=p(n);i.l(g),g.forEach(d),c.forEach(d),this.h()},h(){_(r,"class","navbar"),_(n,"class","overflow-y-auto p-2.5 max-w-screen-md mx-auto w-full"),j(n,"font-size",a),_(t,"class","grid grid-rows-[auto,1fr]"),j(t,"height","100vh"),j(t,"height","100dvh")},m(u,c){w(u,t,c),v(t,r),O(e,r,null),v(t,o),v(t,n),f[s].m(n,null),h=!0},p(u,[c]){const m={};c&130&&(m.$$scope={dirty:c,ctx:u}),e.$set(m);let g=s;s=D(u),s===g?f[s].p(u,c):(oe(),V(f[g],1,1,()=>{f[g]=null}),re(),i=f[s],i?i.p(u,c):(i=f[s]=y[s](u),i.c()),E(i,1),i.m(n,null)),c&4&&a!==(a=`${u[2]}px`)&&j(n,"font-size",a)},i(u){h||(E(e.$$.fragment,u),E(i),h=!0)},o(u){V(e.$$.fragment,u),V(i),h=!1},d(u){u&&d(t),P(e),f[s].d()}}}function He(l,t,r){let e,o;Q(l,ne,i=>r(1,e=i)),Q(l,ae,i=>r(2,o=i));let{data:n}=t;async function s(){await ie(),r(0,n.history=[],n)}return l.$$set=i=>{"data"in i&&r(0,n=i.data)},[n,e,o,s]}class Te extends L{constructor(t){super(),Z(this,t,He,Ee,q,{data:0})}}export{Te as component,Be as universal};
