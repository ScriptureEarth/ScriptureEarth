import{a4 as me,h as ge,r as J,t as ve,p as be,a5 as pe}from"../chunks/theme.CEnq8wkH.js";import{s as le,e as p,a as O,t as R,c as k,b as S,f as d,g as M,d as j,m as v,o as N,i as V,h as m,y as U,j as T,I as ke,J as Se,k as G,G as ie,r as te,q as Ae,n as ne}from"../chunks/scheduler.B2eiZa_g.js";import{S as ce,i as fe,c as z,a as B,m as F,t as w,b as I,d as L,e as _e,g as he}from"../chunks/index.BNSRDwh8.js";import{e as oe}from"../chunks/each.D6YF6ztN.js";import{g as ue,a as de}from"../chunks/spread.CgU5AtxT.js";import{b as K,g as Ee}from"../chunks/entry.BaUVQd1j.js";import{C as De,S as ye,s as we,d as Ie,a as ae,b as Ce,c as Ve,t as Q}from"../chunks/annotation-share.CaKzZwZM.js";import{S as Oe}from"../chunks/ShareIcon.7CKEpOwI.js";import{N as Me}from"../chunks/Navbar.CLDGmXiL.js";import{f as He}from"../chunks/dateUtils.Dj5s27ic.js";import{p as Ne}from"../chunks/stores.B9aCZ1Xs.js";async function Re({depends:i}){const o=(await me()).filter(n=>ge.bookCollections.some(a=>a.id===n.collection));return i("highlights"),{highlights:o}}const tt=Object.freeze(Object.defineProperty({__proto__:null,load:Re},Symbol.toStringTag,{value:"Module"}));function je(i){let t,o,n,a,s,e,r,l,_,g,f,b,c,u,h,D,H,q,C,P,W;return f=new De({props:{actions:i[7]}}),f.$on("menuaction",i[10]),{c(){t=p("div"),o=p("div"),n=p("div"),s=O(),e=p("div"),r=p("a"),l=R(i[3]),_=O(),g=p("div"),z(f.$$.fragment),b=O(),c=p("div"),u=p("a"),h=R(i[4]),D=O(),H=p("div"),q=R(i[5]),this.h()},l(A){t=k(A,"DIV",{class:!0});var y=S(t);o=k(y,"DIV",{class:!0});var E=S(o);n=k(E,"DIV",{class:!0}),S(n).forEach(d),s=M(E),e=k(E,"DIV",{class:!0});var X=S(e);r=k(X,"A",{style:!0,href:!0});var Y=S(r);l=j(Y,i[3]),Y.forEach(d),X.forEach(d),_=M(E),g=k(E,"DIV",{class:!0});var Z=S(g);B(f.$$.fragment,Z),Z.forEach(d),b=M(E),c=k(E,"DIV",{class:!0});var x=S(c);u=k(x,"A",{style:!0,href:!0});var $=S(u);h=j($,i[4]),$.forEach(d),x.forEach(d),D=M(E),H=k(E,"DIV",{class:!0});var ee=S(H);q=j(ee,i[5]),ee.forEach(d),E.forEach(d),y.forEach(d),this.h()},h(){v(n,"class",a="annotation-item-color "+("hlp"+i[8].toString())+" self-center svelte-1nhhpt8"),N(r,"text-decoration","none"),v(r,"href",K+"/"),v(e,"class","annotation-item-reference justify-self-start self-center"),v(g,"class","self-center justify-self-end"),N(u,"text-decoration","none"),v(u,"href",K+"/"),v(c,"class","annotation-item-text col-start-2 col-end-3"),v(H,"class","annotation-item-date col-span-3 justify-self-end"),v(o,"class","color-card svelte-1nhhpt8"),v(t,"class","annotation-item-block dy-card")},m(A,y){V(A,t,y),m(t,o),m(o,n),m(o,s),m(o,e),m(e,r),m(r,l),m(o,_),m(o,g),F(f,g,null),m(o,b),m(o,c),m(c,u),m(u,h),m(o,D),m(o,H),m(H,q),C=!0,P||(W=[U(r,"click",i[9]),U(u,"click",i[11])],P=!0)},p(A,[y]){(!C||y&256&&a!==(a="annotation-item-color "+("hlp"+A[8].toString())+" self-center svelte-1nhhpt8"))&&v(n,"class",a),(!C||y&8)&&T(l,A[3]);const E={};y&128&&(E.actions=A[7]),f.$set(E),(!C||y&16)&&T(h,A[4]),(!C||y&32)&&T(q,A[5])},i(A){C||(w(f.$$.fragment,A),C=!0)},o(A){I(f.$$.fragment,A),C=!1},d(A){A&&d(t),L(f),P=!1,ke(W)}}}function Te(i,t,o){let{docSet:n=""}=t,{book:a=""}=t,{chapter:s=""}=t,{reference:e=""}=t,{text:r=""}=t,{date:l=""}=t,{verse:_=""}=t,{actions:g=[""]}=t,{penColor:f=1}=t;const b=()=>J.set({docSet:n,book:a,chapter:s,verse:_});function c(h){Se.call(this,i,h)}const u=()=>J.set({docSet:n,book:a,chapter:s,verse:_});return i.$$set=h=>{"docSet"in h&&o(0,n=h.docSet),"book"in h&&o(1,a=h.book),"chapter"in h&&o(2,s=h.chapter),"reference"in h&&o(3,e=h.reference),"text"in h&&o(4,r=h.text),"date"in h&&o(5,l=h.date),"verse"in h&&o(6,_=h.verse),"actions"in h&&o(7,g=h.actions),"penColor"in h&&o(8,f=h.penColor)},[n,a,s,e,r,l,_,g,f,b,c,u]}class ze extends ce{constructor(t){super(),fe(this,t,Te,je,le,{docSet:0,book:1,chapter:2,reference:3,text:4,date:5,verse:6,actions:7,penColor:8})}}function re(i,t,o){const n=i.slice();n[10]=t[o];const a={docSet:n[10].docSet,book:n[10].book,chapter:n[10].chapter,verse:n[10].verse,reference:n[10].reference,text:n[10].text,date:He(new Date(n[10].date)),actions:[n[1].Annotation_Menu_View,n[1].Annotation_Menu_Share,n[1].Annotation_Menu_Delete],penColor:n[10].penColor};return n[11]=a,n}function Be(i){let t,o,n=i[1].Annotation_Highlights+"",a;return{c(){t=p("label"),o=p("div"),a=R(n),this.h()},l(s){t=k(s,"LABEL",{for:!0,slot:!0});var e=S(t);o=k(e,"DIV",{class:!0});var r=S(o);a=j(r,n),r.forEach(d),e.forEach(d),this.h()},h(){v(o,"class","btn btn-ghost normal-case text-xl"),v(t,"for","sidebar"),v(t,"slot","center")},m(s,e){V(s,t,e),m(t,o),m(o,a)},p(s,e){e&2&&n!==(n=s[1].Annotation_Highlights+"")&&T(a,n)},d(s){s&&d(t)}}}function Fe(i){let t,o,n,a,s,e,r,l;n=new Oe({props:{color:"white"}});const _=[i[6]];let g={};for(let f=0;f<_.length;f+=1)g=ie(g,_[f]);return s=new ye({props:g}),s.$on("menuaction",i[8]),{c(){t=p("div"),o=p("button"),z(n.$$.fragment),a=O(),z(s.$$.fragment),this.h()},l(f){t=k(f,"DIV",{slot:!0});var b=S(t);o=k(b,"BUTTON",{class:!0});var c=S(o);B(n.$$.fragment,c),c.forEach(d),a=M(b),B(s.$$.fragment,b),b.forEach(d),this.h()},h(){v(o,"class","dy-btn dy-btn-ghost dy-btn-circle"),v(t,"slot","right-buttons")},m(f,b){V(f,t,b),m(t,o),F(n,o,null),m(t,a),F(s,t,null),e=!0,r||(l=U(o,"click",i[7]),r=!0)},p(f,b){const c=b&64?ue(_,[de(f[6])]):{};s.$set(c)},i(f){e||(w(n.$$.fragment,f),w(s.$$.fragment,f),e=!0)},o(f){I(n.$$.fragment,f),I(s.$$.fragment,f),e=!1},d(f){f&&d(t),L(n),L(s),r=!1,l()}}}function Le(i){let t,o,n=oe(Q(i[2].data.highlights,i[0])),a=[];for(let e=0;e<n.length;e+=1)a[e]=se(re(i,n,e));const s=e=>I(a[e],1,1,()=>{a[e]=null});return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=te()},l(e){for(let r=0;r<a.length;r+=1)a[r].l(e);t=te()},m(e,r){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(e,r);V(e,t,r),o=!0},p(e,r){if(r&23){n=oe(Q(e[2].data.highlights,e[0]));let l;for(l=0;l<n.length;l+=1){const _=re(e,n,l);a[l]?(a[l].p(_,r),w(a[l],1)):(a[l]=se(_),a[l].c(),w(a[l],1),a[l].m(t.parentNode,t))}for(he(),l=n.length;l<a.length;l+=1)s(l);_e()}},i(e){if(!o){for(let r=0;r<n.length;r+=1)w(a[r]);o=!0}},o(e){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)I(a[r]);o=!1},d(e){e&&d(t),Ae(a,e)}}}function qe(i){let t,o=i[1].Annotation_Highlights_None+"",n,a,s,e=i[1].Annotation_Highlights_None_Info+"",r;return{c(){t=p("div"),n=R(o),a=O(),s=p("div"),r=R(e),this.h()},l(l){t=k(l,"DIV",{class:!0});var _=S(t);n=j(_,o),_.forEach(d),a=M(l),s=k(l,"DIV",{class:!0});var g=S(s);r=j(g,e),g.forEach(d),this.h()},h(){v(t,"class","annotation-message-none"),v(s,"class","annotation-message-none-info")},m(l,_){V(l,t,_),m(t,n),V(l,a,_),V(l,s,_),m(s,r)},p(l,_){_&2&&o!==(o=l[1].Annotation_Highlights_None+"")&&T(n,o),_&2&&e!==(e=l[1].Annotation_Highlights_None_Info+"")&&T(r,e)},i:ne,o:ne,d(l){l&&(d(t),d(a),d(s))}}}function se(i){let t,o;const n=[i[11]];function a(...e){return i[9](i[10],...e)}let s={};for(let e=0;e<n.length;e+=1)s=ie(s,n[e]);return t=new ze({props:s}),t.$on("menuaction",a),{c(){z(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,r){F(t,e,r),o=!0},p(e,r){i=e;const l=r&7?ue(n,[de(i[11])]):{};t.$set(l)},i(e){o||(w(t.$$.fragment,e),o=!0)},o(e){I(t.$$.fragment,e),o=!1},d(e){L(t,e)}}}function Pe(i){let t,o,n,a,s,e,r,l=`${i[3]}px`,_;n=new Me({props:{$$slots:{"right-buttons":[Fe],center:[Be]},$$scope:{ctx:i}}});const g=[qe,Le],f=[];function b(c,u){return c[2].data.highlights.length===0?0:1}return e=b(i),r=f[e]=g[e](i),{c(){t=p("div"),o=p("div"),z(n.$$.fragment),a=O(),s=p("div"),r.c(),this.h()},l(c){t=k(c,"DIV",{class:!0,style:!0});var u=S(t);o=k(u,"DIV",{class:!0});var h=S(o);B(n.$$.fragment,h),h.forEach(d),a=M(u),s=k(u,"DIV",{class:!0});var D=S(s);r.l(D),D.forEach(d),u.forEach(d),this.h()},h(){v(o,"class","navbar"),v(s,"class","overflow-y-auto p-2.5 max-w-screen-md mx-auto w-full"),N(s,"font-size",l),v(t,"class","grid grid-rows-[auto,1fr]"),N(t,"height","100vh"),N(t,"height","100dvh")},m(c,u){V(c,t,u),m(t,o),F(n,o,null),m(t,a),m(t,s),f[e].m(s,null),_=!0},p(c,[u]){const h={};u&16391&&(h.$$scope={dirty:u,ctx:c}),n.$set(h);let D=e;e=b(c),e===D?f[e].p(c,u):(he(),I(f[D],1,1,()=>{f[D]=null}),_e(),r=f[e],r?r.p(c,u):(r=f[e]=g[e](c),r.c()),w(r,1),r.m(s,null)),u&8&&l!==(l=`${c[3]}px`)&&N(s,"font-size",l)},i(c){_||(w(n.$$.fragment,c),w(r),_=!0)},o(c){I(n.$$.fragment,c),I(r),_=!1},d(c){c&&d(t),L(n),f[e].d()}}}function Ge(i,t,o){let n,a,s;G(i,ve,c=>o(1,n=c)),G(i,Ne,c=>o(2,a=c)),G(i,be,c=>o(3,s=c));async function e(c,u){switch(c.detail.text){case n.Annotation_Menu_View:J.set(u),Ee(`${K}/`);break;case n.Annotation_Menu_Share:await we(u);break;case n.Annotation_Menu_Delete:await pe(u.date);break}}function r(c){switch(c.detail.text){case n.Annotation_Sort_Order_Reference:o(0,_=Ce);break;case n.Annotation_Sort_Order_Date:o(0,_=ae);break;case n.Annotation_Sort_Order_Color:o(0,_=Ie);break}}const l={actions:[n.Annotation_Sort_Order_Reference,n.Annotation_Sort_Order_Date,n.Annotation_Sort_Order_Color]};let _=ae;return[_,n,a,s,e,r,l,async()=>await Ve(Q(a.data.highlights,_)),c=>r(c),(c,u)=>e(u,c)]}class nt extends ce{constructor(t){super(),fe(this,t,Ge,Pe,le,{})}}export{nt as component,tt as universal};
